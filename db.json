{"meta":{"version":1,"warehouse":"5.0.1"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-butterfly/source/css/index.styl","path":"css/index.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/css/var.styl","path":"css/var.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/img/404.jpg","path":"img/404.jpg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/img/favicon.png","path":"img/favicon.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":0,"renderable":1}],"Cache":[{"_id":"source/_data/link.yml","hash":"f633f23e8e7537fc396f2cc19fa8286dc6fdb886","modified":1711348338565},{"_id":"source/_posts/hello-world.md","hash":"27f5bbdb030a817dd579a7b6595feb84a4e78a9c","modified":1711986210313},{"_id":"source/Gallery/index.md","hash":"1a28f31200c9d3621c07d5a5aa3a6e74be2c2cf0","modified":1711958010784},{"_id":"source/_posts/MySQLÁöÑÊï∞ÊçÆÁõÆÂΩï.md","hash":"112ba3598b45264eba1c052d862460dae8c155a0","modified":1711986138704},{"_id":"source/_posts/‰∏ÄÊñáÊïô‰ºö‰Ω†Â∑ßÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ.md","hash":"5dbd20e35b2a00718bac5d3ba949b2826d7b94c1","modified":1711986140922},{"_id":"source/_posts/Â≠òÂÇ®ÂºïÊìé.md","hash":"24569a4cfecebd8c734987e61bfecb3d3b35bed4","modified":1711986145477},{"_id":"source/_posts/ÈÄªËæëÊû∂ÊûÑÂàÜÊûê.md","hash":"ea3cb43f4e963b20c5c4bdaa19401f2e4f6dd0c0","modified":1711986142340},{"_id":"source/_posts/ÈòøÈáå‰∫ëÊúçÂä°Âô®Êê≠Âª∫‰∏™‰∫∫ÁΩëÁ´ô.md","hash":"c6ccec4963c48f050a5b0c355a68f8e94b868046","modified":1711986146979},{"_id":"source/categories/index.md","hash":"0f8e1c259dd270af9190e2a7cf4221dcb65c10a6","modified":1711634233393},{"_id":"source/link/index.md","hash":"e13014ac8446a767d3375f47896c811939856744","modified":1711634233393},{"_id":"source/tags/index.md","hash":"4050e0a9e679d649ec2a482f966bd8031e35895a","modified":1711634233393},{"_id":"source/Gallery/Cat/index.md","hash":"ab31bedb9efde4e9c1c4074fe0c3f0fee3144c4b","modified":1711957962616},{"_id":"source/Gallery/Rabbit/index.md","hash":"d806fef07e9d3351bb0eecb0c0d6dccacee44f5e","modified":1711958006070},{"_id":"source/Gallery/Dog/index.md","hash":"fe7d7b0fbc4178d35be70fa6d8f502525d280d4a","modified":1711957958785},{"_id":"node_modules/hexo-theme-butterfly/LICENSE","hash":"1128f8f91104ba9ef98d37eea6523a888dcfa5de","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/README_CN.md","hash":"148da187d16033624ceccce8b8561835296f5a5a","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/README.md","hash":"4e01b47448d9f3a02afc04eef644e2321253f6f4","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/_config.yml","hash":"39fbabbbf1e89dd82a6ea21517c6c24b49e4dd98","modified":1711634233396},{"_id":"node_modules/hexo-theme-butterfly/package.json","hash":"4a847151a75843563a51c62f451be34dbbdd9e4f","modified":1711339625826},{"_id":"node_modules/hexo-theme-butterfly/plugins.yml","hash":"d807fbb62163bb6fc5a83a24ebd69ac14cf45f67","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/.github/FUNDING.yml","hash":"da5e77f5e0cdb7e11b36546fb6796d10e3dfbe5d","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/languages/default.yml","hash":"90a6dc361de67532437d819a55ec64945ca5404b","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/languages/en.yml","hash":"af5603b1a888f167dc80be6d53a19437b5cf6bef","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/languages/zh-CN.yml","hash":"5004faee365139521f161babd66649a8107e4008","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/languages/zh-TW.yml","hash":"03629d1d13a7be09d4933aa5dc0dcbe45e79140c","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/archive.pug","hash":"bb32c9c476372de747dfa563b83f77d7a917a77d","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/category.pug","hash":"710708cfdb436bc875602abf096c919ccdf544db","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/index.pug","hash":"e1c3146834c16e6077406180858add0a8183875a","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/page.pug","hash":"baf469784aef227e4cc840550888554588e87a13","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/post.pug","hash":"fc9f45252d78fcd15e4a82bfd144401cba5b169a","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/tag.pug","hash":"0440f42569df2676273c026a92384fa7729bc4e9","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/.github/ISSUE_TEMPLATE/bug_report.yml","hash":"6e34b565ea013812d5e363b6de5fa1f9078d4e12","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/.github/ISSUE_TEMPLATE/config.yml","hash":"7b4831ae8f8f8c55dd1b856781210c517c63e6dd","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/.github/ISSUE_TEMPLATE/feature_request.yml","hash":"996640605ed1e8e35182f0fd9a60a88783b24b03","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/.github/workflows/publish.yml","hash":"05857c2f265246d8de00e31037f2720709540c09","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/.github/workflows/stale.yml","hash":"ac62b989b5550c756e1986fcc68f243170705383","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/404.pug","hash":"cb49f737aca272ccfeb62880bd651eccee72a129","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/additional-js.pug","hash":"aca0ec7ef69b21d1f242c62fed389468a0f0e1a2","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/footer.pug","hash":"02390a5b6ae1f57497b22ba2e6be9f13cfb7acac","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/layout.pug","hash":"7fa9ae4b70b87fc97e992dde5944681f92b59bea","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head.pug","hash":"ecec62305aaa596bb1dfbb46c13d06fb5a9628cf","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/pagination.pug","hash":"4c85de4dea4dca4e5088097a79bd6d7009cbf8ef","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/rightside.pug","hash":"db275f7fbe4438b54cd813b695f4834e10aa234f","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/sidebar.pug","hash":"9f0e9e039f304439007460fa0a7c8ac18e0ffd37","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/404.js","hash":"83cd7f73225ccad123afbd526ce1834eb1eb6a6d","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/cdn.js","hash":"21fb5aabe043486d095c4c8cce361ed85ba88a26","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/comment.js","hash":"5351e0bc09e6b5b3f6d30f333a2520626a28ca3a","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/init.js","hash":"428b94c7b9e83f7ea36227dee66bfe3c23aee4a8","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/merge_config.js","hash":"2ac43fd4103ba3c6897da7c13015cb05f39fd695","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/stylus.js","hash":"e196a99733d7f90899bceed5d12488e8234817d5","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/welcome.js","hash":"8ad9911b755cba13dde2cc055c3f857a6b0dd20e","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/filters/post_lazyload.js","hash":"860f967ecf3c6a6ea785b560a7aae4d0757cd18a","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/filters/random_cover.js","hash":"a8eef3f37428436554f58a2b6bac7c255fbdf38d","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/aside_archives.js","hash":"2ec66513d5322f185d2071acc052978ba9415a8e","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/aside_categories.js","hash":"96f861151e3b889ef0ffe78821d489ad2625ee43","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/findArchiveLength.js","hash":"7caf549810f971c34196fb9deac2d992545bdff9","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/inject_head_js.js","hash":"d5c7e61257b08a9648404f6f48ce4d471cd5fa55","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/page.js","hash":"e2a8a09bfe47da26eab242a36f516e6c452c799a","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/related_post.js","hash":"4677be4175da6800c0b3b8c1614e593f73df8831","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/series.js","hash":"821e973d41f7b3b64cde91e0e836ea49c43e3c06","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/button.js","hash":"93229d44b35b9da92e647b89d6d3087085974a29","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/flink.js","hash":"ab62919fa567b95fbe14889517abda649991b1ee","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/gallery.js","hash":"418684993a3a3a2ac534257a2d9ecbcead6808c1","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/hide.js","hash":"365db87ddfc582bf8c15cb440c48bed95106e4b1","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/inlineImg.js","hash":"512c68a22ae4a58d6a6b24b368a0c00c2ccb4fcb","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/label.js","hash":"19773218877281ccffed921431e87148413a7c20","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/mermaid.js","hash":"5c2a07df5874b5377540884e4da14dd21489378f","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/note.js","hash":"1acefc59ead75ebd8cafee36efc7da4fa426d088","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/score.js","hash":"5cb273e95846874e3a58074074c501df23c5e912","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/series.js","hash":"830b1d592278b9f676df0cf9a91b1eeda2456aec","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/tabs.js","hash":"ffc62222f8d7b4d44c1c0726c8a08824a2201039","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/timeline.js","hash":"4526c75e5bf84609d67e92b6af3524bcb278e852","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/index.styl","hash":"755490867fd8afe47d5cce24faea2ca172b0c4dd","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/var.styl","hash":"152b6bd4b6285165541a71f5a1c913f8ee6a602b","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/js/main.js","hash":"0dac585446445e0c419b86eec5580bc9b0657dc6","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/js/tw_cn.js","hash":"f8d2e3f31468991a7f5171cbfdb157dfb86d3372","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/js/utils.js","hash":"8e6b48d294e7aeaba8ff6348c43b2271cf865547","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/Open_Graph.pug","hash":"8aa8d799aedbfd811195b84a451bc4b6e2647c12","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/analytics.pug","hash":"67e1c3b48e4ca7ee0b2c76d3ca7476b9883cf105","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/config_site.pug","hash":"7df90c8e432e33716517ab918b0a125bc284041b","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/google_adsense.pug","hash":"95a37e92b39c44bcbea4be7e29ddb3921c5b8220","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/config.pug","hash":"63fed4548367a3663cdbaffa1df48167b0a2397b","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/preconnect.pug","hash":"5208fe1e75d97a05fd9bdd6cc53c59d8b741b94b","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/pwa.pug","hash":"3d492cfe645d37c94d30512e0b230b0a09913148","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/site_verification.pug","hash":"e2e8d681f183f00ce5ee239c42d2e36b3744daad","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/index.pug","hash":"944d6e9dd50df3395f3a2c7ad9db667d50dea4ed","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/menu_item.pug","hash":"31346a210f4f9912c5b29f51d8f659913492f388","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/nav.pug","hash":"f61659aa457d1a2d1baa3a13157996cfac4d6609","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/post-info.pug","hash":"f50e6a17073677933c5bc78481bf587a4a9e6da0","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/social.pug","hash":"5de9a82032cdad1db3b868b797460921cd775fc2","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/loading/fullpage-loading.pug","hash":"9e8c5788602b29a527ef35fe8a20076a5fa969bd","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/loading/index.pug","hash":"131f344d68b4c241d6e03849b243ee792fcd3cea","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/loading/pace.pug","hash":"6ab4e301c92586505d6cddce1b3ad23b7c79010d","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/mixins/article-sort.pug","hash":"90554c2ca5ba946f4c02e1bc5fe2859cef1b1594","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/mixins/post-ui.pug","hash":"6f310ca7b392021632b987557607d5b6d18052bb","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/page/default-page.pug","hash":"12c65c174d26a41821df9bad26cdf1087ec5b0ca","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/page/flink.pug","hash":"f9ce83978b217a71a2eb8761dc14b09866faa3f4","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/page/tags.pug","hash":"9621991359e22b14049346f1cf87bdedc94edf5a","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/post/post-copyright.pug","hash":"5574804fdea5edf7fd52aad2caf030614d5e7f2f","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/post/reward.pug","hash":"a096ff8eb6b2a22395be881f827ff2a686ba5596","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/aplayer.pug","hash":"c7cfade2b160380432c47eef4cd62273b6508c58","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/effect.pug","hash":"1d39670ee6225f85f5c53bf5c84f3fd6e19290e8","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/pangu.pug","hash":"0f024e36b8116118233e10118714bde304e01e12","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/pjax.pug","hash":"12e57491e94fa00d953bbda9db0b6d6169e2358c","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/prismjs.pug","hash":"ffb9ea15a2b54423cd4cd441e2d061b8233e9b58","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/subtitle.pug","hash":"8044b9c18b34b019ffe26b7383e7e80356b5e4b5","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_ad.pug","hash":"60dc48a7b5d89c2a49123c3fc5893ab9c57dd225","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug","hash":"ae392459ad401a083ca51ee0b27526b3c1e1faed","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_archives.pug","hash":"86897010fe71503e239887fd8f6a4f5851737be9","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_author.pug","hash":"03c6afabbf1ac729c7fb21c7ec06da0190b0fdc7","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_bottom_self.pug","hash":"13dc8ce922e2e2332fe6ad5856ebb5dbf9ea4444","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_categories.pug","hash":"d1a416d0a8a7916d0b1a41d73adc66f8c811e493","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_newest_comment.pug","hash":"7834bf7c711e739fd33cfcd0b53d151013b3d449","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_post_series.pug","hash":"bd5ad01277f8c6ddf8a3a29af1518e5fe6eed23f","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_post_toc.pug","hash":"a658a274c5f7896ee5122725bee45548693bdd66","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_recent_post.pug","hash":"e5aac7b28ed4123d75797263c64e74ac547945bc","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_top_self.pug","hash":"ae67c6d4130a6c075058a9c1faea1648bcc6f83e","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/index.pug","hash":"66f7a8b0cebc05c575ec3cb70b08d6854029d87a","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_webinfo.pug","hash":"35ce167c5a275211bfc1fa3d49adfde5b404d98f","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_tags.pug","hash":"eceb4420a64c720f0d2741e89d6229bbb3d87353","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_global/function.styl","hash":"f19694a42dbe28eda4b39a1696e8fbcd277bc76c","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_global/index.styl","hash":"c8ff6ddd5bfe1190b7b8056b68ce41114fd79dcb","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/highlight.styl","hash":"4dcd468e4d11a0ac75406162678feffcd89fee00","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/theme.styl","hash":"bcd384c8b2aa0390c9eb69ac1abbfd1240ce1da4","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/chat.styl","hash":"f9a5d3f1fc5ed0ed2ee4c1eaa58ed650d11ddebd","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/comments.styl","hash":"134811b2d696f9ed2c0cd578f3886f1c60770c0a","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/footer.styl","hash":"83a7a70eb0532ea9c4267939fe484af915fca01e","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/head.styl","hash":"18d08be0cd9b1f8c049d4b922e80f8163a55c947","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/loading.styl","hash":"ac2aeee9926f75b2a0098efe1c114126987430f2","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/aside.styl","hash":"fad650f88778b33a6358e38cf50dfafc0974d28f","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/post.styl","hash":"a2eb44fa5eaea1325319a2064439cf36d0f35a2f","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/pagination.styl","hash":"fb9f78bfbb79579f1d752cb73fb6d25c8418e0fd","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/relatedposts.styl","hash":"d53de408cb27a2e704aba7f7402b7caebe0410d8","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/rightside.styl","hash":"f845b9b4efdee750f70c023aab27432611f83059","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/reward.styl","hash":"d6cf26ffb8a0343eda1cde65b6b73b0ddbe8fcfc","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/sidebar.styl","hash":"b7a6a585dbc38d177c9aba75df3a467415d0488a","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/third-party.styl","hash":"5556c9bf4f53a90cb9b4945cd76a8849bd67f3f3","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_mode/readmode.styl","hash":"e549d24ad81a7d93326a509ff8dcfcc58c80729e","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_mode/darkmode.styl","hash":"0db591a1f4ed5adcb8668a549bbee5c9d62682cf","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/archives.styl","hash":"c9e98027f2dd730ce389c2047f62ebb748955fcf","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/404.styl","hash":"50dbb9e6d98c71ffe16741b8c1b0c1b9771efd2b","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/common.styl","hash":"4e320e16d49bc18085045937681f7331a1e243ca","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/flink.styl","hash":"98d755b686ee833e9da10afaa40c4ec2bd66c19a","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/tags.styl","hash":"580feb7e8b0822a1be48ac380f8c5c53b1523321","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/categories.styl","hash":"f01ee74948cedb44e53cd3bb1ef36b7d2778ede7","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/homepage.styl","hash":"d4ebc41b5c855dd75f47de7345d62f85ce7cf073","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_search/index.styl","hash":"20a3134e1302b62bfc881f4ec43f398267111f22","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/button.styl","hash":"45f0c32bdea117540f6b14ebac6450d7142bd710","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_search/algolia.styl","hash":"649a054e73278b6724bd4dd9b94724791ec5c928","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/hexo.styl","hash":"d76c38adf1d9c1279ef4241835667789f5b736e0","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/gallery.styl","hash":"5cddbb5f4eae695a26685e415d821b523e0f17bf","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_search/local-search.styl","hash":"961589da3c0a532c4709a4a4ea96bd579257f766","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/hide.styl","hash":"ce489ca2e249e2a3cf71584e20d84bdb022e3475","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/label.styl","hash":"66c59e193d794cdb02cca7bd1dc4aea5a19d7e84","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/tabs.styl","hash":"2d02e52b360f6e6cae47c293ae57ed78e2554663","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/note.styl","hash":"909bb5079b26b6ee68177919f522566503654058","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/inlineImg.styl","hash":"df9d405c33a9a68946b530410f64096bcb72560c","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/timeline.styl","hash":"f071156d439556e7463ed4bc61ceee87170d5d08","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_third-party/normalize.min.css","hash":"2c18a1c9604af475b4749def8f1959df88d8b276","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/js/search/algolia.js","hash":"108988d046da9a4716148df43b3975217c8ceaae","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/js/search/local-search.js","hash":"e1f60ebac53a3f596fd0a4769b4f9275c48c6542","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/abcjs/abcjs.pug","hash":"f7299f9fef5bf94bb58c8cd3be8ee660ad2f9cd4","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/abcjs/index.pug","hash":"f58f1648d2d71311bafca4833f20b605bb5f18c8","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/disqus.pug","hash":"c5f7081ca29db8cc80f808dfc29e36d5fa22fd7e","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/artalk.pug","hash":"71af0b679e00290b0854384368b3c7e9b3e5f26a","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/fb.pug","hash":"0344477a2cf38698318ead2681c63ac12f01586e","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/index.pug","hash":"b2d274db84ef22fbd6d5ea8f4404821898934209","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/valine.pug","hash":"39427e107230a10790972349c9dd4c4f31d55eb7","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/twikoo.pug","hash":"56c028ba0ea8fac19f0125114d765dfc56ce2b48","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/remark42.pug","hash":"001e8be47854b891efe04013c240c38fed4185eb","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/waline.pug","hash":"3a5ccfc69bd8ccb4b8f3ce3502023f7914f2a022","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/artalk.pug","hash":"f77f0fdeac2bc8a72f71a58f9b75aa39f0a108c8","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/disqusjs.pug","hash":"3bc4c1b91568561f0491bdac65b75aa0bfd01f27","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/facebook_comments.pug","hash":"46aec6466959baec1c3d71a5dbc510fbeb00c91d","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/disqus.pug","hash":"62f16a602e57e5f7f7c5249dd37b42d436dc032a","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/gitalk.pug","hash":"0d378ee8a671982a46213a4bfb223b4f3409aea9","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/index.pug","hash":"a9709905593d960954e2dd572f09f48a6c2b1ef7","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/giscus.pug","hash":"2d7b0b09678adba09481e3152e0b32962677f650","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/js.pug","hash":"00ed91c52939b9675b316137f854d13684c895a6","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/livere.pug","hash":"63cea2b5c8f7b59f5919379d61a2bb2ce8ed7623","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/remark42.pug","hash":"f15699abb8c7a255aabad0222ae53eee387c66a3","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/utterances.pug","hash":"1995a654ba7ad62775a0a6e2922209cd1a85f2e3","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/twikoo.pug","hash":"5c29b5887e2e6cd81e1f13b32da53d9c139b788b","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/waline.pug","hash":"7aa443b4881448979b810864e206e58c9ed787e3","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/valine.pug","hash":"46865e3f52096acb07d0212174b4e8751b123aea","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/chatra.pug","hash":"ddce8352b371a1fb426bdb6c33f587eb37a69647","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/daovoice.pug","hash":"9b57a8e13de8fc51a5f550854e47164fd8ac1be8","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/messenger.pug","hash":"e39a9c37adf4cb15a2ba3b2cc65542ffea88650d","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/index.pug","hash":"618e1b7f9204049b07beb9e1363c844a78a9ace3","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/tidio.pug","hash":"dd61eca6e9a45f63e09bdefba89fe285a81ba096","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/math/index.pug","hash":"b8ae5fd7d74e1edcef21f5004fc96147e064d219","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/crisp.pug","hash":"2fb098a7aa45010a8cd212dc0bd5308c6e7c63e3","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/math/mathjax.pug","hash":"fc072ac839401174b5d3cf9acd3b694246c23a55","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/math/katex.pug","hash":"dfcbd9881be569ea420eff1a6b00e4f4dbe2138e","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/math/mermaid.pug","hash":"6b67982bb7a3713b5bffd6a23ba2810425c504d0","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/search/algolia.pug","hash":"9c3c109a12d2b6916e8b4965cca12f521510ead9","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/search/docsearch.pug","hash":"b928be14d1b47a9fadb1bcc5f5072a7328752d4b","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/search/local-search.pug","hash":"3335024ba91f55ccf3858571b7898f46881c455c","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/search/index.pug","hash":"a99a41334387ee9a46c6f8e8212331a29a10d159","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/artalk.pug","hash":"17080aba1754478197ab089f7948ed900f116d2b","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"2609bc2656aaaa9b59e8d575e711776512a62192","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/github-issues.pug","hash":"0f0b46d637a9a1b6ae35148923abecc80b866276","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/index.pug","hash":"4ec0642f2d5444acfab570a6f8c7868e7ff43fde","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"4104f96faa6040f111ebfb9a90eeb470857c3b86","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/valine.pug","hash":"1f9f51023e9e33081c2add2ca73643c0edc5e9d5","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/remark42.pug","hash":"de2c4d02b520dd49a0a59fc0f33295e5bbb2c624","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/waline.pug","hash":"24804ab6da9727ed793655c1262fa3f1a9746f70","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/share/addtoany.pug","hash":"85c92f8a7e44d7cd1c86f089a05be438535e5362","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/share/index.pug","hash":"3ba49cfe186e9ca05faf9f0d0113611ec47e9b38","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/share/share-js.pug","hash":"c7dd2b2ae9b23aa0a60fffd7df9e9f76ef52033e","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/highlight/diff.styl","hash":"cf1fae641c927621a4df1be5ca4a853b9b526e23","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/highlight/index.styl","hash":"18804c58239d95798fa86d0597f32d7f7dd30051","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/prismjs/index.styl","hash":"5dc2e0bcae9a54bfb9bdcc82d02ae5a3cf1ca97d","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/prismjs/diff.styl","hash":"5972c61f5125068cbe0af279a0c93a54847fdc3b","modified":499162500000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/prismjs/line-number.styl","hash":"25914321762e30aacc610bc4dfb9de3e1cb556a3","modified":499162500000},{"_id":"public/search.xml","hash":"23210590a975921210d49be7090426c864d2e7df","modified":1711988429648},{"_id":"public/404.html","hash":"b555899abf41a487e621112aa26696cb4bc8c6c5","modified":1712218002198},{"_id":"public/categories/index.html","hash":"1521481b8f8f3b2d1d2d35f0fe4ce586d1d57116","modified":1712218002198},{"_id":"public/Gallery/index.html","hash":"c2f9cdcf4eb2f46e262b324e0e01206be7f3855d","modified":1712218002198},{"_id":"public/tags/index.html","hash":"e4d072456c5b879cb7f5630f634af536a7179d80","modified":1712218002198},{"_id":"public/Gallery/Cat/index.html","hash":"7b76f8b4f197959d1b906648b6433dae2e899dd4","modified":1712218002198},{"_id":"public/Gallery/Dog/index.html","hash":"fea9ceec6f284c47d8a7e7bf086f0a95a6550f2b","modified":1712218002198},{"_id":"public/link/index.html","hash":"478f5e1a41931fd05e92fbb0d6f7f6cff59c604e","modified":1712218002198},{"_id":"public/Gallery/Rabbit/index.html","hash":"6d96f0bd075902752f1dda09fa73cdc4202d3d13","modified":1712218002198},{"_id":"public/2024/04/01/ÈòøÈáå‰∫ëÊúçÂä°Âô®Êê≠Âª∫‰∏™‰∫∫ÁΩëÁ´ô/index.html","hash":"fe6d3529198d7dd6b2f6b357e98f929496f6572e","modified":1711988429648},{"_id":"public/2024/04/01/‰∏ÄÊñáÊïô‰ºö‰Ω†Â∑ßÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ/index.html","hash":"14e8b8d0a76bae2351b2247f5b09891c9f204b13","modified":1711988429648},{"_id":"public/2024/04/01/Â≠òÂÇ®ÂºïÊìé/index.html","hash":"6c5caa7b1b4b72acb724fe48f9652121b06c4fae","modified":1711988429648},{"_id":"public/2024/04/01/ÈÄªËæëÊû∂ÊûÑÂàÜÊûê/index.html","hash":"2a1fe613fb446ddba2374e3314f976868f2a698d","modified":1711988429648},{"_id":"public/2024/04/01/MySQLÁöÑÊï∞ÊçÆÁõÆÂΩï/index.html","hash":"5947bdc3908ded5f9d6845841e9409ec30bb619c","modified":1711988429648},{"_id":"public/2024/03/31/hello-world/index.html","hash":"98e3e4412e20d7b5714424edd73738b93894cf63","modified":1711988429648},{"_id":"public/archives/index.html","hash":"700b069f01ad328ce2e539e6bc83b7208c3dd50b","modified":1712218002198},{"_id":"public/archives/2024/index.html","hash":"49f02bbfb344f2bfb1f3ab90a42bc10d6cf9c204","modified":1712218002198},{"_id":"public/archives/2024/03/index.html","hash":"f9d3162b5df46db91f21f9c66dcaf0e5b5d5a1f1","modified":1712218002198},{"_id":"public/index.html","hash":"87081541d9ebaddc64d57f6a1b808deb895cc2c1","modified":1712218002198},{"_id":"public/archives/2024/04/index.html","hash":"ae882bbfe520367eb3d211cf73bea33af723cd2e","modified":1712218002198},{"_id":"public/tags/MySQL/index.html","hash":"1bbdb77fc54ad052ed3ad2e6bdaa957c4da4a728","modified":1712218002198},{"_id":"public/tags/Hexo/index.html","hash":"bc4e025058819e7b07f1c47a1d6a0fc6e51e7da7","modified":1712218002198},{"_id":"public/tags/ËÆæËÆ°Ê®°Âºè/index.html","hash":"1625c53b112b545760aed1604969e3d72ec97c11","modified":1712218002198},{"_id":"public/tags/ÈòøÈáå‰∫ë/index.html","hash":"561ca428bb3fa7ad8e534a64331bf5d13c58f132","modified":1712218002198},{"_id":"public/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1711988429648},{"_id":"public/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1711988429648},{"_id":"public/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1711988429648},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1711988429648},{"_id":"public/js/utils.js","hash":"8e6b48d294e7aeaba8ff6348c43b2271cf865547","modified":1711988429648},{"_id":"public/js/search/algolia.js","hash":"108988d046da9a4716148df43b3975217c8ceaae","modified":1711988429648},{"_id":"public/js/search/local-search.js","hash":"e1f60ebac53a3f596fd0a4769b4f9275c48c6542","modified":1711988429648},{"_id":"public/css/index.css","hash":"e15bd33b14b1f3c70f7cc6b239676cbccdb14ffc","modified":1711988429648},{"_id":"public/js/main.js","hash":"0dac585446445e0c419b86eec5580bc9b0657dc6","modified":1711988429648},{"_id":"public/js/tw_cn.js","hash":"f8d2e3f31468991a7f5171cbfdb157dfb86d3372","modified":1711988429648}],"Category":[],"Data":[{"_id":"link","data":[{"class_name":"1.ÊäÄÊúØÊîØÊåÅ","class_desc":"Êú¨ÁΩëÁ´ôÁöÑÊê≠Âª∫Áî±‰ª•‰∏ãÂºÄÊ∫ê‰ΩúËÄÖÊèê‰æõÊäÄÊúØÊîØÊåÅ","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"Âø´ÈÄü„ÄÅÁÆÄÂçï‰∏îÂº∫Â§ßÁöÑÁΩëÂøóÊ°ÜÊû∂","siteshot":"https://source.fomal.cc/siteshot/hexo.io.jpg"}]},{"class_name":"2.ÂèãÊÉÖÈìæÊé•","class_desc":"‰∏Ä‰∫õÂ•ΩÊúãÂèã~~","link_list":[{"name":"Fomalhautü•ù","link":"https://fomal.cc/","avatar":"/assets/head.jpg","descr":"Future is now üç≠üç≠üç≠","siteshot":"https://source.fomal.cc/siteshot/www.fomal.cn.jpg"}]}]}],"Page":[{"title":"ÂàÜÁ±ª","date":"2024-03-25T07:59:06.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: ÂàÜÁ±ª\ndate: 2024-03-25 15:59:06\ntype: categories\n---\n","updated":"2024-03-28T13:57:13.393Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cluh5piv50000gs2vdada0nf0","content":"","cover":"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202403311909053.jpg","cover_type":"img","excerpt":"","more":""},{"title":"Gallery","date":"2024-04-01T07:37:58.000Z","_content":"\n\n<div class=\"gallery-group-main\">\n{% galleryGroup 'Áå´' 'ÂèØÁà±ÁöÑÁå´Áå´' '/Gallery/Cat' https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544239.jpg %}\n{% galleryGroup 'Áãó' 'ÂèØÁà±ÁöÑÁãóÁãó' '/Gallery/Dog' https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545384.jpeg %}\n{% galleryGroup 'ÂÖîÂ≠ê' 'ÂèØÁà±ÁöÑÂÖîÂ≠ê' '/Gallery/Rabbit' https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546167.jpeg %}\n</div>","source":"Gallery/index.md","raw":"---\ntitle: Gallery\ndate: 2024-04-01 15:37:58\n---\n\n\n<div class=\"gallery-group-main\">\n{% galleryGroup 'Áå´' 'ÂèØÁà±ÁöÑÁå´Áå´' '/Gallery/Cat' https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544239.jpg %}\n{% galleryGroup 'Áãó' 'ÂèØÁà±ÁöÑÁãóÁãó' '/Gallery/Dog' https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545384.jpeg %}\n{% galleryGroup 'ÂÖîÂ≠ê' 'ÂèØÁà±ÁöÑÂÖîÂ≠ê' '/Gallery/Rabbit' https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546167.jpeg %}\n</div>","updated":"2024-04-01T07:53:30.784Z","path":"Gallery/index.html","comments":1,"layout":"page","_id":"cluh5piva0002gs2v809x6wxm","content":"<div class=\"gallery-group-main\">\n<figure class=\"gallery-group\">\n  <img class=\"gallery-group-img no-lightbox\" src='https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544239.jpg' alt=\"Group Image Gallery\">\n  <figcaption>\n  <div class=\"gallery-group-name\">Áå´</div>\n  <p>ÂèØÁà±ÁöÑÁå´Áå´</p>\n  <a href='/Gallery/Cat'></a>\n  </figcaption>\n  </figure>\n  \n<figure class=\"gallery-group\">\n  <img class=\"gallery-group-img no-lightbox\" src='https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545384.jpeg' alt=\"Group Image Gallery\">\n  <figcaption>\n  <div class=\"gallery-group-name\">Áãó</div>\n  <p>ÂèØÁà±ÁöÑÁãóÁãó</p>\n  <a href='/Gallery/Dog'></a>\n  </figcaption>\n  </figure>\n  \n<figure class=\"gallery-group\">\n  <img class=\"gallery-group-img no-lightbox\" src='https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546167.jpeg' alt=\"Group Image Gallery\">\n  <figcaption>\n  <div class=\"gallery-group-name\">ÂÖîÂ≠ê</div>\n  <p>ÂèØÁà±ÁöÑÂÖîÂ≠ê</p>\n  <a href='/Gallery/Rabbit'></a>\n  </figcaption>\n  </figure>\n  \n</div>","cover":"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202403311909053.jpg","cover_type":"img","excerpt":"","more":"<div class=\"gallery-group-main\">\n<figure class=\"gallery-group\">\n  <img class=\"gallery-group-img no-lightbox\" src='https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544239.jpg' alt=\"Group Image Gallery\">\n  <figcaption>\n  <div class=\"gallery-group-name\">Áå´</div>\n  <p>ÂèØÁà±ÁöÑÁå´Áå´</p>\n  <a href='/Gallery/Cat'></a>\n  </figcaption>\n  </figure>\n  \n<figure class=\"gallery-group\">\n  <img class=\"gallery-group-img no-lightbox\" src='https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545384.jpeg' alt=\"Group Image Gallery\">\n  <figcaption>\n  <div class=\"gallery-group-name\">Áãó</div>\n  <p>ÂèØÁà±ÁöÑÁãóÁãó</p>\n  <a href='/Gallery/Dog'></a>\n  </figcaption>\n  </figure>\n  \n<figure class=\"gallery-group\">\n  <img class=\"gallery-group-img no-lightbox\" src='https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546167.jpeg' alt=\"Group Image Gallery\">\n  <figcaption>\n  <div class=\"gallery-group-name\">ÂÖîÂ≠ê</div>\n  <p>ÂèØÁà±ÁöÑÂÖîÂ≠ê</p>\n  <a href='/Gallery/Rabbit'></a>\n  </figcaption>\n  </figure>\n  \n</div>"},{"title":"Ê†áÁ≠æ","date":"2024-03-25T04:27:58.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: Ê†áÁ≠æ\ndate: 2024-03-25 12:27:58\ntype: \"tags\"\n---\n","updated":"2024-03-28T13:57:13.393Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cluh5pivc0005gs2v7wad8j9r","content":"","cover":"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202403311909521.jpg","cover_type":"img","excerpt":"","more":""},{"title":"Cat","date":"2024-04-01T07:37:58.000Z","_content":"\n{% gallery %}\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544190.jpeg)\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544239.jpg)\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544580.jpeg)\n{% endgallery %}","source":"Gallery/Cat/index.md","raw":"---\ntitle: Cat\ndate: 2024-04-01 15:37:58\n---\n\n{% gallery %}\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544190.jpeg)\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544239.jpg)\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544580.jpeg)\n{% endgallery %}","updated":"2024-04-01T07:52:42.616Z","path":"Gallery/Cat/index.html","comments":1,"layout":"page","_id":"cluh5pivd0007gs2v8l4x06wh","content":"<div class=\"gallery-container\" data-type=\"data\" data-button=\"\">\n      <div class=\"gallery-data\">[{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544190.jpeg\",\"alt\":\"\"},{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544239.jpg\",\"alt\":\"\"},{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544580.jpeg\",\"alt\":\"\"}]</div>\n      <div class=\"gallery-items\">\n      </div>\n    </div>","cover":"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202403311909521.jpg","cover_type":"img","excerpt":"","more":"<div class=\"gallery-container\" data-type=\"data\" data-button=\"\">\n      <div class=\"gallery-data\">[{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544190.jpeg\",\"alt\":\"\"},{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544239.jpg\",\"alt\":\"\"},{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011544580.jpeg\",\"alt\":\"\"}]</div>\n      <div class=\"gallery-items\">\n      </div>\n    </div>"},{"title":"Dog","date":"2024-04-01T07:37:58.000Z","_content":"\n\n\n{% gallery %}\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545384.jpeg)\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545006.jpg)\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545473.jpg)\n{% endgallery %}","source":"Gallery/Dog/index.md","raw":"---\ntitle: Dog\ndate: 2024-04-01 15:37:58\n---\n\n\n\n{% gallery %}\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545384.jpeg)\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545006.jpg)\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545473.jpg)\n{% endgallery %}","updated":"2024-04-01T07:52:38.785Z","path":"Gallery/Dog/index.html","comments":1,"layout":"page","_id":"cluh5pive0009gs2v9hfy6iri","content":"<div class=\"gallery-container\" data-type=\"data\" data-button=\"\">\n      <div class=\"gallery-data\">[{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545384.jpeg\",\"alt\":\"\"},{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545006.jpg\",\"alt\":\"\"},{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545473.jpg\",\"alt\":\"\"}]</div>\n      <div class=\"gallery-items\">\n      </div>\n    </div>","cover":"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202403311910777.jpg","cover_type":"img","excerpt":"","more":"<div class=\"gallery-container\" data-type=\"data\" data-button=\"\">\n      <div class=\"gallery-data\">[{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545384.jpeg\",\"alt\":\"\"},{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545006.jpg\",\"alt\":\"\"},{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011545473.jpg\",\"alt\":\"\"}]</div>\n      <div class=\"gallery-items\">\n      </div>\n    </div>"},{"title":"ÂèãÈìæ","date":"2024-03-25T06:30:06.000Z","type":"link","_content":"","source":"link/index.md","raw":"---\ntitle: ÂèãÈìæ\ndate: 2024-03-25 14:30:06\ntype: \"link\"\n---\n","updated":"2024-03-28T13:57:13.393Z","path":"link/index.html","comments":1,"layout":"page","_id":"cluh5pivf000dgs2v0z9l8hs2","content":"","cover":"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202403311910777.jpg","cover_type":"img","excerpt":"","more":""},{"title":"Rabbit","date":"2024-04-01T07:37:58.000Z","_content":"\n\n\n{% gallery %}\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546838.jpg)\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546167.jpeg)\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546266.jpeg)\n{% endgallery %}","source":"Gallery/Rabbit/index.md","raw":"---\ntitle: Rabbit\ndate: 2024-04-01 15:37:58\n---\n\n\n\n{% gallery %}\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546838.jpg)\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546167.jpeg)\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546266.jpeg)\n{% endgallery %}","updated":"2024-04-01T07:53:26.070Z","path":"Gallery/Rabbit/index.html","comments":1,"layout":"page","_id":"cluh5pivg000ggs2vdheb17mn","content":"<div class=\"gallery-container\" data-type=\"data\" data-button=\"\">\n      <div class=\"gallery-data\">[{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546838.jpg\",\"alt\":\"\"},{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546167.jpeg\",\"alt\":\"\"},{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546266.jpeg\",\"alt\":\"\"}]</div>\n      <div class=\"gallery-items\">\n      </div>\n    </div>","cover":"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202403311909521.jpg","cover_type":"img","excerpt":"","more":"<div class=\"gallery-container\" data-type=\"data\" data-button=\"\">\n      <div class=\"gallery-data\">[{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546838.jpg\",\"alt\":\"\"},{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546167.jpeg\",\"alt\":\"\"},{\"url\":\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/images/2023/7/202404011546266.jpeg\",\"alt\":\"\"}]</div>\n      <div class=\"gallery-items\">\n      </div>\n    </div>"}],"Post":[{"title":"MySQLÁöÑÊï∞ÊçÆÁõÆÂΩï","date":"2024-04-01T08:37:48.000Z","cover":"/img/cover_05.png","top_img":"https://bu.dusays.com/2021/03/06/31162e0f3b406.jpg","_content":"\n\n## 1. MySQL8ÁöÑ‰∏ªË¶ÅÁõÆÂΩïÁªìÊûÑ\n\n‰ª• Linux Á≥ªÁªü‰∏∫‰æãËøõË°åËÆ≤Ëß£Ôºö\n\n```linux\n[root@xue ~]# find / -name mysql\n```\n\nÂÆâË£ÖÂ•ΩMySQL 8‰πãÂêéÔºåÊàë‰ª¨Êü•ÁúãÂ¶Ç‰∏ãÁöÑÁõÆÂΩïÁªìÊûÑ:\n\n### 1.1 Êï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑ\n\n==MySQLÊï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑÔºö==`/var/lib/mysql/`\n\nMySQLÊúçÂä°Âô®Á®ãÂ∫èÂú®ÂêØÂä®Êó∂‰ºöÂà∞Êñá‰ª∂Á≥ªÁªüÁöÑÊüê‰∏™ÁõÆÂΩï‰∏ãÂä†ËΩΩ‰∏Ä‰∫õÊñá‰ª∂Ôºå‰πãÂêéÂú®ËøêË°åËøáÁ®ã‰∏≠‰∫ßÁîüÁöÑÊï∞ÊçÆ‰πüÈÉΩ‰ºöÂ≠òÂÇ®Âà∞Ëøô‰∏™ÁõÆÂΩï‰∏ãÁöÑÊüê‰∫õÊñá‰ª∂‰∏≠ÔºåËøô‰∏™ÁõÆÂΩïÂ∞±Áß∞‰∏∫ `Êï∞ÊçÆÁõÆÂΩï`„ÄÇ\n\nMySQLÊääÊï∞ÊçÆÈÉΩÂ≠òÂà∞Âì™‰∏™Ë∑ØÂæÑ‰∏ãÂë¢ÔºüÂÖ∂ÂÆû `Êï∞ÊçÆÁõÆÂΩï` ÂØπÂ∫îËøô‰∏Ä‰∏™Á≥ªÁªüÂèòÈáè `datadir`ÔºåÊàë‰ª¨Âú®‰ΩøÁî®ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Âô®Âª∫Á´ãËøûÊé•‰πãÂêéÊü•ÁúãËøô‰∏™Á≥ªÁªüÂèòÈáèÁöÑÂÄºÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ\n\n```mysql\nmysql> show variables like 'datadir';\n+---------------+-----------------+\n| Variable_name | Value           |\n+---------------+-----------------+\n| datadir       | /var/lib/mysql/ |\n+---------------+-----------------+\n1 row in set (0.04 sec)\n```\n\n‰ªéÁªìÊûú‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåÂú®ÊàëÁöÑËÆ°ÁÆóÊú∫‰∏äMySQLÁöÑÊï∞ÊçÆÁõÆÂΩïÂ∞±ÊòØ `/var/lib/mysql`/ „ÄÇ\n\n### 1.2 Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩï\n\n==Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩïÔºö/usr/binÔºàmysqladmin„ÄÅmysqlbinlog„ÄÅmysqldumpÁ≠âÂëΩ‰ª§ÔºâÂíå/usr/sbin==„ÄÇ\n\n![image-20220709112725420](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733159.png)\n\n### 1.3 **ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩï**\n\n==ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩïÔºö/usr/share/mysql-8.0ÔºàÂëΩ‰ª§ÂèäÈÖçÁΩÆÊñá‰ª∂ÔºâÔºå/etc/mysqlÔºàÂ¶Ç my.cnfÔºâ==\n\n![image-20220709112825432](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733524.png)\n\n## 2. Êï∞ÊçÆÂ∫ìÂíåÊñá‰ª∂Á≥ªÁªüÁöÑÂÖ≥Á≥ª\n\nÂÉè`InnoDB`„ÄÅ`MyISAM `ËøôÊ†∑ÁöÑÂ≠òÂÇ®ÂºïÊìéÈÉΩÊòØÊääË°®Â≠òÂÇ®Âú®Á£ÅÁõò‰∏äÁöÑÔºåÊìç‰ΩúÁ≥ªÁªüÁî®Êù•ÁÆ°ÁêÜÁ£ÅÁõòÁöÑÁªìÊûÑË¢´Áß∞‰∏∫==Êñá‰ª∂Á≥ªÁªü==ÔºåÊâÄ‰ª•Áî®‰∏ì‰∏ö‰∏ÄÁÇπÁöÑËØùÊù•Ë°®Ëø∞Â∞±ÊòØ:ÂÉè**InnoDB„ÄÅMyISAM** ËøôÊ†∑ÁöÑÂ≠òÂÇ®ÂºïÊìéÈÉΩÊòØÊää==Ë°®Â≠òÂÇ®Âú®Êñá‰ª∂Á≥ªÁªü‰∏ä==ÁöÑ„ÄÇÂΩìÊàë‰ª¨ÊÉ≥ËØªÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåËøô‰∫õÂ≠òÂÇ®ÂºïÊìé‰ºö‰ªéÊñá‰ª∂Á≥ªÁªü‰∏≠ÊääÊï∞ÊçÆËØªÂá∫Êù•ËøîÂõûÁªôÊàë‰ª¨ÔºåÂΩìÊàë‰ª¨ÊÉ≥ÂÜôÂÖ•Êï∞ÊçÆÁöÑÊó∂ÂÄô,Ëøô‰∫õÂ≠òÂÇ®ÂºìÊìé‰ºöÊääËøô‰∫õÊï∞ÊçÆÂèàÂÜôÂõûÊñá‰ª∂Á≥ªÁªü„ÄÇÊú¨Á´†Â≠¶‰π†‰∏Ä‰∏ã`InnoDB`Âíå`MyISAM`Ëøô‰∏§‰∏™Â≠òÂÇ®Âºì|ÊìéÁöÑÊï∞ÊçÆÂ¶Ç‰ΩïÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠Â≠òÂÇ®„ÄÇ\n\n### 2.1 Êü•ÁúãÈªòËÆ§Êï∞ÊçÆÂ∫ì\n\nÊü•Áúã‰∏Ä‰∏ãÂú®ÊàëÁöÑËÆ°ÁÆóÊú∫‰∏äÂΩìÂâçÊúâÂì™‰∫õÊï∞ÊçÆÂ∫ì:\n\n```sql\nmysql> SHOW DATABASES; \n```\n\nÂèØ‰ª•ÁúãÂà∞Êúâ 4 ‰∏™Êï∞ÊçÆÂ∫ìÊòØÂ±û‰∫é MySQL Ëá™Â∏¶ÁöÑÁ≥ªÁªüÊï∞ÊçÆÂ∫ì„ÄÇ\n\n- `mysql`\n\n  MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊ†∏ÂøÉÊï∞ÊçÆÂ∫ìÔºåÂÆÉÂ≠òÂÇ®‰∫ÜMySQLÁöÑÁî®Êà∑Ë¥¶Êà∑ÂíåÊùÉÈôê‰ø°ÊÅØÔºå‰∏Ä‰∫õÂ≠òÂÇ®ËøáÁ®ã„ÄÅ‰∫ã‰ª∂ÁöÑÂÆö ‰πâ‰ø°ÊÅØÔºå‰∏Ä‰∫õËøêË°åËøáÁ®ã‰∏≠‰∫ßÁîüÁöÑÊó•Âøó‰ø°ÊÅØÔºå‰∏Ä‰∫õÂ∏ÆÂä©‰ø°ÊÅØ‰ª•ÂèäÊó∂Âå∫‰ø°ÊÅØÁ≠â„ÄÇ\n\n- `information_schema`\n\n  MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊï∞ÊçÆÂ∫ìÔºåËøô‰∏™Êï∞ÊçÆÂ∫ì‰øùÂ≠òÁùÄ MySQL ÊúçÂä°Âô® `Áª¥Êä§ÁöÑÊâÄÊúâÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÁöÑ‰ø°ÊÅØ` ÔºåÊØîÂ¶ÇÊúâÂì™‰∫õË°®„ÄÅÂì™‰∫õËßÜÂõæ„ÄÅÂì™‰∫õËß¶ÂèëÂô®„ÄÅÂì™‰∫õÂàó„ÄÅÂì™‰∫õÁ¥¢Âºï„ÄÇËøô‰∫õ‰ø°ÊÅØÂπ∂‰∏çÊòØÁúüÂÆûÁöÑÁî®Êà∑Êï∞ÊçÆÔºåËÄåÊòØ‰∏Ä‰∫õÊèèËø∞ÊÄß‰ø°ÊÅØÔºåÊúâÊó∂ÂÄô‰πüÁß∞‰πã‰∏∫ `ÂÖÉÊï∞ÊçÆ` „ÄÇÂú®Á≥ªÁªüÊï∞ÊçÆÂ∫ì `information_schema` ‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∫õ‰ª• `innodb_sys` ÂºÄÂ§¥ÁöÑË°®ÔºåÁî®‰∫éË°®Á§∫ÂÜÖÈÉ®Á≥ªÁªüË°®„ÄÇ\n\n  ```sql\n  mysql> USE information_schema;\n  Database changed\n  mysql> SHOW TABLES LIKE 'innodb_sys%';\n  +--------------------------------------------+\n  | Tables_in_information_schema (innodb_sys%) |\n  +--------------------------------------------+\n  | INNODB_SYS_DATAFILES                       |\n  | INNODB_SYS_VIRTUAL                         |\n  | INNODB_SYS_INDEXES                         |\n  | INNODB_SYS_TABLES                          |\n  | INNODB_SYS_FIELDS                          |\n  | INNODB_SYS_TABLESPACES                     |\n  | INNODB_SYS_FOREIGN_COLS                    |\n  | INNODB_SYS_COLUMNS                         |\n  | INNODB_SYS_FOREIGN                         |\n  | INNODB_SYS_TABLESTATS                      |\n  +--------------------------------------------+\n  10 rows in set (0.00 sec)\n  ```\n\n- `performance_schema`\n\n  MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊï∞ÊçÆÂ∫ìÔºåËøô‰∏™Êï∞ÊçÆÂ∫ìÈáå‰∏ªË¶Å‰øùÂ≠ò MySQL ÊúçÂä°Âô®ËøêË°åËøáÁ®ã‰∏≠ÁöÑ‰∏Ä‰∫õÁä∂ÊÄÅ‰ø°ÊÅØÔºåÂèØ‰ª•Áî®Êù• `ÁõëÊéß MySQL ÊúçÂä°ÁöÑÂêÑÁ±ªÊÄßËÉΩÊåáÊ†á` „ÄÇÂåÖÊã¨ÁªüËÆ°ÊúÄËøëÊâßË°å‰∫ÜÂì™‰∫õËØ≠Âè•ÔºåÂú®ÊâßË°åËøáÁ®ãÁöÑÊØè‰∏™Èò∂ÊÆµÈÉΩËä±Ë¥π‰∫ÜÂ§öÈïøÊó∂Èó¥ÔºåÂÜÖÂ≠òÁöÑ‰ΩøÁî®ÊÉÖÂÜµÁ≠â‰ø°ÊÅØ„ÄÇ\n\n- `sys`\n\n  MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊï∞ÊçÆÂ∫ìÔºåËøô‰∏™Êï∞ÊçÆÂ∫ì‰∏ªË¶ÅÊòØÈÄöËøá `ËßÜÂõæ` ÁöÑÂΩ¢ÂºèÊää `information_schema` Âíå `performance_schema` ÁªìÂêàËµ∑Êù•ÔºåÂ∏ÆÂä©Á≥ªÁªüÁÆ°ÁêÜÂëòÂíåÂºÄÂèë‰∫∫ÂëòÁõëÊéß MySQL ÁöÑÊäÄÊúØÊÄßËÉΩ„ÄÇ\n\n### 2.2 Êï∞ÊçÆÂ∫ìÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\n\n‰ΩøÁî®`CREATE DATABASE Êï∞ÊçÆÂ∫ìÂêç`ËØ≠Âè•ÂàõÂª∫‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÁöÑÊó∂ÂÄôÔºå Âú®Êñá‰ª∂Á≥ªÁªü‰∏äÂÆûÈôÖÂèëÁîü‰∫Ü‰ªÄ‰πàÂë¢?ÂÖ∂ÂÆûÂæàÁÆÄÂçï,ÊØè‰∏™Êï∞ÊçÆÂ∫ìÈÉΩÂØπÂ∫îÊï∞ÊçÆÁõÆÂΩï‰∏ãÁöÑ‰∏Ä‰∏™Â≠êÁõÆÂΩïÔºåÊàñËÄÖËØ¥ÂØπÂ∫î‰∏Ä‰∏™Êñá‰ª∂Â§πÔºåÊØèÂΩìÊñ∞Âª∫‰∏Ä ‰∏™Êï∞ÊçÆÂ∫ìÊó∂, MySQL‰ºöÂ∏ÆÊàë‰ª¨ÂÅöËøô‰∏§‰ª∂‰∫ãÂÑø:\n\n1. Âú®`Êï∞ÊçÆÁõÆÂΩï`‰∏ãÂàõÂª∫‰∏Ä‰∏™ÂíåÊï∞ÊçÆÂ∫ìÂêçÂêåÂêçÁöÑÂ≠êÁõÆÂΩï„ÄÇ\n2. Âú®‰∏éËØ•Êï∞ÊçÆÂ∫ìÂêçÂêåÂêçÁöÑÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫` db.opt`ÁöÑÊñá‰ª∂(‰ªÖÈôêMySQL5.7Âèä‰πãÂâçÁâàÊú¨)ÔºåËøô‰∏™Êñá‰ª∂‰∏≠ÂåÖÂê´‰∫Ü`ËØ•Êï∞ÊçÆÂ∫ìÁöÑÂêÑÁßçÂ±ûÊÄß`ÔºåÊØîÂ¶ÇËØ•Êï∞ÊçÆÂ∫ìÁöÑÂ≠óÁ¨¶ÈõÜÂíåÊØîËæÉËßÑÂàô„ÄÇ\n\nÊàë‰ª¨ÂÜçÁúã‰∏Ä‰∏ãÊàëÁöÑËÆ°ÁÆóÊú∫‰∏äÁöÑÊï∞ÊçÆÁõÆÂΩï‰∏ãÁöÑÂÜÖÂÆπ:\n\n```sql\n[root@hadoop102 ~]# cd /var/lib/mysql\n[root@hadoop102 mysql]# ll\nÊÄªÁî®Èáè 188880\n-rw-r-----. 1 mysql mysql       56 5Êúà   9 21:36 auto.cnf\n-rw-r-----. 1 mysql mysql      156 6Êúà  13 18:50 binlog.000005\n-rw-r-----. 1 mysql mysql      156 7Êúà   9 13:05 binlog.000006\n-rw-r-----. 1 mysql mysql      156 7Êúà   9 13:05 binlog.000007\n-rw-r-----. 1 mysql mysql       48 7Êúà   9 13:05 binlog.index\n-rw-------. 1 mysql mysql     1676 5Êúà   9 21:36 ca-key.pem\n-rw-r--r--. 1 mysql mysql     1112 5Êúà   9 21:36 ca.pem\n-rw-r--r--. 1 mysql mysql     1112 5Êúà   9 21:36 client-cert.pem\n-rw-------. 1 mysql mysql     1680 5Êúà   9 21:36 client-key.pem\n-rw-r-----. 1 mysql mysql   196608 7Êúà   9 13:05 #ib_16384_0.dblwr\n-rw-r-----. 1 mysql mysql  8585216 5Êúà   9 21:36 #ib_16384_1.dblwr\n-rw-r-----. 1 mysql mysql     3357 5Êúà  10 22:47 ib_buffer_pool\n-rw-r-----. 1 mysql mysql 12582912 7Êúà   9 13:05 ibdata1\n-rw-r-----. 1 mysql mysql 50331648 7Êúà   9 13:05 ib_logfile0\n-rw-r-----. 1 mysql mysql 50331648 5Êúà   9 21:36 ib_logfile1\n-rw-r-----. 1 mysql mysql 12582912 7Êúà   9 13:05 ibtmp1\ndrwxr-x---. 2 mysql mysql     4096 7Êúà   9 13:05 #innodb_temp\ndrwxr-x---. 2 mysql mysql     4096 5Êúà   9 21:36 mysql\n-rw-r-----. 1 mysql mysql 25165824 7Êúà   9 13:05 mysql.ibd\nsrwxrwxrwx. 1 mysql mysql        0 7Êúà   9 13:05 mysql.sock\n-rw-------. 1 mysql mysql        5 7Êúà   9 13:05 mysql.sock.lock\ndrwxr-x---. 2 mysql mysql     4096 5Êúà   9 21:36 performance_schema\n-rw-------. 1 mysql mysql     1680 5Êúà   9 21:36 private_key.pem\n-rw-r--r--. 1 mysql mysql      452 5Êúà   9 21:36 public_key.pem\n-rw-r--r--. 1 mysql mysql     1112 5Êúà   9 21:36 server-cert.pem\n-rw-------. 1 mysql mysql     1680 5Êúà   9 21:36 server-key.pem\ndrwxr-x---. 2 mysql mysql     4096 5Êúà   9 21:36 sys\n-rw-r-----. 1 mysql mysql 16777216 7Êúà   9 13:05 undo_001\n-rw-r-----. 1 mysql mysql 16777216 7Êúà   9 13:05 undo_002\n```\n\nËøô‰∏™Êï∞ÊçÆÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ÂíåÂ≠êÁõÆÂΩïÊØîËæÉÂ§öÔºåÈô§‰∫Ü `information_schema` Ëøô‰∏™Á≥ªÁªüÊï∞ÊçÆÂ∫ìÂ§ñÔºåÂÖ∂‰ªñÁöÑÊï∞ÊçÆÂ∫ìÂú® `Êï∞ÊçÆÁõÆÂΩï` ‰∏ãÈÉΩÊúâÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï„ÄÇ\n\n### 2.3 Ë°®Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\n\n#### 2.3.1 InnoDBÂ≠òÂÇ®ÂºïÊìéÊ®°Âºè\n\n**1„ÄÅË°®ÁªìÊûÑ**\n\n‰∏∫‰∫Ü‰øùÂ≠òË°®ÁªìÊûÑÔºå `InnoDB`Âú® `Êï∞ÊçÆÁõÆÂΩï` ‰∏ãÂØπÂ∫îÁöÑÊï∞ÊçÆÂ∫ìÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∫Ü‰∏Ä‰∏™‰∏ìÈó®Áî®‰∫é `ÊèèËø∞Ë°®ÁªìÊûÑÁöÑÊñá‰ª∂`ÔºåÊñá‰ª∂ÂêçÊòØËøôÊ†∑Ôºö`Ë°®Âêç.frm`\n\nÊØîÊñπËØ¥Êàë‰ª¨Âú® `test`Êï∞ÊçÆÂ∫ì‰∏ãÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫`test`ÁöÑË°®\n\nÈÇ£Âú®Êï∞ÊçÆÂ∫ì `test` ÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï‰∏ãÂ∞±‰ºöÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ `test.frm` ÁöÑÁî®‰∫éÊèèËø∞Ë°®ÁªìÊûÑÁöÑÊñá‰ª∂„ÄÇ`.frm` Êñá‰ª∂ÁöÑÊ†ºÂºèÂú®‰∏çÂêåÁöÑÂπ≥Âè∞‰∏äÈÉΩÊòØÁõ∏ÂêåÁöÑ„ÄÇËøô‰∏™ÂêéÁºÄÂêç‰∏∫ `.frm` ÊòØ‰ª• `‰∫åËøõÂà∂Ê†ºÂºè` Â≠òÂÇ®ÁöÑÔºåÊàë‰ª¨Áõ¥Êé•ÊâìÂºÄÊòØ‰π±Á†ÅÁöÑ„ÄÇ\n\n**2„ÄÅË°®‰∏≠Êï∞ÊçÆÂíåÁ¥¢Âºï**\n\n<font color=#880000>**‚ë†Á≥ªÁªüË°®Á©∫Èó¥Ôºàsystem tablespaceÔºâ**</font>\n\nÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåInnoDB ‰ºöÂú®Êï∞ÊçÆÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ `ibdata1`„ÄÅÂ§ßÂ∞è‰∏∫ `12M` ÁöÑÊñá‰ª∂ÔºåËøô‰∏™Êñá‰ª∂Â∞±ÊòØÂØπÂ∫îÁöÑ `Á≥ªÁªüË°®Á©∫Èó¥` Âú®Êñá‰ª∂Á≥ªÁªü‰∏äÁöÑË°®Á§∫„ÄÇÊÄé‰πàÊâç12MÔºü\n\nÊ≥®ÊÑèËøô‰∏™Êñá‰ª∂ÊòØ `Ëá™Êâ©Â±ïÊñá‰ª∂` ÔºåÂΩì‰∏çÂ§üÁî®ÁöÑÊó∂ÂÄôÂÆÉ‰ºöËá™Â∑±Â¢ûÂä†Êñá‰ª∂Â§ßÂ∞è„ÄÇ\n\nÂΩìÁÑ∂ÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥ËÆ©Á≥ªÁªüË°®Á©∫Èó¥ÂØπÂ∫îÊñá‰ª∂Á≥ªÁªü‰∏äÂ§ö‰∏™ÂÆûÈôÖÊñá‰ª∂ÔºåÊàñËÄÖ‰ªÖ‰ªÖËßâÂæóÂéüÊù•ÁöÑ `ibdata1` Ëøô‰∏™Êñá‰ª∂ÂêçÈöæÂê¨ÔºåÈÇ£ÂèØ‰ª•Âú®MySQLÂêØÂä®Êó∂ÈÖçÁΩÆÂØπÂ∫îÁöÑÊñá‰ª∂Ë∑ØÂæÑ‰ª•ÂèäÂÆÉ‰ª¨ÁöÑÂ§ßÂ∞èÔºåÊØîÂ¶ÇÊàë‰ª¨ËøôÊ†∑‰øÆÊîπ‰∏Ä‰∏ãmy.cnf ÈÖçÁΩÆÊñá‰ª∂:\n\n```mysql\n[server]\ninnodb_data_file_path=data1:512M;data2:512M:autoextend\n```\n\nËøôÊ†∑Âú®MySQLÂêØÂä®‰πãÂêéÂ∞±‰ºöÂàõÂª∫Ëøô‰∏§‰∏™512MÂ§ßÂ∞èÁöÑÊñá‰ª∂‰Ωú‰∏∫`Á≥ªÁªüË°®Á©∫Èó¥`ÔºåÂÖ∂‰∏≠ÁöÑ`autoextend`Ë°®ÊòéËøô‰∏§‰∏™Êñá‰ª∂Â¶ÇÊûú‰∏çÂ§üÁî®‰ºöËá™Âä®Êâ©Â±ïdata2Êñá‰ª∂ÁöÑÂ§ßÂ∞è„ÄÇ\n\nÈúÄË¶ÅÊ≥®ÊÑèÁöÑ‰∏ÄÁÇπÊòØ,==Âú®‰∏Ä‰∏™MySQLÊúçÂä°Âô®‰∏≠ÔºåÁ≥ªÁªüË°®Á©∫Èó¥Âè™Êúâ‰∏Ä‰ªΩ==„ÄÇ‰ªéMySQL5.5.7Âà∞MySQL5.6.6‰πãÈó¥ÁöÑÂêÑ‰∏™ÁâàÊú¨‰∏≠ÔºåÊàë‰ª¨**Ë°®‰∏≠ÁöÑÊï∞ÊçÆÈÉΩ‰ºöË¢´ÈªòËÆ§Â≠òÂÇ®Âà∞Ëøô‰∏™Á≥ªÁªüË°®Á©∫Èó¥**„ÄÇ\n\n**<font color=#880000>‚ë°Áã¨Á´ãË°®Á©∫Èó¥Ôºàfile-per-table tablespaceÔºâ</font>**\n\nÂú® MySQL 5.6.6 ‰ª•Âèä‰πãÂêéÁöÑÁâàÊú¨‰∏≠ÔºåInnoDB Âπ∂‰∏ç‰ºöÈªòËÆ§ÁöÑÊääÂêÑ‰∏™Ë°®ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Âà∞Á≥ªÁªüË°®Á©∫Èó¥‰∏≠ÔºåËÄåÊòØ‰∏∫ `ÊØè‰∏Ä‰∏™Ë°®Âª∫Á´ã‰∏Ä‰∏™Áã¨Á´ãË°®Á©∫Èó¥`Ôºå‰πüÂ∞±ÊòØËØ¥Êàë‰ª¨ÂàõÂª∫‰∫ÜÂ§öÂ∞ë‰∏™Ë°®ÔºåÂ∞±ÊúâÂ§öÂ∞ë‰∏™Áã¨Á´ãË°®Á©∫Èó¥„ÄÇ‰ΩøÁî® `Áã¨Á´ãË°®Á©∫Èó¥` Êù•Â≠òÂÇ®Ë°®Êï∞ÊçÆÁöÑËØùÔºå‰ºöÂú®ËØ•Ë°®ÊâÄÂ±ûÊï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Ë°®Á§∫ËØ•Áã¨Á´ãË°®Á©∫Èó¥ÁöÑÊñá‰ª∂ÔºåÊñá‰ª∂ÂêçÂíåË°®ÂêçÁõ∏ÂêåÔºåÂè™‰∏çËøáÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ `.ibd` ÁöÑÊâ©Â±ïÂêçËÄåÂ∑≤ÔºåÊâÄ‰ª•ÂÆåÊï¥ÁöÑÊñá‰ª∂ÂêçÁß∞ÈïøËøôÊ†∑Ôºö\n\n```sql\nË°®Âêç.ibd\n```\n\nÊØîÂ¶ÇÔºöÊàë‰ª¨‰ΩøÁî®‰∫Ü `Áã¨Á´ãË°®Á©∫Èó¥` ÂéªÂ≠òÂÇ®`test`Êï∞ÊçÆÂ∫ì‰∏ãÁöÑ `test` Ë°®ÁöÑËØùÔºåÈÇ£‰πàÂú®ËØ•Ë°®ÊâÄÂú®Êï∞ÊçÆÂ∫ì`atguigu`ÂØπÂ∫îÁöÑ test ÁõÆÂΩï‰∏ã‰ºö‰∏∫ test Ë°®ÂàõÂª∫Ëøô‰∏§‰∏™Êñá‰ª∂Ôºö\n\n```sql\ntest.frm\ntest.ibd\n```\n\nÂÖ∂‰∏≠ `test.ibd` Êñá‰ª∂Â∞±Áî®Êù•Â≠òÂÇ® `test` Ë°®‰∏≠ÁöÑÊï∞ÊçÆÂíåÁ¥¢ÂºïÔºõËÄå`text.frm` ÊèèËø∞Ë°®ÁöÑÁªìÊûÑ„ÄÇ\n\n**<font color=#880000>‚ë¢Á≥ªÁªüË°®Á©∫Èó¥‰∏éÁã¨Á´ãË°®Á©∫Èó¥ÁöÑËÆæÁΩÆ</font>**\n\nÊàë‰ª¨ÂèØ‰ª•Ëá™Â∑±ÊåáÂÆö‰ΩøÁî® `Á≥ªÁªüË°®Á©∫Èó¥` ËøòÊòØ `Áã¨Á´ãË°®Á©∫Èó¥` Êù•Â≠òÂÇ®Êï∞ÊçÆÔºåËøô‰∏™ÂäüËÉΩÁî±ÂêØÂä®ÂèÇÊï∞ `innodb_file_per_table` ÊéßÂà∂ÔºåÊØîÂ¶ÇËØ¥Êàë‰ª¨ÊÉ≥ÂàªÊÑèÂ∞ÜË°®Êï∞ÊçÆÈÉΩÂ≠òÂÇ®Âà∞ `Á≥ªÁªüË°®Á©∫Èó¥` Êó∂ÔºåÂèØ‰ª•Âú®ÂêØÂä®MySQLÊúçÂä°Âô®ÁöÑÊó∂ÂÄôËøôÊ†∑ÈÖçÁΩÆ:\n\n```sql\n[server]\ninnodb_file_per_table=0 # 0:‰ª£Ë°®‰ΩøÁî®Á≥ªÁªüË°®Á©∫Èó¥; 1:‰ª£Ë°®‰ΩøÁî®Áã¨Á´ãË°®Á©∫Èó¥\n```\n\nÈªòËÆ§ÊÉÖÂÜµ:\n\n```sql\nmysql> show variables like 'innodb_file_per_table';\n+-----------------------+-------+\n| Variable_name         | Value |\n+-----------------------+-------+\n| innodb_file_per_table | ON    |\n+-----------------------+-------+\n1 row in set (0.01 sec) # onÔºö‰ª£Ë°®Áã¨Á´ãË°®Á©∫Èó¥\n```\n\n**<font color=#880000>‚ë£ÂÖ∂‰ªñÁ±ªÂûãÁöÑË°®Á©∫Èó¥</font>**\n\nÈöèÁùÄMySQLÁöÑÂèëÂ±ïÔºåÈô§‰∫Ü‰∏äËø∞‰∏§ÁßçËÄÅÁâåË°®Á©∫Èó¥‰πãÂ§ñÔºåÁé∞Âú®ËøòÊñ∞ÊèêÂá∫‰∫Ü‰∏Ä‰∫õ‰∏çÂêåÁ±ªÂûãÁöÑË°®Á©∫Èó¥ÔºåÊØîÂ¶ÇÈÄöÁî®Ë°®Á©∫Èó¥Ôºàgeneral tablespaceÔºâ„ÄÅ‰∏¥Êó∂Ë°®Á©∫Èó¥Ôºàtemporary tablespaceÔºâÁ≠â„ÄÇ\n\n**3„ÄÅÂõæËß£**\n\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733845.png)\n\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733587.png)\n\n**4„ÄÅÁñëÈóÆ**\n\n`.frm` Âú®MySQL8‰∏≠‰∏çÂ≠òÂú®‰∫ÜÔºåÂéªÂì™Èáå‰∫ÜÔºü\n\nËøôÂ∞±ÈúÄË¶ÅËß£Êûê `ibd Êñá‰ª∂`„ÄÇOracleÂÆòÊñπÂ∞Ü `frmÊñá‰ª∂` ÁöÑ‰ø°ÊÅØÂèäÊõ¥Â§ö‰ø°ÊÅØÁßªÂä®Âà∞Âè´ÂÅöÂ∫èÂàóÂåñÂ≠óÂÖ∏‰ø°ÊÅØÔºàSerialized Dictionary Information,SDIÔºâÔºåSDI Ë¢´ÂÜôÂú® ibd Êñá‰ª∂ÂÜÖÈÉ®ÔºåMySQL 8.0 Â±û‰∫é Oracle Êóó‰∏ãÔºåÂêåÁêÜ„ÄÇ\n\n‰∏∫‰∫Ü‰ªé IBD Êñá‰ª∂‰∏≠ÊèêÂèñ SDI ‰ø°ÊÅØÔºåOracle Êèê‰æõ‰∫Ü‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫è ibd2sdi\n\nËøô‰∏™Â∑•ÂÖ∑‰∏çÈúÄË¶Å‰∏ãËΩΩÔºåMySQL8Ëá™Â∏¶ÁöÑÊúâÔºåÂè™ÈúÄË¶Å‰Ω†ÈÖçÂ•ΩÁéØÂ¢ÉÂèòÈáèÂ∞±ËÉΩÂà∞Â§ÑÁî®„ÄÇ\n\nÊü•ÁúãË°®ÁªìÊûÑÔºöÂà∞Â≠òÂÇ®ibdÊñá‰ª∂ÁöÑÁõÆÂΩï‰∏ãÔºåÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§\n\n```sql\nibd2sdi --dump-file=student.txt student.ibd\n```\n\nËøôÊ†∑ ibd2sdi Â∞±‰ºöÊää `xxx.ibd` ÈáåÂ≠òÂÇ®ÁöÑË°®ÁªìÊûÑ‰ª• json ÁöÑÊ†ºÂºè‰øùÂ≠òÂú® student.txt ‰∏≠\n\n\n\n#### 2.3.2 MyISAM Â≠òÂÇ®ÂºïÊìéÊ®°Âºè\n\n**1„ÄÅË°®ÁªìÊûÑ**\n\nÂú®Â≠òÂÇ®Ë°®ÁªìÊûÑÊñπÈù¢Ôºå `MyISAM` Âíå `InnoDB` ‰∏ÄÊ†∑Ôºå‰πüÊòØÂú® `Êï∞ÊçÆÁõÆÂΩï` ‰∏ãÂØπÂ∫îÁöÑÊï∞ÊçÆÂ∫ìÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∫Ü‰∏Ä‰∏™‰∏ì Èó®Áî®‰∫éÊèèËø∞Ë°®ÁªìÊûÑÁöÑÊñá‰ª∂Ôºö`Ë°®Âêç.frm`\n\n**2„ÄÅË°®‰∏≠Êï∞ÊçÆÂíåÁ¥¢Âºï**\n\nÂú® MyISAM ‰∏≠ÁöÑÁ¥¢ÂºïÂÖ®ÈÉ®ÈÉΩÊòØ `‰∫åÁ∫ßÁ¥¢Âºï` ÔºåËØ•Â≠òÂÇ®ÂºïÊìéÁöÑ `Êï∞ÊçÆÂíåÁ¥¢ÂºïÊòØÂàÜÂºÄÂ≠òÊîæ` ÁöÑ„ÄÇÊâÄ‰ª•Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠‰πüÊòØ‰ΩøÁî®‰∏çÂêåÁöÑÊñá‰ª∂Êù•Â≠òÂÇ®Êï∞ÊçÆÊñá‰ª∂ÂíåÁ¥¢ÂºïÊñá‰ª∂ÔºåÂêåÊó∂Ë°®Êï∞ÊçÆÈÉΩÂ≠òÊîæÂú®ÂØπÂ∫îÁöÑÊï∞ÊçÆÂ∫ìÂ≠êÁõÆÂΩï‰∏ã„ÄÇÂÅáÂ¶Ç `test` Ë°®‰ΩøÁî® MyISAM Â≠òÂÇ®ÂºïÊìéÁöÑËØùÔºåÈÇ£‰πàÂú®ÂÆÉÊâÄÂú®Êï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑ `test` ÁõÆÂΩï‰∏ã‰ºö‰∏∫ test Ë°®ÂàõÂª∫Ëøô‰∏â‰∏™Êñá‰ª∂Ôºö\n\n- `test.frm` Â≠òÂÇ®Ë°®ÁªìÊûÑ\n- `test.MYD` Â≠òÂÇ®Êï∞ÊçÆ (MYData)\n- `test.MYI` Â≠òÂÇ®Á¥¢Âºï (MYIndex)\n\n**3„ÄÅÂõæËß£**\n\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091734468.png)\n\n### 2.4 Â∞èÁªì\n\n‰∏æ‰æãÔºö`Êï∞ÊçÆÂ∫ì a` Ôºå `Ë°®b` „ÄÇ\n\n1. Â¶ÇÊûúË°® b ÈááÁî® `InnoDB` Ôºådata/a ‰∏≠‰ºö‰∫ßÁîü 1 ‰∏™ÊàñËÄÖ 2 ‰∏™Êñá‰ª∂:\n\n   - `b.frm`ÔºöÊèèËø∞Ë°®ÁªìÊûÑÊñá‰ª∂ÔºåÂ≠óÊÆµÈïøÂ∫¶Á≠â\n   - Â¶ÇÊûúÈááÁî® `Á≥ªÁªüË°®Á©∫Èó¥` Ê®°ÂºèÁöÑÔºåÊï∞ÊçÆ‰ø°ÊÅØÂíåÁ¥¢Âºï‰ø°ÊÅØÈÉΩÂ≠òÂÇ®Âú® `ibdata1` ‰∏≠\n   - Â¶ÇÊûúÈááÁî® `Áã¨Á´ãË°®Á©∫Èó¥` Â≠òÂÇ®Ê®°ÂºèÔºådata/a‰∏≠Ëøò‰ºö‰∫ßÁîü `b.ibd` Êñá‰ª∂ÔºàÂ≠òÂÇ®Êï∞ÊçÆ‰ø°ÊÅØÂíåÁ¥¢Âºï‰ø°ÊÅØÔºâ\n\n   > MySQL 5.7 ‰∏≠‰ºöÂú® data/a ÁöÑÁõÆÂΩï‰∏ãÁîüÊàê `db.opt` Êñá‰ª∂Áî®‰∫é‰øùÂ≠òÊï∞ÊçÆÂ∫ìÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆ„ÄÇÊØîÂ¶ÇÔºöÂ≠óÁ¨¶ÈõÜ„ÄÅÊØîËæÉËßÑÂàô„ÄÇËÄå MySQL 8.0 ‰∏çÂÜçÊèê‰æõ db.opt Êñá‰ª∂„ÄÇ\n   >\n   > MySQL 8.0 ‰∏≠ ‰∏çÂÜçÂçïÁã¨Êèê‰æõ `b.frm`ÔºåËÄåÊòØÂêàÂπ∂Âú® `b.ibd` Êñá‰ª∂‰∏≠„ÄÇ\n\n2. Â¶ÇÊûúË°® b ÈááÁî® `MyISAM` Ôºådata/a‰∏≠‰ºö‰∫ßÁîü 3 ‰∏™Êñá‰ª∂:\n\n   - MySQL5.7 ‰∏≠ `b.frm` ÔºöÊèèËø∞Ë°®ÁªìÊûÑÊñá‰ª∂ÔºåÂ≠óÊÆµÈïøÂ∫¶Á≠â„ÄÇ\n   - MySQL8.0 ‰∏≠ `b.xxx.sdi` ÔºöÊèèËø∞Ë°®ÁªìÊûÑÊñá‰ª∂ÔºåÂ≠óÊÆµÈïøÂ∫¶Á≠â\n   - `b.MYD` (MYData)ÔºöÊï∞ÊçÆ‰ø°ÊÅØÊñá‰ª∂ÔºåÂ≠òÂÇ®Êï∞ÊçÆ‰ø°ÊÅØ(Â¶ÇÊûúÈááÁî®Áã¨Á´ãË°®Â≠òÂÇ®Ê®°Âºè)\n   - `b.MYI` (MYIndex)ÔºöÂ≠òÊîæÁ¥¢Âºï‰ø°ÊÅØÊñá‰ª∂\n\n### 2.5 ËßÜÂõæÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\n\nÊàë‰ª¨Áü•ÈÅìMySQL‰∏≠ÁöÑ`ËßÜÂõæ`ÂÖ∂ÂÆûÊòØ`ËôöÊãüÁöÑË°®`Ôºå‰πüÂ∞±ÊòØÊüê‰∏™Êü•ËØ¢ËØ≠Âè•ÁöÑ‰∏Ä‰∏Ä‰∏™Âà´ÂêçËÄåÂ∑≤ÔºåÊâÄ‰ª•Âú®Â≠òÂÇ®ËßÜÂõæÁöÑÊó∂ÂÄôÊòØ‰∏çË¶ÅÂ≠òÂÇ®ÁúüÂÆûÁöÑÊï∞ÊçÆÁöÑÔºåÂè™ÈúÄË¶ÅÊääÂÆÉÁöÑÁªìÊûÑÂ≠òÂÇ®Ëµ∑Êù•Â∞±Ë°å‰∫Ü„ÄÇÂíåË°®‰∏ÄÊ†∑ÔºåÊèèËø∞ËßÜÂõæÁªìÊûÑÁöÑÊñá‰ª∂‰πü‰ºöË¢´Â≠òÂÇ®Âà∞ÊâÄÂ±ûÊï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï‰∏ãËæπÔºåÂè™‰ºöÂ≠òÂÇ®‰∏Ä‰∏™`ËßÜÂõæÂêç. frm`ÁöÑÊñá‰ª∂„ÄÇÂ¶Ç‰∏ãÂõæ‰∏≠ÁöÑ: `emp_details_view.frm`\n\n![image-20220709125100055](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091735198.png)\n\n### 2.6 ÂÖ∂‰ªñÁöÑÊñá‰ª∂\n\nÈô§‰∫ÜÊàë‰ª¨‰∏äËæπËØ¥ÁöÑËøô‰∫õÁî®Êà∑Ëá™Â∑±Â≠òÂÇ®ÁöÑÊï∞ÊçÆ‰ª•Â§ñÔºå`Êï∞ÊçÆÁõÆÂΩï`‰∏ãËøòÂåÖÊã¨‰∏∫‰∫ÜÊõ¥Â•ΩËøêË°åÁ®ãÂ∫èÁöÑ‰∏Ä‰∫õÈ¢ùÂ§ñÊñá‰ª∂,‰∏ªË¶ÅÂåÖÊã¨ËøôÂá†ÁßçÁ±ªÂûãÁöÑÊñá‰ª∂:\n\n- **ÊúçÂä°Âô®ËøõÁ®ãÊñá‰ª∂**\n\n  Êàë‰ª¨Áü•ÈÅìÊØèËøêË°å‰∏Ä‰∏™MySQLÊúçÂä°Âô®Á®ãÂ∫è,ÈÉΩÊÑèÂë≥ÁùÄÂêØÂä®‰∏Ä‰∏™ËøõÁ®ã„ÄÇMySQLÊúçÂä°Âô®‰ºöÊääËá™Â∑±ÁöÑËøõÁ®ãIDÂÜôÂÖ•Âà∞‰∏Ä‰∏™Êñá‰ª∂‰∏≠„ÄÇ\n\n- **ÊúçÂä°Âô®Êó•ÂøóÊñá‰ª∂**\n\n  Âú®ÊúçÂä°Âô®ËøêË°åËøáÁ®ã‰∏≠Ôºå‰ºö‰∫ßÁîüÂêÑÁßçÂêÑÊ†∑ÁöÑÊó•ÂøóÔºåÊØîÂ¶ÇÂ∏∏ËßÑÁöÑÊü•ËØ¢Êó•Âøó„ÄÅÈîôËØØÊó•Âøó„ÄÅ‰∫åËøõÂà∂Êó•Âøó„ÄÅredoÊó•ÂøóÁ≠â„ÄÇËøô‰∫õÊó•ÂøóÂêÑÊúâÂêÑÁöÑÁî®ÈÄî„ÄÇÂêéÈù¢ËÆ≤Ëß£„ÄÇ\n\n- **ÈªòËÆ§/Ëá™Âä®ÁîüÊàêÁöÑSSLÂíåRSAËØÅ‰π¶ÂíåÂØÜÈí•Êñá‰ª∂**\n\n  ‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®ÂÆâÂÖ®ÈÄö‰ø°ËÄåÂàõÂª∫ÁöÑ‰∏Ä‰∫õÊñá‰ª∂„ÄÇ","source":"_posts/MySQLÁöÑÊï∞ÊçÆÁõÆÂΩï.md","raw":"---\ntitle: MySQLÁöÑÊï∞ÊçÆÁõÆÂΩï\ndate: 2024-04-01 16:37:48\ntags: MySQL\ncover: /img/cover_05.png\ntop_img: https://bu.dusays.com/2021/03/06/31162e0f3b406.jpg\n---\n\n\n## 1. MySQL8ÁöÑ‰∏ªË¶ÅÁõÆÂΩïÁªìÊûÑ\n\n‰ª• Linux Á≥ªÁªü‰∏∫‰æãËøõË°åËÆ≤Ëß£Ôºö\n\n```linux\n[root@xue ~]# find / -name mysql\n```\n\nÂÆâË£ÖÂ•ΩMySQL 8‰πãÂêéÔºåÊàë‰ª¨Êü•ÁúãÂ¶Ç‰∏ãÁöÑÁõÆÂΩïÁªìÊûÑ:\n\n### 1.1 Êï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑ\n\n==MySQLÊï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑÔºö==`/var/lib/mysql/`\n\nMySQLÊúçÂä°Âô®Á®ãÂ∫èÂú®ÂêØÂä®Êó∂‰ºöÂà∞Êñá‰ª∂Á≥ªÁªüÁöÑÊüê‰∏™ÁõÆÂΩï‰∏ãÂä†ËΩΩ‰∏Ä‰∫õÊñá‰ª∂Ôºå‰πãÂêéÂú®ËøêË°åËøáÁ®ã‰∏≠‰∫ßÁîüÁöÑÊï∞ÊçÆ‰πüÈÉΩ‰ºöÂ≠òÂÇ®Âà∞Ëøô‰∏™ÁõÆÂΩï‰∏ãÁöÑÊüê‰∫õÊñá‰ª∂‰∏≠ÔºåËøô‰∏™ÁõÆÂΩïÂ∞±Áß∞‰∏∫ `Êï∞ÊçÆÁõÆÂΩï`„ÄÇ\n\nMySQLÊääÊï∞ÊçÆÈÉΩÂ≠òÂà∞Âì™‰∏™Ë∑ØÂæÑ‰∏ãÂë¢ÔºüÂÖ∂ÂÆû `Êï∞ÊçÆÁõÆÂΩï` ÂØπÂ∫îËøô‰∏Ä‰∏™Á≥ªÁªüÂèòÈáè `datadir`ÔºåÊàë‰ª¨Âú®‰ΩøÁî®ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Âô®Âª∫Á´ãËøûÊé•‰πãÂêéÊü•ÁúãËøô‰∏™Á≥ªÁªüÂèòÈáèÁöÑÂÄºÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ\n\n```mysql\nmysql> show variables like 'datadir';\n+---------------+-----------------+\n| Variable_name | Value           |\n+---------------+-----------------+\n| datadir       | /var/lib/mysql/ |\n+---------------+-----------------+\n1 row in set (0.04 sec)\n```\n\n‰ªéÁªìÊûú‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåÂú®ÊàëÁöÑËÆ°ÁÆóÊú∫‰∏äMySQLÁöÑÊï∞ÊçÆÁõÆÂΩïÂ∞±ÊòØ `/var/lib/mysql`/ „ÄÇ\n\n### 1.2 Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩï\n\n==Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩïÔºö/usr/binÔºàmysqladmin„ÄÅmysqlbinlog„ÄÅmysqldumpÁ≠âÂëΩ‰ª§ÔºâÂíå/usr/sbin==„ÄÇ\n\n![image-20220709112725420](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733159.png)\n\n### 1.3 **ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩï**\n\n==ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩïÔºö/usr/share/mysql-8.0ÔºàÂëΩ‰ª§ÂèäÈÖçÁΩÆÊñá‰ª∂ÔºâÔºå/etc/mysqlÔºàÂ¶Ç my.cnfÔºâ==\n\n![image-20220709112825432](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733524.png)\n\n## 2. Êï∞ÊçÆÂ∫ìÂíåÊñá‰ª∂Á≥ªÁªüÁöÑÂÖ≥Á≥ª\n\nÂÉè`InnoDB`„ÄÅ`MyISAM `ËøôÊ†∑ÁöÑÂ≠òÂÇ®ÂºïÊìéÈÉΩÊòØÊääË°®Â≠òÂÇ®Âú®Á£ÅÁõò‰∏äÁöÑÔºåÊìç‰ΩúÁ≥ªÁªüÁî®Êù•ÁÆ°ÁêÜÁ£ÅÁõòÁöÑÁªìÊûÑË¢´Áß∞‰∏∫==Êñá‰ª∂Á≥ªÁªü==ÔºåÊâÄ‰ª•Áî®‰∏ì‰∏ö‰∏ÄÁÇπÁöÑËØùÊù•Ë°®Ëø∞Â∞±ÊòØ:ÂÉè**InnoDB„ÄÅMyISAM** ËøôÊ†∑ÁöÑÂ≠òÂÇ®ÂºïÊìéÈÉΩÊòØÊää==Ë°®Â≠òÂÇ®Âú®Êñá‰ª∂Á≥ªÁªü‰∏ä==ÁöÑ„ÄÇÂΩìÊàë‰ª¨ÊÉ≥ËØªÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåËøô‰∫õÂ≠òÂÇ®ÂºïÊìé‰ºö‰ªéÊñá‰ª∂Á≥ªÁªü‰∏≠ÊääÊï∞ÊçÆËØªÂá∫Êù•ËøîÂõûÁªôÊàë‰ª¨ÔºåÂΩìÊàë‰ª¨ÊÉ≥ÂÜôÂÖ•Êï∞ÊçÆÁöÑÊó∂ÂÄô,Ëøô‰∫õÂ≠òÂÇ®ÂºìÊìé‰ºöÊääËøô‰∫õÊï∞ÊçÆÂèàÂÜôÂõûÊñá‰ª∂Á≥ªÁªü„ÄÇÊú¨Á´†Â≠¶‰π†‰∏Ä‰∏ã`InnoDB`Âíå`MyISAM`Ëøô‰∏§‰∏™Â≠òÂÇ®Âºì|ÊìéÁöÑÊï∞ÊçÆÂ¶Ç‰ΩïÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠Â≠òÂÇ®„ÄÇ\n\n### 2.1 Êü•ÁúãÈªòËÆ§Êï∞ÊçÆÂ∫ì\n\nÊü•Áúã‰∏Ä‰∏ãÂú®ÊàëÁöÑËÆ°ÁÆóÊú∫‰∏äÂΩìÂâçÊúâÂì™‰∫õÊï∞ÊçÆÂ∫ì:\n\n```sql\nmysql> SHOW DATABASES; \n```\n\nÂèØ‰ª•ÁúãÂà∞Êúâ 4 ‰∏™Êï∞ÊçÆÂ∫ìÊòØÂ±û‰∫é MySQL Ëá™Â∏¶ÁöÑÁ≥ªÁªüÊï∞ÊçÆÂ∫ì„ÄÇ\n\n- `mysql`\n\n  MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊ†∏ÂøÉÊï∞ÊçÆÂ∫ìÔºåÂÆÉÂ≠òÂÇ®‰∫ÜMySQLÁöÑÁî®Êà∑Ë¥¶Êà∑ÂíåÊùÉÈôê‰ø°ÊÅØÔºå‰∏Ä‰∫õÂ≠òÂÇ®ËøáÁ®ã„ÄÅ‰∫ã‰ª∂ÁöÑÂÆö ‰πâ‰ø°ÊÅØÔºå‰∏Ä‰∫õËøêË°åËøáÁ®ã‰∏≠‰∫ßÁîüÁöÑÊó•Âøó‰ø°ÊÅØÔºå‰∏Ä‰∫õÂ∏ÆÂä©‰ø°ÊÅØ‰ª•ÂèäÊó∂Âå∫‰ø°ÊÅØÁ≠â„ÄÇ\n\n- `information_schema`\n\n  MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊï∞ÊçÆÂ∫ìÔºåËøô‰∏™Êï∞ÊçÆÂ∫ì‰øùÂ≠òÁùÄ MySQL ÊúçÂä°Âô® `Áª¥Êä§ÁöÑÊâÄÊúâÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÁöÑ‰ø°ÊÅØ` ÔºåÊØîÂ¶ÇÊúâÂì™‰∫õË°®„ÄÅÂì™‰∫õËßÜÂõæ„ÄÅÂì™‰∫õËß¶ÂèëÂô®„ÄÅÂì™‰∫õÂàó„ÄÅÂì™‰∫õÁ¥¢Âºï„ÄÇËøô‰∫õ‰ø°ÊÅØÂπ∂‰∏çÊòØÁúüÂÆûÁöÑÁî®Êà∑Êï∞ÊçÆÔºåËÄåÊòØ‰∏Ä‰∫õÊèèËø∞ÊÄß‰ø°ÊÅØÔºåÊúâÊó∂ÂÄô‰πüÁß∞‰πã‰∏∫ `ÂÖÉÊï∞ÊçÆ` „ÄÇÂú®Á≥ªÁªüÊï∞ÊçÆÂ∫ì `information_schema` ‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∫õ‰ª• `innodb_sys` ÂºÄÂ§¥ÁöÑË°®ÔºåÁî®‰∫éË°®Á§∫ÂÜÖÈÉ®Á≥ªÁªüË°®„ÄÇ\n\n  ```sql\n  mysql> USE information_schema;\n  Database changed\n  mysql> SHOW TABLES LIKE 'innodb_sys%';\n  +--------------------------------------------+\n  | Tables_in_information_schema (innodb_sys%) |\n  +--------------------------------------------+\n  | INNODB_SYS_DATAFILES                       |\n  | INNODB_SYS_VIRTUAL                         |\n  | INNODB_SYS_INDEXES                         |\n  | INNODB_SYS_TABLES                          |\n  | INNODB_SYS_FIELDS                          |\n  | INNODB_SYS_TABLESPACES                     |\n  | INNODB_SYS_FOREIGN_COLS                    |\n  | INNODB_SYS_COLUMNS                         |\n  | INNODB_SYS_FOREIGN                         |\n  | INNODB_SYS_TABLESTATS                      |\n  +--------------------------------------------+\n  10 rows in set (0.00 sec)\n  ```\n\n- `performance_schema`\n\n  MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊï∞ÊçÆÂ∫ìÔºåËøô‰∏™Êï∞ÊçÆÂ∫ìÈáå‰∏ªË¶Å‰øùÂ≠ò MySQL ÊúçÂä°Âô®ËøêË°åËøáÁ®ã‰∏≠ÁöÑ‰∏Ä‰∫õÁä∂ÊÄÅ‰ø°ÊÅØÔºåÂèØ‰ª•Áî®Êù• `ÁõëÊéß MySQL ÊúçÂä°ÁöÑÂêÑÁ±ªÊÄßËÉΩÊåáÊ†á` „ÄÇÂåÖÊã¨ÁªüËÆ°ÊúÄËøëÊâßË°å‰∫ÜÂì™‰∫õËØ≠Âè•ÔºåÂú®ÊâßË°åËøáÁ®ãÁöÑÊØè‰∏™Èò∂ÊÆµÈÉΩËä±Ë¥π‰∫ÜÂ§öÈïøÊó∂Èó¥ÔºåÂÜÖÂ≠òÁöÑ‰ΩøÁî®ÊÉÖÂÜµÁ≠â‰ø°ÊÅØ„ÄÇ\n\n- `sys`\n\n  MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊï∞ÊçÆÂ∫ìÔºåËøô‰∏™Êï∞ÊçÆÂ∫ì‰∏ªË¶ÅÊòØÈÄöËøá `ËßÜÂõæ` ÁöÑÂΩ¢ÂºèÊää `information_schema` Âíå `performance_schema` ÁªìÂêàËµ∑Êù•ÔºåÂ∏ÆÂä©Á≥ªÁªüÁÆ°ÁêÜÂëòÂíåÂºÄÂèë‰∫∫ÂëòÁõëÊéß MySQL ÁöÑÊäÄÊúØÊÄßËÉΩ„ÄÇ\n\n### 2.2 Êï∞ÊçÆÂ∫ìÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\n\n‰ΩøÁî®`CREATE DATABASE Êï∞ÊçÆÂ∫ìÂêç`ËØ≠Âè•ÂàõÂª∫‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÁöÑÊó∂ÂÄôÔºå Âú®Êñá‰ª∂Á≥ªÁªü‰∏äÂÆûÈôÖÂèëÁîü‰∫Ü‰ªÄ‰πàÂë¢?ÂÖ∂ÂÆûÂæàÁÆÄÂçï,ÊØè‰∏™Êï∞ÊçÆÂ∫ìÈÉΩÂØπÂ∫îÊï∞ÊçÆÁõÆÂΩï‰∏ãÁöÑ‰∏Ä‰∏™Â≠êÁõÆÂΩïÔºåÊàñËÄÖËØ¥ÂØπÂ∫î‰∏Ä‰∏™Êñá‰ª∂Â§πÔºåÊØèÂΩìÊñ∞Âª∫‰∏Ä ‰∏™Êï∞ÊçÆÂ∫ìÊó∂, MySQL‰ºöÂ∏ÆÊàë‰ª¨ÂÅöËøô‰∏§‰ª∂‰∫ãÂÑø:\n\n1. Âú®`Êï∞ÊçÆÁõÆÂΩï`‰∏ãÂàõÂª∫‰∏Ä‰∏™ÂíåÊï∞ÊçÆÂ∫ìÂêçÂêåÂêçÁöÑÂ≠êÁõÆÂΩï„ÄÇ\n2. Âú®‰∏éËØ•Êï∞ÊçÆÂ∫ìÂêçÂêåÂêçÁöÑÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫` db.opt`ÁöÑÊñá‰ª∂(‰ªÖÈôêMySQL5.7Âèä‰πãÂâçÁâàÊú¨)ÔºåËøô‰∏™Êñá‰ª∂‰∏≠ÂåÖÂê´‰∫Ü`ËØ•Êï∞ÊçÆÂ∫ìÁöÑÂêÑÁßçÂ±ûÊÄß`ÔºåÊØîÂ¶ÇËØ•Êï∞ÊçÆÂ∫ìÁöÑÂ≠óÁ¨¶ÈõÜÂíåÊØîËæÉËßÑÂàô„ÄÇ\n\nÊàë‰ª¨ÂÜçÁúã‰∏Ä‰∏ãÊàëÁöÑËÆ°ÁÆóÊú∫‰∏äÁöÑÊï∞ÊçÆÁõÆÂΩï‰∏ãÁöÑÂÜÖÂÆπ:\n\n```sql\n[root@hadoop102 ~]# cd /var/lib/mysql\n[root@hadoop102 mysql]# ll\nÊÄªÁî®Èáè 188880\n-rw-r-----. 1 mysql mysql       56 5Êúà   9 21:36 auto.cnf\n-rw-r-----. 1 mysql mysql      156 6Êúà  13 18:50 binlog.000005\n-rw-r-----. 1 mysql mysql      156 7Êúà   9 13:05 binlog.000006\n-rw-r-----. 1 mysql mysql      156 7Êúà   9 13:05 binlog.000007\n-rw-r-----. 1 mysql mysql       48 7Êúà   9 13:05 binlog.index\n-rw-------. 1 mysql mysql     1676 5Êúà   9 21:36 ca-key.pem\n-rw-r--r--. 1 mysql mysql     1112 5Êúà   9 21:36 ca.pem\n-rw-r--r--. 1 mysql mysql     1112 5Êúà   9 21:36 client-cert.pem\n-rw-------. 1 mysql mysql     1680 5Êúà   9 21:36 client-key.pem\n-rw-r-----. 1 mysql mysql   196608 7Êúà   9 13:05 #ib_16384_0.dblwr\n-rw-r-----. 1 mysql mysql  8585216 5Êúà   9 21:36 #ib_16384_1.dblwr\n-rw-r-----. 1 mysql mysql     3357 5Êúà  10 22:47 ib_buffer_pool\n-rw-r-----. 1 mysql mysql 12582912 7Êúà   9 13:05 ibdata1\n-rw-r-----. 1 mysql mysql 50331648 7Êúà   9 13:05 ib_logfile0\n-rw-r-----. 1 mysql mysql 50331648 5Êúà   9 21:36 ib_logfile1\n-rw-r-----. 1 mysql mysql 12582912 7Êúà   9 13:05 ibtmp1\ndrwxr-x---. 2 mysql mysql     4096 7Êúà   9 13:05 #innodb_temp\ndrwxr-x---. 2 mysql mysql     4096 5Êúà   9 21:36 mysql\n-rw-r-----. 1 mysql mysql 25165824 7Êúà   9 13:05 mysql.ibd\nsrwxrwxrwx. 1 mysql mysql        0 7Êúà   9 13:05 mysql.sock\n-rw-------. 1 mysql mysql        5 7Êúà   9 13:05 mysql.sock.lock\ndrwxr-x---. 2 mysql mysql     4096 5Êúà   9 21:36 performance_schema\n-rw-------. 1 mysql mysql     1680 5Êúà   9 21:36 private_key.pem\n-rw-r--r--. 1 mysql mysql      452 5Êúà   9 21:36 public_key.pem\n-rw-r--r--. 1 mysql mysql     1112 5Êúà   9 21:36 server-cert.pem\n-rw-------. 1 mysql mysql     1680 5Êúà   9 21:36 server-key.pem\ndrwxr-x---. 2 mysql mysql     4096 5Êúà   9 21:36 sys\n-rw-r-----. 1 mysql mysql 16777216 7Êúà   9 13:05 undo_001\n-rw-r-----. 1 mysql mysql 16777216 7Êúà   9 13:05 undo_002\n```\n\nËøô‰∏™Êï∞ÊçÆÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ÂíåÂ≠êÁõÆÂΩïÊØîËæÉÂ§öÔºåÈô§‰∫Ü `information_schema` Ëøô‰∏™Á≥ªÁªüÊï∞ÊçÆÂ∫ìÂ§ñÔºåÂÖ∂‰ªñÁöÑÊï∞ÊçÆÂ∫ìÂú® `Êï∞ÊçÆÁõÆÂΩï` ‰∏ãÈÉΩÊúâÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï„ÄÇ\n\n### 2.3 Ë°®Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\n\n#### 2.3.1 InnoDBÂ≠òÂÇ®ÂºïÊìéÊ®°Âºè\n\n**1„ÄÅË°®ÁªìÊûÑ**\n\n‰∏∫‰∫Ü‰øùÂ≠òË°®ÁªìÊûÑÔºå `InnoDB`Âú® `Êï∞ÊçÆÁõÆÂΩï` ‰∏ãÂØπÂ∫îÁöÑÊï∞ÊçÆÂ∫ìÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∫Ü‰∏Ä‰∏™‰∏ìÈó®Áî®‰∫é `ÊèèËø∞Ë°®ÁªìÊûÑÁöÑÊñá‰ª∂`ÔºåÊñá‰ª∂ÂêçÊòØËøôÊ†∑Ôºö`Ë°®Âêç.frm`\n\nÊØîÊñπËØ¥Êàë‰ª¨Âú® `test`Êï∞ÊçÆÂ∫ì‰∏ãÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫`test`ÁöÑË°®\n\nÈÇ£Âú®Êï∞ÊçÆÂ∫ì `test` ÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï‰∏ãÂ∞±‰ºöÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ `test.frm` ÁöÑÁî®‰∫éÊèèËø∞Ë°®ÁªìÊûÑÁöÑÊñá‰ª∂„ÄÇ`.frm` Êñá‰ª∂ÁöÑÊ†ºÂºèÂú®‰∏çÂêåÁöÑÂπ≥Âè∞‰∏äÈÉΩÊòØÁõ∏ÂêåÁöÑ„ÄÇËøô‰∏™ÂêéÁºÄÂêç‰∏∫ `.frm` ÊòØ‰ª• `‰∫åËøõÂà∂Ê†ºÂºè` Â≠òÂÇ®ÁöÑÔºåÊàë‰ª¨Áõ¥Êé•ÊâìÂºÄÊòØ‰π±Á†ÅÁöÑ„ÄÇ\n\n**2„ÄÅË°®‰∏≠Êï∞ÊçÆÂíåÁ¥¢Âºï**\n\n<font color=#880000>**‚ë†Á≥ªÁªüË°®Á©∫Èó¥Ôºàsystem tablespaceÔºâ**</font>\n\nÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåInnoDB ‰ºöÂú®Êï∞ÊçÆÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ `ibdata1`„ÄÅÂ§ßÂ∞è‰∏∫ `12M` ÁöÑÊñá‰ª∂ÔºåËøô‰∏™Êñá‰ª∂Â∞±ÊòØÂØπÂ∫îÁöÑ `Á≥ªÁªüË°®Á©∫Èó¥` Âú®Êñá‰ª∂Á≥ªÁªü‰∏äÁöÑË°®Á§∫„ÄÇÊÄé‰πàÊâç12MÔºü\n\nÊ≥®ÊÑèËøô‰∏™Êñá‰ª∂ÊòØ `Ëá™Êâ©Â±ïÊñá‰ª∂` ÔºåÂΩì‰∏çÂ§üÁî®ÁöÑÊó∂ÂÄôÂÆÉ‰ºöËá™Â∑±Â¢ûÂä†Êñá‰ª∂Â§ßÂ∞è„ÄÇ\n\nÂΩìÁÑ∂ÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥ËÆ©Á≥ªÁªüË°®Á©∫Èó¥ÂØπÂ∫îÊñá‰ª∂Á≥ªÁªü‰∏äÂ§ö‰∏™ÂÆûÈôÖÊñá‰ª∂ÔºåÊàñËÄÖ‰ªÖ‰ªÖËßâÂæóÂéüÊù•ÁöÑ `ibdata1` Ëøô‰∏™Êñá‰ª∂ÂêçÈöæÂê¨ÔºåÈÇ£ÂèØ‰ª•Âú®MySQLÂêØÂä®Êó∂ÈÖçÁΩÆÂØπÂ∫îÁöÑÊñá‰ª∂Ë∑ØÂæÑ‰ª•ÂèäÂÆÉ‰ª¨ÁöÑÂ§ßÂ∞èÔºåÊØîÂ¶ÇÊàë‰ª¨ËøôÊ†∑‰øÆÊîπ‰∏Ä‰∏ãmy.cnf ÈÖçÁΩÆÊñá‰ª∂:\n\n```mysql\n[server]\ninnodb_data_file_path=data1:512M;data2:512M:autoextend\n```\n\nËøôÊ†∑Âú®MySQLÂêØÂä®‰πãÂêéÂ∞±‰ºöÂàõÂª∫Ëøô‰∏§‰∏™512MÂ§ßÂ∞èÁöÑÊñá‰ª∂‰Ωú‰∏∫`Á≥ªÁªüË°®Á©∫Èó¥`ÔºåÂÖ∂‰∏≠ÁöÑ`autoextend`Ë°®ÊòéËøô‰∏§‰∏™Êñá‰ª∂Â¶ÇÊûú‰∏çÂ§üÁî®‰ºöËá™Âä®Êâ©Â±ïdata2Êñá‰ª∂ÁöÑÂ§ßÂ∞è„ÄÇ\n\nÈúÄË¶ÅÊ≥®ÊÑèÁöÑ‰∏ÄÁÇπÊòØ,==Âú®‰∏Ä‰∏™MySQLÊúçÂä°Âô®‰∏≠ÔºåÁ≥ªÁªüË°®Á©∫Èó¥Âè™Êúâ‰∏Ä‰ªΩ==„ÄÇ‰ªéMySQL5.5.7Âà∞MySQL5.6.6‰πãÈó¥ÁöÑÂêÑ‰∏™ÁâàÊú¨‰∏≠ÔºåÊàë‰ª¨**Ë°®‰∏≠ÁöÑÊï∞ÊçÆÈÉΩ‰ºöË¢´ÈªòËÆ§Â≠òÂÇ®Âà∞Ëøô‰∏™Á≥ªÁªüË°®Á©∫Èó¥**„ÄÇ\n\n**<font color=#880000>‚ë°Áã¨Á´ãË°®Á©∫Èó¥Ôºàfile-per-table tablespaceÔºâ</font>**\n\nÂú® MySQL 5.6.6 ‰ª•Âèä‰πãÂêéÁöÑÁâàÊú¨‰∏≠ÔºåInnoDB Âπ∂‰∏ç‰ºöÈªòËÆ§ÁöÑÊääÂêÑ‰∏™Ë°®ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Âà∞Á≥ªÁªüË°®Á©∫Èó¥‰∏≠ÔºåËÄåÊòØ‰∏∫ `ÊØè‰∏Ä‰∏™Ë°®Âª∫Á´ã‰∏Ä‰∏™Áã¨Á´ãË°®Á©∫Èó¥`Ôºå‰πüÂ∞±ÊòØËØ¥Êàë‰ª¨ÂàõÂª∫‰∫ÜÂ§öÂ∞ë‰∏™Ë°®ÔºåÂ∞±ÊúâÂ§öÂ∞ë‰∏™Áã¨Á´ãË°®Á©∫Èó¥„ÄÇ‰ΩøÁî® `Áã¨Á´ãË°®Á©∫Èó¥` Êù•Â≠òÂÇ®Ë°®Êï∞ÊçÆÁöÑËØùÔºå‰ºöÂú®ËØ•Ë°®ÊâÄÂ±ûÊï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Ë°®Á§∫ËØ•Áã¨Á´ãË°®Á©∫Èó¥ÁöÑÊñá‰ª∂ÔºåÊñá‰ª∂ÂêçÂíåË°®ÂêçÁõ∏ÂêåÔºåÂè™‰∏çËøáÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ `.ibd` ÁöÑÊâ©Â±ïÂêçËÄåÂ∑≤ÔºåÊâÄ‰ª•ÂÆåÊï¥ÁöÑÊñá‰ª∂ÂêçÁß∞ÈïøËøôÊ†∑Ôºö\n\n```sql\nË°®Âêç.ibd\n```\n\nÊØîÂ¶ÇÔºöÊàë‰ª¨‰ΩøÁî®‰∫Ü `Áã¨Á´ãË°®Á©∫Èó¥` ÂéªÂ≠òÂÇ®`test`Êï∞ÊçÆÂ∫ì‰∏ãÁöÑ `test` Ë°®ÁöÑËØùÔºåÈÇ£‰πàÂú®ËØ•Ë°®ÊâÄÂú®Êï∞ÊçÆÂ∫ì`atguigu`ÂØπÂ∫îÁöÑ test ÁõÆÂΩï‰∏ã‰ºö‰∏∫ test Ë°®ÂàõÂª∫Ëøô‰∏§‰∏™Êñá‰ª∂Ôºö\n\n```sql\ntest.frm\ntest.ibd\n```\n\nÂÖ∂‰∏≠ `test.ibd` Êñá‰ª∂Â∞±Áî®Êù•Â≠òÂÇ® `test` Ë°®‰∏≠ÁöÑÊï∞ÊçÆÂíåÁ¥¢ÂºïÔºõËÄå`text.frm` ÊèèËø∞Ë°®ÁöÑÁªìÊûÑ„ÄÇ\n\n**<font color=#880000>‚ë¢Á≥ªÁªüË°®Á©∫Èó¥‰∏éÁã¨Á´ãË°®Á©∫Èó¥ÁöÑËÆæÁΩÆ</font>**\n\nÊàë‰ª¨ÂèØ‰ª•Ëá™Â∑±ÊåáÂÆö‰ΩøÁî® `Á≥ªÁªüË°®Á©∫Èó¥` ËøòÊòØ `Áã¨Á´ãË°®Á©∫Èó¥` Êù•Â≠òÂÇ®Êï∞ÊçÆÔºåËøô‰∏™ÂäüËÉΩÁî±ÂêØÂä®ÂèÇÊï∞ `innodb_file_per_table` ÊéßÂà∂ÔºåÊØîÂ¶ÇËØ¥Êàë‰ª¨ÊÉ≥ÂàªÊÑèÂ∞ÜË°®Êï∞ÊçÆÈÉΩÂ≠òÂÇ®Âà∞ `Á≥ªÁªüË°®Á©∫Èó¥` Êó∂ÔºåÂèØ‰ª•Âú®ÂêØÂä®MySQLÊúçÂä°Âô®ÁöÑÊó∂ÂÄôËøôÊ†∑ÈÖçÁΩÆ:\n\n```sql\n[server]\ninnodb_file_per_table=0 # 0:‰ª£Ë°®‰ΩøÁî®Á≥ªÁªüË°®Á©∫Èó¥; 1:‰ª£Ë°®‰ΩøÁî®Áã¨Á´ãË°®Á©∫Èó¥\n```\n\nÈªòËÆ§ÊÉÖÂÜµ:\n\n```sql\nmysql> show variables like 'innodb_file_per_table';\n+-----------------------+-------+\n| Variable_name         | Value |\n+-----------------------+-------+\n| innodb_file_per_table | ON    |\n+-----------------------+-------+\n1 row in set (0.01 sec) # onÔºö‰ª£Ë°®Áã¨Á´ãË°®Á©∫Èó¥\n```\n\n**<font color=#880000>‚ë£ÂÖ∂‰ªñÁ±ªÂûãÁöÑË°®Á©∫Èó¥</font>**\n\nÈöèÁùÄMySQLÁöÑÂèëÂ±ïÔºåÈô§‰∫Ü‰∏äËø∞‰∏§ÁßçËÄÅÁâåË°®Á©∫Èó¥‰πãÂ§ñÔºåÁé∞Âú®ËøòÊñ∞ÊèêÂá∫‰∫Ü‰∏Ä‰∫õ‰∏çÂêåÁ±ªÂûãÁöÑË°®Á©∫Èó¥ÔºåÊØîÂ¶ÇÈÄöÁî®Ë°®Á©∫Èó¥Ôºàgeneral tablespaceÔºâ„ÄÅ‰∏¥Êó∂Ë°®Á©∫Èó¥Ôºàtemporary tablespaceÔºâÁ≠â„ÄÇ\n\n**3„ÄÅÂõæËß£**\n\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733845.png)\n\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733587.png)\n\n**4„ÄÅÁñëÈóÆ**\n\n`.frm` Âú®MySQL8‰∏≠‰∏çÂ≠òÂú®‰∫ÜÔºåÂéªÂì™Èáå‰∫ÜÔºü\n\nËøôÂ∞±ÈúÄË¶ÅËß£Êûê `ibd Êñá‰ª∂`„ÄÇOracleÂÆòÊñπÂ∞Ü `frmÊñá‰ª∂` ÁöÑ‰ø°ÊÅØÂèäÊõ¥Â§ö‰ø°ÊÅØÁßªÂä®Âà∞Âè´ÂÅöÂ∫èÂàóÂåñÂ≠óÂÖ∏‰ø°ÊÅØÔºàSerialized Dictionary Information,SDIÔºâÔºåSDI Ë¢´ÂÜôÂú® ibd Êñá‰ª∂ÂÜÖÈÉ®ÔºåMySQL 8.0 Â±û‰∫é Oracle Êóó‰∏ãÔºåÂêåÁêÜ„ÄÇ\n\n‰∏∫‰∫Ü‰ªé IBD Êñá‰ª∂‰∏≠ÊèêÂèñ SDI ‰ø°ÊÅØÔºåOracle Êèê‰æõ‰∫Ü‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫è ibd2sdi\n\nËøô‰∏™Â∑•ÂÖ∑‰∏çÈúÄË¶Å‰∏ãËΩΩÔºåMySQL8Ëá™Â∏¶ÁöÑÊúâÔºåÂè™ÈúÄË¶Å‰Ω†ÈÖçÂ•ΩÁéØÂ¢ÉÂèòÈáèÂ∞±ËÉΩÂà∞Â§ÑÁî®„ÄÇ\n\nÊü•ÁúãË°®ÁªìÊûÑÔºöÂà∞Â≠òÂÇ®ibdÊñá‰ª∂ÁöÑÁõÆÂΩï‰∏ãÔºåÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§\n\n```sql\nibd2sdi --dump-file=student.txt student.ibd\n```\n\nËøôÊ†∑ ibd2sdi Â∞±‰ºöÊää `xxx.ibd` ÈáåÂ≠òÂÇ®ÁöÑË°®ÁªìÊûÑ‰ª• json ÁöÑÊ†ºÂºè‰øùÂ≠òÂú® student.txt ‰∏≠\n\n\n\n#### 2.3.2 MyISAM Â≠òÂÇ®ÂºïÊìéÊ®°Âºè\n\n**1„ÄÅË°®ÁªìÊûÑ**\n\nÂú®Â≠òÂÇ®Ë°®ÁªìÊûÑÊñπÈù¢Ôºå `MyISAM` Âíå `InnoDB` ‰∏ÄÊ†∑Ôºå‰πüÊòØÂú® `Êï∞ÊçÆÁõÆÂΩï` ‰∏ãÂØπÂ∫îÁöÑÊï∞ÊçÆÂ∫ìÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∫Ü‰∏Ä‰∏™‰∏ì Èó®Áî®‰∫éÊèèËø∞Ë°®ÁªìÊûÑÁöÑÊñá‰ª∂Ôºö`Ë°®Âêç.frm`\n\n**2„ÄÅË°®‰∏≠Êï∞ÊçÆÂíåÁ¥¢Âºï**\n\nÂú® MyISAM ‰∏≠ÁöÑÁ¥¢ÂºïÂÖ®ÈÉ®ÈÉΩÊòØ `‰∫åÁ∫ßÁ¥¢Âºï` ÔºåËØ•Â≠òÂÇ®ÂºïÊìéÁöÑ `Êï∞ÊçÆÂíåÁ¥¢ÂºïÊòØÂàÜÂºÄÂ≠òÊîæ` ÁöÑ„ÄÇÊâÄ‰ª•Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠‰πüÊòØ‰ΩøÁî®‰∏çÂêåÁöÑÊñá‰ª∂Êù•Â≠òÂÇ®Êï∞ÊçÆÊñá‰ª∂ÂíåÁ¥¢ÂºïÊñá‰ª∂ÔºåÂêåÊó∂Ë°®Êï∞ÊçÆÈÉΩÂ≠òÊîæÂú®ÂØπÂ∫îÁöÑÊï∞ÊçÆÂ∫ìÂ≠êÁõÆÂΩï‰∏ã„ÄÇÂÅáÂ¶Ç `test` Ë°®‰ΩøÁî® MyISAM Â≠òÂÇ®ÂºïÊìéÁöÑËØùÔºåÈÇ£‰πàÂú®ÂÆÉÊâÄÂú®Êï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑ `test` ÁõÆÂΩï‰∏ã‰ºö‰∏∫ test Ë°®ÂàõÂª∫Ëøô‰∏â‰∏™Êñá‰ª∂Ôºö\n\n- `test.frm` Â≠òÂÇ®Ë°®ÁªìÊûÑ\n- `test.MYD` Â≠òÂÇ®Êï∞ÊçÆ (MYData)\n- `test.MYI` Â≠òÂÇ®Á¥¢Âºï (MYIndex)\n\n**3„ÄÅÂõæËß£**\n\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091734468.png)\n\n### 2.4 Â∞èÁªì\n\n‰∏æ‰æãÔºö`Êï∞ÊçÆÂ∫ì a` Ôºå `Ë°®b` „ÄÇ\n\n1. Â¶ÇÊûúË°® b ÈááÁî® `InnoDB` Ôºådata/a ‰∏≠‰ºö‰∫ßÁîü 1 ‰∏™ÊàñËÄÖ 2 ‰∏™Êñá‰ª∂:\n\n   - `b.frm`ÔºöÊèèËø∞Ë°®ÁªìÊûÑÊñá‰ª∂ÔºåÂ≠óÊÆµÈïøÂ∫¶Á≠â\n   - Â¶ÇÊûúÈááÁî® `Á≥ªÁªüË°®Á©∫Èó¥` Ê®°ÂºèÁöÑÔºåÊï∞ÊçÆ‰ø°ÊÅØÂíåÁ¥¢Âºï‰ø°ÊÅØÈÉΩÂ≠òÂÇ®Âú® `ibdata1` ‰∏≠\n   - Â¶ÇÊûúÈááÁî® `Áã¨Á´ãË°®Á©∫Èó¥` Â≠òÂÇ®Ê®°ÂºèÔºådata/a‰∏≠Ëøò‰ºö‰∫ßÁîü `b.ibd` Êñá‰ª∂ÔºàÂ≠òÂÇ®Êï∞ÊçÆ‰ø°ÊÅØÂíåÁ¥¢Âºï‰ø°ÊÅØÔºâ\n\n   > MySQL 5.7 ‰∏≠‰ºöÂú® data/a ÁöÑÁõÆÂΩï‰∏ãÁîüÊàê `db.opt` Êñá‰ª∂Áî®‰∫é‰øùÂ≠òÊï∞ÊçÆÂ∫ìÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆ„ÄÇÊØîÂ¶ÇÔºöÂ≠óÁ¨¶ÈõÜ„ÄÅÊØîËæÉËßÑÂàô„ÄÇËÄå MySQL 8.0 ‰∏çÂÜçÊèê‰æõ db.opt Êñá‰ª∂„ÄÇ\n   >\n   > MySQL 8.0 ‰∏≠ ‰∏çÂÜçÂçïÁã¨Êèê‰æõ `b.frm`ÔºåËÄåÊòØÂêàÂπ∂Âú® `b.ibd` Êñá‰ª∂‰∏≠„ÄÇ\n\n2. Â¶ÇÊûúË°® b ÈááÁî® `MyISAM` Ôºådata/a‰∏≠‰ºö‰∫ßÁîü 3 ‰∏™Êñá‰ª∂:\n\n   - MySQL5.7 ‰∏≠ `b.frm` ÔºöÊèèËø∞Ë°®ÁªìÊûÑÊñá‰ª∂ÔºåÂ≠óÊÆµÈïøÂ∫¶Á≠â„ÄÇ\n   - MySQL8.0 ‰∏≠ `b.xxx.sdi` ÔºöÊèèËø∞Ë°®ÁªìÊûÑÊñá‰ª∂ÔºåÂ≠óÊÆµÈïøÂ∫¶Á≠â\n   - `b.MYD` (MYData)ÔºöÊï∞ÊçÆ‰ø°ÊÅØÊñá‰ª∂ÔºåÂ≠òÂÇ®Êï∞ÊçÆ‰ø°ÊÅØ(Â¶ÇÊûúÈááÁî®Áã¨Á´ãË°®Â≠òÂÇ®Ê®°Âºè)\n   - `b.MYI` (MYIndex)ÔºöÂ≠òÊîæÁ¥¢Âºï‰ø°ÊÅØÊñá‰ª∂\n\n### 2.5 ËßÜÂõæÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\n\nÊàë‰ª¨Áü•ÈÅìMySQL‰∏≠ÁöÑ`ËßÜÂõæ`ÂÖ∂ÂÆûÊòØ`ËôöÊãüÁöÑË°®`Ôºå‰πüÂ∞±ÊòØÊüê‰∏™Êü•ËØ¢ËØ≠Âè•ÁöÑ‰∏Ä‰∏Ä‰∏™Âà´ÂêçËÄåÂ∑≤ÔºåÊâÄ‰ª•Âú®Â≠òÂÇ®ËßÜÂõæÁöÑÊó∂ÂÄôÊòØ‰∏çË¶ÅÂ≠òÂÇ®ÁúüÂÆûÁöÑÊï∞ÊçÆÁöÑÔºåÂè™ÈúÄË¶ÅÊääÂÆÉÁöÑÁªìÊûÑÂ≠òÂÇ®Ëµ∑Êù•Â∞±Ë°å‰∫Ü„ÄÇÂíåË°®‰∏ÄÊ†∑ÔºåÊèèËø∞ËßÜÂõæÁªìÊûÑÁöÑÊñá‰ª∂‰πü‰ºöË¢´Â≠òÂÇ®Âà∞ÊâÄÂ±ûÊï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï‰∏ãËæπÔºåÂè™‰ºöÂ≠òÂÇ®‰∏Ä‰∏™`ËßÜÂõæÂêç. frm`ÁöÑÊñá‰ª∂„ÄÇÂ¶Ç‰∏ãÂõæ‰∏≠ÁöÑ: `emp_details_view.frm`\n\n![image-20220709125100055](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091735198.png)\n\n### 2.6 ÂÖ∂‰ªñÁöÑÊñá‰ª∂\n\nÈô§‰∫ÜÊàë‰ª¨‰∏äËæπËØ¥ÁöÑËøô‰∫õÁî®Êà∑Ëá™Â∑±Â≠òÂÇ®ÁöÑÊï∞ÊçÆ‰ª•Â§ñÔºå`Êï∞ÊçÆÁõÆÂΩï`‰∏ãËøòÂåÖÊã¨‰∏∫‰∫ÜÊõ¥Â•ΩËøêË°åÁ®ãÂ∫èÁöÑ‰∏Ä‰∫õÈ¢ùÂ§ñÊñá‰ª∂,‰∏ªË¶ÅÂåÖÊã¨ËøôÂá†ÁßçÁ±ªÂûãÁöÑÊñá‰ª∂:\n\n- **ÊúçÂä°Âô®ËøõÁ®ãÊñá‰ª∂**\n\n  Êàë‰ª¨Áü•ÈÅìÊØèËøêË°å‰∏Ä‰∏™MySQLÊúçÂä°Âô®Á®ãÂ∫è,ÈÉΩÊÑèÂë≥ÁùÄÂêØÂä®‰∏Ä‰∏™ËøõÁ®ã„ÄÇMySQLÊúçÂä°Âô®‰ºöÊääËá™Â∑±ÁöÑËøõÁ®ãIDÂÜôÂÖ•Âà∞‰∏Ä‰∏™Êñá‰ª∂‰∏≠„ÄÇ\n\n- **ÊúçÂä°Âô®Êó•ÂøóÊñá‰ª∂**\n\n  Âú®ÊúçÂä°Âô®ËøêË°åËøáÁ®ã‰∏≠Ôºå‰ºö‰∫ßÁîüÂêÑÁßçÂêÑÊ†∑ÁöÑÊó•ÂøóÔºåÊØîÂ¶ÇÂ∏∏ËßÑÁöÑÊü•ËØ¢Êó•Âøó„ÄÅÈîôËØØÊó•Âøó„ÄÅ‰∫åËøõÂà∂Êó•Âøó„ÄÅredoÊó•ÂøóÁ≠â„ÄÇËøô‰∫õÊó•ÂøóÂêÑÊúâÂêÑÁöÑÁî®ÈÄî„ÄÇÂêéÈù¢ËÆ≤Ëß£„ÄÇ\n\n- **ÈªòËÆ§/Ëá™Âä®ÁîüÊàêÁöÑSSLÂíåRSAËØÅ‰π¶ÂíåÂØÜÈí•Êñá‰ª∂**\n\n  ‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®ÂÆâÂÖ®ÈÄö‰ø°ËÄåÂàõÂª∫ÁöÑ‰∏Ä‰∫õÊñá‰ª∂„ÄÇ","slug":"MySQLÁöÑÊï∞ÊçÆÁõÆÂΩï","published":1,"updated":"2024-04-01T15:42:18.704Z","comments":1,"layout":"post","photos":[],"_id":"cluh5piv70001gs2vdm5f7eox","content":"<h2 id=\"1-MySQL8ÁöÑ‰∏ªË¶ÅÁõÆÂΩïÁªìÊûÑ\"><a href=\"#1-MySQL8ÁöÑ‰∏ªË¶ÅÁõÆÂΩïÁªìÊûÑ\" class=\"headerlink\" title=\"1. MySQL8ÁöÑ‰∏ªË¶ÅÁõÆÂΩïÁªìÊûÑ\"></a>1. MySQL8ÁöÑ‰∏ªË¶ÅÁõÆÂΩïÁªìÊûÑ</h2><p>‰ª• Linux Á≥ªÁªü‰∏∫‰æãËøõË°åËÆ≤Ëß£Ôºö</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xue ~]# find / -name mysql</span><br></pre></td></tr></table></figure>\n\n<p>ÂÆâË£ÖÂ•ΩMySQL 8‰πãÂêéÔºåÊàë‰ª¨Êü•ÁúãÂ¶Ç‰∏ãÁöÑÁõÆÂΩïÁªìÊûÑ:</p>\n<h3 id=\"1-1-Êï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑ\"><a href=\"#1-1-Êï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑ\" class=\"headerlink\" title=\"1.1 Êï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑ\"></a>1.1 Êï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑ</h3><p>&#x3D;&#x3D;MySQLÊï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑÔºö&#x3D;&#x3D;<code>/var/lib/mysql/</code></p>\n<p>MySQLÊúçÂä°Âô®Á®ãÂ∫èÂú®ÂêØÂä®Êó∂‰ºöÂà∞Êñá‰ª∂Á≥ªÁªüÁöÑÊüê‰∏™ÁõÆÂΩï‰∏ãÂä†ËΩΩ‰∏Ä‰∫õÊñá‰ª∂Ôºå‰πãÂêéÂú®ËøêË°åËøáÁ®ã‰∏≠‰∫ßÁîüÁöÑÊï∞ÊçÆ‰πüÈÉΩ‰ºöÂ≠òÂÇ®Âà∞Ëøô‰∏™ÁõÆÂΩï‰∏ãÁöÑÊüê‰∫õÊñá‰ª∂‰∏≠ÔºåËøô‰∏™ÁõÆÂΩïÂ∞±Áß∞‰∏∫ <code>Êï∞ÊçÆÁõÆÂΩï</code>„ÄÇ</p>\n<p>MySQLÊääÊï∞ÊçÆÈÉΩÂ≠òÂà∞Âì™‰∏™Ë∑ØÂæÑ‰∏ãÂë¢ÔºüÂÖ∂ÂÆû <code>Êï∞ÊçÆÁõÆÂΩï</code> ÂØπÂ∫îËøô‰∏Ä‰∏™Á≥ªÁªüÂèòÈáè <code>datadir</code>ÔºåÊàë‰ª¨Âú®‰ΩøÁî®ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Âô®Âª∫Á´ãËøûÊé•‰πãÂêéÊü•ÁúãËøô‰∏™Á≥ªÁªüÂèòÈáèÁöÑÂÄºÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show variables like &#x27;datadir&#x27;;</span><br><span class=\"line\">+---------------+-----------------+</span><br><span class=\"line\">| Variable_name | Value           |</span><br><span class=\"line\">+---------------+-----------------+</span><br><span class=\"line\">| datadir       | /var/lib/mysql/ |</span><br><span class=\"line\">+---------------+-----------------+</span><br><span class=\"line\">1 row in set (0.04 sec)</span><br></pre></td></tr></table></figure>\n\n<p>‰ªéÁªìÊûú‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåÂú®ÊàëÁöÑËÆ°ÁÆóÊú∫‰∏äMySQLÁöÑÊï∞ÊçÆÁõÆÂΩïÂ∞±ÊòØ <code>/var/lib/mysql</code>&#x2F; „ÄÇ</p>\n<h3 id=\"1-2-Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩï\"><a href=\"#1-2-Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩï\" class=\"headerlink\" title=\"1.2 Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩï\"></a>1.2 Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩï</h3><p>&#x3D;&#x3D;Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩïÔºö&#x2F;usr&#x2F;binÔºàmysqladmin„ÄÅmysqlbinlog„ÄÅmysqldumpÁ≠âÂëΩ‰ª§ÔºâÂíå&#x2F;usr&#x2F;sbin&#x3D;&#x3D;„ÄÇ</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733159.png\" alt=\"image-20220709112725420\"></p>\n<h3 id=\"1-3-ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩï\"><a href=\"#1-3-ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩï\" class=\"headerlink\" title=\"1.3 ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩï\"></a>1.3 <strong>ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩï</strong></h3><p>&#x3D;&#x3D;ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩïÔºö&#x2F;usr&#x2F;share&#x2F;mysql-8.0ÔºàÂëΩ‰ª§ÂèäÈÖçÁΩÆÊñá‰ª∂ÔºâÔºå&#x2F;etc&#x2F;mysqlÔºàÂ¶Ç my.cnfÔºâ&#x3D;&#x3D;</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733524.png\" alt=\"image-20220709112825432\"></p>\n<h2 id=\"2-Êï∞ÊçÆÂ∫ìÂíåÊñá‰ª∂Á≥ªÁªüÁöÑÂÖ≥Á≥ª\"><a href=\"#2-Êï∞ÊçÆÂ∫ìÂíåÊñá‰ª∂Á≥ªÁªüÁöÑÂÖ≥Á≥ª\" class=\"headerlink\" title=\"2. Êï∞ÊçÆÂ∫ìÂíåÊñá‰ª∂Á≥ªÁªüÁöÑÂÖ≥Á≥ª\"></a>2. Êï∞ÊçÆÂ∫ìÂíåÊñá‰ª∂Á≥ªÁªüÁöÑÂÖ≥Á≥ª</h2><p>ÂÉè<code>InnoDB</code>„ÄÅ<code>MyISAM </code>ËøôÊ†∑ÁöÑÂ≠òÂÇ®ÂºïÊìéÈÉΩÊòØÊääË°®Â≠òÂÇ®Âú®Á£ÅÁõò‰∏äÁöÑÔºåÊìç‰ΩúÁ≥ªÁªüÁî®Êù•ÁÆ°ÁêÜÁ£ÅÁõòÁöÑÁªìÊûÑË¢´Áß∞‰∏∫&#x3D;&#x3D;Êñá‰ª∂Á≥ªÁªü&#x3D;&#x3D;ÔºåÊâÄ‰ª•Áî®‰∏ì‰∏ö‰∏ÄÁÇπÁöÑËØùÊù•Ë°®Ëø∞Â∞±ÊòØ:ÂÉè<strong>InnoDB„ÄÅMyISAM</strong> ËøôÊ†∑ÁöÑÂ≠òÂÇ®ÂºïÊìéÈÉΩÊòØÊää&#x3D;&#x3D;Ë°®Â≠òÂÇ®Âú®Êñá‰ª∂Á≥ªÁªü‰∏ä&#x3D;&#x3D;ÁöÑ„ÄÇÂΩìÊàë‰ª¨ÊÉ≥ËØªÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåËøô‰∫õÂ≠òÂÇ®ÂºïÊìé‰ºö‰ªéÊñá‰ª∂Á≥ªÁªü‰∏≠ÊääÊï∞ÊçÆËØªÂá∫Êù•ËøîÂõûÁªôÊàë‰ª¨ÔºåÂΩìÊàë‰ª¨ÊÉ≥ÂÜôÂÖ•Êï∞ÊçÆÁöÑÊó∂ÂÄô,Ëøô‰∫õÂ≠òÂÇ®ÂºìÊìé‰ºöÊääËøô‰∫õÊï∞ÊçÆÂèàÂÜôÂõûÊñá‰ª∂Á≥ªÁªü„ÄÇÊú¨Á´†Â≠¶‰π†‰∏Ä‰∏ã<code>InnoDB</code>Âíå<code>MyISAM</code>Ëøô‰∏§‰∏™Â≠òÂÇ®Âºì|ÊìéÁöÑÊï∞ÊçÆÂ¶Ç‰ΩïÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠Â≠òÂÇ®„ÄÇ</p>\n<h3 id=\"2-1-Êü•ÁúãÈªòËÆ§Êï∞ÊçÆÂ∫ì\"><a href=\"#2-1-Êü•ÁúãÈªòËÆ§Êï∞ÊçÆÂ∫ì\" class=\"headerlink\" title=\"2.1 Êü•ÁúãÈªòËÆ§Êï∞ÊçÆÂ∫ì\"></a>2.1 Êü•ÁúãÈªòËÆ§Êï∞ÊçÆÂ∫ì</h3><p>Êü•Áúã‰∏Ä‰∏ãÂú®ÊàëÁöÑËÆ°ÁÆóÊú∫‰∏äÂΩìÂâçÊúâÂì™‰∫õÊï∞ÊçÆÂ∫ì:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SHOW</span> DATABASES; </span><br></pre></td></tr></table></figure>\n\n<p>ÂèØ‰ª•ÁúãÂà∞Êúâ 4 ‰∏™Êï∞ÊçÆÂ∫ìÊòØÂ±û‰∫é MySQL Ëá™Â∏¶ÁöÑÁ≥ªÁªüÊï∞ÊçÆÂ∫ì„ÄÇ</p>\n<ul>\n<li><p><code>mysql</code></p>\n<p>MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊ†∏ÂøÉÊï∞ÊçÆÂ∫ìÔºåÂÆÉÂ≠òÂÇ®‰∫ÜMySQLÁöÑÁî®Êà∑Ë¥¶Êà∑ÂíåÊùÉÈôê‰ø°ÊÅØÔºå‰∏Ä‰∫õÂ≠òÂÇ®ËøáÁ®ã„ÄÅ‰∫ã‰ª∂ÁöÑÂÆö ‰πâ‰ø°ÊÅØÔºå‰∏Ä‰∫õËøêË°åËøáÁ®ã‰∏≠‰∫ßÁîüÁöÑÊó•Âøó‰ø°ÊÅØÔºå‰∏Ä‰∫õÂ∏ÆÂä©‰ø°ÊÅØ‰ª•ÂèäÊó∂Âå∫‰ø°ÊÅØÁ≠â„ÄÇ</p>\n</li>\n<li><p><code>information_schema</code></p>\n<p>MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊï∞ÊçÆÂ∫ìÔºåËøô‰∏™Êï∞ÊçÆÂ∫ì‰øùÂ≠òÁùÄ MySQL ÊúçÂä°Âô® <code>Áª¥Êä§ÁöÑÊâÄÊúâÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÁöÑ‰ø°ÊÅØ</code> ÔºåÊØîÂ¶ÇÊúâÂì™‰∫õË°®„ÄÅÂì™‰∫õËßÜÂõæ„ÄÅÂì™‰∫õËß¶ÂèëÂô®„ÄÅÂì™‰∫õÂàó„ÄÅÂì™‰∫õÁ¥¢Âºï„ÄÇËøô‰∫õ‰ø°ÊÅØÂπ∂‰∏çÊòØÁúüÂÆûÁöÑÁî®Êà∑Êï∞ÊçÆÔºåËÄåÊòØ‰∏Ä‰∫õÊèèËø∞ÊÄß‰ø°ÊÅØÔºåÊúâÊó∂ÂÄô‰πüÁß∞‰πã‰∏∫ <code>ÂÖÉÊï∞ÊçÆ</code> „ÄÇÂú®Á≥ªÁªüÊï∞ÊçÆÂ∫ì <code>information_schema</code> ‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∫õ‰ª• <code>innodb_sys</code> ÂºÄÂ§¥ÁöÑË°®ÔºåÁî®‰∫éË°®Á§∫ÂÜÖÈÉ®Á≥ªÁªüË°®„ÄÇ</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> USE information_schema;</span><br><span class=\"line\">Database changed</span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SHOW</span> TABLES <span class=\"keyword\">LIKE</span> <span class=\"string\">&#x27;innodb_sys%&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Tables_in_information_schema (innodb_sys<span class=\"operator\">%</span>) <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_DATAFILES                       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_VIRTUAL                         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_INDEXES                         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_TABLES                          <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_FIELDS                          <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_TABLESPACES                     <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_FOREIGN_COLS                    <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_COLUMNS                         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_FOREIGN                         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_TABLESTATS                      <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------------------------------+</span></span><br><span class=\"line\"><span class=\"number\">10</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>performance_schema</code></p>\n<p>MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊï∞ÊçÆÂ∫ìÔºåËøô‰∏™Êï∞ÊçÆÂ∫ìÈáå‰∏ªË¶Å‰øùÂ≠ò MySQL ÊúçÂä°Âô®ËøêË°åËøáÁ®ã‰∏≠ÁöÑ‰∏Ä‰∫õÁä∂ÊÄÅ‰ø°ÊÅØÔºåÂèØ‰ª•Áî®Êù• <code>ÁõëÊéß MySQL ÊúçÂä°ÁöÑÂêÑÁ±ªÊÄßËÉΩÊåáÊ†á</code> „ÄÇÂåÖÊã¨ÁªüËÆ°ÊúÄËøëÊâßË°å‰∫ÜÂì™‰∫õËØ≠Âè•ÔºåÂú®ÊâßË°åËøáÁ®ãÁöÑÊØè‰∏™Èò∂ÊÆµÈÉΩËä±Ë¥π‰∫ÜÂ§öÈïøÊó∂Èó¥ÔºåÂÜÖÂ≠òÁöÑ‰ΩøÁî®ÊÉÖÂÜµÁ≠â‰ø°ÊÅØ„ÄÇ</p>\n</li>\n<li><p><code>sys</code></p>\n<p>MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊï∞ÊçÆÂ∫ìÔºåËøô‰∏™Êï∞ÊçÆÂ∫ì‰∏ªË¶ÅÊòØÈÄöËøá <code>ËßÜÂõæ</code> ÁöÑÂΩ¢ÂºèÊää <code>information_schema</code> Âíå <code>performance_schema</code> ÁªìÂêàËµ∑Êù•ÔºåÂ∏ÆÂä©Á≥ªÁªüÁÆ°ÁêÜÂëòÂíåÂºÄÂèë‰∫∫ÂëòÁõëÊéß MySQL ÁöÑÊäÄÊúØÊÄßËÉΩ„ÄÇ</p>\n</li>\n</ul>\n<h3 id=\"2-2-Êï∞ÊçÆÂ∫ìÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\"><a href=\"#2-2-Êï∞ÊçÆÂ∫ìÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\" class=\"headerlink\" title=\"2.2 Êï∞ÊçÆÂ∫ìÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\"></a>2.2 Êï∞ÊçÆÂ∫ìÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫</h3><p>‰ΩøÁî®<code>CREATE DATABASE Êï∞ÊçÆÂ∫ìÂêç</code>ËØ≠Âè•ÂàõÂª∫‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÁöÑÊó∂ÂÄôÔºå Âú®Êñá‰ª∂Á≥ªÁªü‰∏äÂÆûÈôÖÂèëÁîü‰∫Ü‰ªÄ‰πàÂë¢?ÂÖ∂ÂÆûÂæàÁÆÄÂçï,ÊØè‰∏™Êï∞ÊçÆÂ∫ìÈÉΩÂØπÂ∫îÊï∞ÊçÆÁõÆÂΩï‰∏ãÁöÑ‰∏Ä‰∏™Â≠êÁõÆÂΩïÔºåÊàñËÄÖËØ¥ÂØπÂ∫î‰∏Ä‰∏™Êñá‰ª∂Â§πÔºåÊØèÂΩìÊñ∞Âª∫‰∏Ä ‰∏™Êï∞ÊçÆÂ∫ìÊó∂, MySQL‰ºöÂ∏ÆÊàë‰ª¨ÂÅöËøô‰∏§‰ª∂‰∫ãÂÑø:</p>\n<ol>\n<li>Âú®<code>Êï∞ÊçÆÁõÆÂΩï</code>‰∏ãÂàõÂª∫‰∏Ä‰∏™ÂíåÊï∞ÊçÆÂ∫ìÂêçÂêåÂêçÁöÑÂ≠êÁõÆÂΩï„ÄÇ</li>\n<li>Âú®‰∏éËØ•Êï∞ÊçÆÂ∫ìÂêçÂêåÂêçÁöÑÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫<code> db.opt</code>ÁöÑÊñá‰ª∂(‰ªÖÈôêMySQL5.7Âèä‰πãÂâçÁâàÊú¨)ÔºåËøô‰∏™Êñá‰ª∂‰∏≠ÂåÖÂê´‰∫Ü<code>ËØ•Êï∞ÊçÆÂ∫ìÁöÑÂêÑÁßçÂ±ûÊÄß</code>ÔºåÊØîÂ¶ÇËØ•Êï∞ÊçÆÂ∫ìÁöÑÂ≠óÁ¨¶ÈõÜÂíåÊØîËæÉËßÑÂàô„ÄÇ</li>\n</ol>\n<p>Êàë‰ª¨ÂÜçÁúã‰∏Ä‰∏ãÊàëÁöÑËÆ°ÁÆóÊú∫‰∏äÁöÑÊï∞ÊçÆÁõÆÂΩï‰∏ãÁöÑÂÜÖÂÆπ:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"variable\">@hadoop102</span> <span class=\"operator\">~</span>]# cd <span class=\"operator\">/</span>var<span class=\"operator\">/</span>lib<span class=\"operator\">/</span>mysql</span><br><span class=\"line\">[root<span class=\"variable\">@hadoop102</span> mysql]# ll</span><br><span class=\"line\">ÊÄªÁî®Èáè <span class=\"number\">188880</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql       56 5Êúà   9 21:36 auto.cnf</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql      156 6Êúà  13 18:50 binlog.000005</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql      156 7Êúà   9 13:05 binlog.000006</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql      156 7Êúà   9 13:05 binlog.000007</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql       48 7Êúà   9 13:05 binlog.index</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"comment\">-------. 1 mysql mysql     1676 5Êúà   9 21:36 ca-key.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">--r--. 1 mysql mysql     1112 5Êúà   9 21:36 ca.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">--r--. 1 mysql mysql     1112 5Êúà   9 21:36 client-cert.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"comment\">-------. 1 mysql mysql     1680 5Êúà   9 21:36 client-key.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql   196608 7Êúà   9 13:05 #ib_16384_0.dblwr</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql  8585216 5Êúà   9 21:36 #ib_16384_1.dblwr</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql     3357 5Êúà  10 22:47 ib_buffer_pool</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 12582912 7Êúà   9 13:05 ibdata1</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 50331648 7Êúà   9 13:05 ib_logfile0</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 50331648 5Êúà   9 21:36 ib_logfile1</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 12582912 7Êúà   9 13:05 ibtmp1</span></span><br><span class=\"line\">drwxr<span class=\"operator\">-</span>x<span class=\"comment\">---. 2 mysql mysql     4096 7Êúà   9 13:05 #innodb_temp</span></span><br><span class=\"line\">drwxr<span class=\"operator\">-</span>x<span class=\"comment\">---. 2 mysql mysql     4096 5Êúà   9 21:36 mysql</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 25165824 7Êúà   9 13:05 mysql.ibd</span></span><br><span class=\"line\">srwxrwxrwx. <span class=\"number\">1</span> mysql mysql        <span class=\"number\">0</span> <span class=\"number\">7</span>Êúà   <span class=\"number\">9</span> <span class=\"number\">13</span>:<span class=\"number\">05</span> mysql.sock</span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"comment\">-------. 1 mysql mysql        5 7Êúà   9 13:05 mysql.sock.lock</span></span><br><span class=\"line\">drwxr<span class=\"operator\">-</span>x<span class=\"comment\">---. 2 mysql mysql     4096 5Êúà   9 21:36 performance_schema</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"comment\">-------. 1 mysql mysql     1680 5Êúà   9 21:36 private_key.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">--r--. 1 mysql mysql      452 5Êúà   9 21:36 public_key.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">--r--. 1 mysql mysql     1112 5Êúà   9 21:36 server-cert.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"comment\">-------. 1 mysql mysql     1680 5Êúà   9 21:36 server-key.pem</span></span><br><span class=\"line\">drwxr<span class=\"operator\">-</span>x<span class=\"comment\">---. 2 mysql mysql     4096 5Êúà   9 21:36 sys</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 16777216 7Êúà   9 13:05 undo_001</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 16777216 7Êúà   9 13:05 undo_002</span></span><br></pre></td></tr></table></figure>\n\n<p>Ëøô‰∏™Êï∞ÊçÆÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ÂíåÂ≠êÁõÆÂΩïÊØîËæÉÂ§öÔºåÈô§‰∫Ü <code>information_schema</code> Ëøô‰∏™Á≥ªÁªüÊï∞ÊçÆÂ∫ìÂ§ñÔºåÂÖ∂‰ªñÁöÑÊï∞ÊçÆÂ∫ìÂú® <code>Êï∞ÊçÆÁõÆÂΩï</code> ‰∏ãÈÉΩÊúâÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï„ÄÇ</p>\n<h3 id=\"2-3-Ë°®Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\"><a href=\"#2-3-Ë°®Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\" class=\"headerlink\" title=\"2.3 Ë°®Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\"></a>2.3 Ë°®Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫</h3><h4 id=\"2-3-1-InnoDBÂ≠òÂÇ®ÂºïÊìéÊ®°Âºè\"><a href=\"#2-3-1-InnoDBÂ≠òÂÇ®ÂºïÊìéÊ®°Âºè\" class=\"headerlink\" title=\"2.3.1 InnoDBÂ≠òÂÇ®ÂºïÊìéÊ®°Âºè\"></a>2.3.1 InnoDBÂ≠òÂÇ®ÂºïÊìéÊ®°Âºè</h4><p><strong>1„ÄÅË°®ÁªìÊûÑ</strong></p>\n<p>‰∏∫‰∫Ü‰øùÂ≠òË°®ÁªìÊûÑÔºå <code>InnoDB</code>Âú® <code>Êï∞ÊçÆÁõÆÂΩï</code> ‰∏ãÂØπÂ∫îÁöÑÊï∞ÊçÆÂ∫ìÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∫Ü‰∏Ä‰∏™‰∏ìÈó®Áî®‰∫é <code>ÊèèËø∞Ë°®ÁªìÊûÑÁöÑÊñá‰ª∂</code>ÔºåÊñá‰ª∂ÂêçÊòØËøôÊ†∑Ôºö<code>Ë°®Âêç.frm</code></p>\n<p>ÊØîÊñπËØ¥Êàë‰ª¨Âú® <code>test</code>Êï∞ÊçÆÂ∫ì‰∏ãÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫<code>test</code>ÁöÑË°®</p>\n<p>ÈÇ£Âú®Êï∞ÊçÆÂ∫ì <code>test</code> ÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï‰∏ãÂ∞±‰ºöÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ <code>test.frm</code> ÁöÑÁî®‰∫éÊèèËø∞Ë°®ÁªìÊûÑÁöÑÊñá‰ª∂„ÄÇ<code>.frm</code> Êñá‰ª∂ÁöÑÊ†ºÂºèÂú®‰∏çÂêåÁöÑÂπ≥Âè∞‰∏äÈÉΩÊòØÁõ∏ÂêåÁöÑ„ÄÇËøô‰∏™ÂêéÁºÄÂêç‰∏∫ <code>.frm</code> ÊòØ‰ª• <code>‰∫åËøõÂà∂Ê†ºÂºè</code> Â≠òÂÇ®ÁöÑÔºåÊàë‰ª¨Áõ¥Êé•ÊâìÂºÄÊòØ‰π±Á†ÅÁöÑ„ÄÇ</p>\n<p><strong>2„ÄÅË°®‰∏≠Êï∞ÊçÆÂíåÁ¥¢Âºï</strong></p>\n<p><font color=#880000><strong>‚ë†Á≥ªÁªüË°®Á©∫Èó¥Ôºàsystem tablespaceÔºâ</strong></font></p>\n<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåInnoDB ‰ºöÂú®Êï∞ÊçÆÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ <code>ibdata1</code>„ÄÅÂ§ßÂ∞è‰∏∫ <code>12M</code> ÁöÑÊñá‰ª∂ÔºåËøô‰∏™Êñá‰ª∂Â∞±ÊòØÂØπÂ∫îÁöÑ <code>Á≥ªÁªüË°®Á©∫Èó¥</code> Âú®Êñá‰ª∂Á≥ªÁªü‰∏äÁöÑË°®Á§∫„ÄÇÊÄé‰πàÊâç12MÔºü</p>\n<p>Ê≥®ÊÑèËøô‰∏™Êñá‰ª∂ÊòØ <code>Ëá™Êâ©Â±ïÊñá‰ª∂</code> ÔºåÂΩì‰∏çÂ§üÁî®ÁöÑÊó∂ÂÄôÂÆÉ‰ºöËá™Â∑±Â¢ûÂä†Êñá‰ª∂Â§ßÂ∞è„ÄÇ</p>\n<p>ÂΩìÁÑ∂ÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥ËÆ©Á≥ªÁªüË°®Á©∫Èó¥ÂØπÂ∫îÊñá‰ª∂Á≥ªÁªü‰∏äÂ§ö‰∏™ÂÆûÈôÖÊñá‰ª∂ÔºåÊàñËÄÖ‰ªÖ‰ªÖËßâÂæóÂéüÊù•ÁöÑ <code>ibdata1</code> Ëøô‰∏™Êñá‰ª∂ÂêçÈöæÂê¨ÔºåÈÇ£ÂèØ‰ª•Âú®MySQLÂêØÂä®Êó∂ÈÖçÁΩÆÂØπÂ∫îÁöÑÊñá‰ª∂Ë∑ØÂæÑ‰ª•ÂèäÂÆÉ‰ª¨ÁöÑÂ§ßÂ∞èÔºåÊØîÂ¶ÇÊàë‰ª¨ËøôÊ†∑‰øÆÊîπ‰∏Ä‰∏ãmy.cnf ÈÖçÁΩÆÊñá‰ª∂:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[server]</span><br><span class=\"line\">innodb_data_file_path=data1:512M;data2:512M:autoextend</span><br></pre></td></tr></table></figure>\n\n<p>ËøôÊ†∑Âú®MySQLÂêØÂä®‰πãÂêéÂ∞±‰ºöÂàõÂª∫Ëøô‰∏§‰∏™512MÂ§ßÂ∞èÁöÑÊñá‰ª∂‰Ωú‰∏∫<code>Á≥ªÁªüË°®Á©∫Èó¥</code>ÔºåÂÖ∂‰∏≠ÁöÑ<code>autoextend</code>Ë°®ÊòéËøô‰∏§‰∏™Êñá‰ª∂Â¶ÇÊûú‰∏çÂ§üÁî®‰ºöËá™Âä®Êâ©Â±ïdata2Êñá‰ª∂ÁöÑÂ§ßÂ∞è„ÄÇ</p>\n<p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑ‰∏ÄÁÇπÊòØ,&#x3D;&#x3D;Âú®‰∏Ä‰∏™MySQLÊúçÂä°Âô®‰∏≠ÔºåÁ≥ªÁªüË°®Á©∫Èó¥Âè™Êúâ‰∏Ä‰ªΩ&#x3D;&#x3D;„ÄÇ‰ªéMySQL5.5.7Âà∞MySQL5.6.6‰πãÈó¥ÁöÑÂêÑ‰∏™ÁâàÊú¨‰∏≠ÔºåÊàë‰ª¨<strong>Ë°®‰∏≠ÁöÑÊï∞ÊçÆÈÉΩ‰ºöË¢´ÈªòËÆ§Â≠òÂÇ®Âà∞Ëøô‰∏™Á≥ªÁªüË°®Á©∫Èó¥</strong>„ÄÇ</p>\n<p><strong><font color=#880000>‚ë°Áã¨Á´ãË°®Á©∫Èó¥Ôºàfile-per-table tablespaceÔºâ</font></strong></p>\n<p>Âú® MySQL 5.6.6 ‰ª•Âèä‰πãÂêéÁöÑÁâàÊú¨‰∏≠ÔºåInnoDB Âπ∂‰∏ç‰ºöÈªòËÆ§ÁöÑÊääÂêÑ‰∏™Ë°®ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Âà∞Á≥ªÁªüË°®Á©∫Èó¥‰∏≠ÔºåËÄåÊòØ‰∏∫ <code>ÊØè‰∏Ä‰∏™Ë°®Âª∫Á´ã‰∏Ä‰∏™Áã¨Á´ãË°®Á©∫Èó¥</code>Ôºå‰πüÂ∞±ÊòØËØ¥Êàë‰ª¨ÂàõÂª∫‰∫ÜÂ§öÂ∞ë‰∏™Ë°®ÔºåÂ∞±ÊúâÂ§öÂ∞ë‰∏™Áã¨Á´ãË°®Á©∫Èó¥„ÄÇ‰ΩøÁî® <code>Áã¨Á´ãË°®Á©∫Èó¥</code> Êù•Â≠òÂÇ®Ë°®Êï∞ÊçÆÁöÑËØùÔºå‰ºöÂú®ËØ•Ë°®ÊâÄÂ±ûÊï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Ë°®Á§∫ËØ•Áã¨Á´ãË°®Á©∫Èó¥ÁöÑÊñá‰ª∂ÔºåÊñá‰ª∂ÂêçÂíåË°®ÂêçÁõ∏ÂêåÔºåÂè™‰∏çËøáÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ <code>.ibd</code> ÁöÑÊâ©Â±ïÂêçËÄåÂ∑≤ÔºåÊâÄ‰ª•ÂÆåÊï¥ÁöÑÊñá‰ª∂ÂêçÁß∞ÈïøËøôÊ†∑Ôºö</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Ë°®Âêç.ibd</span><br></pre></td></tr></table></figure>\n\n<p>ÊØîÂ¶ÇÔºöÊàë‰ª¨‰ΩøÁî®‰∫Ü <code>Áã¨Á´ãË°®Á©∫Èó¥</code> ÂéªÂ≠òÂÇ®<code>test</code>Êï∞ÊçÆÂ∫ì‰∏ãÁöÑ <code>test</code> Ë°®ÁöÑËØùÔºåÈÇ£‰πàÂú®ËØ•Ë°®ÊâÄÂú®Êï∞ÊçÆÂ∫ì<code>atguigu</code>ÂØπÂ∫îÁöÑ test ÁõÆÂΩï‰∏ã‰ºö‰∏∫ test Ë°®ÂàõÂª∫Ëøô‰∏§‰∏™Êñá‰ª∂Ôºö</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test.frm</span><br><span class=\"line\">test.ibd</span><br></pre></td></tr></table></figure>\n\n<p>ÂÖ∂‰∏≠ <code>test.ibd</code> Êñá‰ª∂Â∞±Áî®Êù•Â≠òÂÇ® <code>test</code> Ë°®‰∏≠ÁöÑÊï∞ÊçÆÂíåÁ¥¢ÂºïÔºõËÄå<code>text.frm</code> ÊèèËø∞Ë°®ÁöÑÁªìÊûÑ„ÄÇ</p>\n<p><strong><font color=#880000>‚ë¢Á≥ªÁªüË°®Á©∫Èó¥‰∏éÁã¨Á´ãË°®Á©∫Èó¥ÁöÑËÆæÁΩÆ</font></strong></p>\n<p>Êàë‰ª¨ÂèØ‰ª•Ëá™Â∑±ÊåáÂÆö‰ΩøÁî® <code>Á≥ªÁªüË°®Á©∫Èó¥</code> ËøòÊòØ <code>Áã¨Á´ãË°®Á©∫Èó¥</code> Êù•Â≠òÂÇ®Êï∞ÊçÆÔºåËøô‰∏™ÂäüËÉΩÁî±ÂêØÂä®ÂèÇÊï∞ <code>innodb_file_per_table</code> ÊéßÂà∂ÔºåÊØîÂ¶ÇËØ¥Êàë‰ª¨ÊÉ≥ÂàªÊÑèÂ∞ÜË°®Êï∞ÊçÆÈÉΩÂ≠òÂÇ®Âà∞ <code>Á≥ªÁªüË°®Á©∫Èó¥</code> Êó∂ÔºåÂèØ‰ª•Âú®ÂêØÂä®MySQLÊúçÂä°Âô®ÁöÑÊó∂ÂÄôËøôÊ†∑ÈÖçÁΩÆ:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[server]</span><br><span class=\"line\">innodb_file_per_table<span class=\"operator\">=</span><span class=\"number\">0</span> # <span class=\"number\">0</span>:‰ª£Ë°®‰ΩøÁî®Á≥ªÁªüË°®Á©∫Èó¥; <span class=\"number\">1</span>:‰ª£Ë°®‰ΩøÁî®Áã¨Á´ãË°®Á©∫Èó¥</span><br></pre></td></tr></table></figure>\n\n<p>ÈªòËÆ§ÊÉÖÂÜµ:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> variables <span class=\"keyword\">like</span> <span class=\"string\">&#x27;innodb_file_per_table&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------------------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Variable_name         <span class=\"operator\">|</span> <span class=\"keyword\">Value</span> <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------------------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> innodb_file_per_table <span class=\"operator\">|</span> <span class=\"keyword\">ON</span>    <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------------------+-------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.01</span> sec) # <span class=\"keyword\">on</span>Ôºö‰ª£Ë°®Áã¨Á´ãË°®Á©∫Èó¥</span><br></pre></td></tr></table></figure>\n\n<p><strong><font color=#880000>‚ë£ÂÖ∂‰ªñÁ±ªÂûãÁöÑË°®Á©∫Èó¥</font></strong></p>\n<p>ÈöèÁùÄMySQLÁöÑÂèëÂ±ïÔºåÈô§‰∫Ü‰∏äËø∞‰∏§ÁßçËÄÅÁâåË°®Á©∫Èó¥‰πãÂ§ñÔºåÁé∞Âú®ËøòÊñ∞ÊèêÂá∫‰∫Ü‰∏Ä‰∫õ‰∏çÂêåÁ±ªÂûãÁöÑË°®Á©∫Èó¥ÔºåÊØîÂ¶ÇÈÄöÁî®Ë°®Á©∫Èó¥Ôºàgeneral tablespaceÔºâ„ÄÅ‰∏¥Êó∂Ë°®Á©∫Èó¥Ôºàtemporary tablespaceÔºâÁ≠â„ÄÇ</p>\n<p><strong>3„ÄÅÂõæËß£</strong></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733845.png\"></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733587.png\"></p>\n<p><strong>4„ÄÅÁñëÈóÆ</strong></p>\n<p><code>.frm</code> Âú®MySQL8‰∏≠‰∏çÂ≠òÂú®‰∫ÜÔºåÂéªÂì™Èáå‰∫ÜÔºü</p>\n<p>ËøôÂ∞±ÈúÄË¶ÅËß£Êûê <code>ibd Êñá‰ª∂</code>„ÄÇOracleÂÆòÊñπÂ∞Ü <code>frmÊñá‰ª∂</code> ÁöÑ‰ø°ÊÅØÂèäÊõ¥Â§ö‰ø°ÊÅØÁßªÂä®Âà∞Âè´ÂÅöÂ∫èÂàóÂåñÂ≠óÂÖ∏‰ø°ÊÅØÔºàSerialized Dictionary Information,SDIÔºâÔºåSDI Ë¢´ÂÜôÂú® ibd Êñá‰ª∂ÂÜÖÈÉ®ÔºåMySQL 8.0 Â±û‰∫é Oracle Êóó‰∏ãÔºåÂêåÁêÜ„ÄÇ</p>\n<p>‰∏∫‰∫Ü‰ªé IBD Êñá‰ª∂‰∏≠ÊèêÂèñ SDI ‰ø°ÊÅØÔºåOracle Êèê‰æõ‰∫Ü‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫è ibd2sdi</p>\n<p>Ëøô‰∏™Â∑•ÂÖ∑‰∏çÈúÄË¶Å‰∏ãËΩΩÔºåMySQL8Ëá™Â∏¶ÁöÑÊúâÔºåÂè™ÈúÄË¶Å‰Ω†ÈÖçÂ•ΩÁéØÂ¢ÉÂèòÈáèÂ∞±ËÉΩÂà∞Â§ÑÁî®„ÄÇ</p>\n<p>Êü•ÁúãË°®ÁªìÊûÑÔºöÂà∞Â≠òÂÇ®ibdÊñá‰ª∂ÁöÑÁõÆÂΩï‰∏ãÔºåÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ibd2sdi <span class=\"comment\">--dump-file=student.txt student.ibd</span></span><br></pre></td></tr></table></figure>\n\n<p>ËøôÊ†∑ ibd2sdi Â∞±‰ºöÊää <code>xxx.ibd</code> ÈáåÂ≠òÂÇ®ÁöÑË°®ÁªìÊûÑ‰ª• json ÁöÑÊ†ºÂºè‰øùÂ≠òÂú® student.txt ‰∏≠</p>\n<h4 id=\"2-3-2-MyISAM-Â≠òÂÇ®ÂºïÊìéÊ®°Âºè\"><a href=\"#2-3-2-MyISAM-Â≠òÂÇ®ÂºïÊìéÊ®°Âºè\" class=\"headerlink\" title=\"2.3.2 MyISAM Â≠òÂÇ®ÂºïÊìéÊ®°Âºè\"></a>2.3.2 MyISAM Â≠òÂÇ®ÂºïÊìéÊ®°Âºè</h4><p><strong>1„ÄÅË°®ÁªìÊûÑ</strong></p>\n<p>Âú®Â≠òÂÇ®Ë°®ÁªìÊûÑÊñπÈù¢Ôºå <code>MyISAM</code> Âíå <code>InnoDB</code> ‰∏ÄÊ†∑Ôºå‰πüÊòØÂú® <code>Êï∞ÊçÆÁõÆÂΩï</code> ‰∏ãÂØπÂ∫îÁöÑÊï∞ÊçÆÂ∫ìÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∫Ü‰∏Ä‰∏™‰∏ì Èó®Áî®‰∫éÊèèËø∞Ë°®ÁªìÊûÑÁöÑÊñá‰ª∂Ôºö<code>Ë°®Âêç.frm</code></p>\n<p><strong>2„ÄÅË°®‰∏≠Êï∞ÊçÆÂíåÁ¥¢Âºï</strong></p>\n<p>Âú® MyISAM ‰∏≠ÁöÑÁ¥¢ÂºïÂÖ®ÈÉ®ÈÉΩÊòØ <code>‰∫åÁ∫ßÁ¥¢Âºï</code> ÔºåËØ•Â≠òÂÇ®ÂºïÊìéÁöÑ <code>Êï∞ÊçÆÂíåÁ¥¢ÂºïÊòØÂàÜÂºÄÂ≠òÊîæ</code> ÁöÑ„ÄÇÊâÄ‰ª•Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠‰πüÊòØ‰ΩøÁî®‰∏çÂêåÁöÑÊñá‰ª∂Êù•Â≠òÂÇ®Êï∞ÊçÆÊñá‰ª∂ÂíåÁ¥¢ÂºïÊñá‰ª∂ÔºåÂêåÊó∂Ë°®Êï∞ÊçÆÈÉΩÂ≠òÊîæÂú®ÂØπÂ∫îÁöÑÊï∞ÊçÆÂ∫ìÂ≠êÁõÆÂΩï‰∏ã„ÄÇÂÅáÂ¶Ç <code>test</code> Ë°®‰ΩøÁî® MyISAM Â≠òÂÇ®ÂºïÊìéÁöÑËØùÔºåÈÇ£‰πàÂú®ÂÆÉÊâÄÂú®Êï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑ <code>test</code> ÁõÆÂΩï‰∏ã‰ºö‰∏∫ test Ë°®ÂàõÂª∫Ëøô‰∏â‰∏™Êñá‰ª∂Ôºö</p>\n<ul>\n<li><code>test.frm</code> Â≠òÂÇ®Ë°®ÁªìÊûÑ</li>\n<li><code>test.MYD</code> Â≠òÂÇ®Êï∞ÊçÆ (MYData)</li>\n<li><code>test.MYI</code> Â≠òÂÇ®Á¥¢Âºï (MYIndex)</li>\n</ul>\n<p><strong>3„ÄÅÂõæËß£</strong></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091734468.png\"></p>\n<h3 id=\"2-4-Â∞èÁªì\"><a href=\"#2-4-Â∞èÁªì\" class=\"headerlink\" title=\"2.4 Â∞èÁªì\"></a>2.4 Â∞èÁªì</h3><p>‰∏æ‰æãÔºö<code>Êï∞ÊçÆÂ∫ì a</code> Ôºå <code>Ë°®b</code> „ÄÇ</p>\n<ol>\n<li><p>Â¶ÇÊûúË°® b ÈááÁî® <code>InnoDB</code> Ôºådata&#x2F;a ‰∏≠‰ºö‰∫ßÁîü 1 ‰∏™ÊàñËÄÖ 2 ‰∏™Êñá‰ª∂:</p>\n<ul>\n<li><code>b.frm</code>ÔºöÊèèËø∞Ë°®ÁªìÊûÑÊñá‰ª∂ÔºåÂ≠óÊÆµÈïøÂ∫¶Á≠â</li>\n<li>Â¶ÇÊûúÈááÁî® <code>Á≥ªÁªüË°®Á©∫Èó¥</code> Ê®°ÂºèÁöÑÔºåÊï∞ÊçÆ‰ø°ÊÅØÂíåÁ¥¢Âºï‰ø°ÊÅØÈÉΩÂ≠òÂÇ®Âú® <code>ibdata1</code> ‰∏≠</li>\n<li>Â¶ÇÊûúÈááÁî® <code>Áã¨Á´ãË°®Á©∫Èó¥</code> Â≠òÂÇ®Ê®°ÂºèÔºådata&#x2F;a‰∏≠Ëøò‰ºö‰∫ßÁîü <code>b.ibd</code> Êñá‰ª∂ÔºàÂ≠òÂÇ®Êï∞ÊçÆ‰ø°ÊÅØÂíåÁ¥¢Âºï‰ø°ÊÅØÔºâ</li>\n</ul>\n<blockquote>\n<p>MySQL 5.7 ‰∏≠‰ºöÂú® data&#x2F;a ÁöÑÁõÆÂΩï‰∏ãÁîüÊàê <code>db.opt</code> Êñá‰ª∂Áî®‰∫é‰øùÂ≠òÊï∞ÊçÆÂ∫ìÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆ„ÄÇÊØîÂ¶ÇÔºöÂ≠óÁ¨¶ÈõÜ„ÄÅÊØîËæÉËßÑÂàô„ÄÇËÄå MySQL 8.0 ‰∏çÂÜçÊèê‰æõ db.opt Êñá‰ª∂„ÄÇ</p>\n<p>MySQL 8.0 ‰∏≠ ‰∏çÂÜçÂçïÁã¨Êèê‰æõ <code>b.frm</code>ÔºåËÄåÊòØÂêàÂπ∂Âú® <code>b.ibd</code> Êñá‰ª∂‰∏≠„ÄÇ</p>\n</blockquote>\n</li>\n<li><p>Â¶ÇÊûúË°® b ÈááÁî® <code>MyISAM</code> Ôºådata&#x2F;a‰∏≠‰ºö‰∫ßÁîü 3 ‰∏™Êñá‰ª∂:</p>\n<ul>\n<li>MySQL5.7 ‰∏≠ <code>b.frm</code> ÔºöÊèèËø∞Ë°®ÁªìÊûÑÊñá‰ª∂ÔºåÂ≠óÊÆµÈïøÂ∫¶Á≠â„ÄÇ</li>\n<li>MySQL8.0 ‰∏≠ <code>b.xxx.sdi</code> ÔºöÊèèËø∞Ë°®ÁªìÊûÑÊñá‰ª∂ÔºåÂ≠óÊÆµÈïøÂ∫¶Á≠â</li>\n<li><code>b.MYD</code> (MYData)ÔºöÊï∞ÊçÆ‰ø°ÊÅØÊñá‰ª∂ÔºåÂ≠òÂÇ®Êï∞ÊçÆ‰ø°ÊÅØ(Â¶ÇÊûúÈááÁî®Áã¨Á´ãË°®Â≠òÂÇ®Ê®°Âºè)</li>\n<li><code>b.MYI</code> (MYIndex)ÔºöÂ≠òÊîæÁ¥¢Âºï‰ø°ÊÅØÊñá‰ª∂</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"2-5-ËßÜÂõæÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\"><a href=\"#2-5-ËßÜÂõæÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\" class=\"headerlink\" title=\"2.5 ËßÜÂõæÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\"></a>2.5 ËßÜÂõæÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫</h3><p>Êàë‰ª¨Áü•ÈÅìMySQL‰∏≠ÁöÑ<code>ËßÜÂõæ</code>ÂÖ∂ÂÆûÊòØ<code>ËôöÊãüÁöÑË°®</code>Ôºå‰πüÂ∞±ÊòØÊüê‰∏™Êü•ËØ¢ËØ≠Âè•ÁöÑ‰∏Ä‰∏Ä‰∏™Âà´ÂêçËÄåÂ∑≤ÔºåÊâÄ‰ª•Âú®Â≠òÂÇ®ËßÜÂõæÁöÑÊó∂ÂÄôÊòØ‰∏çË¶ÅÂ≠òÂÇ®ÁúüÂÆûÁöÑÊï∞ÊçÆÁöÑÔºåÂè™ÈúÄË¶ÅÊääÂÆÉÁöÑÁªìÊûÑÂ≠òÂÇ®Ëµ∑Êù•Â∞±Ë°å‰∫Ü„ÄÇÂíåË°®‰∏ÄÊ†∑ÔºåÊèèËø∞ËßÜÂõæÁªìÊûÑÁöÑÊñá‰ª∂‰πü‰ºöË¢´Â≠òÂÇ®Âà∞ÊâÄÂ±ûÊï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï‰∏ãËæπÔºåÂè™‰ºöÂ≠òÂÇ®‰∏Ä‰∏™<code>ËßÜÂõæÂêç. frm</code>ÁöÑÊñá‰ª∂„ÄÇÂ¶Ç‰∏ãÂõæ‰∏≠ÁöÑ: <code>emp_details_view.frm</code></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091735198.png\" alt=\"image-20220709125100055\"></p>\n<h3 id=\"2-6-ÂÖ∂‰ªñÁöÑÊñá‰ª∂\"><a href=\"#2-6-ÂÖ∂‰ªñÁöÑÊñá‰ª∂\" class=\"headerlink\" title=\"2.6 ÂÖ∂‰ªñÁöÑÊñá‰ª∂\"></a>2.6 ÂÖ∂‰ªñÁöÑÊñá‰ª∂</h3><p>Èô§‰∫ÜÊàë‰ª¨‰∏äËæπËØ¥ÁöÑËøô‰∫õÁî®Êà∑Ëá™Â∑±Â≠òÂÇ®ÁöÑÊï∞ÊçÆ‰ª•Â§ñÔºå<code>Êï∞ÊçÆÁõÆÂΩï</code>‰∏ãËøòÂåÖÊã¨‰∏∫‰∫ÜÊõ¥Â•ΩËøêË°åÁ®ãÂ∫èÁöÑ‰∏Ä‰∫õÈ¢ùÂ§ñÊñá‰ª∂,‰∏ªË¶ÅÂåÖÊã¨ËøôÂá†ÁßçÁ±ªÂûãÁöÑÊñá‰ª∂:</p>\n<ul>\n<li><p><strong>ÊúçÂä°Âô®ËøõÁ®ãÊñá‰ª∂</strong></p>\n<p>Êàë‰ª¨Áü•ÈÅìÊØèËøêË°å‰∏Ä‰∏™MySQLÊúçÂä°Âô®Á®ãÂ∫è,ÈÉΩÊÑèÂë≥ÁùÄÂêØÂä®‰∏Ä‰∏™ËøõÁ®ã„ÄÇMySQLÊúçÂä°Âô®‰ºöÊääËá™Â∑±ÁöÑËøõÁ®ãIDÂÜôÂÖ•Âà∞‰∏Ä‰∏™Êñá‰ª∂‰∏≠„ÄÇ</p>\n</li>\n<li><p><strong>ÊúçÂä°Âô®Êó•ÂøóÊñá‰ª∂</strong></p>\n<p>Âú®ÊúçÂä°Âô®ËøêË°åËøáÁ®ã‰∏≠Ôºå‰ºö‰∫ßÁîüÂêÑÁßçÂêÑÊ†∑ÁöÑÊó•ÂøóÔºåÊØîÂ¶ÇÂ∏∏ËßÑÁöÑÊü•ËØ¢Êó•Âøó„ÄÅÈîôËØØÊó•Âøó„ÄÅ‰∫åËøõÂà∂Êó•Âøó„ÄÅredoÊó•ÂøóÁ≠â„ÄÇËøô‰∫õÊó•ÂøóÂêÑÊúâÂêÑÁöÑÁî®ÈÄî„ÄÇÂêéÈù¢ËÆ≤Ëß£„ÄÇ</p>\n</li>\n<li><p><strong>ÈªòËÆ§&#x2F;Ëá™Âä®ÁîüÊàêÁöÑSSLÂíåRSAËØÅ‰π¶ÂíåÂØÜÈí•Êñá‰ª∂</strong></p>\n<p>‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®ÂÆâÂÖ®ÈÄö‰ø°ËÄåÂàõÂª∫ÁöÑ‰∏Ä‰∫õÊñá‰ª∂„ÄÇ</p>\n</li>\n</ul>\n","cover_type":"img","excerpt":"","more":"<h2 id=\"1-MySQL8ÁöÑ‰∏ªË¶ÅÁõÆÂΩïÁªìÊûÑ\"><a href=\"#1-MySQL8ÁöÑ‰∏ªË¶ÅÁõÆÂΩïÁªìÊûÑ\" class=\"headerlink\" title=\"1. MySQL8ÁöÑ‰∏ªË¶ÅÁõÆÂΩïÁªìÊûÑ\"></a>1. MySQL8ÁöÑ‰∏ªË¶ÅÁõÆÂΩïÁªìÊûÑ</h2><p>‰ª• Linux Á≥ªÁªü‰∏∫‰æãËøõË°åËÆ≤Ëß£Ôºö</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xue ~]# find / -name mysql</span><br></pre></td></tr></table></figure>\n\n<p>ÂÆâË£ÖÂ•ΩMySQL 8‰πãÂêéÔºåÊàë‰ª¨Êü•ÁúãÂ¶Ç‰∏ãÁöÑÁõÆÂΩïÁªìÊûÑ:</p>\n<h3 id=\"1-1-Êï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑ\"><a href=\"#1-1-Êï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑ\" class=\"headerlink\" title=\"1.1 Êï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑ\"></a>1.1 Êï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑ</h3><p>&#x3D;&#x3D;MySQLÊï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑÔºö&#x3D;&#x3D;<code>/var/lib/mysql/</code></p>\n<p>MySQLÊúçÂä°Âô®Á®ãÂ∫èÂú®ÂêØÂä®Êó∂‰ºöÂà∞Êñá‰ª∂Á≥ªÁªüÁöÑÊüê‰∏™ÁõÆÂΩï‰∏ãÂä†ËΩΩ‰∏Ä‰∫õÊñá‰ª∂Ôºå‰πãÂêéÂú®ËøêË°åËøáÁ®ã‰∏≠‰∫ßÁîüÁöÑÊï∞ÊçÆ‰πüÈÉΩ‰ºöÂ≠òÂÇ®Âà∞Ëøô‰∏™ÁõÆÂΩï‰∏ãÁöÑÊüê‰∫õÊñá‰ª∂‰∏≠ÔºåËøô‰∏™ÁõÆÂΩïÂ∞±Áß∞‰∏∫ <code>Êï∞ÊçÆÁõÆÂΩï</code>„ÄÇ</p>\n<p>MySQLÊääÊï∞ÊçÆÈÉΩÂ≠òÂà∞Âì™‰∏™Ë∑ØÂæÑ‰∏ãÂë¢ÔºüÂÖ∂ÂÆû <code>Êï∞ÊçÆÁõÆÂΩï</code> ÂØπÂ∫îËøô‰∏Ä‰∏™Á≥ªÁªüÂèòÈáè <code>datadir</code>ÔºåÊàë‰ª¨Âú®‰ΩøÁî®ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Âô®Âª∫Á´ãËøûÊé•‰πãÂêéÊü•ÁúãËøô‰∏™Á≥ªÁªüÂèòÈáèÁöÑÂÄºÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show variables like &#x27;datadir&#x27;;</span><br><span class=\"line\">+---------------+-----------------+</span><br><span class=\"line\">| Variable_name | Value           |</span><br><span class=\"line\">+---------------+-----------------+</span><br><span class=\"line\">| datadir       | /var/lib/mysql/ |</span><br><span class=\"line\">+---------------+-----------------+</span><br><span class=\"line\">1 row in set (0.04 sec)</span><br></pre></td></tr></table></figure>\n\n<p>‰ªéÁªìÊûú‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåÂú®ÊàëÁöÑËÆ°ÁÆóÊú∫‰∏äMySQLÁöÑÊï∞ÊçÆÁõÆÂΩïÂ∞±ÊòØ <code>/var/lib/mysql</code>&#x2F; „ÄÇ</p>\n<h3 id=\"1-2-Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩï\"><a href=\"#1-2-Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩï\" class=\"headerlink\" title=\"1.2 Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩï\"></a>1.2 Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩï</h3><p>&#x3D;&#x3D;Áõ∏ÂÖ≥ÂëΩ‰ª§ÁõÆÂΩïÔºö&#x2F;usr&#x2F;binÔºàmysqladmin„ÄÅmysqlbinlog„ÄÅmysqldumpÁ≠âÂëΩ‰ª§ÔºâÂíå&#x2F;usr&#x2F;sbin&#x3D;&#x3D;„ÄÇ</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733159.png\" alt=\"image-20220709112725420\"></p>\n<h3 id=\"1-3-ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩï\"><a href=\"#1-3-ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩï\" class=\"headerlink\" title=\"1.3 ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩï\"></a>1.3 <strong>ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩï</strong></h3><p>&#x3D;&#x3D;ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩïÔºö&#x2F;usr&#x2F;share&#x2F;mysql-8.0ÔºàÂëΩ‰ª§ÂèäÈÖçÁΩÆÊñá‰ª∂ÔºâÔºå&#x2F;etc&#x2F;mysqlÔºàÂ¶Ç my.cnfÔºâ&#x3D;&#x3D;</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733524.png\" alt=\"image-20220709112825432\"></p>\n<h2 id=\"2-Êï∞ÊçÆÂ∫ìÂíåÊñá‰ª∂Á≥ªÁªüÁöÑÂÖ≥Á≥ª\"><a href=\"#2-Êï∞ÊçÆÂ∫ìÂíåÊñá‰ª∂Á≥ªÁªüÁöÑÂÖ≥Á≥ª\" class=\"headerlink\" title=\"2. Êï∞ÊçÆÂ∫ìÂíåÊñá‰ª∂Á≥ªÁªüÁöÑÂÖ≥Á≥ª\"></a>2. Êï∞ÊçÆÂ∫ìÂíåÊñá‰ª∂Á≥ªÁªüÁöÑÂÖ≥Á≥ª</h2><p>ÂÉè<code>InnoDB</code>„ÄÅ<code>MyISAM </code>ËøôÊ†∑ÁöÑÂ≠òÂÇ®ÂºïÊìéÈÉΩÊòØÊääË°®Â≠òÂÇ®Âú®Á£ÅÁõò‰∏äÁöÑÔºåÊìç‰ΩúÁ≥ªÁªüÁî®Êù•ÁÆ°ÁêÜÁ£ÅÁõòÁöÑÁªìÊûÑË¢´Áß∞‰∏∫&#x3D;&#x3D;Êñá‰ª∂Á≥ªÁªü&#x3D;&#x3D;ÔºåÊâÄ‰ª•Áî®‰∏ì‰∏ö‰∏ÄÁÇπÁöÑËØùÊù•Ë°®Ëø∞Â∞±ÊòØ:ÂÉè<strong>InnoDB„ÄÅMyISAM</strong> ËøôÊ†∑ÁöÑÂ≠òÂÇ®ÂºïÊìéÈÉΩÊòØÊää&#x3D;&#x3D;Ë°®Â≠òÂÇ®Âú®Êñá‰ª∂Á≥ªÁªü‰∏ä&#x3D;&#x3D;ÁöÑ„ÄÇÂΩìÊàë‰ª¨ÊÉ≥ËØªÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåËøô‰∫õÂ≠òÂÇ®ÂºïÊìé‰ºö‰ªéÊñá‰ª∂Á≥ªÁªü‰∏≠ÊääÊï∞ÊçÆËØªÂá∫Êù•ËøîÂõûÁªôÊàë‰ª¨ÔºåÂΩìÊàë‰ª¨ÊÉ≥ÂÜôÂÖ•Êï∞ÊçÆÁöÑÊó∂ÂÄô,Ëøô‰∫õÂ≠òÂÇ®ÂºìÊìé‰ºöÊääËøô‰∫õÊï∞ÊçÆÂèàÂÜôÂõûÊñá‰ª∂Á≥ªÁªü„ÄÇÊú¨Á´†Â≠¶‰π†‰∏Ä‰∏ã<code>InnoDB</code>Âíå<code>MyISAM</code>Ëøô‰∏§‰∏™Â≠òÂÇ®Âºì|ÊìéÁöÑÊï∞ÊçÆÂ¶Ç‰ΩïÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠Â≠òÂÇ®„ÄÇ</p>\n<h3 id=\"2-1-Êü•ÁúãÈªòËÆ§Êï∞ÊçÆÂ∫ì\"><a href=\"#2-1-Êü•ÁúãÈªòËÆ§Êï∞ÊçÆÂ∫ì\" class=\"headerlink\" title=\"2.1 Êü•ÁúãÈªòËÆ§Êï∞ÊçÆÂ∫ì\"></a>2.1 Êü•ÁúãÈªòËÆ§Êï∞ÊçÆÂ∫ì</h3><p>Êü•Áúã‰∏Ä‰∏ãÂú®ÊàëÁöÑËÆ°ÁÆóÊú∫‰∏äÂΩìÂâçÊúâÂì™‰∫õÊï∞ÊçÆÂ∫ì:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SHOW</span> DATABASES; </span><br></pre></td></tr></table></figure>\n\n<p>ÂèØ‰ª•ÁúãÂà∞Êúâ 4 ‰∏™Êï∞ÊçÆÂ∫ìÊòØÂ±û‰∫é MySQL Ëá™Â∏¶ÁöÑÁ≥ªÁªüÊï∞ÊçÆÂ∫ì„ÄÇ</p>\n<ul>\n<li><p><code>mysql</code></p>\n<p>MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊ†∏ÂøÉÊï∞ÊçÆÂ∫ìÔºåÂÆÉÂ≠òÂÇ®‰∫ÜMySQLÁöÑÁî®Êà∑Ë¥¶Êà∑ÂíåÊùÉÈôê‰ø°ÊÅØÔºå‰∏Ä‰∫õÂ≠òÂÇ®ËøáÁ®ã„ÄÅ‰∫ã‰ª∂ÁöÑÂÆö ‰πâ‰ø°ÊÅØÔºå‰∏Ä‰∫õËøêË°åËøáÁ®ã‰∏≠‰∫ßÁîüÁöÑÊó•Âøó‰ø°ÊÅØÔºå‰∏Ä‰∫õÂ∏ÆÂä©‰ø°ÊÅØ‰ª•ÂèäÊó∂Âå∫‰ø°ÊÅØÁ≠â„ÄÇ</p>\n</li>\n<li><p><code>information_schema</code></p>\n<p>MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊï∞ÊçÆÂ∫ìÔºåËøô‰∏™Êï∞ÊçÆÂ∫ì‰øùÂ≠òÁùÄ MySQL ÊúçÂä°Âô® <code>Áª¥Êä§ÁöÑÊâÄÊúâÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÁöÑ‰ø°ÊÅØ</code> ÔºåÊØîÂ¶ÇÊúâÂì™‰∫õË°®„ÄÅÂì™‰∫õËßÜÂõæ„ÄÅÂì™‰∫õËß¶ÂèëÂô®„ÄÅÂì™‰∫õÂàó„ÄÅÂì™‰∫õÁ¥¢Âºï„ÄÇËøô‰∫õ‰ø°ÊÅØÂπ∂‰∏çÊòØÁúüÂÆûÁöÑÁî®Êà∑Êï∞ÊçÆÔºåËÄåÊòØ‰∏Ä‰∫õÊèèËø∞ÊÄß‰ø°ÊÅØÔºåÊúâÊó∂ÂÄô‰πüÁß∞‰πã‰∏∫ <code>ÂÖÉÊï∞ÊçÆ</code> „ÄÇÂú®Á≥ªÁªüÊï∞ÊçÆÂ∫ì <code>information_schema</code> ‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∫õ‰ª• <code>innodb_sys</code> ÂºÄÂ§¥ÁöÑË°®ÔºåÁî®‰∫éË°®Á§∫ÂÜÖÈÉ®Á≥ªÁªüË°®„ÄÇ</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> USE information_schema;</span><br><span class=\"line\">Database changed</span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SHOW</span> TABLES <span class=\"keyword\">LIKE</span> <span class=\"string\">&#x27;innodb_sys%&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Tables_in_information_schema (innodb_sys<span class=\"operator\">%</span>) <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_DATAFILES                       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_VIRTUAL                         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_INDEXES                         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_TABLES                          <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_FIELDS                          <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_TABLESPACES                     <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_FOREIGN_COLS                    <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_COLUMNS                         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_FOREIGN                         <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> INNODB_SYS_TABLESTATS                      <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------------------------------+</span></span><br><span class=\"line\"><span class=\"number\">10</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>performance_schema</code></p>\n<p>MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊï∞ÊçÆÂ∫ìÔºåËøô‰∏™Êï∞ÊçÆÂ∫ìÈáå‰∏ªË¶Å‰øùÂ≠ò MySQL ÊúçÂä°Âô®ËøêË°åËøáÁ®ã‰∏≠ÁöÑ‰∏Ä‰∫õÁä∂ÊÄÅ‰ø°ÊÅØÔºåÂèØ‰ª•Áî®Êù• <code>ÁõëÊéß MySQL ÊúçÂä°ÁöÑÂêÑÁ±ªÊÄßËÉΩÊåáÊ†á</code> „ÄÇÂåÖÊã¨ÁªüËÆ°ÊúÄËøëÊâßË°å‰∫ÜÂì™‰∫õËØ≠Âè•ÔºåÂú®ÊâßË°åËøáÁ®ãÁöÑÊØè‰∏™Èò∂ÊÆµÈÉΩËä±Ë¥π‰∫ÜÂ§öÈïøÊó∂Èó¥ÔºåÂÜÖÂ≠òÁöÑ‰ΩøÁî®ÊÉÖÂÜµÁ≠â‰ø°ÊÅØ„ÄÇ</p>\n</li>\n<li><p><code>sys</code></p>\n<p>MySQL Á≥ªÁªüËá™Â∏¶ÁöÑÊï∞ÊçÆÂ∫ìÔºåËøô‰∏™Êï∞ÊçÆÂ∫ì‰∏ªË¶ÅÊòØÈÄöËøá <code>ËßÜÂõæ</code> ÁöÑÂΩ¢ÂºèÊää <code>information_schema</code> Âíå <code>performance_schema</code> ÁªìÂêàËµ∑Êù•ÔºåÂ∏ÆÂä©Á≥ªÁªüÁÆ°ÁêÜÂëòÂíåÂºÄÂèë‰∫∫ÂëòÁõëÊéß MySQL ÁöÑÊäÄÊúØÊÄßËÉΩ„ÄÇ</p>\n</li>\n</ul>\n<h3 id=\"2-2-Êï∞ÊçÆÂ∫ìÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\"><a href=\"#2-2-Êï∞ÊçÆÂ∫ìÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\" class=\"headerlink\" title=\"2.2 Êï∞ÊçÆÂ∫ìÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\"></a>2.2 Êï∞ÊçÆÂ∫ìÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫</h3><p>‰ΩøÁî®<code>CREATE DATABASE Êï∞ÊçÆÂ∫ìÂêç</code>ËØ≠Âè•ÂàõÂª∫‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÁöÑÊó∂ÂÄôÔºå Âú®Êñá‰ª∂Á≥ªÁªü‰∏äÂÆûÈôÖÂèëÁîü‰∫Ü‰ªÄ‰πàÂë¢?ÂÖ∂ÂÆûÂæàÁÆÄÂçï,ÊØè‰∏™Êï∞ÊçÆÂ∫ìÈÉΩÂØπÂ∫îÊï∞ÊçÆÁõÆÂΩï‰∏ãÁöÑ‰∏Ä‰∏™Â≠êÁõÆÂΩïÔºåÊàñËÄÖËØ¥ÂØπÂ∫î‰∏Ä‰∏™Êñá‰ª∂Â§πÔºåÊØèÂΩìÊñ∞Âª∫‰∏Ä ‰∏™Êï∞ÊçÆÂ∫ìÊó∂, MySQL‰ºöÂ∏ÆÊàë‰ª¨ÂÅöËøô‰∏§‰ª∂‰∫ãÂÑø:</p>\n<ol>\n<li>Âú®<code>Êï∞ÊçÆÁõÆÂΩï</code>‰∏ãÂàõÂª∫‰∏Ä‰∏™ÂíåÊï∞ÊçÆÂ∫ìÂêçÂêåÂêçÁöÑÂ≠êÁõÆÂΩï„ÄÇ</li>\n<li>Âú®‰∏éËØ•Êï∞ÊçÆÂ∫ìÂêçÂêåÂêçÁöÑÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫<code> db.opt</code>ÁöÑÊñá‰ª∂(‰ªÖÈôêMySQL5.7Âèä‰πãÂâçÁâàÊú¨)ÔºåËøô‰∏™Êñá‰ª∂‰∏≠ÂåÖÂê´‰∫Ü<code>ËØ•Êï∞ÊçÆÂ∫ìÁöÑÂêÑÁßçÂ±ûÊÄß</code>ÔºåÊØîÂ¶ÇËØ•Êï∞ÊçÆÂ∫ìÁöÑÂ≠óÁ¨¶ÈõÜÂíåÊØîËæÉËßÑÂàô„ÄÇ</li>\n</ol>\n<p>Êàë‰ª¨ÂÜçÁúã‰∏Ä‰∏ãÊàëÁöÑËÆ°ÁÆóÊú∫‰∏äÁöÑÊï∞ÊçÆÁõÆÂΩï‰∏ãÁöÑÂÜÖÂÆπ:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"variable\">@hadoop102</span> <span class=\"operator\">~</span>]# cd <span class=\"operator\">/</span>var<span class=\"operator\">/</span>lib<span class=\"operator\">/</span>mysql</span><br><span class=\"line\">[root<span class=\"variable\">@hadoop102</span> mysql]# ll</span><br><span class=\"line\">ÊÄªÁî®Èáè <span class=\"number\">188880</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql       56 5Êúà   9 21:36 auto.cnf</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql      156 6Êúà  13 18:50 binlog.000005</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql      156 7Êúà   9 13:05 binlog.000006</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql      156 7Êúà   9 13:05 binlog.000007</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql       48 7Êúà   9 13:05 binlog.index</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"comment\">-------. 1 mysql mysql     1676 5Êúà   9 21:36 ca-key.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">--r--. 1 mysql mysql     1112 5Êúà   9 21:36 ca.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">--r--. 1 mysql mysql     1112 5Êúà   9 21:36 client-cert.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"comment\">-------. 1 mysql mysql     1680 5Êúà   9 21:36 client-key.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql   196608 7Êúà   9 13:05 #ib_16384_0.dblwr</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql  8585216 5Êúà   9 21:36 #ib_16384_1.dblwr</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql     3357 5Êúà  10 22:47 ib_buffer_pool</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 12582912 7Êúà   9 13:05 ibdata1</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 50331648 7Êúà   9 13:05 ib_logfile0</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 50331648 5Êúà   9 21:36 ib_logfile1</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 12582912 7Êúà   9 13:05 ibtmp1</span></span><br><span class=\"line\">drwxr<span class=\"operator\">-</span>x<span class=\"comment\">---. 2 mysql mysql     4096 7Êúà   9 13:05 #innodb_temp</span></span><br><span class=\"line\">drwxr<span class=\"operator\">-</span>x<span class=\"comment\">---. 2 mysql mysql     4096 5Êúà   9 21:36 mysql</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 25165824 7Êúà   9 13:05 mysql.ibd</span></span><br><span class=\"line\">srwxrwxrwx. <span class=\"number\">1</span> mysql mysql        <span class=\"number\">0</span> <span class=\"number\">7</span>Êúà   <span class=\"number\">9</span> <span class=\"number\">13</span>:<span class=\"number\">05</span> mysql.sock</span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"comment\">-------. 1 mysql mysql        5 7Êúà   9 13:05 mysql.sock.lock</span></span><br><span class=\"line\">drwxr<span class=\"operator\">-</span>x<span class=\"comment\">---. 2 mysql mysql     4096 5Êúà   9 21:36 performance_schema</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"comment\">-------. 1 mysql mysql     1680 5Êúà   9 21:36 private_key.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">--r--. 1 mysql mysql      452 5Êúà   9 21:36 public_key.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">--r--. 1 mysql mysql     1112 5Êúà   9 21:36 server-cert.pem</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"comment\">-------. 1 mysql mysql     1680 5Êúà   9 21:36 server-key.pem</span></span><br><span class=\"line\">drwxr<span class=\"operator\">-</span>x<span class=\"comment\">---. 2 mysql mysql     4096 5Êúà   9 21:36 sys</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 16777216 7Êúà   9 13:05 undo_001</span></span><br><span class=\"line\"><span class=\"operator\">-</span>rw<span class=\"operator\">-</span>r<span class=\"comment\">-----. 1 mysql mysql 16777216 7Êúà   9 13:05 undo_002</span></span><br></pre></td></tr></table></figure>\n\n<p>Ëøô‰∏™Êï∞ÊçÆÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ÂíåÂ≠êÁõÆÂΩïÊØîËæÉÂ§öÔºåÈô§‰∫Ü <code>information_schema</code> Ëøô‰∏™Á≥ªÁªüÊï∞ÊçÆÂ∫ìÂ§ñÔºåÂÖ∂‰ªñÁöÑÊï∞ÊçÆÂ∫ìÂú® <code>Êï∞ÊçÆÁõÆÂΩï</code> ‰∏ãÈÉΩÊúâÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï„ÄÇ</p>\n<h3 id=\"2-3-Ë°®Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\"><a href=\"#2-3-Ë°®Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\" class=\"headerlink\" title=\"2.3 Ë°®Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\"></a>2.3 Ë°®Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫</h3><h4 id=\"2-3-1-InnoDBÂ≠òÂÇ®ÂºïÊìéÊ®°Âºè\"><a href=\"#2-3-1-InnoDBÂ≠òÂÇ®ÂºïÊìéÊ®°Âºè\" class=\"headerlink\" title=\"2.3.1 InnoDBÂ≠òÂÇ®ÂºïÊìéÊ®°Âºè\"></a>2.3.1 InnoDBÂ≠òÂÇ®ÂºïÊìéÊ®°Âºè</h4><p><strong>1„ÄÅË°®ÁªìÊûÑ</strong></p>\n<p>‰∏∫‰∫Ü‰øùÂ≠òË°®ÁªìÊûÑÔºå <code>InnoDB</code>Âú® <code>Êï∞ÊçÆÁõÆÂΩï</code> ‰∏ãÂØπÂ∫îÁöÑÊï∞ÊçÆÂ∫ìÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∫Ü‰∏Ä‰∏™‰∏ìÈó®Áî®‰∫é <code>ÊèèËø∞Ë°®ÁªìÊûÑÁöÑÊñá‰ª∂</code>ÔºåÊñá‰ª∂ÂêçÊòØËøôÊ†∑Ôºö<code>Ë°®Âêç.frm</code></p>\n<p>ÊØîÊñπËØ¥Êàë‰ª¨Âú® <code>test</code>Êï∞ÊçÆÂ∫ì‰∏ãÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫<code>test</code>ÁöÑË°®</p>\n<p>ÈÇ£Âú®Êï∞ÊçÆÂ∫ì <code>test</code> ÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï‰∏ãÂ∞±‰ºöÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ <code>test.frm</code> ÁöÑÁî®‰∫éÊèèËø∞Ë°®ÁªìÊûÑÁöÑÊñá‰ª∂„ÄÇ<code>.frm</code> Êñá‰ª∂ÁöÑÊ†ºÂºèÂú®‰∏çÂêåÁöÑÂπ≥Âè∞‰∏äÈÉΩÊòØÁõ∏ÂêåÁöÑ„ÄÇËøô‰∏™ÂêéÁºÄÂêç‰∏∫ <code>.frm</code> ÊòØ‰ª• <code>‰∫åËøõÂà∂Ê†ºÂºè</code> Â≠òÂÇ®ÁöÑÔºåÊàë‰ª¨Áõ¥Êé•ÊâìÂºÄÊòØ‰π±Á†ÅÁöÑ„ÄÇ</p>\n<p><strong>2„ÄÅË°®‰∏≠Êï∞ÊçÆÂíåÁ¥¢Âºï</strong></p>\n<p><font color=#880000><strong>‚ë†Á≥ªÁªüË°®Á©∫Èó¥Ôºàsystem tablespaceÔºâ</strong></font></p>\n<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåInnoDB ‰ºöÂú®Êï∞ÊçÆÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ <code>ibdata1</code>„ÄÅÂ§ßÂ∞è‰∏∫ <code>12M</code> ÁöÑÊñá‰ª∂ÔºåËøô‰∏™Êñá‰ª∂Â∞±ÊòØÂØπÂ∫îÁöÑ <code>Á≥ªÁªüË°®Á©∫Èó¥</code> Âú®Êñá‰ª∂Á≥ªÁªü‰∏äÁöÑË°®Á§∫„ÄÇÊÄé‰πàÊâç12MÔºü</p>\n<p>Ê≥®ÊÑèËøô‰∏™Êñá‰ª∂ÊòØ <code>Ëá™Êâ©Â±ïÊñá‰ª∂</code> ÔºåÂΩì‰∏çÂ§üÁî®ÁöÑÊó∂ÂÄôÂÆÉ‰ºöËá™Â∑±Â¢ûÂä†Êñá‰ª∂Â§ßÂ∞è„ÄÇ</p>\n<p>ÂΩìÁÑ∂ÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥ËÆ©Á≥ªÁªüË°®Á©∫Èó¥ÂØπÂ∫îÊñá‰ª∂Á≥ªÁªü‰∏äÂ§ö‰∏™ÂÆûÈôÖÊñá‰ª∂ÔºåÊàñËÄÖ‰ªÖ‰ªÖËßâÂæóÂéüÊù•ÁöÑ <code>ibdata1</code> Ëøô‰∏™Êñá‰ª∂ÂêçÈöæÂê¨ÔºåÈÇ£ÂèØ‰ª•Âú®MySQLÂêØÂä®Êó∂ÈÖçÁΩÆÂØπÂ∫îÁöÑÊñá‰ª∂Ë∑ØÂæÑ‰ª•ÂèäÂÆÉ‰ª¨ÁöÑÂ§ßÂ∞èÔºåÊØîÂ¶ÇÊàë‰ª¨ËøôÊ†∑‰øÆÊîπ‰∏Ä‰∏ãmy.cnf ÈÖçÁΩÆÊñá‰ª∂:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[server]</span><br><span class=\"line\">innodb_data_file_path=data1:512M;data2:512M:autoextend</span><br></pre></td></tr></table></figure>\n\n<p>ËøôÊ†∑Âú®MySQLÂêØÂä®‰πãÂêéÂ∞±‰ºöÂàõÂª∫Ëøô‰∏§‰∏™512MÂ§ßÂ∞èÁöÑÊñá‰ª∂‰Ωú‰∏∫<code>Á≥ªÁªüË°®Á©∫Èó¥</code>ÔºåÂÖ∂‰∏≠ÁöÑ<code>autoextend</code>Ë°®ÊòéËøô‰∏§‰∏™Êñá‰ª∂Â¶ÇÊûú‰∏çÂ§üÁî®‰ºöËá™Âä®Êâ©Â±ïdata2Êñá‰ª∂ÁöÑÂ§ßÂ∞è„ÄÇ</p>\n<p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑ‰∏ÄÁÇπÊòØ,&#x3D;&#x3D;Âú®‰∏Ä‰∏™MySQLÊúçÂä°Âô®‰∏≠ÔºåÁ≥ªÁªüË°®Á©∫Èó¥Âè™Êúâ‰∏Ä‰ªΩ&#x3D;&#x3D;„ÄÇ‰ªéMySQL5.5.7Âà∞MySQL5.6.6‰πãÈó¥ÁöÑÂêÑ‰∏™ÁâàÊú¨‰∏≠ÔºåÊàë‰ª¨<strong>Ë°®‰∏≠ÁöÑÊï∞ÊçÆÈÉΩ‰ºöË¢´ÈªòËÆ§Â≠òÂÇ®Âà∞Ëøô‰∏™Á≥ªÁªüË°®Á©∫Èó¥</strong>„ÄÇ</p>\n<p><strong><font color=#880000>‚ë°Áã¨Á´ãË°®Á©∫Èó¥Ôºàfile-per-table tablespaceÔºâ</font></strong></p>\n<p>Âú® MySQL 5.6.6 ‰ª•Âèä‰πãÂêéÁöÑÁâàÊú¨‰∏≠ÔºåInnoDB Âπ∂‰∏ç‰ºöÈªòËÆ§ÁöÑÊääÂêÑ‰∏™Ë°®ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Âà∞Á≥ªÁªüË°®Á©∫Èó¥‰∏≠ÔºåËÄåÊòØ‰∏∫ <code>ÊØè‰∏Ä‰∏™Ë°®Âª∫Á´ã‰∏Ä‰∏™Áã¨Á´ãË°®Á©∫Èó¥</code>Ôºå‰πüÂ∞±ÊòØËØ¥Êàë‰ª¨ÂàõÂª∫‰∫ÜÂ§öÂ∞ë‰∏™Ë°®ÔºåÂ∞±ÊúâÂ§öÂ∞ë‰∏™Áã¨Á´ãË°®Á©∫Èó¥„ÄÇ‰ΩøÁî® <code>Áã¨Á´ãË°®Á©∫Èó¥</code> Êù•Â≠òÂÇ®Ë°®Êï∞ÊçÆÁöÑËØùÔºå‰ºöÂú®ËØ•Ë°®ÊâÄÂ±ûÊï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Ë°®Á§∫ËØ•Áã¨Á´ãË°®Á©∫Èó¥ÁöÑÊñá‰ª∂ÔºåÊñá‰ª∂ÂêçÂíåË°®ÂêçÁõ∏ÂêåÔºåÂè™‰∏çËøáÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ <code>.ibd</code> ÁöÑÊâ©Â±ïÂêçËÄåÂ∑≤ÔºåÊâÄ‰ª•ÂÆåÊï¥ÁöÑÊñá‰ª∂ÂêçÁß∞ÈïøËøôÊ†∑Ôºö</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Ë°®Âêç.ibd</span><br></pre></td></tr></table></figure>\n\n<p>ÊØîÂ¶ÇÔºöÊàë‰ª¨‰ΩøÁî®‰∫Ü <code>Áã¨Á´ãË°®Á©∫Èó¥</code> ÂéªÂ≠òÂÇ®<code>test</code>Êï∞ÊçÆÂ∫ì‰∏ãÁöÑ <code>test</code> Ë°®ÁöÑËØùÔºåÈÇ£‰πàÂú®ËØ•Ë°®ÊâÄÂú®Êï∞ÊçÆÂ∫ì<code>atguigu</code>ÂØπÂ∫îÁöÑ test ÁõÆÂΩï‰∏ã‰ºö‰∏∫ test Ë°®ÂàõÂª∫Ëøô‰∏§‰∏™Êñá‰ª∂Ôºö</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test.frm</span><br><span class=\"line\">test.ibd</span><br></pre></td></tr></table></figure>\n\n<p>ÂÖ∂‰∏≠ <code>test.ibd</code> Êñá‰ª∂Â∞±Áî®Êù•Â≠òÂÇ® <code>test</code> Ë°®‰∏≠ÁöÑÊï∞ÊçÆÂíåÁ¥¢ÂºïÔºõËÄå<code>text.frm</code> ÊèèËø∞Ë°®ÁöÑÁªìÊûÑ„ÄÇ</p>\n<p><strong><font color=#880000>‚ë¢Á≥ªÁªüË°®Á©∫Èó¥‰∏éÁã¨Á´ãË°®Á©∫Èó¥ÁöÑËÆæÁΩÆ</font></strong></p>\n<p>Êàë‰ª¨ÂèØ‰ª•Ëá™Â∑±ÊåáÂÆö‰ΩøÁî® <code>Á≥ªÁªüË°®Á©∫Èó¥</code> ËøòÊòØ <code>Áã¨Á´ãË°®Á©∫Èó¥</code> Êù•Â≠òÂÇ®Êï∞ÊçÆÔºåËøô‰∏™ÂäüËÉΩÁî±ÂêØÂä®ÂèÇÊï∞ <code>innodb_file_per_table</code> ÊéßÂà∂ÔºåÊØîÂ¶ÇËØ¥Êàë‰ª¨ÊÉ≥ÂàªÊÑèÂ∞ÜË°®Êï∞ÊçÆÈÉΩÂ≠òÂÇ®Âà∞ <code>Á≥ªÁªüË°®Á©∫Èó¥</code> Êó∂ÔºåÂèØ‰ª•Âú®ÂêØÂä®MySQLÊúçÂä°Âô®ÁöÑÊó∂ÂÄôËøôÊ†∑ÈÖçÁΩÆ:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[server]</span><br><span class=\"line\">innodb_file_per_table<span class=\"operator\">=</span><span class=\"number\">0</span> # <span class=\"number\">0</span>:‰ª£Ë°®‰ΩøÁî®Á≥ªÁªüË°®Á©∫Èó¥; <span class=\"number\">1</span>:‰ª£Ë°®‰ΩøÁî®Áã¨Á´ãË°®Á©∫Èó¥</span><br></pre></td></tr></table></figure>\n\n<p>ÈªòËÆ§ÊÉÖÂÜµ:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> variables <span class=\"keyword\">like</span> <span class=\"string\">&#x27;innodb_file_per_table&#x27;</span>;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------------------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Variable_name         <span class=\"operator\">|</span> <span class=\"keyword\">Value</span> <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------------------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> innodb_file_per_table <span class=\"operator\">|</span> <span class=\"keyword\">ON</span>    <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------------------+-------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.01</span> sec) # <span class=\"keyword\">on</span>Ôºö‰ª£Ë°®Áã¨Á´ãË°®Á©∫Èó¥</span><br></pre></td></tr></table></figure>\n\n<p><strong><font color=#880000>‚ë£ÂÖ∂‰ªñÁ±ªÂûãÁöÑË°®Á©∫Èó¥</font></strong></p>\n<p>ÈöèÁùÄMySQLÁöÑÂèëÂ±ïÔºåÈô§‰∫Ü‰∏äËø∞‰∏§ÁßçËÄÅÁâåË°®Á©∫Èó¥‰πãÂ§ñÔºåÁé∞Âú®ËøòÊñ∞ÊèêÂá∫‰∫Ü‰∏Ä‰∫õ‰∏çÂêåÁ±ªÂûãÁöÑË°®Á©∫Èó¥ÔºåÊØîÂ¶ÇÈÄöÁî®Ë°®Á©∫Èó¥Ôºàgeneral tablespaceÔºâ„ÄÅ‰∏¥Êó∂Ë°®Á©∫Èó¥Ôºàtemporary tablespaceÔºâÁ≠â„ÄÇ</p>\n<p><strong>3„ÄÅÂõæËß£</strong></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733845.png\"></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091733587.png\"></p>\n<p><strong>4„ÄÅÁñëÈóÆ</strong></p>\n<p><code>.frm</code> Âú®MySQL8‰∏≠‰∏çÂ≠òÂú®‰∫ÜÔºåÂéªÂì™Èáå‰∫ÜÔºü</p>\n<p>ËøôÂ∞±ÈúÄË¶ÅËß£Êûê <code>ibd Êñá‰ª∂</code>„ÄÇOracleÂÆòÊñπÂ∞Ü <code>frmÊñá‰ª∂</code> ÁöÑ‰ø°ÊÅØÂèäÊõ¥Â§ö‰ø°ÊÅØÁßªÂä®Âà∞Âè´ÂÅöÂ∫èÂàóÂåñÂ≠óÂÖ∏‰ø°ÊÅØÔºàSerialized Dictionary Information,SDIÔºâÔºåSDI Ë¢´ÂÜôÂú® ibd Êñá‰ª∂ÂÜÖÈÉ®ÔºåMySQL 8.0 Â±û‰∫é Oracle Êóó‰∏ãÔºåÂêåÁêÜ„ÄÇ</p>\n<p>‰∏∫‰∫Ü‰ªé IBD Êñá‰ª∂‰∏≠ÊèêÂèñ SDI ‰ø°ÊÅØÔºåOracle Êèê‰æõ‰∫Ü‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫è ibd2sdi</p>\n<p>Ëøô‰∏™Â∑•ÂÖ∑‰∏çÈúÄË¶Å‰∏ãËΩΩÔºåMySQL8Ëá™Â∏¶ÁöÑÊúâÔºåÂè™ÈúÄË¶Å‰Ω†ÈÖçÂ•ΩÁéØÂ¢ÉÂèòÈáèÂ∞±ËÉΩÂà∞Â§ÑÁî®„ÄÇ</p>\n<p>Êü•ÁúãË°®ÁªìÊûÑÔºöÂà∞Â≠òÂÇ®ibdÊñá‰ª∂ÁöÑÁõÆÂΩï‰∏ãÔºåÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ibd2sdi <span class=\"comment\">--dump-file=student.txt student.ibd</span></span><br></pre></td></tr></table></figure>\n\n<p>ËøôÊ†∑ ibd2sdi Â∞±‰ºöÊää <code>xxx.ibd</code> ÈáåÂ≠òÂÇ®ÁöÑË°®ÁªìÊûÑ‰ª• json ÁöÑÊ†ºÂºè‰øùÂ≠òÂú® student.txt ‰∏≠</p>\n<h4 id=\"2-3-2-MyISAM-Â≠òÂÇ®ÂºïÊìéÊ®°Âºè\"><a href=\"#2-3-2-MyISAM-Â≠òÂÇ®ÂºïÊìéÊ®°Âºè\" class=\"headerlink\" title=\"2.3.2 MyISAM Â≠òÂÇ®ÂºïÊìéÊ®°Âºè\"></a>2.3.2 MyISAM Â≠òÂÇ®ÂºïÊìéÊ®°Âºè</h4><p><strong>1„ÄÅË°®ÁªìÊûÑ</strong></p>\n<p>Âú®Â≠òÂÇ®Ë°®ÁªìÊûÑÊñπÈù¢Ôºå <code>MyISAM</code> Âíå <code>InnoDB</code> ‰∏ÄÊ†∑Ôºå‰πüÊòØÂú® <code>Êï∞ÊçÆÁõÆÂΩï</code> ‰∏ãÂØπÂ∫îÁöÑÊï∞ÊçÆÂ∫ìÂ≠êÁõÆÂΩï‰∏ãÂàõÂª∫‰∫Ü‰∏Ä‰∏™‰∏ì Èó®Áî®‰∫éÊèèËø∞Ë°®ÁªìÊûÑÁöÑÊñá‰ª∂Ôºö<code>Ë°®Âêç.frm</code></p>\n<p><strong>2„ÄÅË°®‰∏≠Êï∞ÊçÆÂíåÁ¥¢Âºï</strong></p>\n<p>Âú® MyISAM ‰∏≠ÁöÑÁ¥¢ÂºïÂÖ®ÈÉ®ÈÉΩÊòØ <code>‰∫åÁ∫ßÁ¥¢Âºï</code> ÔºåËØ•Â≠òÂÇ®ÂºïÊìéÁöÑ <code>Êï∞ÊçÆÂíåÁ¥¢ÂºïÊòØÂàÜÂºÄÂ≠òÊîæ</code> ÁöÑ„ÄÇÊâÄ‰ª•Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠‰πüÊòØ‰ΩøÁî®‰∏çÂêåÁöÑÊñá‰ª∂Êù•Â≠òÂÇ®Êï∞ÊçÆÊñá‰ª∂ÂíåÁ¥¢ÂºïÊñá‰ª∂ÔºåÂêåÊó∂Ë°®Êï∞ÊçÆÈÉΩÂ≠òÊîæÂú®ÂØπÂ∫îÁöÑÊï∞ÊçÆÂ∫ìÂ≠êÁõÆÂΩï‰∏ã„ÄÇÂÅáÂ¶Ç <code>test</code> Ë°®‰ΩøÁî® MyISAM Â≠òÂÇ®ÂºïÊìéÁöÑËØùÔºåÈÇ£‰πàÂú®ÂÆÉÊâÄÂú®Êï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑ <code>test</code> ÁõÆÂΩï‰∏ã‰ºö‰∏∫ test Ë°®ÂàõÂª∫Ëøô‰∏â‰∏™Êñá‰ª∂Ôºö</p>\n<ul>\n<li><code>test.frm</code> Â≠òÂÇ®Ë°®ÁªìÊûÑ</li>\n<li><code>test.MYD</code> Â≠òÂÇ®Êï∞ÊçÆ (MYData)</li>\n<li><code>test.MYI</code> Â≠òÂÇ®Á¥¢Âºï (MYIndex)</li>\n</ul>\n<p><strong>3„ÄÅÂõæËß£</strong></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091734468.png\"></p>\n<h3 id=\"2-4-Â∞èÁªì\"><a href=\"#2-4-Â∞èÁªì\" class=\"headerlink\" title=\"2.4 Â∞èÁªì\"></a>2.4 Â∞èÁªì</h3><p>‰∏æ‰æãÔºö<code>Êï∞ÊçÆÂ∫ì a</code> Ôºå <code>Ë°®b</code> „ÄÇ</p>\n<ol>\n<li><p>Â¶ÇÊûúË°® b ÈááÁî® <code>InnoDB</code> Ôºådata&#x2F;a ‰∏≠‰ºö‰∫ßÁîü 1 ‰∏™ÊàñËÄÖ 2 ‰∏™Êñá‰ª∂:</p>\n<ul>\n<li><code>b.frm</code>ÔºöÊèèËø∞Ë°®ÁªìÊûÑÊñá‰ª∂ÔºåÂ≠óÊÆµÈïøÂ∫¶Á≠â</li>\n<li>Â¶ÇÊûúÈááÁî® <code>Á≥ªÁªüË°®Á©∫Èó¥</code> Ê®°ÂºèÁöÑÔºåÊï∞ÊçÆ‰ø°ÊÅØÂíåÁ¥¢Âºï‰ø°ÊÅØÈÉΩÂ≠òÂÇ®Âú® <code>ibdata1</code> ‰∏≠</li>\n<li>Â¶ÇÊûúÈááÁî® <code>Áã¨Á´ãË°®Á©∫Èó¥</code> Â≠òÂÇ®Ê®°ÂºèÔºådata&#x2F;a‰∏≠Ëøò‰ºö‰∫ßÁîü <code>b.ibd</code> Êñá‰ª∂ÔºàÂ≠òÂÇ®Êï∞ÊçÆ‰ø°ÊÅØÂíåÁ¥¢Âºï‰ø°ÊÅØÔºâ</li>\n</ul>\n<blockquote>\n<p>MySQL 5.7 ‰∏≠‰ºöÂú® data&#x2F;a ÁöÑÁõÆÂΩï‰∏ãÁîüÊàê <code>db.opt</code> Êñá‰ª∂Áî®‰∫é‰øùÂ≠òÊï∞ÊçÆÂ∫ìÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆ„ÄÇÊØîÂ¶ÇÔºöÂ≠óÁ¨¶ÈõÜ„ÄÅÊØîËæÉËßÑÂàô„ÄÇËÄå MySQL 8.0 ‰∏çÂÜçÊèê‰æõ db.opt Êñá‰ª∂„ÄÇ</p>\n<p>MySQL 8.0 ‰∏≠ ‰∏çÂÜçÂçïÁã¨Êèê‰æõ <code>b.frm</code>ÔºåËÄåÊòØÂêàÂπ∂Âú® <code>b.ibd</code> Êñá‰ª∂‰∏≠„ÄÇ</p>\n</blockquote>\n</li>\n<li><p>Â¶ÇÊûúË°® b ÈááÁî® <code>MyISAM</code> Ôºådata&#x2F;a‰∏≠‰ºö‰∫ßÁîü 3 ‰∏™Êñá‰ª∂:</p>\n<ul>\n<li>MySQL5.7 ‰∏≠ <code>b.frm</code> ÔºöÊèèËø∞Ë°®ÁªìÊûÑÊñá‰ª∂ÔºåÂ≠óÊÆµÈïøÂ∫¶Á≠â„ÄÇ</li>\n<li>MySQL8.0 ‰∏≠ <code>b.xxx.sdi</code> ÔºöÊèèËø∞Ë°®ÁªìÊûÑÊñá‰ª∂ÔºåÂ≠óÊÆµÈïøÂ∫¶Á≠â</li>\n<li><code>b.MYD</code> (MYData)ÔºöÊï∞ÊçÆ‰ø°ÊÅØÊñá‰ª∂ÔºåÂ≠òÂÇ®Êï∞ÊçÆ‰ø°ÊÅØ(Â¶ÇÊûúÈááÁî®Áã¨Á´ãË°®Â≠òÂÇ®Ê®°Âºè)</li>\n<li><code>b.MYI</code> (MYIndex)ÔºöÂ≠òÊîæÁ¥¢Âºï‰ø°ÊÅØÊñá‰ª∂</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"2-5-ËßÜÂõæÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\"><a href=\"#2-5-ËßÜÂõæÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\" class=\"headerlink\" title=\"2.5 ËßÜÂõæÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫\"></a>2.5 ËßÜÂõæÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑË°®Á§∫</h3><p>Êàë‰ª¨Áü•ÈÅìMySQL‰∏≠ÁöÑ<code>ËßÜÂõæ</code>ÂÖ∂ÂÆûÊòØ<code>ËôöÊãüÁöÑË°®</code>Ôºå‰πüÂ∞±ÊòØÊüê‰∏™Êü•ËØ¢ËØ≠Âè•ÁöÑ‰∏Ä‰∏Ä‰∏™Âà´ÂêçËÄåÂ∑≤ÔºåÊâÄ‰ª•Âú®Â≠òÂÇ®ËßÜÂõæÁöÑÊó∂ÂÄôÊòØ‰∏çË¶ÅÂ≠òÂÇ®ÁúüÂÆûÁöÑÊï∞ÊçÆÁöÑÔºåÂè™ÈúÄË¶ÅÊääÂÆÉÁöÑÁªìÊûÑÂ≠òÂÇ®Ëµ∑Êù•Â∞±Ë°å‰∫Ü„ÄÇÂíåË°®‰∏ÄÊ†∑ÔºåÊèèËø∞ËßÜÂõæÁªìÊûÑÁöÑÊñá‰ª∂‰πü‰ºöË¢´Â≠òÂÇ®Âà∞ÊâÄÂ±ûÊï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩï‰∏ãËæπÔºåÂè™‰ºöÂ≠òÂÇ®‰∏Ä‰∏™<code>ËßÜÂõæÂêç. frm</code>ÁöÑÊñá‰ª∂„ÄÇÂ¶Ç‰∏ãÂõæ‰∏≠ÁöÑ: <code>emp_details_view.frm</code></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207091735198.png\" alt=\"image-20220709125100055\"></p>\n<h3 id=\"2-6-ÂÖ∂‰ªñÁöÑÊñá‰ª∂\"><a href=\"#2-6-ÂÖ∂‰ªñÁöÑÊñá‰ª∂\" class=\"headerlink\" title=\"2.6 ÂÖ∂‰ªñÁöÑÊñá‰ª∂\"></a>2.6 ÂÖ∂‰ªñÁöÑÊñá‰ª∂</h3><p>Èô§‰∫ÜÊàë‰ª¨‰∏äËæπËØ¥ÁöÑËøô‰∫õÁî®Êà∑Ëá™Â∑±Â≠òÂÇ®ÁöÑÊï∞ÊçÆ‰ª•Â§ñÔºå<code>Êï∞ÊçÆÁõÆÂΩï</code>‰∏ãËøòÂåÖÊã¨‰∏∫‰∫ÜÊõ¥Â•ΩËøêË°åÁ®ãÂ∫èÁöÑ‰∏Ä‰∫õÈ¢ùÂ§ñÊñá‰ª∂,‰∏ªË¶ÅÂåÖÊã¨ËøôÂá†ÁßçÁ±ªÂûãÁöÑÊñá‰ª∂:</p>\n<ul>\n<li><p><strong>ÊúçÂä°Âô®ËøõÁ®ãÊñá‰ª∂</strong></p>\n<p>Êàë‰ª¨Áü•ÈÅìÊØèËøêË°å‰∏Ä‰∏™MySQLÊúçÂä°Âô®Á®ãÂ∫è,ÈÉΩÊÑèÂë≥ÁùÄÂêØÂä®‰∏Ä‰∏™ËøõÁ®ã„ÄÇMySQLÊúçÂä°Âô®‰ºöÊääËá™Â∑±ÁöÑËøõÁ®ãIDÂÜôÂÖ•Âà∞‰∏Ä‰∏™Êñá‰ª∂‰∏≠„ÄÇ</p>\n</li>\n<li><p><strong>ÊúçÂä°Âô®Êó•ÂøóÊñá‰ª∂</strong></p>\n<p>Âú®ÊúçÂä°Âô®ËøêË°åËøáÁ®ã‰∏≠Ôºå‰ºö‰∫ßÁîüÂêÑÁßçÂêÑÊ†∑ÁöÑÊó•ÂøóÔºåÊØîÂ¶ÇÂ∏∏ËßÑÁöÑÊü•ËØ¢Êó•Âøó„ÄÅÈîôËØØÊó•Âøó„ÄÅ‰∫åËøõÂà∂Êó•Âøó„ÄÅredoÊó•ÂøóÁ≠â„ÄÇËøô‰∫õÊó•ÂøóÂêÑÊúâÂêÑÁöÑÁî®ÈÄî„ÄÇÂêéÈù¢ËÆ≤Ëß£„ÄÇ</p>\n</li>\n<li><p><strong>ÈªòËÆ§&#x2F;Ëá™Âä®ÁîüÊàêÁöÑSSLÂíåRSAËØÅ‰π¶ÂíåÂØÜÈí•Êñá‰ª∂</strong></p>\n<p>‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®ÂÆâÂÖ®ÈÄö‰ø°ËÄåÂàõÂª∫ÁöÑ‰∏Ä‰∫õÊñá‰ª∂„ÄÇ</p>\n</li>\n</ul>\n"},{"title":"Hello World","cover":"/img/cover_06.png","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\ncover: /img/cover_06.png\ntags: Hexo\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2024-03-31T11:17:45.655Z","updated":"2024-04-01T15:43:30.313Z","comments":1,"layout":"post","photos":[],"_id":"cluh5piva0003gs2vgh0b22ne","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","cover_type":"img","excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"‰∏ÄÊñáÊïô‰ºö‰Ω†Â∑ßÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ","date":"2024-04-01T08:50:57.000Z","cover":"/img/cover_04.png","top_img":"https://bu.dusays.com/2021/03/06/daffe400090d4.jpg","_content":"\n@[TOC]\n\n> Êú¨ÊñáÂèÇËÄÉËá™12.29Êó•Â∞öÁ°ÖË∞∑Èõ∑Á•ûÁöÑ [Â∑ßÂ¶ô‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ](https://gitee.com/leifengyang/java-design-pattern)\n\n## ‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\n\n- ÊÄª‰ΩìÂàÜÁ±ª\n\n![image-20230113210444492](https://img-blog.csdnimg.cn/img_convert/9e402b0c6ec2bc81a317c6b8774d2c7f.png)\n\n- ‰∏çÂêåÊó∂ÊúüÈÄâÊã©‰∏çÂêåÁöÑËÆæËÆ°Ê®°Âºè~\n\n![image-20230114113220058](https://img-blog.csdnimg.cn/img_convert/5ed1ffc8fb36192278f04e22eb606402.png)\n\n- ËÆæËÆ°Ê®°ÂºèÊú¨Ë¥®‰∏äÁé©ÁöÑÂ∞±ÊòØÔºö`Â∞ÅË£Ö`Ôºå`ÁªßÊâø`Ôºå`Â§öÊÄÅ`\n- ËÆæËÆ°Ê®°ÂºèÈÅµÂæ™ÁöÑÂÖ≠Â§ßÂéüÂàô\n\n![image-20230114113416409](https://img-blog.csdnimg.cn/img_convert/df85588b81d2d6631d201855a66ea948.png)\n\n## ‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\n\n**ÊèèËø∞Ôºö**Áà∂Á±ªÔºàÊé•Âè£„ÄÅÊäΩË±°Á±ªÔºâÊèê‰æõ‰∫Ü‰∏ÄÁßç`ÂÆö‰πâÁÆóÊ≥ïÁöÑÈ™®Êû∂`Ôºå==ÂÖÅËÆ∏Â≠êÁ±ª‰∏∫‰∏Ä‰∏™ÊàñÂ§ö‰∏™Ê≠•È™§Êèê‰æõÂÆûÁé∞==ÔºåÂú®‰∏çÊîπÂèòÁÆóÊ≥ïÁªìÊûÑÁöÑÊÉÖÂÜµ‰∏ãÔºåÈáçÊñ∞ÂÆö‰πâÁÆóÊ≥ïÁöÑÊüê‰∫õÊ≠•È™§„ÄÇ\n\n![](https://img-blog.csdnimg.cn/img_convert/65b0a3725926c195902515b16a6411d4.png)\n\n**Ê°à‰æãÔºöËÆ¢ÂçïÂ§ÑÁêÜ**\n\n<font color=orange>1„ÄÅÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø</font>\n\n```java\n/**\n * @author lfy\n * @Description ÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø\n * @create 2022-12-29 20:21\n */\npublic abstract class OrderProcessTemplate {\n\n    /**\n     * Â§ÑÁêÜËÆ¢ÂçïÔºö ÂÆö‰πâÂ•ΩÁÆóÊ≥ïÈ™®Êû∂\n     */\n    public final void processOrder(){\n        //1„ÄÅÈÄâÊã©ÂïÜÂìÅ\n        doSelect();\n        //2„ÄÅËøõË°åÊîØ‰ªò\n        doPayment();\n        //3„ÄÅÂºÄÂÖ∑ÂèëÁ•®\n        doReceipt();\n        //4„ÄÅÊ¥æÈÄÅÂïÜÂìÅ\n        doDelivery();\n\n    }\n\n\n    public abstract void doSelect();\n    public abstract void doPayment();\n    public abstract void doReceipt();\n    public abstract void doDelivery();\n\n\n}\n```\n\n<font color=orange>2„ÄÅÂÆö‰πâÂÆûÁé∞Á±ªÔºö`NetOrder` Âíå `StoreOrder`</font>\n\n```java\n/**\n * @author lfy\n * @Description ÁΩëÁªúËÆ¢ÂçïÔºöÁÆóÊ≥ïÁªÜËäÇÂÆûÁé∞\n * @create 2022-12-29 20:24\n */\npublic class NetOrder extends OrderProcessTemplate {\n    @Override\n    public void doSelect() {\n        System.out.println(\"Êää xiaomi11 Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶\");\n    }\n\n    @Override\n    public void doPayment() {\n        System.out.println(\"Âú®Á∫øÂæÆ‰ø°ÊîØ‰ªò 1999\");\n    }\n\n    @Override\n    public void doReceipt() {\n        System.out.println(\"ÂèëÁ•®Â∑≤ÁªèÂèëÈÄÅÁªôÁî®Êà∑ÈÇÆÁÆ±Ôºö aaaa@qq.com\");\n    }\n\n    @Override\n    public void doDelivery() {\n        System.out.println(\"È°∫‰∏∞Ê¨°Êó•ËææÔºöÊäïÈÄÅÂïÜÂìÅ\");\n    }\n}\n```\n\n```java\n/**\n * @author lfy\n * @Description Èó®Â∫óËÆ¢ÂçïÔºöÂ≠êÁ±ªÂÆûÁé∞ÂÖ∑‰ΩìÁÆóÊ≥ï\n * @create 2022-12-29 20:26\n */\npublic class StoreOrder extends OrderProcessTemplate {\n    @Override\n    public void doSelect() {\n        System.out.println(\"Áî®Êà∑ÈÄâÊã©‰∫ÜÔºö3Âè∑Ë¥ßÊû∂-xiaomi11 ÂïÜÂìÅ\");\n    }\n\n    @Override\n    public void doPayment() {\n        System.out.println(\"Âà∑Âç°Êú∫ÔºöÂà∑Âç°ÊîØ‰ªò 1999\");\n    }\n\n    @Override\n    public void doReceipt() {\n        System.out.println(\"ÊâìÂç∞ÂèëÁ•®ÔºåÂíåÁâ©ÂìÅ‰∏ÄËµ∑ÂåÖË£Ö\");\n    }\n\n    @Override\n    public void doDelivery() {\n        System.out.println(\"ÊääÂïÜÂìÅ‰∫§ÁªôÁî®Êà∑ÔºåÁî®ÊºÇ‰∫ÆÁöÑË¢ãÂ≠ê\");\n    }\n}\n```\n\n3„ÄÅËøõË°åÊµãËØï\n\n```java\n/**\n * ËÆæËÆ°Ê®°ÂºèÔºö  Â§öÂÆö‰πâÊé•Âè£„ÄÅÊäΩË±°Á±ª\n * 1Ôºâ„ÄÅ‰æùËµñÂÄíÁΩÆÔºõ ‰æùËµñÊäΩË±°\n * 2Ôºâ„ÄÅÂ§öÊÄÅÔºõ    Èöè‰æøÊõøÊç¢ÂÆûÁé∞\n * @author lfy\n * @Description Ê®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊµãËØï Ôºõ Ê†∏ÂøÉÔºö Áà∂Á±ªÂÆö‰πâÁÆóÊ≥ïÈ™®Êû∂ÔºåÂ≠êÁ±ªÂÆûÁé∞ÁÆóÊ≥ïÁªÜËäÇ\n * @create 2022-12-28 20:41\n */\npublic class TemplateMethodPatternTest {\n\n    public static void main(String[] args) {\n        //Ë°å‰∏∫ÂûãÊ®°ÂºèÁé©ÁöÑÂ∞±ÊòØ‰∏Ä‰∏™Â§öÊÄÅ\n        //1„ÄÅÂ§ñÁïåË∞ÉÁî®Ê®°ÊùøÁ±ª„ÄêÈÅµÂæ™‰æùËµñÂèçËΩ¨ÂéüÂàô„Äë„Äê‰æùËµñÊäΩË±°ËÄå‰∏çÊòØÁªÜËäÇ„Äë\n        OrderProcessTemplate processTemplate = new NetOrder();\n        System.out.println(\"ÁΩëÁªúËÆ¢ÂçïÔºö\");\n        //Â§ÑÁêÜËÆ¢Âçï\n        processTemplate.processOrder(); //ÂÆö‰πâ‰∫ÜÁÆóÊ≥ïÁöÑÊ®°Êùø\n\n\n        processTemplate = new StoreOrder();\n        System.out.println(\"Èó®Â∫óËÆ¢ÂçïÔºö\");\n        // Ê†πÊçÆÈúÄË¶ÅÔºåÈÄâÊã©‰∏çÂêåÁöÑÂÆûÁé∞Á±ªÔºå‰ªéËÄåËææÂà∞Êàë‰ª¨ÈúÄË¶ÅÁöÑÊïàÊûúÔºöÁΩëÁªúËÆ¢Âçï Êàñ Èó®Â∫óËÆ¢Âçï\n        processTemplate.processOrder();\n    }\n}\n```\n\nËøêË°åÁªìÊûúÔºö\n\n![image-20230113220611870](https://img-blog.csdnimg.cn/img_convert/039d094065690f2e4da8f73e94526786.png)\n\n## ‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\n\n**ÊèèËø∞Ôºö**ÂÆö‰πâ`ÁÆóÊ≥ïÂÆ∂ÊóèÔºåÂàÜÂà´Â∞ÅË£Ö`Ëµ∑Êù•ÔºåËÆ©ÂÆÉ‰ª¨‰πãÈó¥ÂèØ‰ª•`Áõ∏‰∫íÊõøÊç¢`ÔºåÊ≠§Ê®°ÂºèËÆ©ÁÆóÊ≥ïÁöÑÂèòÂåñÁã¨Á´ã‰∫é‰ΩøÁî®ÁÆóÊ≥ïÁöÑÂÆ¢Êà∑„ÄÇ\n\n![](https://img-blog.csdnimg.cn/img_convert/003b3cc3b5b54eee7bb255bde2e82ec5.png)\n\n**Ê°à‰æãÔºöÊéíÂ∫èÁÆóÊ≥ï**\n\n<font color=orange>1„ÄÅÂÆö‰πâÁÆóÊ≥ïÊé•Âè£</font>\n\n```java\n/**\n * @author lfy\n * @Description ÁÆóÊ≥ïÊé•Âè£ÔºöÊéíÂ∫èÁ≠ñÁï•\n * @create 2022-12-29 20:36\n */\npublic interface SortStrategy {\n\n    /**\n     * ÊéíÂ∫è\n     */\n    void sort(Integer[] arr);\n}\n```\n\n<font color=orange>2„ÄÅÂÆö‰πâÁ≠ñÁï•Á±ªÔºåÂÆûÁé∞ÁÆóÊ≥ïÊé•Âè£</font>\n\n```java\n/**\n * @author lfy\n * @Description Á≠ñÁï•1ÔºöÂÜíÊ≥°ÊéíÂ∫èÁ≠ñÁï•\n * @create 2022-12-29 20:38\n */\npublic class BubbleSortStrategy implements SortStrategy {\n    @Override\n    public void sort(Integer[] arr) {\n        System.out.println(\"ÂºÄÂßãÂÜíÊ≥°ÊéíÂ∫è....\");\n        for (int i=0;i< arr.length-1;i++){\n            for (int j = 0; j < arr.length- 1 - i  ; j++) {\n                if(arr[j] > arr[j+1]){\n                    Integer temp = arr[j];\n                    arr[j] = arr[j+1];\n                    arr[j+1] = temp;\n                }\n            }\n        }\n        System.out.println(\"ÊéíÂ∫èÁªìÊûúÔºö\"+ Arrays.asList(arr));\n\n    }\n}\n```\n\n```java\n/**\n * @author lfy\n * @Description\n * @create 2022-12-29 20:44\n */\npublic class QuickSortStrategy implements SortStrategy {\n    @Override\n    public void sort(Integer[] arr) {\n        System.out.println(\"Âø´ÈÄüÊéíÂ∫èÂºÄÂßã\");\n        Arrays.sort(arr);\n        System.out.println(\"ÊéíÂ∫èÁªìÊûúÔºö\"+Arrays.asList(arr));\n\n    }\n}\n```\n\n<font color=orange>3„ÄÅÂÆö‰πâ‰∏ä‰∏ãÊñáÂØπË±°(ÂÖ•Âè£Á±ª)ÔºöÊåÅÊúâÁ≠ñÁï•ÂØπË±°</font>\n\n```java\n/**\n * @author lfy\n * @Description ‰∏ä‰∏ãÊñáÔºöÂÖ•Âè£Á±ª\n * @create 2022-12-29 20:45\n */\npublic class SortService {\n    /**\n     * ÊãøÂà∞‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï\n     */\n    private SortStrategy strategy;\n\n    /**\n     * ‰∏∫‰∫ÜÂº∫Âà∂Ë¶ÅÊ±ÇÁî®Êà∑ÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï\n     * @param strategy\n     */\n    public SortService(SortStrategy strategy){\n        this.strategy  =strategy;\n    }\n\n    /**\n     * ÈöèÊó∂Âä®ÊÄÅÊõ¥Êñ∞ÊéíÂ∫èÁÆóÊ≥ï\n     * @param strategy\n     */\n    public void setStrategy(SortStrategy strategy) {\n        this.strategy = strategy;\n    }\n\n    /**\n     * ÊâçÊòØÂà´‰∫∫Ë∞ÉÁî®ÁöÑÊéíÂ∫èÊñπÊ≥ï\n     * @param arr\n     */\n    public void sort(Integer[] arr){\n        strategy.sort(arr);\n    }\n}\n```\n\n<font color=orange>4„ÄÅ‰ΩøÁî®Á≠ñÁï•ÂØπË±°ÊâßË°åÁÆóÊ≥ï</font>\n\n```java\n/**\n * @author lfy\n * @Description  Ê®°ÊùøÊ®°ÂºèÂÆö‰πâÂ§ßÊ°ÜÊû∂„ÄÅÁ≠ñÁï•ÈªòËÆ§ÂÆö‰πâÂ∞èÁªÜËäÇ\n * @create 2022-12-28 21:17\n */\npublic class StrategyPatternTest {\n\n    public static void main(String[] args) {\n        Integer[] arr = new Integer[]{2,4,6,3,1,7,9,8};\n\t\t// ‰º†ÂÖ•‰∏çÂêåÁöÑÁ≠ñÁï•ÔºåÂ∞±‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•\n        SortService sortService = new SortService(new BubbleSortStrategy());\n        sortService.sort(arr);\n\n        System.out.println(\"===============\");\n\n        //Êõ¥Êñ∞Á≠ñÁï•\n        sortService.setStrategy(new QuickSortStrategy());\n        sortService.sort(arr);\n\n    }\n}\n```\n\nÊµãËØïÁªìÊûúÔºö\n\n![image-20230113220248469](https://img-blog.csdnimg.cn/img_convert/879dd90a18e7a5bc986a4bca6627a4e7.png)\n\n## Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\n\n### 4.1 ÊÄùË∑ØÂàÜÊûê\n\n‰ΩøÁî®`Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè`ÔºöÂÆö‰πâ==ÊîØ‰ªòÁöÑÂÆåÊï¥ÊµÅÁ®ã==Ôºõ\n\n‰ΩøÁî®`Á≠ñÁï•Ê®°Âºè`ÔºöÂÆö‰πâ==ÊîØ‰ªòÁöÑ‰∏çÂêåÂÆûÁé∞==Ôºõ\n\n![](https://img-blog.csdnimg.cn/img_convert/2e0d3c18725c719c98d22d7b5aa1bc5a.png)\n\n### 4.2 ÂÆûÁé∞ÂõæËß£Ôºö\n\n![](https://img-blog.csdnimg.cn/img_convert/6628cf4dc83c070f9bbd822c3a45878f.png)\n\n> **ÂàÜÊûê**ÔºöPayStrategy‰ΩøÁî®ÁöÑÊòØÁ≠ñÁï•Ê®°Âºè~  PayService‰∏≠ÁöÑprocessNotifyÈáåÈù¢ÂåÖÂê´‰∫Ü ‰∏ÄÁ≥ªÂàóÊäΩË±°ÊñπÊ≥ïÁöÑË∞ÉÁî®,‰∏çÂêåÁöÑÊîØ‰ªòÊñπÂºè‰ºöÊúâ‰∏çÂêåÁöÑÂÆûÁé∞,ËøôÈáå‰ΩøÁî®‰∫ÜÊ®°ÊùøÊñπÊ≥ïÊ®°Âºè~\n\n### 4.3 ‰ª£Á†ÅÂÆûÁé∞Ôºö\n\n<font color=orange>1„ÄÅÊîØ‰ªòÁ≠ñÁï•Êé•Âè£Ôºö`PayStrategy`</font>\n\n```java\n/**\n * @author lfy\n * @Description ÊîØ‰ªòÁ≠ñÁï•\n * @create 2022-12-28 22:39\n */\npublic interface PayStrategy {\n\n    /**\n     * ÊîØÊåÅÂì™ÁßçÊîØ‰ªò\n     * @param type\n     * @return\n     */\n    boolean supports(String type);\n\n    /**\n     * ‰∏∫Êüê‰∏™ËÆ¢ÂçïÂ±ïÁ§∫Êî∂Èì∂Âè∞È°µÈù¢\n     * @return\n     */\n    String cashierPage(OrderInfo orderInfo);\n\n    /**\n     * È™åËØÅÁ≠æÂêç\n     * @param request  ÂéüÁîüËØ∑Ê±Ç\n     * @param body     ËØ∑Ê±Ç‰ΩìÊï∞ÊçÆ„ÄêËØ∑Ê±Ç‰ΩìÂè™ËÉΩËØªÂèñ‰∏ÄÊ¨°ÔºåÊâÄ‰ª•controllerÊãøÂà∞‰ª•ÂêéÈÉΩÂæÄ‰∏ã‰º†ÈÄíÂç≥ÂèØ„Äë\n     * @return\n     */\n    boolean checkSign(HttpServletRequest request,String body);\n\n\n    /**\n     * È™åÁ≠æÈîôËØØÂ§ÑÁêÜ\n     * @return\n     */\n    Object signError();\n\n\n    /**\n     * È™åÁ≠æÈÄöËøáËøîÂõû\n     * @return\n     */\n    Object signOk();\n\n    /**\n     * È™åÁ≠æÊàêÂäüÂêéÂ§ÑÁêÜÈÄöÁü•Êï∞ÊçÆÔºö ÊääÈÄöÁü•ÁöÑÊâÄÊúâÊï∞ÊçÆÂ∞ÅË£ÖÊåáÂÆöÂØπË±°\n     * @param request\n     * @return\n     */\n    Map<String,Object> process(HttpServletRequest request,String body);\n}\n```\n\n<font color=orange>2„ÄÅÊé•Âè£ÂÆûÁé∞Ôºö`AlipayStrategy` „ÄÅ`WeixinPayStrategy`</font>\n\n```java\n/**\n * @author lfy\n * @Description ÊîØ‰ªòÂÆù\n * @create 2022-12-28 22:40\n */\n@Slf4j\n@Component\npublic class AlipayStrategy implements PayStrategy {\n\n    @Autowired\n    AlipayProperties alipayProperties;\n\n    @Autowired\n    AlipayClient alipayClient;\n\n    @Override\n    public String cashierPage(OrderInfo orderInfo) {\n        //1„ÄÅÂàõÂª∫‰∏Ä‰∏™ AlipayClient\n\n        //2„ÄÅÂàõÂª∫‰∏Ä‰∏™ÊîØ‰ªòËØ∑Ê±Ç\n        AlipayTradePagePayRequest alipayRequest = new AlipayTradePagePayRequest();\n\n        //3„ÄÅËÆæÁΩÆÂèÇÊï∞\n        alipayRequest.setReturnUrl(alipayProperties.getReturn_url()); //ÂêåÊ≠•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊµèËßàÂô®Ë¶ÅË∑≥ËΩ¨Âà∞ÁöÑÈ°µÈù¢Âú∞ÂùÄ\n        alipayRequest.setNotifyUrl(alipayProperties.getNotify_url()); //ÈÄöÁü•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊîØ‰ªòÊ∂àÊÅØ‰ºöÈÄöÁü•ÁªôËøô‰∏™Âú∞ÂùÄ\n\n\n        //ÂïÜÊà∑ËÆ¢ÂçïÂè∑ÔºàÂØπÂ§ñ‰∫§ÊòìÂè∑Ôºâ\n        String outTradeNo = orderInfo.getId().toString();\n        //‰ªòÊ¨æÈáëÈ¢ù\n        BigDecimal totalAmount = orderInfo.getPrice();\n        //ËÆ¢ÂçïÂêçÁß∞\n        String orderName = \"Â∞öÂìÅÊ±á-ËÆ¢Âçï-\"+outTradeNo;\n        //ÂïÜÂìÅÊèèËø∞\n        String tradeBody = orderInfo.getDesc();\n\n        //ËØ¶ÁªÜÔºöhttps://opendocs.alipay.com/open/028r8t?scene=22\n        //‰∏öÂä°ÂèÇÊï∞\n        Map<String,Object> bizContent = new HashMap<>();\n        bizContent.put(\"out_trade_no\",outTradeNo);\n        bizContent.put(\"total_amount\",totalAmount);\n        bizContent.put(\"subject\",orderName);\n        bizContent.put(\"body\",tradeBody);\n        bizContent.put(\"product_code\",\"FAST_INSTANT_TRADE_PAY\");\n        //Ëá™Âä®ÂÖ≥Âçï\n        String date = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\").format(orderInfo.getExpireTime());\n        bizContent.put(\"time_expire\",date);\n        alipayRequest.setBizContent(JSON.toJSONString(bizContent));\n\n\n        //ÁîüÊàêÊîØ‰ªòÈ°µÈù¢\n        String page = null;\n        try {\n            page = alipayClient.pageExecute(alipayRequest).getBody();\n        } catch (AlipayApiException e) {\n            e.printStackTrace();\n        }\n\n        return page;\n    }\n\n    @Override\n    public boolean checkSign(HttpServletRequest request,String body) {\n        Map<String, String> params = HttpUtils.getParameterMap(request);\n        log.info(\"ÊîØ‰ªòÂÆùÈÄöÁü•È™åËØÅÁ≠æÂêç...\");\n        //È™åËØÅÁ≠æÂêç\n        try {\n            //Ë∞ÉÁî®SDKÈ™åËØÅÁ≠æÂêç\n            boolean signVerified = AlipaySignature.rsaCheckV1(params,\n                    alipayProperties.getAlipay_public_key(), alipayProperties.getCharset(),\n                    alipayProperties.getSign_type());\n            return signVerified;\n        } catch (AlipayApiException e) {\n            e.printStackTrace();\n        }\n        return false;\n    }\n\n    @Override\n    public Object signError() {\n        return \"error\";\n    }\n\n    @Override\n    public Map<String,Object> process(HttpServletRequest request,String body) {\n        Map<String, String> map = HttpUtils.getParameterMap(request);\n        String json = JSON.toJSONString(map);\n        Map<String, Object> data = JSON.parseObject(json, new TypeReference<Map<String, Object>>() {\n        });\n        return data;\n    }\n\n    @Override\n    public Object signOk() {\n        //ÊîØ‰ªòÂÆùË¶ÅÊ±ÇÊàêÂäüËøîÂõû success Â≠óÁ¨¶‰∏≤\n        return \"success\";\n    }\n\n\n    @Override  //ÂØπÊñ∞Â¢ûÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠\n    public boolean supports(String type) {\n        return \"alipay\".equalsIgnoreCase(type);\n    }\n}\n```\n\n```java\n/**\n * @author lfy\n * @Description ÂæÆ‰ø°ÊîØ‰ªò\n * @create 2022-12-28 22:40\n */\n@Slf4j\n@Component\npublic class WeixinPayStrategy implements PayStrategy {\n    // ÂÖ∑‰ΩìÂÆûÁé∞ÁúÅÁï•ÔºåÂèØ‰ª•Âà∞‰ª£Á†Å‰ªìÂ∫ìÊü•Áúã\n}\n```\n\n<font color=orange>3„ÄÅÊîØ‰ªòService‰ª£Á†ÅÁºñÂÜô</font>\n\n```java\n/**\n * @author lfy\n * @Description\n * @create 2022-12-28 22:36\n */\npublic interface PayService {\n\n    /**\n     * ÁîüÊàêÊîØ‰ªòÊî∂Èì∂Âè∞È°µ\n     * @param type\n     * @param orderId\n     * @return\n     */\n    String payPage(String type, Long orderId);\n\n\n    /**\n     * Â§ÑÁêÜÊîØ‰ªòÈÄöÁü•\n     * @param request\n     * @return\n     */\n    Object processNotify(HttpServletRequest request,String body);\n}\n```\n\n<font color=orange>4„ÄÅÊîØ‰ªòServiceÂÆûÁé∞</font>\n\n```java\n/**\n * @author lfy\n * @Description ÊîØ‰ªò‰∏ä‰∏ãÊñáÂºïÁî®ÊîØ‰ªòÁ≠ñÁï•Ôºõ Ëøô‰∏™‰∏ä‰∏ãÊñá‰πüÊòØÊ®°ÊùøÁ±ªÔºõÂÆö‰πâÂ•ΩÁÆóÊ≥ïÊ≠•È™§\n * @create 2022-12-28 22:46\n */\n@Service\n@Slf4j //Ê®°ÊùøÁ±ª\npublic class PayServiceImpl implements PayService {\n\n    @Autowired\n    List<PayStrategy> payStrategies; //Ê≥®ÂÖ•ÊîØ‰ªòÁ≠ñÁï•\n\n    /**\n     * ÁîüÊàêÊî∂Èì∂Âè∞È°µÈù¢\n     * @param type\n     * @param orderId\n     * @return\n     */\n    @Override\n    public String payPage(String type, Long orderId) {\n        //1„ÄÅÊü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢Âçï\n        OrderInfo orderInfo = getOrderInfo(orderId);\n\n        //2„ÄÅÁîüÊàêÊîØ‰ªòÈ°µ\n        for (PayStrategy strategy : payStrategies) {\n            if(strategy.supports(type)){\n                //Ëé∑ÂèñÊî∂Èì∂Âè∞È°µÈù¢\n                return strategy.cashierPage(orderInfo);\n            }\n        }\n        //3„ÄÅÂ¶ÇÊûú‰ª•‰∏äÈÉΩ‰∏çÊîØÊåÅÔºåÊâìÂç∞ÈîôËØØ\n        return \"‰∏çÊîØÊåÅËøôÁßçÊîØ‰ªòÊñπÂºè\";\n    }\n\n\n    /**\n     * ÂÆö‰πâÈÄöÁü•Â§ÑÁêÜÊ®°ÊùøÔºõ\n     * ÂæÆ‰ø°ÈÄöÁü•\n     * ÊîØ‰ªòÂÆùÈÄöÁü•\n     * 1Ôºâ„ÄÅÈ™åËØÅÁ≠æÂêç\n     * 2Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÊîπËÆ¢Âçï‰∏∫Â∑≤ÊîØ‰ªò\n     * 3Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÁªôÊîØ‰ªòÂÆù(success)ÂæÆ‰ø°(200Áä∂ÊÄÅÁ†Åjson)ËøîÂõûÊï∞ÊçÆ\n     * 4Ôºâ„ÄÅxxx\n     * @param request\n     * @param body\n     * @return\n     */\n    @Override\n    public Object processNotify(HttpServletRequest request,String body) {\n        Object result = \"‰∏çÊîØÊåÅÊ≠§ÊñπÂºè\";\n\n        //1„ÄÅÂà§Êñ≠ÊòØÈÇ£ÁßçÈÄöÁü•\n        String type = getNotifyType(request);\n        Map<String, Object> data = null;\n\n        //2„ÄÅÈ™åËØÅÁ≠æÂêç\n        for (PayStrategy strategy : payStrategies) {\n            if(strategy.supports(type)){\n                //Á≠æÂêçÊ†°È™å\n                boolean checkSign = strategy.checkSign(request,body);\n                if(!checkSign){\n                    log.error(\"Á≠æÂêçÈ™åËØÅÂ§±Ë¥•ÔºåÁñë‰ººÊîªÂáªËØ∑Ê±Ç\");\n                    //È™åÁ≠æÂ§±Ë¥•ËøîÂõû\n                   return strategy.signError();\n                }else {\n                    log.info(\"Á≠æÂêçÈ™åËØÅÊàêÂäüÔºåÊèêÂèñÈÄöÁü•Êï∞ÊçÆ\");\n                    //È™åÁ≠æÊàêÂäüÂ§ÑÁêÜÊï∞ÊçÆ\n                    data = strategy.process(request,body);\n                    //È™åÁ≠æÊàêÂäüËøîÂõû\n                    result = strategy.signOk();\n                }\n            }\n        }\n\n        //3„ÄÅÈÄöÁî®ÁöÑÂêéÁª≠Â§ÑÁêÜÁÆóÊ≥ïÔºõÂ§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ\n        processOrder(data);\n\n        return result;\n    }\n\n    /**\n     * Â§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ\n     * @param data\n     */\n    private void processOrder(Map<String, Object> data) {\n        //TODO ÊääÊîØ‰ªòÊàêÂäü‰ø°ÊÅØÁ≠â‰øùÂ≠òÊï∞ÊçÆÂ∫ìÔºåÂπ∂‰øÆÊîπËÆ¢ÂçïÁä∂ÊÄÅÔºåÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÁ≠â...\n        log.info(\"ËÆ¢ÂçïÊîØ‰ªòÊàêÂäüÔºåÁä∂ÊÄÅ‰øÆÊîπÂÆåÊàêÔºåÂ∑≤ÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÔºåËØ¶ÁªÜÊï∞ÊçÆÔºö{}\",data);\n    }\n\n    /**\n     * Âà§Êñ≠ÈÄöÁü•Á±ªÂûã\n     * @param request\n     * @return\n     */\n    private String getNotifyType(HttpServletRequest request) {\n        String header = request.getHeader(\"wechatpay-serial\");\n        if(StringUtils.hasText(header)){\n            return \"weixin\";\n        }\n\n        String app_id = request.getParameter(\"app_id\");\n        if(StringUtils.hasText(app_id)){\n            return \"alipay\";\n        }\n\n\n        return \"unknown\";\n    }\n\n    public OrderInfo getOrderInfo(Long orderId){\n        log.info(\"Êü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢ÂçïÔºö{}\",orderId);\n        OrderInfo orderInfo = new OrderInfo();\n        orderInfo.setId(orderId);\n        orderInfo.setTitle(\"Â∞öÂìÅÊ±á-ÂïÜÂüé-ËÆ¢Âçï\");\n        orderInfo.setComment(\"Âø´ÁÇπÂèëË¥ß\");\n        orderInfo.setDesc(\"‰π∞‰∫Ü‰∏ÄÂ†ÜÂïÜÂìÅ\");\n        orderInfo.setPrice(new BigDecimal(\"9098.00\"));\n        orderInfo.setExpireTime(new Date(System.currentTimeMillis()+30*60*1000));\n\n        return orderInfo;\n    }\n}\n```\n\n**ÂàÜÊûêÔºö**\n\n![image-20230113223331649](https://img-blog.csdnimg.cn/img_convert/543a45872d4d17617504e7dea6c7119f.png)\n\n![image-20230114125758333](https://img-blog.csdnimg.cn/img_convert/3267819573fb85bf35740bd55b7048b1.png)\n\n### 4.4 ÊïàÊûúÊºîÁ§∫\n\n<font color=orange>1„ÄÅÁî®Êà∑ËøõÂÖ•ÊîØ‰ªòÈ°µÈù¢ÂêéÔºö</font>\n\n![image-20230114112440663](https://img-blog.csdnimg.cn/img_convert/b1235253e3ce038125552750ac0c3b65.png)\n\n<font color=orange>2„ÄÅÂΩìÈÄâÊã©ÂæÆ‰ø°ÊîØ‰ªòÊó∂ÔºåËøõÂÖ•ÂæÆ‰ø°‰∫åÁª¥Á†ÅÈ°µÈù¢</font>\n\n![image-20230114112525508](https://img-blog.csdnimg.cn/img_convert/2c644c164d36791ac1dc70cda7202dc1.png)\n\n<font color=orange>3„ÄÅÂΩìÈÄâÊã©ÊîØ‰ªòÂÆùÊîØ‰ªòÔºåËøõÂÖ•ÊîØ‰ªòÂÆùÈ°µÈù¢</font>\n\n![image-20230114112626541](https://img-blog.csdnimg.cn/img_convert/9f2041ef2259893210790a38c3d2b14f.png)\n\n<font color=orange>4„ÄÅÊîØ‰ªòÊàêÂäü‰πãÂêé‰ºöË∑≥ËΩ¨Âà∞ÂØπÂ∫îÁöÑÊàêÂäüÈ°µÈù¢ÔºàÂæÆ‰ø°ÊàêÂäüÈ°µÈù¢„ÄÅÊîØ‰ªòÂÆùÊàêÂäüÈ°µÈù¢...Ôºâ</font>\n\n### 4.5 Â¶Ç‰ΩïÊâ©Â±ï\n\nÊúÄÂêéÊàë‰ª¨ÈúÄË¶ÅÊÄùËÄÉ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÁªèËøáÊàë‰ª¨‰ΩøÁî®Á≠ñÁï•+Ê®°ÊùøÊîπÈÄ†ÁöÑÊîØ‰ªò Âíå‰º†ÁªüÁöÑÂÜôÊ≥ïÊúâÂï•Â•ΩÂ§ÑÂë¢Ôºü\n\n1„ÄÅ==Êòì‰∫éÊâ©Â±ï==ÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶ÅÂ¢ûÂä†Êñ∞ÁöÑÊîØ‰ªòÊñπÂºèÔºöÈì∂ËÅîÊîØ‰ªò„ÄÅÁôΩÊù°ÊîØ‰ªò...Êàë‰ª¨Âè™ÈúÄË¶ÅÂÆö‰πâÂØπÂ∫îÁöÑÊîØ‰ªòÁ≠ñÁï•Á±ªÂç≥ÂèØ~ ÂΩì‰∏çÈúÄË¶ÅÊó∂ÔºåÁõ¥Êé•Âà†Èô§ÂØπÂ∫îÁöÑÂÆûÁé∞Á±ª„ÄÇÁÑ∂ÂêéÂú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÔºå‰ºöËá™ÈÄÇÂ∫î‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•~ Á¨¶Âêà`ÂØπ‰øÆÊîπÂÖ≥Èó≠ÔºåÂØπÊâ©Â±ïÂºÄÊîæ`ÁöÑÁâπÁÇπÔºÅ\n\n![image-20230114124615619](https://img-blog.csdnimg.cn/img_convert/3bf9cdcfd38eae9df74d77e1b4610252.png)\n\n2„ÄÅService‰∏≠ÁöÑÊ®°ÊùøÊñπÊ≥ï‰πüËÆ©Êàë‰ª¨ÁöÑ==‰ª£Á†ÅÂÜó‰ΩôÂ∫¶Êõ¥‰Ωé==ÔºåÈÄªËæëÊõ¥Âä†Ê∏ÖÊô∞~\n\n","source":"_posts/‰∏ÄÊñáÊïô‰ºö‰Ω†Â∑ßÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ.md","raw":"---\ntitle: ‰∏ÄÊñáÊïô‰ºö‰Ω†Â∑ßÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ\ndate: 2024-04-01 16:50:57\ntags: ËÆæËÆ°Ê®°Âºè\ncover: /img/cover_04.png\ntop_img: https://bu.dusays.com/2021/03/06/daffe400090d4.jpg\n---\n\n@[TOC]\n\n> Êú¨ÊñáÂèÇËÄÉËá™12.29Êó•Â∞öÁ°ÖË∞∑Èõ∑Á•ûÁöÑ [Â∑ßÂ¶ô‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ](https://gitee.com/leifengyang/java-design-pattern)\n\n## ‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\n\n- ÊÄª‰ΩìÂàÜÁ±ª\n\n![image-20230113210444492](https://img-blog.csdnimg.cn/img_convert/9e402b0c6ec2bc81a317c6b8774d2c7f.png)\n\n- ‰∏çÂêåÊó∂ÊúüÈÄâÊã©‰∏çÂêåÁöÑËÆæËÆ°Ê®°Âºè~\n\n![image-20230114113220058](https://img-blog.csdnimg.cn/img_convert/5ed1ffc8fb36192278f04e22eb606402.png)\n\n- ËÆæËÆ°Ê®°ÂºèÊú¨Ë¥®‰∏äÁé©ÁöÑÂ∞±ÊòØÔºö`Â∞ÅË£Ö`Ôºå`ÁªßÊâø`Ôºå`Â§öÊÄÅ`\n- ËÆæËÆ°Ê®°ÂºèÈÅµÂæ™ÁöÑÂÖ≠Â§ßÂéüÂàô\n\n![image-20230114113416409](https://img-blog.csdnimg.cn/img_convert/df85588b81d2d6631d201855a66ea948.png)\n\n## ‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\n\n**ÊèèËø∞Ôºö**Áà∂Á±ªÔºàÊé•Âè£„ÄÅÊäΩË±°Á±ªÔºâÊèê‰æõ‰∫Ü‰∏ÄÁßç`ÂÆö‰πâÁÆóÊ≥ïÁöÑÈ™®Êû∂`Ôºå==ÂÖÅËÆ∏Â≠êÁ±ª‰∏∫‰∏Ä‰∏™ÊàñÂ§ö‰∏™Ê≠•È™§Êèê‰æõÂÆûÁé∞==ÔºåÂú®‰∏çÊîπÂèòÁÆóÊ≥ïÁªìÊûÑÁöÑÊÉÖÂÜµ‰∏ãÔºåÈáçÊñ∞ÂÆö‰πâÁÆóÊ≥ïÁöÑÊüê‰∫õÊ≠•È™§„ÄÇ\n\n![](https://img-blog.csdnimg.cn/img_convert/65b0a3725926c195902515b16a6411d4.png)\n\n**Ê°à‰æãÔºöËÆ¢ÂçïÂ§ÑÁêÜ**\n\n<font color=orange>1„ÄÅÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø</font>\n\n```java\n/**\n * @author lfy\n * @Description ÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø\n * @create 2022-12-29 20:21\n */\npublic abstract class OrderProcessTemplate {\n\n    /**\n     * Â§ÑÁêÜËÆ¢ÂçïÔºö ÂÆö‰πâÂ•ΩÁÆóÊ≥ïÈ™®Êû∂\n     */\n    public final void processOrder(){\n        //1„ÄÅÈÄâÊã©ÂïÜÂìÅ\n        doSelect();\n        //2„ÄÅËøõË°åÊîØ‰ªò\n        doPayment();\n        //3„ÄÅÂºÄÂÖ∑ÂèëÁ•®\n        doReceipt();\n        //4„ÄÅÊ¥æÈÄÅÂïÜÂìÅ\n        doDelivery();\n\n    }\n\n\n    public abstract void doSelect();\n    public abstract void doPayment();\n    public abstract void doReceipt();\n    public abstract void doDelivery();\n\n\n}\n```\n\n<font color=orange>2„ÄÅÂÆö‰πâÂÆûÁé∞Á±ªÔºö`NetOrder` Âíå `StoreOrder`</font>\n\n```java\n/**\n * @author lfy\n * @Description ÁΩëÁªúËÆ¢ÂçïÔºöÁÆóÊ≥ïÁªÜËäÇÂÆûÁé∞\n * @create 2022-12-29 20:24\n */\npublic class NetOrder extends OrderProcessTemplate {\n    @Override\n    public void doSelect() {\n        System.out.println(\"Êää xiaomi11 Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶\");\n    }\n\n    @Override\n    public void doPayment() {\n        System.out.println(\"Âú®Á∫øÂæÆ‰ø°ÊîØ‰ªò 1999\");\n    }\n\n    @Override\n    public void doReceipt() {\n        System.out.println(\"ÂèëÁ•®Â∑≤ÁªèÂèëÈÄÅÁªôÁî®Êà∑ÈÇÆÁÆ±Ôºö aaaa@qq.com\");\n    }\n\n    @Override\n    public void doDelivery() {\n        System.out.println(\"È°∫‰∏∞Ê¨°Êó•ËææÔºöÊäïÈÄÅÂïÜÂìÅ\");\n    }\n}\n```\n\n```java\n/**\n * @author lfy\n * @Description Èó®Â∫óËÆ¢ÂçïÔºöÂ≠êÁ±ªÂÆûÁé∞ÂÖ∑‰ΩìÁÆóÊ≥ï\n * @create 2022-12-29 20:26\n */\npublic class StoreOrder extends OrderProcessTemplate {\n    @Override\n    public void doSelect() {\n        System.out.println(\"Áî®Êà∑ÈÄâÊã©‰∫ÜÔºö3Âè∑Ë¥ßÊû∂-xiaomi11 ÂïÜÂìÅ\");\n    }\n\n    @Override\n    public void doPayment() {\n        System.out.println(\"Âà∑Âç°Êú∫ÔºöÂà∑Âç°ÊîØ‰ªò 1999\");\n    }\n\n    @Override\n    public void doReceipt() {\n        System.out.println(\"ÊâìÂç∞ÂèëÁ•®ÔºåÂíåÁâ©ÂìÅ‰∏ÄËµ∑ÂåÖË£Ö\");\n    }\n\n    @Override\n    public void doDelivery() {\n        System.out.println(\"ÊääÂïÜÂìÅ‰∫§ÁªôÁî®Êà∑ÔºåÁî®ÊºÇ‰∫ÆÁöÑË¢ãÂ≠ê\");\n    }\n}\n```\n\n3„ÄÅËøõË°åÊµãËØï\n\n```java\n/**\n * ËÆæËÆ°Ê®°ÂºèÔºö  Â§öÂÆö‰πâÊé•Âè£„ÄÅÊäΩË±°Á±ª\n * 1Ôºâ„ÄÅ‰æùËµñÂÄíÁΩÆÔºõ ‰æùËµñÊäΩË±°\n * 2Ôºâ„ÄÅÂ§öÊÄÅÔºõ    Èöè‰æøÊõøÊç¢ÂÆûÁé∞\n * @author lfy\n * @Description Ê®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊµãËØï Ôºõ Ê†∏ÂøÉÔºö Áà∂Á±ªÂÆö‰πâÁÆóÊ≥ïÈ™®Êû∂ÔºåÂ≠êÁ±ªÂÆûÁé∞ÁÆóÊ≥ïÁªÜËäÇ\n * @create 2022-12-28 20:41\n */\npublic class TemplateMethodPatternTest {\n\n    public static void main(String[] args) {\n        //Ë°å‰∏∫ÂûãÊ®°ÂºèÁé©ÁöÑÂ∞±ÊòØ‰∏Ä‰∏™Â§öÊÄÅ\n        //1„ÄÅÂ§ñÁïåË∞ÉÁî®Ê®°ÊùøÁ±ª„ÄêÈÅµÂæ™‰æùËµñÂèçËΩ¨ÂéüÂàô„Äë„Äê‰æùËµñÊäΩË±°ËÄå‰∏çÊòØÁªÜËäÇ„Äë\n        OrderProcessTemplate processTemplate = new NetOrder();\n        System.out.println(\"ÁΩëÁªúËÆ¢ÂçïÔºö\");\n        //Â§ÑÁêÜËÆ¢Âçï\n        processTemplate.processOrder(); //ÂÆö‰πâ‰∫ÜÁÆóÊ≥ïÁöÑÊ®°Êùø\n\n\n        processTemplate = new StoreOrder();\n        System.out.println(\"Èó®Â∫óËÆ¢ÂçïÔºö\");\n        // Ê†πÊçÆÈúÄË¶ÅÔºåÈÄâÊã©‰∏çÂêåÁöÑÂÆûÁé∞Á±ªÔºå‰ªéËÄåËææÂà∞Êàë‰ª¨ÈúÄË¶ÅÁöÑÊïàÊûúÔºöÁΩëÁªúËÆ¢Âçï Êàñ Èó®Â∫óËÆ¢Âçï\n        processTemplate.processOrder();\n    }\n}\n```\n\nËøêË°åÁªìÊûúÔºö\n\n![image-20230113220611870](https://img-blog.csdnimg.cn/img_convert/039d094065690f2e4da8f73e94526786.png)\n\n## ‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\n\n**ÊèèËø∞Ôºö**ÂÆö‰πâ`ÁÆóÊ≥ïÂÆ∂ÊóèÔºåÂàÜÂà´Â∞ÅË£Ö`Ëµ∑Êù•ÔºåËÆ©ÂÆÉ‰ª¨‰πãÈó¥ÂèØ‰ª•`Áõ∏‰∫íÊõøÊç¢`ÔºåÊ≠§Ê®°ÂºèËÆ©ÁÆóÊ≥ïÁöÑÂèòÂåñÁã¨Á´ã‰∫é‰ΩøÁî®ÁÆóÊ≥ïÁöÑÂÆ¢Êà∑„ÄÇ\n\n![](https://img-blog.csdnimg.cn/img_convert/003b3cc3b5b54eee7bb255bde2e82ec5.png)\n\n**Ê°à‰æãÔºöÊéíÂ∫èÁÆóÊ≥ï**\n\n<font color=orange>1„ÄÅÂÆö‰πâÁÆóÊ≥ïÊé•Âè£</font>\n\n```java\n/**\n * @author lfy\n * @Description ÁÆóÊ≥ïÊé•Âè£ÔºöÊéíÂ∫èÁ≠ñÁï•\n * @create 2022-12-29 20:36\n */\npublic interface SortStrategy {\n\n    /**\n     * ÊéíÂ∫è\n     */\n    void sort(Integer[] arr);\n}\n```\n\n<font color=orange>2„ÄÅÂÆö‰πâÁ≠ñÁï•Á±ªÔºåÂÆûÁé∞ÁÆóÊ≥ïÊé•Âè£</font>\n\n```java\n/**\n * @author lfy\n * @Description Á≠ñÁï•1ÔºöÂÜíÊ≥°ÊéíÂ∫èÁ≠ñÁï•\n * @create 2022-12-29 20:38\n */\npublic class BubbleSortStrategy implements SortStrategy {\n    @Override\n    public void sort(Integer[] arr) {\n        System.out.println(\"ÂºÄÂßãÂÜíÊ≥°ÊéíÂ∫è....\");\n        for (int i=0;i< arr.length-1;i++){\n            for (int j = 0; j < arr.length- 1 - i  ; j++) {\n                if(arr[j] > arr[j+1]){\n                    Integer temp = arr[j];\n                    arr[j] = arr[j+1];\n                    arr[j+1] = temp;\n                }\n            }\n        }\n        System.out.println(\"ÊéíÂ∫èÁªìÊûúÔºö\"+ Arrays.asList(arr));\n\n    }\n}\n```\n\n```java\n/**\n * @author lfy\n * @Description\n * @create 2022-12-29 20:44\n */\npublic class QuickSortStrategy implements SortStrategy {\n    @Override\n    public void sort(Integer[] arr) {\n        System.out.println(\"Âø´ÈÄüÊéíÂ∫èÂºÄÂßã\");\n        Arrays.sort(arr);\n        System.out.println(\"ÊéíÂ∫èÁªìÊûúÔºö\"+Arrays.asList(arr));\n\n    }\n}\n```\n\n<font color=orange>3„ÄÅÂÆö‰πâ‰∏ä‰∏ãÊñáÂØπË±°(ÂÖ•Âè£Á±ª)ÔºöÊåÅÊúâÁ≠ñÁï•ÂØπË±°</font>\n\n```java\n/**\n * @author lfy\n * @Description ‰∏ä‰∏ãÊñáÔºöÂÖ•Âè£Á±ª\n * @create 2022-12-29 20:45\n */\npublic class SortService {\n    /**\n     * ÊãøÂà∞‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï\n     */\n    private SortStrategy strategy;\n\n    /**\n     * ‰∏∫‰∫ÜÂº∫Âà∂Ë¶ÅÊ±ÇÁî®Êà∑ÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï\n     * @param strategy\n     */\n    public SortService(SortStrategy strategy){\n        this.strategy  =strategy;\n    }\n\n    /**\n     * ÈöèÊó∂Âä®ÊÄÅÊõ¥Êñ∞ÊéíÂ∫èÁÆóÊ≥ï\n     * @param strategy\n     */\n    public void setStrategy(SortStrategy strategy) {\n        this.strategy = strategy;\n    }\n\n    /**\n     * ÊâçÊòØÂà´‰∫∫Ë∞ÉÁî®ÁöÑÊéíÂ∫èÊñπÊ≥ï\n     * @param arr\n     */\n    public void sort(Integer[] arr){\n        strategy.sort(arr);\n    }\n}\n```\n\n<font color=orange>4„ÄÅ‰ΩøÁî®Á≠ñÁï•ÂØπË±°ÊâßË°åÁÆóÊ≥ï</font>\n\n```java\n/**\n * @author lfy\n * @Description  Ê®°ÊùøÊ®°ÂºèÂÆö‰πâÂ§ßÊ°ÜÊû∂„ÄÅÁ≠ñÁï•ÈªòËÆ§ÂÆö‰πâÂ∞èÁªÜËäÇ\n * @create 2022-12-28 21:17\n */\npublic class StrategyPatternTest {\n\n    public static void main(String[] args) {\n        Integer[] arr = new Integer[]{2,4,6,3,1,7,9,8};\n\t\t// ‰º†ÂÖ•‰∏çÂêåÁöÑÁ≠ñÁï•ÔºåÂ∞±‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•\n        SortService sortService = new SortService(new BubbleSortStrategy());\n        sortService.sort(arr);\n\n        System.out.println(\"===============\");\n\n        //Êõ¥Êñ∞Á≠ñÁï•\n        sortService.setStrategy(new QuickSortStrategy());\n        sortService.sort(arr);\n\n    }\n}\n```\n\nÊµãËØïÁªìÊûúÔºö\n\n![image-20230113220248469](https://img-blog.csdnimg.cn/img_convert/879dd90a18e7a5bc986a4bca6627a4e7.png)\n\n## Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\n\n### 4.1 ÊÄùË∑ØÂàÜÊûê\n\n‰ΩøÁî®`Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè`ÔºöÂÆö‰πâ==ÊîØ‰ªòÁöÑÂÆåÊï¥ÊµÅÁ®ã==Ôºõ\n\n‰ΩøÁî®`Á≠ñÁï•Ê®°Âºè`ÔºöÂÆö‰πâ==ÊîØ‰ªòÁöÑ‰∏çÂêåÂÆûÁé∞==Ôºõ\n\n![](https://img-blog.csdnimg.cn/img_convert/2e0d3c18725c719c98d22d7b5aa1bc5a.png)\n\n### 4.2 ÂÆûÁé∞ÂõæËß£Ôºö\n\n![](https://img-blog.csdnimg.cn/img_convert/6628cf4dc83c070f9bbd822c3a45878f.png)\n\n> **ÂàÜÊûê**ÔºöPayStrategy‰ΩøÁî®ÁöÑÊòØÁ≠ñÁï•Ê®°Âºè~  PayService‰∏≠ÁöÑprocessNotifyÈáåÈù¢ÂåÖÂê´‰∫Ü ‰∏ÄÁ≥ªÂàóÊäΩË±°ÊñπÊ≥ïÁöÑË∞ÉÁî®,‰∏çÂêåÁöÑÊîØ‰ªòÊñπÂºè‰ºöÊúâ‰∏çÂêåÁöÑÂÆûÁé∞,ËøôÈáå‰ΩøÁî®‰∫ÜÊ®°ÊùøÊñπÊ≥ïÊ®°Âºè~\n\n### 4.3 ‰ª£Á†ÅÂÆûÁé∞Ôºö\n\n<font color=orange>1„ÄÅÊîØ‰ªòÁ≠ñÁï•Êé•Âè£Ôºö`PayStrategy`</font>\n\n```java\n/**\n * @author lfy\n * @Description ÊîØ‰ªòÁ≠ñÁï•\n * @create 2022-12-28 22:39\n */\npublic interface PayStrategy {\n\n    /**\n     * ÊîØÊåÅÂì™ÁßçÊîØ‰ªò\n     * @param type\n     * @return\n     */\n    boolean supports(String type);\n\n    /**\n     * ‰∏∫Êüê‰∏™ËÆ¢ÂçïÂ±ïÁ§∫Êî∂Èì∂Âè∞È°µÈù¢\n     * @return\n     */\n    String cashierPage(OrderInfo orderInfo);\n\n    /**\n     * È™åËØÅÁ≠æÂêç\n     * @param request  ÂéüÁîüËØ∑Ê±Ç\n     * @param body     ËØ∑Ê±Ç‰ΩìÊï∞ÊçÆ„ÄêËØ∑Ê±Ç‰ΩìÂè™ËÉΩËØªÂèñ‰∏ÄÊ¨°ÔºåÊâÄ‰ª•controllerÊãøÂà∞‰ª•ÂêéÈÉΩÂæÄ‰∏ã‰º†ÈÄíÂç≥ÂèØ„Äë\n     * @return\n     */\n    boolean checkSign(HttpServletRequest request,String body);\n\n\n    /**\n     * È™åÁ≠æÈîôËØØÂ§ÑÁêÜ\n     * @return\n     */\n    Object signError();\n\n\n    /**\n     * È™åÁ≠æÈÄöËøáËøîÂõû\n     * @return\n     */\n    Object signOk();\n\n    /**\n     * È™åÁ≠æÊàêÂäüÂêéÂ§ÑÁêÜÈÄöÁü•Êï∞ÊçÆÔºö ÊääÈÄöÁü•ÁöÑÊâÄÊúâÊï∞ÊçÆÂ∞ÅË£ÖÊåáÂÆöÂØπË±°\n     * @param request\n     * @return\n     */\n    Map<String,Object> process(HttpServletRequest request,String body);\n}\n```\n\n<font color=orange>2„ÄÅÊé•Âè£ÂÆûÁé∞Ôºö`AlipayStrategy` „ÄÅ`WeixinPayStrategy`</font>\n\n```java\n/**\n * @author lfy\n * @Description ÊîØ‰ªòÂÆù\n * @create 2022-12-28 22:40\n */\n@Slf4j\n@Component\npublic class AlipayStrategy implements PayStrategy {\n\n    @Autowired\n    AlipayProperties alipayProperties;\n\n    @Autowired\n    AlipayClient alipayClient;\n\n    @Override\n    public String cashierPage(OrderInfo orderInfo) {\n        //1„ÄÅÂàõÂª∫‰∏Ä‰∏™ AlipayClient\n\n        //2„ÄÅÂàõÂª∫‰∏Ä‰∏™ÊîØ‰ªòËØ∑Ê±Ç\n        AlipayTradePagePayRequest alipayRequest = new AlipayTradePagePayRequest();\n\n        //3„ÄÅËÆæÁΩÆÂèÇÊï∞\n        alipayRequest.setReturnUrl(alipayProperties.getReturn_url()); //ÂêåÊ≠•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊµèËßàÂô®Ë¶ÅË∑≥ËΩ¨Âà∞ÁöÑÈ°µÈù¢Âú∞ÂùÄ\n        alipayRequest.setNotifyUrl(alipayProperties.getNotify_url()); //ÈÄöÁü•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊîØ‰ªòÊ∂àÊÅØ‰ºöÈÄöÁü•ÁªôËøô‰∏™Âú∞ÂùÄ\n\n\n        //ÂïÜÊà∑ËÆ¢ÂçïÂè∑ÔºàÂØπÂ§ñ‰∫§ÊòìÂè∑Ôºâ\n        String outTradeNo = orderInfo.getId().toString();\n        //‰ªòÊ¨æÈáëÈ¢ù\n        BigDecimal totalAmount = orderInfo.getPrice();\n        //ËÆ¢ÂçïÂêçÁß∞\n        String orderName = \"Â∞öÂìÅÊ±á-ËÆ¢Âçï-\"+outTradeNo;\n        //ÂïÜÂìÅÊèèËø∞\n        String tradeBody = orderInfo.getDesc();\n\n        //ËØ¶ÁªÜÔºöhttps://opendocs.alipay.com/open/028r8t?scene=22\n        //‰∏öÂä°ÂèÇÊï∞\n        Map<String,Object> bizContent = new HashMap<>();\n        bizContent.put(\"out_trade_no\",outTradeNo);\n        bizContent.put(\"total_amount\",totalAmount);\n        bizContent.put(\"subject\",orderName);\n        bizContent.put(\"body\",tradeBody);\n        bizContent.put(\"product_code\",\"FAST_INSTANT_TRADE_PAY\");\n        //Ëá™Âä®ÂÖ≥Âçï\n        String date = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\").format(orderInfo.getExpireTime());\n        bizContent.put(\"time_expire\",date);\n        alipayRequest.setBizContent(JSON.toJSONString(bizContent));\n\n\n        //ÁîüÊàêÊîØ‰ªòÈ°µÈù¢\n        String page = null;\n        try {\n            page = alipayClient.pageExecute(alipayRequest).getBody();\n        } catch (AlipayApiException e) {\n            e.printStackTrace();\n        }\n\n        return page;\n    }\n\n    @Override\n    public boolean checkSign(HttpServletRequest request,String body) {\n        Map<String, String> params = HttpUtils.getParameterMap(request);\n        log.info(\"ÊîØ‰ªòÂÆùÈÄöÁü•È™åËØÅÁ≠æÂêç...\");\n        //È™åËØÅÁ≠æÂêç\n        try {\n            //Ë∞ÉÁî®SDKÈ™åËØÅÁ≠æÂêç\n            boolean signVerified = AlipaySignature.rsaCheckV1(params,\n                    alipayProperties.getAlipay_public_key(), alipayProperties.getCharset(),\n                    alipayProperties.getSign_type());\n            return signVerified;\n        } catch (AlipayApiException e) {\n            e.printStackTrace();\n        }\n        return false;\n    }\n\n    @Override\n    public Object signError() {\n        return \"error\";\n    }\n\n    @Override\n    public Map<String,Object> process(HttpServletRequest request,String body) {\n        Map<String, String> map = HttpUtils.getParameterMap(request);\n        String json = JSON.toJSONString(map);\n        Map<String, Object> data = JSON.parseObject(json, new TypeReference<Map<String, Object>>() {\n        });\n        return data;\n    }\n\n    @Override\n    public Object signOk() {\n        //ÊîØ‰ªòÂÆùË¶ÅÊ±ÇÊàêÂäüËøîÂõû success Â≠óÁ¨¶‰∏≤\n        return \"success\";\n    }\n\n\n    @Override  //ÂØπÊñ∞Â¢ûÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠\n    public boolean supports(String type) {\n        return \"alipay\".equalsIgnoreCase(type);\n    }\n}\n```\n\n```java\n/**\n * @author lfy\n * @Description ÂæÆ‰ø°ÊîØ‰ªò\n * @create 2022-12-28 22:40\n */\n@Slf4j\n@Component\npublic class WeixinPayStrategy implements PayStrategy {\n    // ÂÖ∑‰ΩìÂÆûÁé∞ÁúÅÁï•ÔºåÂèØ‰ª•Âà∞‰ª£Á†Å‰ªìÂ∫ìÊü•Áúã\n}\n```\n\n<font color=orange>3„ÄÅÊîØ‰ªòService‰ª£Á†ÅÁºñÂÜô</font>\n\n```java\n/**\n * @author lfy\n * @Description\n * @create 2022-12-28 22:36\n */\npublic interface PayService {\n\n    /**\n     * ÁîüÊàêÊîØ‰ªòÊî∂Èì∂Âè∞È°µ\n     * @param type\n     * @param orderId\n     * @return\n     */\n    String payPage(String type, Long orderId);\n\n\n    /**\n     * Â§ÑÁêÜÊîØ‰ªòÈÄöÁü•\n     * @param request\n     * @return\n     */\n    Object processNotify(HttpServletRequest request,String body);\n}\n```\n\n<font color=orange>4„ÄÅÊîØ‰ªòServiceÂÆûÁé∞</font>\n\n```java\n/**\n * @author lfy\n * @Description ÊîØ‰ªò‰∏ä‰∏ãÊñáÂºïÁî®ÊîØ‰ªòÁ≠ñÁï•Ôºõ Ëøô‰∏™‰∏ä‰∏ãÊñá‰πüÊòØÊ®°ÊùøÁ±ªÔºõÂÆö‰πâÂ•ΩÁÆóÊ≥ïÊ≠•È™§\n * @create 2022-12-28 22:46\n */\n@Service\n@Slf4j //Ê®°ÊùøÁ±ª\npublic class PayServiceImpl implements PayService {\n\n    @Autowired\n    List<PayStrategy> payStrategies; //Ê≥®ÂÖ•ÊîØ‰ªòÁ≠ñÁï•\n\n    /**\n     * ÁîüÊàêÊî∂Èì∂Âè∞È°µÈù¢\n     * @param type\n     * @param orderId\n     * @return\n     */\n    @Override\n    public String payPage(String type, Long orderId) {\n        //1„ÄÅÊü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢Âçï\n        OrderInfo orderInfo = getOrderInfo(orderId);\n\n        //2„ÄÅÁîüÊàêÊîØ‰ªòÈ°µ\n        for (PayStrategy strategy : payStrategies) {\n            if(strategy.supports(type)){\n                //Ëé∑ÂèñÊî∂Èì∂Âè∞È°µÈù¢\n                return strategy.cashierPage(orderInfo);\n            }\n        }\n        //3„ÄÅÂ¶ÇÊûú‰ª•‰∏äÈÉΩ‰∏çÊîØÊåÅÔºåÊâìÂç∞ÈîôËØØ\n        return \"‰∏çÊîØÊåÅËøôÁßçÊîØ‰ªòÊñπÂºè\";\n    }\n\n\n    /**\n     * ÂÆö‰πâÈÄöÁü•Â§ÑÁêÜÊ®°ÊùøÔºõ\n     * ÂæÆ‰ø°ÈÄöÁü•\n     * ÊîØ‰ªòÂÆùÈÄöÁü•\n     * 1Ôºâ„ÄÅÈ™åËØÅÁ≠æÂêç\n     * 2Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÊîπËÆ¢Âçï‰∏∫Â∑≤ÊîØ‰ªò\n     * 3Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÁªôÊîØ‰ªòÂÆù(success)ÂæÆ‰ø°(200Áä∂ÊÄÅÁ†Åjson)ËøîÂõûÊï∞ÊçÆ\n     * 4Ôºâ„ÄÅxxx\n     * @param request\n     * @param body\n     * @return\n     */\n    @Override\n    public Object processNotify(HttpServletRequest request,String body) {\n        Object result = \"‰∏çÊîØÊåÅÊ≠§ÊñπÂºè\";\n\n        //1„ÄÅÂà§Êñ≠ÊòØÈÇ£ÁßçÈÄöÁü•\n        String type = getNotifyType(request);\n        Map<String, Object> data = null;\n\n        //2„ÄÅÈ™åËØÅÁ≠æÂêç\n        for (PayStrategy strategy : payStrategies) {\n            if(strategy.supports(type)){\n                //Á≠æÂêçÊ†°È™å\n                boolean checkSign = strategy.checkSign(request,body);\n                if(!checkSign){\n                    log.error(\"Á≠æÂêçÈ™åËØÅÂ§±Ë¥•ÔºåÁñë‰ººÊîªÂáªËØ∑Ê±Ç\");\n                    //È™åÁ≠æÂ§±Ë¥•ËøîÂõû\n                   return strategy.signError();\n                }else {\n                    log.info(\"Á≠æÂêçÈ™åËØÅÊàêÂäüÔºåÊèêÂèñÈÄöÁü•Êï∞ÊçÆ\");\n                    //È™åÁ≠æÊàêÂäüÂ§ÑÁêÜÊï∞ÊçÆ\n                    data = strategy.process(request,body);\n                    //È™åÁ≠æÊàêÂäüËøîÂõû\n                    result = strategy.signOk();\n                }\n            }\n        }\n\n        //3„ÄÅÈÄöÁî®ÁöÑÂêéÁª≠Â§ÑÁêÜÁÆóÊ≥ïÔºõÂ§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ\n        processOrder(data);\n\n        return result;\n    }\n\n    /**\n     * Â§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ\n     * @param data\n     */\n    private void processOrder(Map<String, Object> data) {\n        //TODO ÊääÊîØ‰ªòÊàêÂäü‰ø°ÊÅØÁ≠â‰øùÂ≠òÊï∞ÊçÆÂ∫ìÔºåÂπ∂‰øÆÊîπËÆ¢ÂçïÁä∂ÊÄÅÔºåÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÁ≠â...\n        log.info(\"ËÆ¢ÂçïÊîØ‰ªòÊàêÂäüÔºåÁä∂ÊÄÅ‰øÆÊîπÂÆåÊàêÔºåÂ∑≤ÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÔºåËØ¶ÁªÜÊï∞ÊçÆÔºö{}\",data);\n    }\n\n    /**\n     * Âà§Êñ≠ÈÄöÁü•Á±ªÂûã\n     * @param request\n     * @return\n     */\n    private String getNotifyType(HttpServletRequest request) {\n        String header = request.getHeader(\"wechatpay-serial\");\n        if(StringUtils.hasText(header)){\n            return \"weixin\";\n        }\n\n        String app_id = request.getParameter(\"app_id\");\n        if(StringUtils.hasText(app_id)){\n            return \"alipay\";\n        }\n\n\n        return \"unknown\";\n    }\n\n    public OrderInfo getOrderInfo(Long orderId){\n        log.info(\"Êü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢ÂçïÔºö{}\",orderId);\n        OrderInfo orderInfo = new OrderInfo();\n        orderInfo.setId(orderId);\n        orderInfo.setTitle(\"Â∞öÂìÅÊ±á-ÂïÜÂüé-ËÆ¢Âçï\");\n        orderInfo.setComment(\"Âø´ÁÇπÂèëË¥ß\");\n        orderInfo.setDesc(\"‰π∞‰∫Ü‰∏ÄÂ†ÜÂïÜÂìÅ\");\n        orderInfo.setPrice(new BigDecimal(\"9098.00\"));\n        orderInfo.setExpireTime(new Date(System.currentTimeMillis()+30*60*1000));\n\n        return orderInfo;\n    }\n}\n```\n\n**ÂàÜÊûêÔºö**\n\n![image-20230113223331649](https://img-blog.csdnimg.cn/img_convert/543a45872d4d17617504e7dea6c7119f.png)\n\n![image-20230114125758333](https://img-blog.csdnimg.cn/img_convert/3267819573fb85bf35740bd55b7048b1.png)\n\n### 4.4 ÊïàÊûúÊºîÁ§∫\n\n<font color=orange>1„ÄÅÁî®Êà∑ËøõÂÖ•ÊîØ‰ªòÈ°µÈù¢ÂêéÔºö</font>\n\n![image-20230114112440663](https://img-blog.csdnimg.cn/img_convert/b1235253e3ce038125552750ac0c3b65.png)\n\n<font color=orange>2„ÄÅÂΩìÈÄâÊã©ÂæÆ‰ø°ÊîØ‰ªòÊó∂ÔºåËøõÂÖ•ÂæÆ‰ø°‰∫åÁª¥Á†ÅÈ°µÈù¢</font>\n\n![image-20230114112525508](https://img-blog.csdnimg.cn/img_convert/2c644c164d36791ac1dc70cda7202dc1.png)\n\n<font color=orange>3„ÄÅÂΩìÈÄâÊã©ÊîØ‰ªòÂÆùÊîØ‰ªòÔºåËøõÂÖ•ÊîØ‰ªòÂÆùÈ°µÈù¢</font>\n\n![image-20230114112626541](https://img-blog.csdnimg.cn/img_convert/9f2041ef2259893210790a38c3d2b14f.png)\n\n<font color=orange>4„ÄÅÊîØ‰ªòÊàêÂäü‰πãÂêé‰ºöË∑≥ËΩ¨Âà∞ÂØπÂ∫îÁöÑÊàêÂäüÈ°µÈù¢ÔºàÂæÆ‰ø°ÊàêÂäüÈ°µÈù¢„ÄÅÊîØ‰ªòÂÆùÊàêÂäüÈ°µÈù¢...Ôºâ</font>\n\n### 4.5 Â¶Ç‰ΩïÊâ©Â±ï\n\nÊúÄÂêéÊàë‰ª¨ÈúÄË¶ÅÊÄùËÄÉ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÁªèËøáÊàë‰ª¨‰ΩøÁî®Á≠ñÁï•+Ê®°ÊùøÊîπÈÄ†ÁöÑÊîØ‰ªò Âíå‰º†ÁªüÁöÑÂÜôÊ≥ïÊúâÂï•Â•ΩÂ§ÑÂë¢Ôºü\n\n1„ÄÅ==Êòì‰∫éÊâ©Â±ï==ÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶ÅÂ¢ûÂä†Êñ∞ÁöÑÊîØ‰ªòÊñπÂºèÔºöÈì∂ËÅîÊîØ‰ªò„ÄÅÁôΩÊù°ÊîØ‰ªò...Êàë‰ª¨Âè™ÈúÄË¶ÅÂÆö‰πâÂØπÂ∫îÁöÑÊîØ‰ªòÁ≠ñÁï•Á±ªÂç≥ÂèØ~ ÂΩì‰∏çÈúÄË¶ÅÊó∂ÔºåÁõ¥Êé•Âà†Èô§ÂØπÂ∫îÁöÑÂÆûÁé∞Á±ª„ÄÇÁÑ∂ÂêéÂú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÔºå‰ºöËá™ÈÄÇÂ∫î‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•~ Á¨¶Âêà`ÂØπ‰øÆÊîπÂÖ≥Èó≠ÔºåÂØπÊâ©Â±ïÂºÄÊîæ`ÁöÑÁâπÁÇπÔºÅ\n\n![image-20230114124615619](https://img-blog.csdnimg.cn/img_convert/3bf9cdcfd38eae9df74d77e1b4610252.png)\n\n2„ÄÅService‰∏≠ÁöÑÊ®°ÊùøÊñπÊ≥ï‰πüËÆ©Êàë‰ª¨ÁöÑ==‰ª£Á†ÅÂÜó‰ΩôÂ∫¶Êõ¥‰Ωé==ÔºåÈÄªËæëÊõ¥Âä†Ê∏ÖÊô∞~\n\n","slug":"‰∏ÄÊñáÊïô‰ºö‰Ω†Â∑ßÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ","published":1,"updated":"2024-04-01T15:42:20.922Z","comments":1,"layout":"post","photos":[],"_id":"cluh5pivc0006gs2v187ugrbq","content":"<p>@[TOC]</p>\n<blockquote>\n<p>Êú¨ÊñáÂèÇËÄÉËá™12.29Êó•Â∞öÁ°ÖË∞∑Èõ∑Á•ûÁöÑ <a href=\"https://gitee.com/leifengyang/java-design-pattern\">Â∑ßÂ¶ô‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ</a></p>\n</blockquote>\n<h2 id=\"‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\"><a href=\"#‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\" class=\"headerlink\" title=\"‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\"></a>‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà</h2><ul>\n<li>ÊÄª‰ΩìÂàÜÁ±ª</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/9e402b0c6ec2bc81a317c6b8774d2c7f.png\" alt=\"image-20230113210444492\"></p>\n<ul>\n<li>‰∏çÂêåÊó∂ÊúüÈÄâÊã©‰∏çÂêåÁöÑËÆæËÆ°Ê®°Âºè~</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/5ed1ffc8fb36192278f04e22eb606402.png\" alt=\"image-20230114113220058\"></p>\n<ul>\n<li>ËÆæËÆ°Ê®°ÂºèÊú¨Ë¥®‰∏äÁé©ÁöÑÂ∞±ÊòØÔºö<code>Â∞ÅË£Ö</code>Ôºå<code>ÁªßÊâø</code>Ôºå<code>Â§öÊÄÅ</code></li>\n<li>ËÆæËÆ°Ê®°ÂºèÈÅµÂæ™ÁöÑÂÖ≠Â§ßÂéüÂàô</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/df85588b81d2d6631d201855a66ea948.png\" alt=\"image-20230114113416409\"></p>\n<h2 id=\"‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\"><a href=\"#‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\" class=\"headerlink\" title=\"‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\"></a>‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã</h2><p><strong>ÊèèËø∞Ôºö</strong>Áà∂Á±ªÔºàÊé•Âè£„ÄÅÊäΩË±°Á±ªÔºâÊèê‰æõ‰∫Ü‰∏ÄÁßç<code>ÂÆö‰πâÁÆóÊ≥ïÁöÑÈ™®Êû∂</code>Ôºå&#x3D;&#x3D;ÂÖÅËÆ∏Â≠êÁ±ª‰∏∫‰∏Ä‰∏™ÊàñÂ§ö‰∏™Ê≠•È™§Êèê‰æõÂÆûÁé∞&#x3D;&#x3D;ÔºåÂú®‰∏çÊîπÂèòÁÆóÊ≥ïÁªìÊûÑÁöÑÊÉÖÂÜµ‰∏ãÔºåÈáçÊñ∞ÂÆö‰πâÁÆóÊ≥ïÁöÑÊüê‰∫õÊ≠•È™§„ÄÇ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/65b0a3725926c195902515b16a6411d4.png\"></p>\n<p><strong>Ê°à‰æãÔºöËÆ¢ÂçïÂ§ÑÁêÜ</strong></p>\n<p><font color=orange>1„ÄÅÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:21</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">OrderProcessTemplate</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Â§ÑÁêÜËÆ¢ÂçïÔºö ÂÆö‰πâÂ•ΩÁÆóÊ≥ïÈ™®Êû∂</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processOrder</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÈÄâÊã©ÂïÜÂìÅ</span></span><br><span class=\"line\">        doSelect();</span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅËøõË°åÊîØ‰ªò</span></span><br><span class=\"line\">        doPayment();</span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅÂºÄÂÖ∑ÂèëÁ•®</span></span><br><span class=\"line\">        doReceipt();</span><br><span class=\"line\">        <span class=\"comment\">//4„ÄÅÊ¥æÈÄÅÂïÜÂìÅ</span></span><br><span class=\"line\">        doDelivery();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doSelect</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPayment</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doReceipt</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doDelivery</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>2„ÄÅÂÆö‰πâÂÆûÁé∞Á±ªÔºö<code>NetOrder</code> Âíå <code>StoreOrder</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÁΩëÁªúËÆ¢ÂçïÔºöÁÆóÊ≥ïÁªÜËäÇÂÆûÁé∞</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:24</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">NetOrder</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">OrderProcessTemplate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doSelect</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Êää xiaomi11 Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPayment</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Âú®Á∫øÂæÆ‰ø°ÊîØ‰ªò 1999&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doReceipt</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÂèëÁ•®Â∑≤ÁªèÂèëÈÄÅÁªôÁî®Êà∑ÈÇÆÁÆ±Ôºö aaaa@qq.com&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doDelivery</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;È°∫‰∏∞Ê¨°Êó•ËææÔºöÊäïÈÄÅÂïÜÂìÅ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> Èó®Â∫óËÆ¢ÂçïÔºöÂ≠êÁ±ªÂÆûÁé∞ÂÖ∑‰ΩìÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:26</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">StoreOrder</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">OrderProcessTemplate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doSelect</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Áî®Êà∑ÈÄâÊã©‰∫ÜÔºö3Âè∑Ë¥ßÊû∂-xiaomi11 ÂïÜÂìÅ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPayment</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Âà∑Âç°Êú∫ÔºöÂà∑Âç°ÊîØ‰ªò 1999&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doReceipt</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊâìÂç∞ÂèëÁ•®ÔºåÂíåÁâ©ÂìÅ‰∏ÄËµ∑ÂåÖË£Ö&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doDelivery</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊääÂïÜÂìÅ‰∫§ÁªôÁî®Êà∑ÔºåÁî®ÊºÇ‰∫ÆÁöÑË¢ãÂ≠ê&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3„ÄÅËøõË°åÊµãËØï</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ËÆæËÆ°Ê®°ÂºèÔºö  Â§öÂÆö‰πâÊé•Âè£„ÄÅÊäΩË±°Á±ª</span></span><br><span class=\"line\"><span class=\"comment\"> * 1Ôºâ„ÄÅ‰æùËµñÂÄíÁΩÆÔºõ ‰æùËµñÊäΩË±°</span></span><br><span class=\"line\"><span class=\"comment\"> * 2Ôºâ„ÄÅÂ§öÊÄÅÔºõ    Èöè‰æøÊõøÊç¢ÂÆûÁé∞</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> Ê®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊµãËØï Ôºõ Ê†∏ÂøÉÔºö Áà∂Á±ªÂÆö‰πâÁÆóÊ≥ïÈ™®Êû∂ÔºåÂ≠êÁ±ªÂÆûÁé∞ÁÆóÊ≥ïÁªÜËäÇ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 20:41</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TemplateMethodPatternTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Ë°å‰∏∫ÂûãÊ®°ÂºèÁé©ÁöÑÂ∞±ÊòØ‰∏Ä‰∏™Â§öÊÄÅ</span></span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÂ§ñÁïåË∞ÉÁî®Ê®°ÊùøÁ±ª„ÄêÈÅµÂæ™‰æùËµñÂèçËΩ¨ÂéüÂàô„Äë„Äê‰æùËµñÊäΩË±°ËÄå‰∏çÊòØÁªÜËäÇ„Äë</span></span><br><span class=\"line\">        <span class=\"type\">OrderProcessTemplate</span> <span class=\"variable\">processTemplate</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NetOrder</span>();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÁΩëÁªúËÆ¢ÂçïÔºö&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//Â§ÑÁêÜËÆ¢Âçï</span></span><br><span class=\"line\">        processTemplate.processOrder(); <span class=\"comment\">//ÂÆö‰πâ‰∫ÜÁÆóÊ≥ïÁöÑÊ®°Êùø</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        processTemplate = <span class=\"keyword\">new</span> <span class=\"title class_\">StoreOrder</span>();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Èó®Â∫óËÆ¢ÂçïÔºö&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// Ê†πÊçÆÈúÄË¶ÅÔºåÈÄâÊã©‰∏çÂêåÁöÑÂÆûÁé∞Á±ªÔºå‰ªéËÄåËææÂà∞Êàë‰ª¨ÈúÄË¶ÅÁöÑÊïàÊûúÔºöÁΩëÁªúËÆ¢Âçï Êàñ Èó®Â∫óËÆ¢Âçï</span></span><br><span class=\"line\">        processTemplate.processOrder();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ËøêË°åÁªìÊûúÔºö</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/039d094065690f2e4da8f73e94526786.png\" alt=\"image-20230113220611870\"></p>\n<h2 id=\"‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\"><a href=\"#‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\" class=\"headerlink\" title=\"‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\"></a>‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã</h2><p><strong>ÊèèËø∞Ôºö</strong>ÂÆö‰πâ<code>ÁÆóÊ≥ïÂÆ∂ÊóèÔºåÂàÜÂà´Â∞ÅË£Ö</code>Ëµ∑Êù•ÔºåËÆ©ÂÆÉ‰ª¨‰πãÈó¥ÂèØ‰ª•<code>Áõ∏‰∫íÊõøÊç¢</code>ÔºåÊ≠§Ê®°ÂºèËÆ©ÁÆóÊ≥ïÁöÑÂèòÂåñÁã¨Á´ã‰∫é‰ΩøÁî®ÁÆóÊ≥ïÁöÑÂÆ¢Êà∑„ÄÇ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/003b3cc3b5b54eee7bb255bde2e82ec5.png\"></p>\n<p><strong>Ê°à‰æãÔºöÊéíÂ∫èÁÆóÊ≥ï</strong></p>\n<p><font color=orange>1„ÄÅÂÆö‰πâÁÆóÊ≥ïÊé•Âè£</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÁÆóÊ≥ïÊé•Âè£ÔºöÊéíÂ∫èÁ≠ñÁï•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:36</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">SortStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊéíÂ∫è</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>2„ÄÅÂÆö‰πâÁ≠ñÁï•Á±ªÔºåÂÆûÁé∞ÁÆóÊ≥ïÊé•Âè£</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> Á≠ñÁï•1ÔºöÂÜíÊ≥°ÊéíÂ∫èÁ≠ñÁï•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:38</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">BubbleSortStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">SortStrategy</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÂºÄÂßãÂÜíÊ≥°ÊéíÂ∫è....&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt; arr.length-<span class=\"number\">1</span>;i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">j</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; j &lt; arr.length- <span class=\"number\">1</span> - i  ; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(arr[j] &gt; arr[j+<span class=\"number\">1</span>])&#123;</span><br><span class=\"line\">                    <span class=\"type\">Integer</span> <span class=\"variable\">temp</span> <span class=\"operator\">=</span> arr[j];</span><br><span class=\"line\">                    arr[j] = arr[j+<span class=\"number\">1</span>];</span><br><span class=\"line\">                    arr[j+<span class=\"number\">1</span>] = temp;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊéíÂ∫èÁªìÊûúÔºö&quot;</span>+ Arrays.asList(arr));</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:44</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">QuickSortStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">SortStrategy</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Âø´ÈÄüÊéíÂ∫èÂºÄÂßã&quot;</span>);</span><br><span class=\"line\">        Arrays.sort(arr);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊéíÂ∫èÁªìÊûúÔºö&quot;</span>+Arrays.asList(arr));</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>3„ÄÅÂÆö‰πâ‰∏ä‰∏ãÊñáÂØπË±°(ÂÖ•Âè£Á±ª)ÔºöÊåÅÊúâÁ≠ñÁï•ÂØπË±°</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ‰∏ä‰∏ãÊñáÔºöÂÖ•Âè£Á±ª</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:45</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SortService</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊãøÂà∞‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> SortStrategy strategy;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ‰∏∫‰∫ÜÂº∫Âà∂Ë¶ÅÊ±ÇÁî®Êà∑ÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">SortService</span><span class=\"params\">(SortStrategy strategy)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.strategy  =strategy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÈöèÊó∂Âä®ÊÄÅÊõ¥Êñ∞ÊéíÂ∫èÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setStrategy</span><span class=\"params\">(SortStrategy strategy)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.strategy = strategy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊâçÊòØÂà´‰∫∫Ë∞ÉÁî®ÁöÑÊéíÂ∫èÊñπÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> arr</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span>&#123;</span><br><span class=\"line\">        strategy.sort(arr);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>4„ÄÅ‰ΩøÁî®Á≠ñÁï•ÂØπË±°ÊâßË°åÁÆóÊ≥ï</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span>  Ê®°ÊùøÊ®°ÂºèÂÆö‰πâÂ§ßÊ°ÜÊû∂„ÄÅÁ≠ñÁï•ÈªòËÆ§ÂÆö‰πâÂ∞èÁªÜËäÇ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 21:17</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">StrategyPatternTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        Integer[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">Integer</span>[]&#123;<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">6</span>,<span class=\"number\">3</span>,<span class=\"number\">1</span>,<span class=\"number\">7</span>,<span class=\"number\">9</span>,<span class=\"number\">8</span>&#125;;</span><br><span class=\"line\">\t\t<span class=\"comment\">// ‰º†ÂÖ•‰∏çÂêåÁöÑÁ≠ñÁï•ÔºåÂ∞±‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•</span></span><br><span class=\"line\">        <span class=\"type\">SortService</span> <span class=\"variable\">sortService</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SortService</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">BubbleSortStrategy</span>());</span><br><span class=\"line\">        sortService.sort(arr);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;===============&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//Êõ¥Êñ∞Á≠ñÁï•</span></span><br><span class=\"line\">        sortService.setStrategy(<span class=\"keyword\">new</span> <span class=\"title class_\">QuickSortStrategy</span>());</span><br><span class=\"line\">        sortService.sort(arr);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ÊµãËØïÁªìÊûúÔºö</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/879dd90a18e7a5bc986a4bca6627a4e7.png\" alt=\"image-20230113220248469\"></p>\n<h2 id=\"Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\"><a href=\"#Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\" class=\"headerlink\" title=\"Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\"></a>Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†</h2><h3 id=\"4-1-ÊÄùË∑ØÂàÜÊûê\"><a href=\"#4-1-ÊÄùË∑ØÂàÜÊûê\" class=\"headerlink\" title=\"4.1 ÊÄùË∑ØÂàÜÊûê\"></a>4.1 ÊÄùË∑ØÂàÜÊûê</h3><p>‰ΩøÁî®<code>Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè</code>ÔºöÂÆö‰πâ&#x3D;&#x3D;ÊîØ‰ªòÁöÑÂÆåÊï¥ÊµÅÁ®ã&#x3D;&#x3D;Ôºõ</p>\n<p>‰ΩøÁî®<code>Á≠ñÁï•Ê®°Âºè</code>ÔºöÂÆö‰πâ&#x3D;&#x3D;ÊîØ‰ªòÁöÑ‰∏çÂêåÂÆûÁé∞&#x3D;&#x3D;Ôºõ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/2e0d3c18725c719c98d22d7b5aa1bc5a.png\"></p>\n<h3 id=\"4-2-ÂÆûÁé∞ÂõæËß£Ôºö\"><a href=\"#4-2-ÂÆûÁé∞ÂõæËß£Ôºö\" class=\"headerlink\" title=\"4.2 ÂÆûÁé∞ÂõæËß£Ôºö\"></a>4.2 ÂÆûÁé∞ÂõæËß£Ôºö</h3><p><img src=\"https://img-blog.csdnimg.cn/img_convert/6628cf4dc83c070f9bbd822c3a45878f.png\"></p>\n<blockquote>\n<p><strong>ÂàÜÊûê</strong>ÔºöPayStrategy‰ΩøÁî®ÁöÑÊòØÁ≠ñÁï•Ê®°Âºè~  PayService‰∏≠ÁöÑprocessNotifyÈáåÈù¢ÂåÖÂê´‰∫Ü ‰∏ÄÁ≥ªÂàóÊäΩË±°ÊñπÊ≥ïÁöÑË∞ÉÁî®,‰∏çÂêåÁöÑÊîØ‰ªòÊñπÂºè‰ºöÊúâ‰∏çÂêåÁöÑÂÆûÁé∞,ËøôÈáå‰ΩøÁî®‰∫ÜÊ®°ÊùøÊñπÊ≥ïÊ®°Âºè~</p>\n</blockquote>\n<h3 id=\"4-3-‰ª£Á†ÅÂÆûÁé∞Ôºö\"><a href=\"#4-3-‰ª£Á†ÅÂÆûÁé∞Ôºö\" class=\"headerlink\" title=\"4.3 ‰ª£Á†ÅÂÆûÁé∞Ôºö\"></a>4.3 ‰ª£Á†ÅÂÆûÁé∞Ôºö</h3><p><font color=orange>1„ÄÅÊîØ‰ªòÁ≠ñÁï•Êé•Âè£Ôºö<code>PayStrategy</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÊîØ‰ªòÁ≠ñÁï•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:39</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">PayStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊîØÊåÅÂì™ÁßçÊîØ‰ªò</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">supports</span><span class=\"params\">(String type)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ‰∏∫Êüê‰∏™ËÆ¢ÂçïÂ±ïÁ§∫Êî∂Èì∂Âè∞È°µÈù¢</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    String <span class=\"title function_\">cashierPage</span><span class=\"params\">(OrderInfo orderInfo)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request  ÂéüÁîüËØ∑Ê±Ç</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> body     ËØ∑Ê±Ç‰ΩìÊï∞ÊçÆ„ÄêËØ∑Ê±Ç‰ΩìÂè™ËÉΩËØªÂèñ‰∏ÄÊ¨°ÔºåÊâÄ‰ª•controllerÊãøÂà∞‰ª•ÂêéÈÉΩÂæÄ‰∏ã‰º†ÈÄíÂç≥ÂèØ„Äë</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">checkSign</span><span class=\"params\">(HttpServletRequest request,String body)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åÁ≠æÈîôËØØÂ§ÑÁêÜ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Object <span class=\"title function_\">signError</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åÁ≠æÈÄöËøáËøîÂõû</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Object <span class=\"title function_\">signOk</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åÁ≠æÊàêÂäüÂêéÂ§ÑÁêÜÈÄöÁü•Êï∞ÊçÆÔºö ÊääÈÄöÁü•ÁöÑÊâÄÊúâÊï∞ÊçÆÂ∞ÅË£ÖÊåáÂÆöÂØπË±°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; <span class=\"title function_\">process</span><span class=\"params\">(HttpServletRequest request,String body)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>2„ÄÅÊé•Âè£ÂÆûÁé∞Ôºö<code>AlipayStrategy</code> „ÄÅ<code>WeixinPayStrategy</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÊîØ‰ªòÂÆù</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:40</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">AlipayStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">PayStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    AlipayProperties alipayProperties;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    AlipayClient alipayClient;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">cashierPage</span><span class=\"params\">(OrderInfo orderInfo)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÂàõÂª∫‰∏Ä‰∏™ AlipayClient</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅÂàõÂª∫‰∏Ä‰∏™ÊîØ‰ªòËØ∑Ê±Ç</span></span><br><span class=\"line\">        <span class=\"type\">AlipayTradePagePayRequest</span> <span class=\"variable\">alipayRequest</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">AlipayTradePagePayRequest</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅËÆæÁΩÆÂèÇÊï∞</span></span><br><span class=\"line\">        alipayRequest.setReturnUrl(alipayProperties.getReturn_url()); <span class=\"comment\">//ÂêåÊ≠•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊµèËßàÂô®Ë¶ÅË∑≥ËΩ¨Âà∞ÁöÑÈ°µÈù¢Âú∞ÂùÄ</span></span><br><span class=\"line\">        alipayRequest.setNotifyUrl(alipayProperties.getNotify_url()); <span class=\"comment\">//ÈÄöÁü•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊîØ‰ªòÊ∂àÊÅØ‰ºöÈÄöÁü•ÁªôËøô‰∏™Âú∞ÂùÄ</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ÂïÜÊà∑ËÆ¢ÂçïÂè∑ÔºàÂØπÂ§ñ‰∫§ÊòìÂè∑Ôºâ</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">outTradeNo</span> <span class=\"operator\">=</span> orderInfo.getId().toString();</span><br><span class=\"line\">        <span class=\"comment\">//‰ªòÊ¨æÈáëÈ¢ù</span></span><br><span class=\"line\">        <span class=\"type\">BigDecimal</span> <span class=\"variable\">totalAmount</span> <span class=\"operator\">=</span> orderInfo.getPrice();</span><br><span class=\"line\">        <span class=\"comment\">//ËÆ¢ÂçïÂêçÁß∞</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">orderName</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Â∞öÂìÅÊ±á-ËÆ¢Âçï-&quot;</span>+outTradeNo;</span><br><span class=\"line\">        <span class=\"comment\">//ÂïÜÂìÅÊèèËø∞</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">tradeBody</span> <span class=\"operator\">=</span> orderInfo.getDesc();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ËØ¶ÁªÜÔºöhttps://opendocs.alipay.com/open/028r8t?scene=22</span></span><br><span class=\"line\">        <span class=\"comment\">//‰∏öÂä°ÂèÇÊï∞</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; bizContent = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;out_trade_no&quot;</span>,outTradeNo);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;total_amount&quot;</span>,totalAmount);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;subject&quot;</span>,orderName);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;body&quot;</span>,tradeBody);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;product_code&quot;</span>,<span class=\"string\">&quot;FAST_INSTANT_TRADE_PAY&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//Ëá™Âä®ÂÖ≥Âçï</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">date</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SimpleDateFormat</span>(<span class=\"string\">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>).format(orderInfo.getExpireTime());</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;time_expire&quot;</span>,date);</span><br><span class=\"line\">        alipayRequest.setBizContent(JSON.toJSONString(bizContent));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ÁîüÊàêÊîØ‰ªòÈ°µÈù¢</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">page</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            page = alipayClient.pageExecute(alipayRequest).getBody();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (AlipayApiException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> page;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">checkSign</span><span class=\"params\">(HttpServletRequest request,String body)</span> &#123;</span><br><span class=\"line\">        Map&lt;String, String&gt; params = HttpUtils.getParameterMap(request);</span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;ÊîØ‰ªòÂÆùÈÄöÁü•È™åËØÅÁ≠æÂêç...&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//È™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//Ë∞ÉÁî®SDKÈ™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\">            <span class=\"type\">boolean</span> <span class=\"variable\">signVerified</span> <span class=\"operator\">=</span> AlipaySignature.rsaCheckV1(params,</span><br><span class=\"line\">                    alipayProperties.getAlipay_public_key(), alipayProperties.getCharset(),</span><br><span class=\"line\">                    alipayProperties.getSign_type());</span><br><span class=\"line\">            <span class=\"keyword\">return</span> signVerified;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (AlipayApiException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Object <span class=\"title function_\">signError</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;error&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Map&lt;String,Object&gt; <span class=\"title function_\">process</span><span class=\"params\">(HttpServletRequest request,String body)</span> &#123;</span><br><span class=\"line\">        Map&lt;String, String&gt; map = HttpUtils.getParameterMap(request);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">json</span> <span class=\"operator\">=</span> JSON.toJSONString(map);</span><br><span class=\"line\">        Map&lt;String, Object&gt; data = JSON.parseObject(json, <span class=\"keyword\">new</span> <span class=\"title class_\">TypeReference</span>&lt;Map&lt;String, Object&gt;&gt;() &#123;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Object <span class=\"title function_\">signOk</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÊîØ‰ªòÂÆùË¶ÅÊ±ÇÊàêÂäüËøîÂõû success Â≠óÁ¨¶‰∏≤</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;success&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span>  <span class=\"comment\">//ÂØπÊñ∞Â¢ûÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">supports</span><span class=\"params\">(String type)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;alipay&quot;</span>.equalsIgnoreCase(type);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÂæÆ‰ø°ÊîØ‰ªò</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:40</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WeixinPayStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">PayStrategy</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ÂÖ∑‰ΩìÂÆûÁé∞ÁúÅÁï•ÔºåÂèØ‰ª•Âà∞‰ª£Á†Å‰ªìÂ∫ìÊü•Áúã</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>3„ÄÅÊîØ‰ªòService‰ª£Á†ÅÁºñÂÜô</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:36</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">PayService</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÁîüÊàêÊîØ‰ªòÊî∂Èì∂Âè∞È°µ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> orderId</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    String <span class=\"title function_\">payPage</span><span class=\"params\">(String type, Long orderId)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Â§ÑÁêÜÊîØ‰ªòÈÄöÁü•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Object <span class=\"title function_\">processNotify</span><span class=\"params\">(HttpServletRequest request,String body)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>4„ÄÅÊîØ‰ªòServiceÂÆûÁé∞</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÊîØ‰ªò‰∏ä‰∏ãÊñáÂºïÁî®ÊîØ‰ªòÁ≠ñÁï•Ôºõ Ëøô‰∏™‰∏ä‰∏ãÊñá‰πüÊòØÊ®°ÊùøÁ±ªÔºõÂÆö‰πâÂ•ΩÁÆóÊ≥ïÊ≠•È™§</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:46</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span> <span class=\"comment\">//Ê®°ÊùøÁ±ª</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">PayServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">PayService</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    List&lt;PayStrategy&gt; payStrategies; <span class=\"comment\">//Ê≥®ÂÖ•ÊîØ‰ªòÁ≠ñÁï•</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÁîüÊàêÊî∂Èì∂Âè∞È°µÈù¢</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> orderId</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">payPage</span><span class=\"params\">(String type, Long orderId)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÊü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢Âçï</span></span><br><span class=\"line\">        <span class=\"type\">OrderInfo</span> <span class=\"variable\">orderInfo</span> <span class=\"operator\">=</span> getOrderInfo(orderId);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅÁîüÊàêÊîØ‰ªòÈ°µ</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (PayStrategy strategy : payStrategies) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(strategy.supports(type))&#123;</span><br><span class=\"line\">                <span class=\"comment\">//Ëé∑ÂèñÊî∂Èì∂Âè∞È°µÈù¢</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> strategy.cashierPage(orderInfo);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅÂ¶ÇÊûú‰ª•‰∏äÈÉΩ‰∏çÊîØÊåÅÔºåÊâìÂç∞ÈîôËØØ</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;‰∏çÊîØÊåÅËøôÁßçÊîØ‰ªòÊñπÂºè&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÂÆö‰πâÈÄöÁü•Â§ÑÁêÜÊ®°ÊùøÔºõ</span></span><br><span class=\"line\"><span class=\"comment\">     * ÂæÆ‰ø°ÈÄöÁü•</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊîØ‰ªòÂÆùÈÄöÁü•</span></span><br><span class=\"line\"><span class=\"comment\">     * 1Ôºâ„ÄÅÈ™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\"><span class=\"comment\">     * 2Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÊîπËÆ¢Âçï‰∏∫Â∑≤ÊîØ‰ªò</span></span><br><span class=\"line\"><span class=\"comment\">     * 3Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÁªôÊîØ‰ªòÂÆù(success)ÂæÆ‰ø°(200Áä∂ÊÄÅÁ†Åjson)ËøîÂõûÊï∞ÊçÆ</span></span><br><span class=\"line\"><span class=\"comment\">     * 4Ôºâ„ÄÅxxx</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> body</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Object <span class=\"title function_\">processNotify</span><span class=\"params\">(HttpServletRequest request,String body)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Object</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;‰∏çÊîØÊåÅÊ≠§ÊñπÂºè&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÂà§Êñ≠ÊòØÈÇ£ÁßçÈÄöÁü•</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">type</span> <span class=\"operator\">=</span> getNotifyType(request);</span><br><span class=\"line\">        Map&lt;String, Object&gt; data = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅÈ™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (PayStrategy strategy : payStrategies) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(strategy.supports(type))&#123;</span><br><span class=\"line\">                <span class=\"comment\">//Á≠æÂêçÊ†°È™å</span></span><br><span class=\"line\">                <span class=\"type\">boolean</span> <span class=\"variable\">checkSign</span> <span class=\"operator\">=</span> strategy.checkSign(request,body);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(!checkSign)&#123;</span><br><span class=\"line\">                    log.error(<span class=\"string\">&quot;Á≠æÂêçÈ™åËØÅÂ§±Ë¥•ÔºåÁñë‰ººÊîªÂáªËØ∑Ê±Ç&quot;</span>);</span><br><span class=\"line\">                    <span class=\"comment\">//È™åÁ≠æÂ§±Ë¥•ËøîÂõû</span></span><br><span class=\"line\">                   <span class=\"keyword\">return</span> strategy.signError();</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    log.info(<span class=\"string\">&quot;Á≠æÂêçÈ™åËØÅÊàêÂäüÔºåÊèêÂèñÈÄöÁü•Êï∞ÊçÆ&quot;</span>);</span><br><span class=\"line\">                    <span class=\"comment\">//È™åÁ≠æÊàêÂäüÂ§ÑÁêÜÊï∞ÊçÆ</span></span><br><span class=\"line\">                    data = strategy.process(request,body);</span><br><span class=\"line\">                    <span class=\"comment\">//È™åÁ≠æÊàêÂäüËøîÂõû</span></span><br><span class=\"line\">                    result = strategy.signOk();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅÈÄöÁî®ÁöÑÂêéÁª≠Â§ÑÁêÜÁÆóÊ≥ïÔºõÂ§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ</span></span><br><span class=\"line\">        processOrder(data);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Â§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> data</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processOrder</span><span class=\"params\">(Map&lt;String, Object&gt; data)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//TODO ÊääÊîØ‰ªòÊàêÂäü‰ø°ÊÅØÁ≠â‰øùÂ≠òÊï∞ÊçÆÂ∫ìÔºåÂπ∂‰øÆÊîπËÆ¢ÂçïÁä∂ÊÄÅÔºåÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÁ≠â...</span></span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;ËÆ¢ÂçïÊîØ‰ªòÊàêÂäüÔºåÁä∂ÊÄÅ‰øÆÊîπÂÆåÊàêÔºåÂ∑≤ÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÔºåËØ¶ÁªÜÊï∞ÊçÆÔºö&#123;&#125;&quot;</span>,data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Âà§Êñ≠ÈÄöÁü•Á±ªÂûã</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String <span class=\"title function_\">getNotifyType</span><span class=\"params\">(HttpServletRequest request)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">header</span> <span class=\"operator\">=</span> request.getHeader(<span class=\"string\">&quot;wechatpay-serial&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(StringUtils.hasText(header))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;weixin&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">app_id</span> <span class=\"operator\">=</span> request.getParameter(<span class=\"string\">&quot;app_id&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(StringUtils.hasText(app_id))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;alipay&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;unknown&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> OrderInfo <span class=\"title function_\">getOrderInfo</span><span class=\"params\">(Long orderId)</span>&#123;</span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;Êü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢ÂçïÔºö&#123;&#125;&quot;</span>,orderId);</span><br><span class=\"line\">        <span class=\"type\">OrderInfo</span> <span class=\"variable\">orderInfo</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OrderInfo</span>();</span><br><span class=\"line\">        orderInfo.setId(orderId);</span><br><span class=\"line\">        orderInfo.setTitle(<span class=\"string\">&quot;Â∞öÂìÅÊ±á-ÂïÜÂüé-ËÆ¢Âçï&quot;</span>);</span><br><span class=\"line\">        orderInfo.setComment(<span class=\"string\">&quot;Âø´ÁÇπÂèëË¥ß&quot;</span>);</span><br><span class=\"line\">        orderInfo.setDesc(<span class=\"string\">&quot;‰π∞‰∫Ü‰∏ÄÂ†ÜÂïÜÂìÅ&quot;</span>);</span><br><span class=\"line\">        orderInfo.setPrice(<span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"string\">&quot;9098.00&quot;</span>));</span><br><span class=\"line\">        orderInfo.setExpireTime(<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(System.currentTimeMillis()+<span class=\"number\">30</span>*<span class=\"number\">60</span>*<span class=\"number\">1000</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> orderInfo;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ÂàÜÊûêÔºö</strong></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/543a45872d4d17617504e7dea6c7119f.png\" alt=\"image-20230113223331649\"></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/3267819573fb85bf35740bd55b7048b1.png\" alt=\"image-20230114125758333\"></p>\n<h3 id=\"4-4-ÊïàÊûúÊºîÁ§∫\"><a href=\"#4-4-ÊïàÊûúÊºîÁ§∫\" class=\"headerlink\" title=\"4.4 ÊïàÊûúÊºîÁ§∫\"></a>4.4 ÊïàÊûúÊºîÁ§∫</h3><p><font color=orange>1„ÄÅÁî®Êà∑ËøõÂÖ•ÊîØ‰ªòÈ°µÈù¢ÂêéÔºö</font></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/b1235253e3ce038125552750ac0c3b65.png\" alt=\"image-20230114112440663\"></p>\n<p><font color=orange>2„ÄÅÂΩìÈÄâÊã©ÂæÆ‰ø°ÊîØ‰ªòÊó∂ÔºåËøõÂÖ•ÂæÆ‰ø°‰∫åÁª¥Á†ÅÈ°µÈù¢</font></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/2c644c164d36791ac1dc70cda7202dc1.png\" alt=\"image-20230114112525508\"></p>\n<p><font color=orange>3„ÄÅÂΩìÈÄâÊã©ÊîØ‰ªòÂÆùÊîØ‰ªòÔºåËøõÂÖ•ÊîØ‰ªòÂÆùÈ°µÈù¢</font></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/9f2041ef2259893210790a38c3d2b14f.png\" alt=\"image-20230114112626541\"></p>\n<p><font color=orange>4„ÄÅÊîØ‰ªòÊàêÂäü‰πãÂêé‰ºöË∑≥ËΩ¨Âà∞ÂØπÂ∫îÁöÑÊàêÂäüÈ°µÈù¢ÔºàÂæÆ‰ø°ÊàêÂäüÈ°µÈù¢„ÄÅÊîØ‰ªòÂÆùÊàêÂäüÈ°µÈù¢‚Ä¶Ôºâ</font></p>\n<h3 id=\"4-5-Â¶Ç‰ΩïÊâ©Â±ï\"><a href=\"#4-5-Â¶Ç‰ΩïÊâ©Â±ï\" class=\"headerlink\" title=\"4.5 Â¶Ç‰ΩïÊâ©Â±ï\"></a>4.5 Â¶Ç‰ΩïÊâ©Â±ï</h3><p>ÊúÄÂêéÊàë‰ª¨ÈúÄË¶ÅÊÄùËÄÉ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÁªèËøáÊàë‰ª¨‰ΩøÁî®Á≠ñÁï•+Ê®°ÊùøÊîπÈÄ†ÁöÑÊîØ‰ªò Âíå‰º†ÁªüÁöÑÂÜôÊ≥ïÊúâÂï•Â•ΩÂ§ÑÂë¢Ôºü</p>\n<p>1„ÄÅ&#x3D;&#x3D;Êòì‰∫éÊâ©Â±ï&#x3D;&#x3D;ÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶ÅÂ¢ûÂä†Êñ∞ÁöÑÊîØ‰ªòÊñπÂºèÔºöÈì∂ËÅîÊîØ‰ªò„ÄÅÁôΩÊù°ÊîØ‰ªò‚Ä¶Êàë‰ª¨Âè™ÈúÄË¶ÅÂÆö‰πâÂØπÂ∫îÁöÑÊîØ‰ªòÁ≠ñÁï•Á±ªÂç≥ÂèØ~ ÂΩì‰∏çÈúÄË¶ÅÊó∂ÔºåÁõ¥Êé•Âà†Èô§ÂØπÂ∫îÁöÑÂÆûÁé∞Á±ª„ÄÇÁÑ∂ÂêéÂú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÔºå‰ºöËá™ÈÄÇÂ∫î‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•~ Á¨¶Âêà<code>ÂØπ‰øÆÊîπÂÖ≥Èó≠ÔºåÂØπÊâ©Â±ïÂºÄÊîæ</code>ÁöÑÁâπÁÇπÔºÅ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/3bf9cdcfd38eae9df74d77e1b4610252.png\" alt=\"image-20230114124615619\"></p>\n<p>2„ÄÅService‰∏≠ÁöÑÊ®°ÊùøÊñπÊ≥ï‰πüËÆ©Êàë‰ª¨ÁöÑ&#x3D;&#x3D;‰ª£Á†ÅÂÜó‰ΩôÂ∫¶Êõ¥‰Ωé&#x3D;&#x3D;ÔºåÈÄªËæëÊõ¥Âä†Ê∏ÖÊô∞~</p>\n","cover_type":"img","excerpt":"","more":"<p>@[TOC]</p>\n<blockquote>\n<p>Êú¨ÊñáÂèÇËÄÉËá™12.29Êó•Â∞öÁ°ÖË∞∑Èõ∑Á•ûÁöÑ <a href=\"https://gitee.com/leifengyang/java-design-pattern\">Â∑ßÂ¶ô‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ</a></p>\n</blockquote>\n<h2 id=\"‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\"><a href=\"#‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\" class=\"headerlink\" title=\"‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\"></a>‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà</h2><ul>\n<li>ÊÄª‰ΩìÂàÜÁ±ª</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/9e402b0c6ec2bc81a317c6b8774d2c7f.png\" alt=\"image-20230113210444492\"></p>\n<ul>\n<li>‰∏çÂêåÊó∂ÊúüÈÄâÊã©‰∏çÂêåÁöÑËÆæËÆ°Ê®°Âºè~</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/5ed1ffc8fb36192278f04e22eb606402.png\" alt=\"image-20230114113220058\"></p>\n<ul>\n<li>ËÆæËÆ°Ê®°ÂºèÊú¨Ë¥®‰∏äÁé©ÁöÑÂ∞±ÊòØÔºö<code>Â∞ÅË£Ö</code>Ôºå<code>ÁªßÊâø</code>Ôºå<code>Â§öÊÄÅ</code></li>\n<li>ËÆæËÆ°Ê®°ÂºèÈÅµÂæ™ÁöÑÂÖ≠Â§ßÂéüÂàô</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/df85588b81d2d6631d201855a66ea948.png\" alt=\"image-20230114113416409\"></p>\n<h2 id=\"‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\"><a href=\"#‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\" class=\"headerlink\" title=\"‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\"></a>‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã</h2><p><strong>ÊèèËø∞Ôºö</strong>Áà∂Á±ªÔºàÊé•Âè£„ÄÅÊäΩË±°Á±ªÔºâÊèê‰æõ‰∫Ü‰∏ÄÁßç<code>ÂÆö‰πâÁÆóÊ≥ïÁöÑÈ™®Êû∂</code>Ôºå&#x3D;&#x3D;ÂÖÅËÆ∏Â≠êÁ±ª‰∏∫‰∏Ä‰∏™ÊàñÂ§ö‰∏™Ê≠•È™§Êèê‰æõÂÆûÁé∞&#x3D;&#x3D;ÔºåÂú®‰∏çÊîπÂèòÁÆóÊ≥ïÁªìÊûÑÁöÑÊÉÖÂÜµ‰∏ãÔºåÈáçÊñ∞ÂÆö‰πâÁÆóÊ≥ïÁöÑÊüê‰∫õÊ≠•È™§„ÄÇ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/65b0a3725926c195902515b16a6411d4.png\"></p>\n<p><strong>Ê°à‰æãÔºöËÆ¢ÂçïÂ§ÑÁêÜ</strong></p>\n<p><font color=orange>1„ÄÅÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:21</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">OrderProcessTemplate</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Â§ÑÁêÜËÆ¢ÂçïÔºö ÂÆö‰πâÂ•ΩÁÆóÊ≥ïÈ™®Êû∂</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processOrder</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÈÄâÊã©ÂïÜÂìÅ</span></span><br><span class=\"line\">        doSelect();</span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅËøõË°åÊîØ‰ªò</span></span><br><span class=\"line\">        doPayment();</span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅÂºÄÂÖ∑ÂèëÁ•®</span></span><br><span class=\"line\">        doReceipt();</span><br><span class=\"line\">        <span class=\"comment\">//4„ÄÅÊ¥æÈÄÅÂïÜÂìÅ</span></span><br><span class=\"line\">        doDelivery();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doSelect</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPayment</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doReceipt</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doDelivery</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>2„ÄÅÂÆö‰πâÂÆûÁé∞Á±ªÔºö<code>NetOrder</code> Âíå <code>StoreOrder</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÁΩëÁªúËÆ¢ÂçïÔºöÁÆóÊ≥ïÁªÜËäÇÂÆûÁé∞</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:24</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">NetOrder</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">OrderProcessTemplate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doSelect</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Êää xiaomi11 Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPayment</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Âú®Á∫øÂæÆ‰ø°ÊîØ‰ªò 1999&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doReceipt</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÂèëÁ•®Â∑≤ÁªèÂèëÈÄÅÁªôÁî®Êà∑ÈÇÆÁÆ±Ôºö aaaa@qq.com&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doDelivery</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;È°∫‰∏∞Ê¨°Êó•ËææÔºöÊäïÈÄÅÂïÜÂìÅ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> Èó®Â∫óËÆ¢ÂçïÔºöÂ≠êÁ±ªÂÆûÁé∞ÂÖ∑‰ΩìÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:26</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">StoreOrder</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">OrderProcessTemplate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doSelect</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Áî®Êà∑ÈÄâÊã©‰∫ÜÔºö3Âè∑Ë¥ßÊû∂-xiaomi11 ÂïÜÂìÅ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPayment</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Âà∑Âç°Êú∫ÔºöÂà∑Âç°ÊîØ‰ªò 1999&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doReceipt</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊâìÂç∞ÂèëÁ•®ÔºåÂíåÁâ©ÂìÅ‰∏ÄËµ∑ÂåÖË£Ö&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doDelivery</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊääÂïÜÂìÅ‰∫§ÁªôÁî®Êà∑ÔºåÁî®ÊºÇ‰∫ÆÁöÑË¢ãÂ≠ê&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3„ÄÅËøõË°åÊµãËØï</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ËÆæËÆ°Ê®°ÂºèÔºö  Â§öÂÆö‰πâÊé•Âè£„ÄÅÊäΩË±°Á±ª</span></span><br><span class=\"line\"><span class=\"comment\"> * 1Ôºâ„ÄÅ‰æùËµñÂÄíÁΩÆÔºõ ‰æùËµñÊäΩË±°</span></span><br><span class=\"line\"><span class=\"comment\"> * 2Ôºâ„ÄÅÂ§öÊÄÅÔºõ    Èöè‰æøÊõøÊç¢ÂÆûÁé∞</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> Ê®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊµãËØï Ôºõ Ê†∏ÂøÉÔºö Áà∂Á±ªÂÆö‰πâÁÆóÊ≥ïÈ™®Êû∂ÔºåÂ≠êÁ±ªÂÆûÁé∞ÁÆóÊ≥ïÁªÜËäÇ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 20:41</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TemplateMethodPatternTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Ë°å‰∏∫ÂûãÊ®°ÂºèÁé©ÁöÑÂ∞±ÊòØ‰∏Ä‰∏™Â§öÊÄÅ</span></span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÂ§ñÁïåË∞ÉÁî®Ê®°ÊùøÁ±ª„ÄêÈÅµÂæ™‰æùËµñÂèçËΩ¨ÂéüÂàô„Äë„Äê‰æùËµñÊäΩË±°ËÄå‰∏çÊòØÁªÜËäÇ„Äë</span></span><br><span class=\"line\">        <span class=\"type\">OrderProcessTemplate</span> <span class=\"variable\">processTemplate</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NetOrder</span>();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÁΩëÁªúËÆ¢ÂçïÔºö&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//Â§ÑÁêÜËÆ¢Âçï</span></span><br><span class=\"line\">        processTemplate.processOrder(); <span class=\"comment\">//ÂÆö‰πâ‰∫ÜÁÆóÊ≥ïÁöÑÊ®°Êùø</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        processTemplate = <span class=\"keyword\">new</span> <span class=\"title class_\">StoreOrder</span>();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Èó®Â∫óËÆ¢ÂçïÔºö&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// Ê†πÊçÆÈúÄË¶ÅÔºåÈÄâÊã©‰∏çÂêåÁöÑÂÆûÁé∞Á±ªÔºå‰ªéËÄåËææÂà∞Êàë‰ª¨ÈúÄË¶ÅÁöÑÊïàÊûúÔºöÁΩëÁªúËÆ¢Âçï Êàñ Èó®Â∫óËÆ¢Âçï</span></span><br><span class=\"line\">        processTemplate.processOrder();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ËøêË°åÁªìÊûúÔºö</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/039d094065690f2e4da8f73e94526786.png\" alt=\"image-20230113220611870\"></p>\n<h2 id=\"‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\"><a href=\"#‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\" class=\"headerlink\" title=\"‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\"></a>‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã</h2><p><strong>ÊèèËø∞Ôºö</strong>ÂÆö‰πâ<code>ÁÆóÊ≥ïÂÆ∂ÊóèÔºåÂàÜÂà´Â∞ÅË£Ö</code>Ëµ∑Êù•ÔºåËÆ©ÂÆÉ‰ª¨‰πãÈó¥ÂèØ‰ª•<code>Áõ∏‰∫íÊõøÊç¢</code>ÔºåÊ≠§Ê®°ÂºèËÆ©ÁÆóÊ≥ïÁöÑÂèòÂåñÁã¨Á´ã‰∫é‰ΩøÁî®ÁÆóÊ≥ïÁöÑÂÆ¢Êà∑„ÄÇ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/003b3cc3b5b54eee7bb255bde2e82ec5.png\"></p>\n<p><strong>Ê°à‰æãÔºöÊéíÂ∫èÁÆóÊ≥ï</strong></p>\n<p><font color=orange>1„ÄÅÂÆö‰πâÁÆóÊ≥ïÊé•Âè£</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÁÆóÊ≥ïÊé•Âè£ÔºöÊéíÂ∫èÁ≠ñÁï•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:36</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">SortStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊéíÂ∫è</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>2„ÄÅÂÆö‰πâÁ≠ñÁï•Á±ªÔºåÂÆûÁé∞ÁÆóÊ≥ïÊé•Âè£</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> Á≠ñÁï•1ÔºöÂÜíÊ≥°ÊéíÂ∫èÁ≠ñÁï•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:38</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">BubbleSortStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">SortStrategy</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÂºÄÂßãÂÜíÊ≥°ÊéíÂ∫è....&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt; arr.length-<span class=\"number\">1</span>;i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">j</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; j &lt; arr.length- <span class=\"number\">1</span> - i  ; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(arr[j] &gt; arr[j+<span class=\"number\">1</span>])&#123;</span><br><span class=\"line\">                    <span class=\"type\">Integer</span> <span class=\"variable\">temp</span> <span class=\"operator\">=</span> arr[j];</span><br><span class=\"line\">                    arr[j] = arr[j+<span class=\"number\">1</span>];</span><br><span class=\"line\">                    arr[j+<span class=\"number\">1</span>] = temp;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊéíÂ∫èÁªìÊûúÔºö&quot;</span>+ Arrays.asList(arr));</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:44</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">QuickSortStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">SortStrategy</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Âø´ÈÄüÊéíÂ∫èÂºÄÂßã&quot;</span>);</span><br><span class=\"line\">        Arrays.sort(arr);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊéíÂ∫èÁªìÊûúÔºö&quot;</span>+Arrays.asList(arr));</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>3„ÄÅÂÆö‰πâ‰∏ä‰∏ãÊñáÂØπË±°(ÂÖ•Âè£Á±ª)ÔºöÊåÅÊúâÁ≠ñÁï•ÂØπË±°</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ‰∏ä‰∏ãÊñáÔºöÂÖ•Âè£Á±ª</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:45</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SortService</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊãøÂà∞‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> SortStrategy strategy;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ‰∏∫‰∫ÜÂº∫Âà∂Ë¶ÅÊ±ÇÁî®Êà∑ÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">SortService</span><span class=\"params\">(SortStrategy strategy)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.strategy  =strategy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÈöèÊó∂Âä®ÊÄÅÊõ¥Êñ∞ÊéíÂ∫èÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setStrategy</span><span class=\"params\">(SortStrategy strategy)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.strategy = strategy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊâçÊòØÂà´‰∫∫Ë∞ÉÁî®ÁöÑÊéíÂ∫èÊñπÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> arr</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span>&#123;</span><br><span class=\"line\">        strategy.sort(arr);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>4„ÄÅ‰ΩøÁî®Á≠ñÁï•ÂØπË±°ÊâßË°åÁÆóÊ≥ï</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span>  Ê®°ÊùøÊ®°ÂºèÂÆö‰πâÂ§ßÊ°ÜÊû∂„ÄÅÁ≠ñÁï•ÈªòËÆ§ÂÆö‰πâÂ∞èÁªÜËäÇ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 21:17</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">StrategyPatternTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        Integer[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">Integer</span>[]&#123;<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">6</span>,<span class=\"number\">3</span>,<span class=\"number\">1</span>,<span class=\"number\">7</span>,<span class=\"number\">9</span>,<span class=\"number\">8</span>&#125;;</span><br><span class=\"line\">\t\t<span class=\"comment\">// ‰º†ÂÖ•‰∏çÂêåÁöÑÁ≠ñÁï•ÔºåÂ∞±‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•</span></span><br><span class=\"line\">        <span class=\"type\">SortService</span> <span class=\"variable\">sortService</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SortService</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">BubbleSortStrategy</span>());</span><br><span class=\"line\">        sortService.sort(arr);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;===============&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//Êõ¥Êñ∞Á≠ñÁï•</span></span><br><span class=\"line\">        sortService.setStrategy(<span class=\"keyword\">new</span> <span class=\"title class_\">QuickSortStrategy</span>());</span><br><span class=\"line\">        sortService.sort(arr);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ÊµãËØïÁªìÊûúÔºö</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/879dd90a18e7a5bc986a4bca6627a4e7.png\" alt=\"image-20230113220248469\"></p>\n<h2 id=\"Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\"><a href=\"#Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\" class=\"headerlink\" title=\"Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\"></a>Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†</h2><h3 id=\"4-1-ÊÄùË∑ØÂàÜÊûê\"><a href=\"#4-1-ÊÄùË∑ØÂàÜÊûê\" class=\"headerlink\" title=\"4.1 ÊÄùË∑ØÂàÜÊûê\"></a>4.1 ÊÄùË∑ØÂàÜÊûê</h3><p>‰ΩøÁî®<code>Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè</code>ÔºöÂÆö‰πâ&#x3D;&#x3D;ÊîØ‰ªòÁöÑÂÆåÊï¥ÊµÅÁ®ã&#x3D;&#x3D;Ôºõ</p>\n<p>‰ΩøÁî®<code>Á≠ñÁï•Ê®°Âºè</code>ÔºöÂÆö‰πâ&#x3D;&#x3D;ÊîØ‰ªòÁöÑ‰∏çÂêåÂÆûÁé∞&#x3D;&#x3D;Ôºõ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/2e0d3c18725c719c98d22d7b5aa1bc5a.png\"></p>\n<h3 id=\"4-2-ÂÆûÁé∞ÂõæËß£Ôºö\"><a href=\"#4-2-ÂÆûÁé∞ÂõæËß£Ôºö\" class=\"headerlink\" title=\"4.2 ÂÆûÁé∞ÂõæËß£Ôºö\"></a>4.2 ÂÆûÁé∞ÂõæËß£Ôºö</h3><p><img src=\"https://img-blog.csdnimg.cn/img_convert/6628cf4dc83c070f9bbd822c3a45878f.png\"></p>\n<blockquote>\n<p><strong>ÂàÜÊûê</strong>ÔºöPayStrategy‰ΩøÁî®ÁöÑÊòØÁ≠ñÁï•Ê®°Âºè~  PayService‰∏≠ÁöÑprocessNotifyÈáåÈù¢ÂåÖÂê´‰∫Ü ‰∏ÄÁ≥ªÂàóÊäΩË±°ÊñπÊ≥ïÁöÑË∞ÉÁî®,‰∏çÂêåÁöÑÊîØ‰ªòÊñπÂºè‰ºöÊúâ‰∏çÂêåÁöÑÂÆûÁé∞,ËøôÈáå‰ΩøÁî®‰∫ÜÊ®°ÊùøÊñπÊ≥ïÊ®°Âºè~</p>\n</blockquote>\n<h3 id=\"4-3-‰ª£Á†ÅÂÆûÁé∞Ôºö\"><a href=\"#4-3-‰ª£Á†ÅÂÆûÁé∞Ôºö\" class=\"headerlink\" title=\"4.3 ‰ª£Á†ÅÂÆûÁé∞Ôºö\"></a>4.3 ‰ª£Á†ÅÂÆûÁé∞Ôºö</h3><p><font color=orange>1„ÄÅÊîØ‰ªòÁ≠ñÁï•Êé•Âè£Ôºö<code>PayStrategy</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÊîØ‰ªòÁ≠ñÁï•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:39</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">PayStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊîØÊåÅÂì™ÁßçÊîØ‰ªò</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">supports</span><span class=\"params\">(String type)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ‰∏∫Êüê‰∏™ËÆ¢ÂçïÂ±ïÁ§∫Êî∂Èì∂Âè∞È°µÈù¢</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    String <span class=\"title function_\">cashierPage</span><span class=\"params\">(OrderInfo orderInfo)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request  ÂéüÁîüËØ∑Ê±Ç</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> body     ËØ∑Ê±Ç‰ΩìÊï∞ÊçÆ„ÄêËØ∑Ê±Ç‰ΩìÂè™ËÉΩËØªÂèñ‰∏ÄÊ¨°ÔºåÊâÄ‰ª•controllerÊãøÂà∞‰ª•ÂêéÈÉΩÂæÄ‰∏ã‰º†ÈÄíÂç≥ÂèØ„Äë</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">checkSign</span><span class=\"params\">(HttpServletRequest request,String body)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åÁ≠æÈîôËØØÂ§ÑÁêÜ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Object <span class=\"title function_\">signError</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åÁ≠æÈÄöËøáËøîÂõû</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Object <span class=\"title function_\">signOk</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åÁ≠æÊàêÂäüÂêéÂ§ÑÁêÜÈÄöÁü•Êï∞ÊçÆÔºö ÊääÈÄöÁü•ÁöÑÊâÄÊúâÊï∞ÊçÆÂ∞ÅË£ÖÊåáÂÆöÂØπË±°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; <span class=\"title function_\">process</span><span class=\"params\">(HttpServletRequest request,String body)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>2„ÄÅÊé•Âè£ÂÆûÁé∞Ôºö<code>AlipayStrategy</code> „ÄÅ<code>WeixinPayStrategy</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÊîØ‰ªòÂÆù</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:40</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">AlipayStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">PayStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    AlipayProperties alipayProperties;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    AlipayClient alipayClient;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">cashierPage</span><span class=\"params\">(OrderInfo orderInfo)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÂàõÂª∫‰∏Ä‰∏™ AlipayClient</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅÂàõÂª∫‰∏Ä‰∏™ÊîØ‰ªòËØ∑Ê±Ç</span></span><br><span class=\"line\">        <span class=\"type\">AlipayTradePagePayRequest</span> <span class=\"variable\">alipayRequest</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">AlipayTradePagePayRequest</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅËÆæÁΩÆÂèÇÊï∞</span></span><br><span class=\"line\">        alipayRequest.setReturnUrl(alipayProperties.getReturn_url()); <span class=\"comment\">//ÂêåÊ≠•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊµèËßàÂô®Ë¶ÅË∑≥ËΩ¨Âà∞ÁöÑÈ°µÈù¢Âú∞ÂùÄ</span></span><br><span class=\"line\">        alipayRequest.setNotifyUrl(alipayProperties.getNotify_url()); <span class=\"comment\">//ÈÄöÁü•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊîØ‰ªòÊ∂àÊÅØ‰ºöÈÄöÁü•ÁªôËøô‰∏™Âú∞ÂùÄ</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ÂïÜÊà∑ËÆ¢ÂçïÂè∑ÔºàÂØπÂ§ñ‰∫§ÊòìÂè∑Ôºâ</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">outTradeNo</span> <span class=\"operator\">=</span> orderInfo.getId().toString();</span><br><span class=\"line\">        <span class=\"comment\">//‰ªòÊ¨æÈáëÈ¢ù</span></span><br><span class=\"line\">        <span class=\"type\">BigDecimal</span> <span class=\"variable\">totalAmount</span> <span class=\"operator\">=</span> orderInfo.getPrice();</span><br><span class=\"line\">        <span class=\"comment\">//ËÆ¢ÂçïÂêçÁß∞</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">orderName</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Â∞öÂìÅÊ±á-ËÆ¢Âçï-&quot;</span>+outTradeNo;</span><br><span class=\"line\">        <span class=\"comment\">//ÂïÜÂìÅÊèèËø∞</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">tradeBody</span> <span class=\"operator\">=</span> orderInfo.getDesc();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ËØ¶ÁªÜÔºöhttps://opendocs.alipay.com/open/028r8t?scene=22</span></span><br><span class=\"line\">        <span class=\"comment\">//‰∏öÂä°ÂèÇÊï∞</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; bizContent = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;out_trade_no&quot;</span>,outTradeNo);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;total_amount&quot;</span>,totalAmount);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;subject&quot;</span>,orderName);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;body&quot;</span>,tradeBody);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;product_code&quot;</span>,<span class=\"string\">&quot;FAST_INSTANT_TRADE_PAY&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//Ëá™Âä®ÂÖ≥Âçï</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">date</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SimpleDateFormat</span>(<span class=\"string\">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>).format(orderInfo.getExpireTime());</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;time_expire&quot;</span>,date);</span><br><span class=\"line\">        alipayRequest.setBizContent(JSON.toJSONString(bizContent));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ÁîüÊàêÊîØ‰ªòÈ°µÈù¢</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">page</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            page = alipayClient.pageExecute(alipayRequest).getBody();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (AlipayApiException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> page;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">checkSign</span><span class=\"params\">(HttpServletRequest request,String body)</span> &#123;</span><br><span class=\"line\">        Map&lt;String, String&gt; params = HttpUtils.getParameterMap(request);</span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;ÊîØ‰ªòÂÆùÈÄöÁü•È™åËØÅÁ≠æÂêç...&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//È™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//Ë∞ÉÁî®SDKÈ™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\">            <span class=\"type\">boolean</span> <span class=\"variable\">signVerified</span> <span class=\"operator\">=</span> AlipaySignature.rsaCheckV1(params,</span><br><span class=\"line\">                    alipayProperties.getAlipay_public_key(), alipayProperties.getCharset(),</span><br><span class=\"line\">                    alipayProperties.getSign_type());</span><br><span class=\"line\">            <span class=\"keyword\">return</span> signVerified;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (AlipayApiException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Object <span class=\"title function_\">signError</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;error&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Map&lt;String,Object&gt; <span class=\"title function_\">process</span><span class=\"params\">(HttpServletRequest request,String body)</span> &#123;</span><br><span class=\"line\">        Map&lt;String, String&gt; map = HttpUtils.getParameterMap(request);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">json</span> <span class=\"operator\">=</span> JSON.toJSONString(map);</span><br><span class=\"line\">        Map&lt;String, Object&gt; data = JSON.parseObject(json, <span class=\"keyword\">new</span> <span class=\"title class_\">TypeReference</span>&lt;Map&lt;String, Object&gt;&gt;() &#123;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Object <span class=\"title function_\">signOk</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÊîØ‰ªòÂÆùË¶ÅÊ±ÇÊàêÂäüËøîÂõû success Â≠óÁ¨¶‰∏≤</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;success&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span>  <span class=\"comment\">//ÂØπÊñ∞Â¢ûÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">supports</span><span class=\"params\">(String type)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;alipay&quot;</span>.equalsIgnoreCase(type);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÂæÆ‰ø°ÊîØ‰ªò</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:40</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WeixinPayStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">PayStrategy</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ÂÖ∑‰ΩìÂÆûÁé∞ÁúÅÁï•ÔºåÂèØ‰ª•Âà∞‰ª£Á†Å‰ªìÂ∫ìÊü•Áúã</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>3„ÄÅÊîØ‰ªòService‰ª£Á†ÅÁºñÂÜô</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:36</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">PayService</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÁîüÊàêÊîØ‰ªòÊî∂Èì∂Âè∞È°µ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> orderId</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    String <span class=\"title function_\">payPage</span><span class=\"params\">(String type, Long orderId)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Â§ÑÁêÜÊîØ‰ªòÈÄöÁü•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Object <span class=\"title function_\">processNotify</span><span class=\"params\">(HttpServletRequest request,String body)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>4„ÄÅÊîØ‰ªòServiceÂÆûÁé∞</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÊîØ‰ªò‰∏ä‰∏ãÊñáÂºïÁî®ÊîØ‰ªòÁ≠ñÁï•Ôºõ Ëøô‰∏™‰∏ä‰∏ãÊñá‰πüÊòØÊ®°ÊùøÁ±ªÔºõÂÆö‰πâÂ•ΩÁÆóÊ≥ïÊ≠•È™§</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:46</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span> <span class=\"comment\">//Ê®°ÊùøÁ±ª</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">PayServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">PayService</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    List&lt;PayStrategy&gt; payStrategies; <span class=\"comment\">//Ê≥®ÂÖ•ÊîØ‰ªòÁ≠ñÁï•</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÁîüÊàêÊî∂Èì∂Âè∞È°µÈù¢</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> orderId</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">payPage</span><span class=\"params\">(String type, Long orderId)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÊü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢Âçï</span></span><br><span class=\"line\">        <span class=\"type\">OrderInfo</span> <span class=\"variable\">orderInfo</span> <span class=\"operator\">=</span> getOrderInfo(orderId);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅÁîüÊàêÊîØ‰ªòÈ°µ</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (PayStrategy strategy : payStrategies) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(strategy.supports(type))&#123;</span><br><span class=\"line\">                <span class=\"comment\">//Ëé∑ÂèñÊî∂Èì∂Âè∞È°µÈù¢</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> strategy.cashierPage(orderInfo);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅÂ¶ÇÊûú‰ª•‰∏äÈÉΩ‰∏çÊîØÊåÅÔºåÊâìÂç∞ÈîôËØØ</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;‰∏çÊîØÊåÅËøôÁßçÊîØ‰ªòÊñπÂºè&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÂÆö‰πâÈÄöÁü•Â§ÑÁêÜÊ®°ÊùøÔºõ</span></span><br><span class=\"line\"><span class=\"comment\">     * ÂæÆ‰ø°ÈÄöÁü•</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊîØ‰ªòÂÆùÈÄöÁü•</span></span><br><span class=\"line\"><span class=\"comment\">     * 1Ôºâ„ÄÅÈ™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\"><span class=\"comment\">     * 2Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÊîπËÆ¢Âçï‰∏∫Â∑≤ÊîØ‰ªò</span></span><br><span class=\"line\"><span class=\"comment\">     * 3Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÁªôÊîØ‰ªòÂÆù(success)ÂæÆ‰ø°(200Áä∂ÊÄÅÁ†Åjson)ËøîÂõûÊï∞ÊçÆ</span></span><br><span class=\"line\"><span class=\"comment\">     * 4Ôºâ„ÄÅxxx</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> body</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Object <span class=\"title function_\">processNotify</span><span class=\"params\">(HttpServletRequest request,String body)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Object</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;‰∏çÊîØÊåÅÊ≠§ÊñπÂºè&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÂà§Êñ≠ÊòØÈÇ£ÁßçÈÄöÁü•</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">type</span> <span class=\"operator\">=</span> getNotifyType(request);</span><br><span class=\"line\">        Map&lt;String, Object&gt; data = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅÈ™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (PayStrategy strategy : payStrategies) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(strategy.supports(type))&#123;</span><br><span class=\"line\">                <span class=\"comment\">//Á≠æÂêçÊ†°È™å</span></span><br><span class=\"line\">                <span class=\"type\">boolean</span> <span class=\"variable\">checkSign</span> <span class=\"operator\">=</span> strategy.checkSign(request,body);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(!checkSign)&#123;</span><br><span class=\"line\">                    log.error(<span class=\"string\">&quot;Á≠æÂêçÈ™åËØÅÂ§±Ë¥•ÔºåÁñë‰ººÊîªÂáªËØ∑Ê±Ç&quot;</span>);</span><br><span class=\"line\">                    <span class=\"comment\">//È™åÁ≠æÂ§±Ë¥•ËøîÂõû</span></span><br><span class=\"line\">                   <span class=\"keyword\">return</span> strategy.signError();</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    log.info(<span class=\"string\">&quot;Á≠æÂêçÈ™åËØÅÊàêÂäüÔºåÊèêÂèñÈÄöÁü•Êï∞ÊçÆ&quot;</span>);</span><br><span class=\"line\">                    <span class=\"comment\">//È™åÁ≠æÊàêÂäüÂ§ÑÁêÜÊï∞ÊçÆ</span></span><br><span class=\"line\">                    data = strategy.process(request,body);</span><br><span class=\"line\">                    <span class=\"comment\">//È™åÁ≠æÊàêÂäüËøîÂõû</span></span><br><span class=\"line\">                    result = strategy.signOk();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅÈÄöÁî®ÁöÑÂêéÁª≠Â§ÑÁêÜÁÆóÊ≥ïÔºõÂ§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ</span></span><br><span class=\"line\">        processOrder(data);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Â§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> data</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processOrder</span><span class=\"params\">(Map&lt;String, Object&gt; data)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//TODO ÊääÊîØ‰ªòÊàêÂäü‰ø°ÊÅØÁ≠â‰øùÂ≠òÊï∞ÊçÆÂ∫ìÔºåÂπ∂‰øÆÊîπËÆ¢ÂçïÁä∂ÊÄÅÔºåÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÁ≠â...</span></span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;ËÆ¢ÂçïÊîØ‰ªòÊàêÂäüÔºåÁä∂ÊÄÅ‰øÆÊîπÂÆåÊàêÔºåÂ∑≤ÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÔºåËØ¶ÁªÜÊï∞ÊçÆÔºö&#123;&#125;&quot;</span>,data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Âà§Êñ≠ÈÄöÁü•Á±ªÂûã</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String <span class=\"title function_\">getNotifyType</span><span class=\"params\">(HttpServletRequest request)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">header</span> <span class=\"operator\">=</span> request.getHeader(<span class=\"string\">&quot;wechatpay-serial&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(StringUtils.hasText(header))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;weixin&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">app_id</span> <span class=\"operator\">=</span> request.getParameter(<span class=\"string\">&quot;app_id&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(StringUtils.hasText(app_id))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;alipay&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;unknown&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> OrderInfo <span class=\"title function_\">getOrderInfo</span><span class=\"params\">(Long orderId)</span>&#123;</span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;Êü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢ÂçïÔºö&#123;&#125;&quot;</span>,orderId);</span><br><span class=\"line\">        <span class=\"type\">OrderInfo</span> <span class=\"variable\">orderInfo</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OrderInfo</span>();</span><br><span class=\"line\">        orderInfo.setId(orderId);</span><br><span class=\"line\">        orderInfo.setTitle(<span class=\"string\">&quot;Â∞öÂìÅÊ±á-ÂïÜÂüé-ËÆ¢Âçï&quot;</span>);</span><br><span class=\"line\">        orderInfo.setComment(<span class=\"string\">&quot;Âø´ÁÇπÂèëË¥ß&quot;</span>);</span><br><span class=\"line\">        orderInfo.setDesc(<span class=\"string\">&quot;‰π∞‰∫Ü‰∏ÄÂ†ÜÂïÜÂìÅ&quot;</span>);</span><br><span class=\"line\">        orderInfo.setPrice(<span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"string\">&quot;9098.00&quot;</span>));</span><br><span class=\"line\">        orderInfo.setExpireTime(<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(System.currentTimeMillis()+<span class=\"number\">30</span>*<span class=\"number\">60</span>*<span class=\"number\">1000</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> orderInfo;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ÂàÜÊûêÔºö</strong></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/543a45872d4d17617504e7dea6c7119f.png\" alt=\"image-20230113223331649\"></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/3267819573fb85bf35740bd55b7048b1.png\" alt=\"image-20230114125758333\"></p>\n<h3 id=\"4-4-ÊïàÊûúÊºîÁ§∫\"><a href=\"#4-4-ÊïàÊûúÊºîÁ§∫\" class=\"headerlink\" title=\"4.4 ÊïàÊûúÊºîÁ§∫\"></a>4.4 ÊïàÊûúÊºîÁ§∫</h3><p><font color=orange>1„ÄÅÁî®Êà∑ËøõÂÖ•ÊîØ‰ªòÈ°µÈù¢ÂêéÔºö</font></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/b1235253e3ce038125552750ac0c3b65.png\" alt=\"image-20230114112440663\"></p>\n<p><font color=orange>2„ÄÅÂΩìÈÄâÊã©ÂæÆ‰ø°ÊîØ‰ªòÊó∂ÔºåËøõÂÖ•ÂæÆ‰ø°‰∫åÁª¥Á†ÅÈ°µÈù¢</font></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/2c644c164d36791ac1dc70cda7202dc1.png\" alt=\"image-20230114112525508\"></p>\n<p><font color=orange>3„ÄÅÂΩìÈÄâÊã©ÊîØ‰ªòÂÆùÊîØ‰ªòÔºåËøõÂÖ•ÊîØ‰ªòÂÆùÈ°µÈù¢</font></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/9f2041ef2259893210790a38c3d2b14f.png\" alt=\"image-20230114112626541\"></p>\n<p><font color=orange>4„ÄÅÊîØ‰ªòÊàêÂäü‰πãÂêé‰ºöË∑≥ËΩ¨Âà∞ÂØπÂ∫îÁöÑÊàêÂäüÈ°µÈù¢ÔºàÂæÆ‰ø°ÊàêÂäüÈ°µÈù¢„ÄÅÊîØ‰ªòÂÆùÊàêÂäüÈ°µÈù¢‚Ä¶Ôºâ</font></p>\n<h3 id=\"4-5-Â¶Ç‰ΩïÊâ©Â±ï\"><a href=\"#4-5-Â¶Ç‰ΩïÊâ©Â±ï\" class=\"headerlink\" title=\"4.5 Â¶Ç‰ΩïÊâ©Â±ï\"></a>4.5 Â¶Ç‰ΩïÊâ©Â±ï</h3><p>ÊúÄÂêéÊàë‰ª¨ÈúÄË¶ÅÊÄùËÄÉ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÁªèËøáÊàë‰ª¨‰ΩøÁî®Á≠ñÁï•+Ê®°ÊùøÊîπÈÄ†ÁöÑÊîØ‰ªò Âíå‰º†ÁªüÁöÑÂÜôÊ≥ïÊúâÂï•Â•ΩÂ§ÑÂë¢Ôºü</p>\n<p>1„ÄÅ&#x3D;&#x3D;Êòì‰∫éÊâ©Â±ï&#x3D;&#x3D;ÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶ÅÂ¢ûÂä†Êñ∞ÁöÑÊîØ‰ªòÊñπÂºèÔºöÈì∂ËÅîÊîØ‰ªò„ÄÅÁôΩÊù°ÊîØ‰ªò‚Ä¶Êàë‰ª¨Âè™ÈúÄË¶ÅÂÆö‰πâÂØπÂ∫îÁöÑÊîØ‰ªòÁ≠ñÁï•Á±ªÂç≥ÂèØ~ ÂΩì‰∏çÈúÄË¶ÅÊó∂ÔºåÁõ¥Êé•Âà†Èô§ÂØπÂ∫îÁöÑÂÆûÁé∞Á±ª„ÄÇÁÑ∂ÂêéÂú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÔºå‰ºöËá™ÈÄÇÂ∫î‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•~ Á¨¶Âêà<code>ÂØπ‰øÆÊîπÂÖ≥Èó≠ÔºåÂØπÊâ©Â±ïÂºÄÊîæ</code>ÁöÑÁâπÁÇπÔºÅ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/3bf9cdcfd38eae9df74d77e1b4610252.png\" alt=\"image-20230114124615619\"></p>\n<p>2„ÄÅService‰∏≠ÁöÑÊ®°ÊùøÊñπÊ≥ï‰πüËÆ©Êàë‰ª¨ÁöÑ&#x3D;&#x3D;‰ª£Á†ÅÂÜó‰ΩôÂ∫¶Êõ¥‰Ωé&#x3D;&#x3D;ÔºåÈÄªËæëÊõ¥Âä†Ê∏ÖÊô∞~</p>\n"},{"title":"Â≠òÂÇ®ÂºïÊìé","date":"2024-04-01T08:39:34.000Z","cover":"/img/cover_02.png","top_img":"https://bu.dusays.com/2022/08/17/62fbc3487f6e9.jpg","_content":"\n![image-20220713231227788](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335455.png)\n\n# 1. Êü•ÁúãÂ≠òÂÇ®ÂºïÊìé\n\nÊü•ÁúãmysqlÊèê‰æõ‰ªÄ‰πàÂ≠òÂÇ®ÂºïÊìé:\n\n```sql\nshow engines;\n```\n\n![image-20220713223052510](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335257.png)\n\n# 2. ËÆæÁΩÆÁ≥ªÁªüÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé\n\n- Êü•ÁúãÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé:\n\n  ```mysql\n  show variables like '%storage_engine%'; \n  #Êàñ\n  SELECT @@default_storage_engine;\n  ```\n\n  \n\n  ![image-20220713223312035](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335167.png)\n\n- ‰øÆÊîπÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé\n\n  Â¶ÇÊûúÂú®ÂàõÂª∫Ë°®ÁöÑËØ≠Âè•‰∏≠Ê≤°ÊúâÊòæÂºèÊåáÂÆöË°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÁöÑËØùÔºåÈÇ£Â∞±‰ºöÈªòËÆ§‰ΩøÁî® `InnoDB` ‰Ωú‰∏∫Ë°®ÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇ Â¶ÇÊûúÊàë‰ª¨ÊÉ≥ÊîπÂèòË°®ÁöÑÈªòËÆ§Â≠òÂÇ®ÂºïÊìéÁöÑËØùÔºåÂèØ‰ª•ËøôÊ†∑ÂÜôÂêØÂä®ÊúçÂä°Âô®ÁöÑÂëΩ‰ª§Ë°å:\n\n  ```mysql\n  SET DEFAULT_STORAGE_ENGINE=MyISAM;\n  ```\n\n  ÊàñËÄÖ‰øÆÊîπ `my.cnf` Êñá‰ª∂:\n\n  ```mysql\n  default-storage-engine=MyISAM\n  # ÈáçÂêØÊúçÂä°\n  systemctl restart mysqld.service\n  ```\n\n\n# 3. ËÆæÁΩÆË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\n\nÂ≠òÂÇ®ÂºïÊìéÊòØË¥üË¥£ÂØπË°®‰∏≠ÁöÑÊï∞ÊçÆËøõË°åÊèêÂèñÂíåÂÜôÂÖ•Â∑•‰ΩúÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•‰∏∫ `‰∏çÂêåÁöÑË°®ËÆæÁΩÆ‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìé` Ôºå‰πüÂ∞±ÊòØËØ¥‰∏çÂêåÁöÑË°®ÂèØ‰ª•Êúâ‰∏çÂêåÁöÑÁâ©ÁêÜÂ≠òÂÇ®ÁªìÊûÑÔºå‰∏çÂêåÁöÑÊèêÂèñÂíåÂÜôÂÖ•ÊñπÂºè„ÄÇ\n\n## 3.1 ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÂ≠òÂÇ®ÂºïÊìé\n\nÊàë‰ª¨‰πãÂâçÂàõÂª∫Ë°®ÁöÑËØ≠Âè•ÈÉΩÊ≤°ÊúâÊåáÂÆöË°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºåÈÇ£Â∞±‰ºö‰ΩøÁî®ÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé `InnoDB` „ÄÇÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥ÊòæÂºèÁöÑÊåáÂÆö‰∏Ä‰∏ãË°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºåÈÇ£ÂèØ‰ª•Ëøô‰πàÂÜôÔºö\n\n```mysql\nCREATE TABLE Ë°®Âêç( \n  Âª∫Ë°®ËØ≠Âè•;\n) ENGINE = Â≠òÂÇ®ÂºïÊìéÂêçÁß∞;\n```\n\n## 3.2 ‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\n\nÂ¶ÇÊûúË°®Â∑≤ÁªèÂª∫Â•Ω‰∫ÜÔºåÊàë‰ª¨‰πüÂèØ‰ª•‰ΩøÁî®‰∏ãËæπËøô‰∏™ËØ≠Âè•Êù•‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé:\n\n```mysql\nALTER TABLE Ë°®Âêç ENGINE = Â≠òÂÇ®ÂºïÊìéÂêçÁß∞; \n```\n\nÊØîÂ¶ÇÊàë‰ª¨‰øÆÊîπ‰∏Ä‰∏ã `engine_demo_table` Ë°®ÁöÑÂ≠òÂÇ®ÂºïÊìé:\n\n```mysql\nmysql> ALTER TABLE engine_demo_table ENGINE = InnoDB;\nQuery OK, 0 rows affected (0.05 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n```\n\nËøôÊó∂Êàë‰ª¨ÂÜçÊü•Áúã‰∏Ä‰∏ã `engine_demo_table` ÁöÑË°®ÁªìÊûÑ:\n\n```sql\nmysql> SHOW CREATE TABLE engine_demo_table\\G\n*************************** 1. row ***************************\nTable: engine_demo_table\nCreate Table: CREATE TABLE `engine_demo_table` (\n  `i` int(11) DEFAULT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8\n1 row in set (0.01 sec)\n```\n\nÂèØ‰ª•ÁúãÂà∞ËØ•Ë°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÂ∑≤ÁªèÊîπ‰∏∫`InnoDB`‰∫Ü„ÄÇ\n\n# 4. ÂºïÊìé‰ªãÁªç\n\n## 4.1 InnoDB ÂºïÊìéÔºöÂÖ∑Â§á==Â§ñÈîÆ==ÊîØÊåÅÂäüËÉΩÁöÑ‰∫ãÂä°Â≠òÂÇ®ÂºïÊìé\n\n- MySQL ‰ªé 3.23.34a ÂºÄÂßãÂ∞±ÂåÖÂê´ InnoDB Â≠òÂÇ®ÂºïÊìé„ÄÇ`Â§ß‰∫éÁ≠â‰∫é 5.5 ‰πãÂêéÔºåÈªòËÆ§ÈááÁî® InnoDB ÂºïÊìé` \n- InnoDB ÊòØ MySQL ÁöÑ ==ÈªòËÆ§‰∫ãÂä°ÂûãÂºïÊìé== ÔºåÂÆÉË¢´ËÆæËÆ°Áî®Êù•Â§ÑÁêÜÂ§ßÈáèÁöÑÁü≠ÊúüÔºàshort-livedÔºâ‰∫ãÂä°„ÄÇÂèØ‰ª•Á°Æ‰øù‰∫ãÂä°ÁöÑÂÆåÊï¥Êèê‰∫§ÔºàCommitÔºâÂíåÂõûÊªöÔºàRollbackÔºâ„ÄÇ\n- ==Èô§‰∫ÜÂ¢ûÂä†ÂíåÊü•ËØ¢Â§ñÔºåËøòÈúÄË¶ÅÊõ¥Êñ∞„ÄÅÂà†Èô§Êìç‰Ωú==ÔºåÈÇ£‰πàÔºåÂ∫î‰ºòÂÖàÈÄâÊã© InnoDB Â≠òÂÇ®ÂºïÊìé„ÄÇ\n- **Èô§ÈùûÊúâÈùûÂ∏∏ÁâπÂà´ÁöÑÂéüÂõ†ÈúÄË¶Å‰ΩøÁî®ÂÖ∂‰ªñÁöÑÂ≠òÂÇ®ÂºïÊìéÔºåÂê¶ÂàôÂ∫îËØ•‰ºòÂÖàËÄÉËôëInnoDBÂºïÊìé**„ÄÇ Êï∞ÊçÆÊñá‰ª∂ÁªìÊûÑÔºö\n- `Ë°®Âêç.frm` Â≠òÂÇ®Ë°®ÁªìÊûÑÔºàMySQL8.0Êó∂ÔºåÂêàÂπ∂Âú®Ë°®Âêç.ibd‰∏≠Ôºâ\n- `Ë°®Âêç.ibd` Â≠òÂÇ®Êï∞ÊçÆÂíåÁ¥¢Âºï\n- ==InnoDBÊòØ ‰∏∫Â§ÑÁêÜÂ∑®Â§ßÊï∞ÊçÆÈáèÁöÑÊúÄÂ§ßÊÄßËÉΩËÆæËÆ°==„ÄÇ\n  - Âú®‰ª•ÂâçÁöÑÁâàÊú¨‰∏≠ÔºåÂ≠óÂÖ∏Êï∞ÊçÆ‰ª•ÂÖÉÊï∞ÊçÆÊñá‰ª∂„ÄÅÈùû‰∫ãÂä°Ë°®Á≠âÊù•Â≠òÂÇ®„ÄÇÁé∞Âú®Ëøô‰∫õÂÖÉÊï∞ÊçÆÊñá‰ª∂Ë¢´Âà†Èô§‰∫Ü„ÄÇÊØîÂ¶ÇÔºö`.frm` Ôºå `.par` Ôºå `.trn` Ôºå `.isl` Ôºå Á≠âÈÉΩÂú® MySQL 8.0 ‰∏≠‰∏çÂ≠òÂú®‰∫Ü„ÄÇ\n- ÂØπÊØî MyISAM ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºå`InnoDBÂÜôÁöÑÂ§ÑÁêÜÊïàÁéáÂ∑Æ‰∏Ä‰∫õ` ÔºåÂπ∂‰∏î‰ºöÂç†Áî®Êõ¥Â§öÁöÑÁ£ÅÁõòÁ©∫Èó¥‰ª•‰øùÂ≠òÊï∞ÊçÆÂíåÁ¥¢Âºï„ÄÇ\n- MyISAM Âè™ÁºìÂ≠òÁ¥¢ÂºïÔºå‰∏çÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆÔºõInnoDB‰∏ç‰ªÖÁºìÂ≠òÁ¥¢ÂºïËøòË¶ÅÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆ(Âä†ËΩΩÊï∞ÊçÆÊó∂Ôºå‰πüË¶ÅÂä†ËΩΩÁ¥¢Âºï)Ôºå`ÂØπÂÜÖÂ≠òË¶ÅÊ±ÇËæÉÈ´ò` ÔºåËÄå‰∏îÂÜÖÂ≠òÂ§ßÂ∞èÂØπÊÄßËÉΩÊúâÂÜ≥ÂÆöÊÄßÁöÑÂΩ±Âìç„ÄÇ\n\n## 4.2 MyISAM ÂºïÊìéÔºö‰∏ªË¶ÅÁöÑÈùû‰∫ãÂä°Â§ÑÁêÜÂ≠òÂÇ®ÂºïÊìé\n\n- MyISAM Êèê‰æõ‰∫ÜÂ§ßÈáèÁöÑÁâπÊÄßÔºåÂåÖÊã¨ÂÖ®ÊñáÁ¥¢Âºï„ÄÅÂéãÁº©„ÄÅÁ©∫Èó¥ÂáΩÊï∞ÔºàGISÔºâÁ≠âÔºå‰ΩÜ MyISAM `‰∏çÊîØÊåÅ‰∫ãÂä°„ÄÅË°åÁ∫ßÈîÅ„ÄÅÂ§ñÈîÆ`ÔºåÊúâ‰∏Ä‰∏™ÊØ´Êó†ÁñëÈóÆÁöÑÁº∫Èô∑Â∞±ÊòØ `Â¥©Ê∫ÉÂêéÊó†Ê≥ïÂÆâÂÖ®ÊÅ¢Â§ç`„ÄÇ\n- `5.5 ‰πãÂâçÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé`\n- ‰ºòÂäøÊòØËÆøÈóÆÁöÑ `ÈÄüÂ∫¶Âø´` ÔºåÂØπ‰∫ãÂä°ÂÆåÊï¥ÊÄßÊ≤°ÊúâË¶ÅÊ±ÇÊàñËÄÖ‰ª• SELECT„ÄÅINSERT ‰∏∫‰∏ªÁöÑÂ∫îÁî®\n- ÈíàÂØπÊï∞ÊçÆÁªüËÆ°ÊúâÈ¢ùÂ§ñÁöÑÂ∏∏Êï∞Â≠òÂÇ®„ÄÇÊïÖËÄå`count(*)` ÁöÑÊü•ËØ¢ÊïàÁéáÂæàÈ´ò\n- Êï∞ÊçÆÊñá‰ª∂ÁªìÊûÑ\n  - `Ë°®Âêç.frm` Â≠òÂÇ®Ë°®ÁªìÊûÑ\n  - `Ë°®Âêç.MYD` Â≠òÂÇ®Êï∞ÊçÆÔºàMYDataÔºâ\n  - `Ë°®Âêç.MYI` Â≠òÂÇ®Á¥¢ÂºïÔºàMYIndexÔºâ\n- Â∫îÁî®Âú∫ÊôØ:Âè™ËØªÂ∫îÁî®ÊàñËÄÖ‰ª•ËØª‰∏∫‰∏ªÁöÑ‰∏öÂä°\n\n## 4.3 Archive ÂºïÊìéÔºöÁî®‰∫éÊï∞ÊçÆÂ≠òÊ°£\n\n![image-20220713231445827](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335661.png)\n\n‰∏ãË°®Â±ïÁ§∫‰∫Ü ARCHIVE Â≠òÂÇ®ÂºïÊìéÂäüËÉΩÔºö\n\n| ÁâπÂæÅ                                                  | ÊîØÊåÅ         |\n| :---------------------------------------------------- | :----------- |\n| BÊ†ëÁ¥¢Âºï                                               | ‰∏çÊîØÊåÅ       |\n| `Â§á‰ªΩ/Êó∂Èó¥ÁÇπÊÅ¢Â§ç`(Âú®ÊúçÂä°Âô®‰∏≠ÂÆûÁé∞ÔºåËÄå‰∏çÊòØÂú®Â≠òÂÇ®ÂºïÊìé‰∏≠) | ÊîØÊåÅ         |\n| ÈõÜÁæ§Êï∞ÊçÆÂ∫ìÊîØÊåÅ                                        | ‰∏çÊîØÊåÅ       |\n| ËÅöÈõÜÁ¥¢Âºï                                              | ‰∏çÊîØÊåÅ       |\n| ÂéãÁº©Êï∞ÊçÆ                                              | ÊîØÊåÅ         |\n| Êï∞ÊçÆÁºìÂ≠ò                                              | ‰∏çÊîØÊåÅ       |\n| Âä†ÂØÜÊï∞ÊçÆ(Âä†ÂØÜÂäüËÉΩÂú®ÊúçÂä°Âô®‰∏≠ÂÆûÁé∞)                      | ÊîØÊåÅ         |\n| Â§ñÈîÆÊîØÊåÅ                                              | ‰∏çÊîØÊåÅ       |\n| ÂÖ®ÊñáÊ£ÄÁ¥¢Á¥¢Âºï                                          | ‰∏çÊîØÊåÅ       |\n| Âú∞ÁêÜÁ©∫Èó¥Êï∞ÊçÆÁ±ªÂûãÊîØÊåÅ                                  | ÊîØÊåÅ         |\n| Âú∞ÁêÜÁ©∫Èó¥Á¥¢ÂºïÊîØÊåÅ                                      | ‰∏çÊîØÊåÅ       |\n| ÂìàÂ∏åÁ¥¢Âºï                                              | ‰∏çÊîØÊåÅ       |\n| Á¥¢ÂºïÁºìÂ≠ò                                              | ‰∏çÊîØÊåÅ       |\n| `ÈîÅÁ≤íÂ∫¶`                                              | Ë°åÈîÅ         |\n| MVCC                                                  | ‰∏çÊîØÊåÅ       |\n| Â≠òÂÇ®ÈôêÂà∂                                              | Ê≤°Êúâ‰ªª‰ΩïÈôêÂà∂ |\n| ‰∫§Êòì                                                  | ‰∏çÊîØÊåÅ       |\n| Êõ¥Êñ∞Êï∞ÊçÆÂ≠óÂÖ∏ÁöÑÁªüËÆ°‰ø°ÊÅØ                                | ÊîØÊåÅ         |\n\n## 4.4 Blackhole ÂºïÊìéÔºö‰∏¢ÂºÉÂÜôÊìç‰ΩúÔºåËØªÊìç‰Ωú‰ºöËøîÂõûÁ©∫ÂÜÖÂÆπ\n\n![image-20220713231926786](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335029.png)\n\n## 4.5 CSV ÂºïÊìéÔºöÂ≠òÂÇ®Êï∞ÊçÆÊó∂Ôºå‰ª•ÈÄóÂè∑ÂàÜÈöîÂêÑ‰∏™Êï∞ÊçÆÈ°π\n\n![image-20220713232053842](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335774.png)\n\n‰ΩøÁî®Ê°à‰æãÂ¶Ç‰∏ã\n\n```sql\nmysql> CREATE TABLE test (i INT NOT NULL, c CHAR(10) NOT NULL) ENGINE = CSV;\nQuery OK, 0 rows affected (0.06 sec)\n\nmysql> INSERT INTO test VALUES(1,'record one'),(2,'record two');\nQuery OK, 2 rows affected (0.05 sec)\nRecords: 2  Duplicates: 0  Warnings: 0\n\nmysql> SELECT * FROM test; \n+---+------------+\n|i  |c           | \n+---+------------+\n| 1 | record one |\n| 2 | record two |\n+---+------------+\n2 rows in set (0.00 sec)\n```\n\n\n\nÂàõÂª∫ CSV Ë°®Ëøò‰ºöÂàõÂª∫Áõ∏Â∫îÁöÑ `ÂÖÉÊñá‰ª∂` ÔºåÁî®‰∫é `Â≠òÂÇ®Ë°®ÁöÑÁä∂ÊÄÅ` Âíå `Ë°®‰∏≠Â≠òÂú®ÁöÑË°åÊï∞` „ÄÇÊ≠§Êñá‰ª∂ÁöÑÂêçÁß∞‰∏éË°®ÁöÑÂêçÁß∞Áõ∏ ÂêåÔºåÂêéÁºÄ‰∏∫ `CSM`„ÄÇÂ¶ÇÂõæÊâÄÁ§∫\n\n![image-20220713232615402](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335054.png)\n\n\n\nÂ¶ÇÊûúÊ£ÄÊü• `test.CSV` ÈÄöËøáÊâßË°å‰∏äËø∞ËØ≠Âè•ÂàõÂª∫ÁöÑÊï∞ÊçÆÂ∫ìÁõÆÂΩï‰∏≠ÁöÑÊñá‰ª∂ÔºåÂÖ∂ÂÜÖÂÆπ‰ΩøÁî®Notepad++ÊâìÂºÄÂ¶Ç‰∏ã:\n\n```sql\n\"1\",\"record one\"\n\"2\",\"record two\"\n```\n\n\n\nËøôÁßçÊ†ºÂºèÂèØ‰ª•Ë¢´ Microsoft Excel Á≠âÁîµÂ≠êË°®Ê†ºÂ∫îÁî®Á®ãÂ∫èËØªÂèñÔºåÁîöËá≥ÂÜôÂÖ•„ÄÇ‰ΩøÁî® Microsoft Excel ÊâìÂºÄÂ¶ÇÂõæÊâÄÁ§∫Ôºö\n\n![image-20220713232637071](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335502.png)\n\n## 4.6 Memory ÂºïÊìéÔºöÁΩÆ‰∫éÂÜÖÂ≠òÁöÑË°®\n\n**Ê¶ÇËø∞:**\n\nMemory ÈááÁî®ÁöÑÈÄªËæë‰ªãË¥®ÊòØ `ÂÜÖÂ≠ò Ôºå ÂìçÂ∫îÈÄüÂ∫¶ÂæàÂø´` Ôºå‰ΩÜÊòØÂΩìmysqldÂÆàÊä§ËøõÁ®ãÂ¥©Ê∫ÉÁöÑÊó∂ÂÄô `Êï∞ÊçÆ‰ºö‰∏¢Â§±` „ÄÇÂè¶ Â§ñÔºåË¶ÅÊ±ÇÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÊòØÊï∞ÊçÆÈïøÂ∫¶‰∏çÂèòÁöÑÊ†ºÂºèÔºåÊØîÂ¶ÇÔºåBlob Âíå Text Á±ªÂûãÁöÑÊï∞ÊçÆ‰∏çÂèØÁî®„ÄÇ\n\n**‰∏ªË¶ÅÁâπÂæÅ:**\n\n- Memory ÂêåÊó∂ `ÊîØÊåÅÂìàÂ∏åÔºàHASHÔºâÁ¥¢Âºï`Âíå `B+Ê†ëÁ¥¢Âºï` „ÄÇ\n- Memory Ë°®Ëá≥Â∞ëÊØî MyISAMË°® Ë¶Å `Âø´‰∏Ä‰∏™Êï∞ÈáèÁ∫ß`„ÄÇ\n- MEMORY `Ë°®ÁöÑÂ§ßÂ∞èÊòØÂèóÈôêÂà∂`ÁöÑ„ÄÇË°®ÁöÑÂ§ßÂ∞è‰∏ªË¶ÅÂèñÂÜ≥‰∫é‰∏§‰∏™ÂèÇÊï∞ÔºåÂàÜÂà´ÊòØ `max_rows` Âíå`max_heap_table_size`„ÄÇÂÖ∂‰∏≠Ôºåmax_rowsÂèØ‰ª•Âú®ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÔºõmax_heap_table_size ÁöÑÂ§ßÂ∞èÈªòËÆ§‰∏∫ 16 MBÔºåÂèØ‰ª•ÊåâÈúÄË¶ÅËøõË°åÊâ©Â§ß„ÄÇ\n- Êï∞ÊçÆÊñá‰ª∂‰∏éÁ¥¢ÂºïÊñá‰ª∂ÂàÜÂºÄÂ≠òÂÇ®„ÄÇ\n- Áº∫ÁÇπÔºöÂÖ∂Êï∞ÊçÆÊòì‰∏¢Â§±ÔºåÁîüÂëΩÂë®ÊúüÁü≠„ÄÇÂü∫‰∫éËøô‰∏™Áº∫Èô∑ÔºåÈÄâÊã© MEMORY Â≠òÂÇ®ÂºïÊìéÊó∂ÈúÄË¶ÅÁâπÂà´Â∞èÂøÉ„ÄÇ\n\n**‰ΩøÁî®MemoryÂ≠òÂÇ®ÂºïÊìéÁöÑÂú∫ÊôØ:**\n\n1. `ÁõÆÊ†áÊï∞ÊçÆÊØîËæÉÂ∞è`ÔºåËÄå‰∏îÈùûÂ∏∏ `È¢ëÁπÅÁöÑËøõË°åËÆøÈóÆ`ÔºåÂú®ÂÜÖÂ≠ò‰∏≠Â≠òÊîæÊï∞ÊçÆÔºåÂ¶ÇÊûúÂ§™Â§ßÁöÑÊï∞ÊçÆ‰ºöÈÄ†Êàê `ÂÜÖÂ≠òÊ∫¢Âá∫` „ÄÇÂèØ‰ª•ÈÄöËøáÂèÇÊï∞ `max_heap_table_size` ÊéßÂà∂ Memory Ë°®ÁöÑÂ§ßÂ∞èÔºåÈôêÂà∂ Memory Ë°®ÁöÑÊúÄÂ§ßÁöÑÂ§ßÂ∞è„ÄÇ\n2. Â¶ÇÊûú `Êï∞ÊçÆÊòØ‰∏¥Êó∂ÁöÑ` ÔºåËÄå‰∏î `ÂøÖÈ°ªÁ´ãÂç≥ÂèØÁî®` ÂæóÂà∞ÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•ÊîæÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇ\n3. Â≠òÂÇ®Âú® Memory Ë°®‰∏≠ÁöÑÊï∞ÊçÆÂ¶ÇÊûúÁ™ÅÁÑ∂Èó¥ `‰∏¢Â§±ÁöÑËØù‰πüÊ≤°ÊúâÂ§™Â§ßÁöÑÂÖ≥Á≥ª`„ÄÇ\n\n## 4.7 Federated ÂºïÊìéÔºöËÆøÈóÆËøúÁ®ãË°®\n\nFederated ÂºïÊìéÊòØËÆøÈóÆÂÖ∂‰ªñMySQLÊúçÂä°Âô®ÁöÑ‰∏Ä‰∏™ ‰ª£ÁêÜ ÔºåÂ∞ΩÁÆ°ËØ•ÂºïÊìéÁúãËµ∑Êù•Êèê‰æõ‰∫Ü‰∏ÄÁßçÂæàÂ•ΩÁöÑË∑®ÊúçÂä°Âô®ÁöÑÁÅµÊ¥ªÊÄß Ôºå‰ΩÜ‰πüÁªèÂ∏∏Â∏¶Êù•ÈóÆÈ¢òÔºåÂõ†Ê≠§ÈªòËÆ§ÊòØÁ¶ÅÁî®ÁöÑ „ÄÇ\n\n## 4.8 Merge ÂºïÊìéÔºöÁÆ°ÁêÜÂ§ö‰∏™MyISAMË°®ÊûÑÊàêÁöÑË°®ÈõÜÂêà\n\n## 4.9 NDBÂºïÊìéÔºöMySQLÈõÜÁæ§‰∏ìÁî®Â≠òÂÇ®ÂºïÊìé\n\n‰πüÂè´ÂÅö NDB Cluster Â≠òÂÇ®ÂºïÊìéÔºå‰∏ªË¶ÅÁî®‰∫é `MySQL Cluster ÂàÜÂ∏ÉÂºèÈõÜÁæ§` ÁéØÂ¢É„ÄÇ\n\n## 4.10 ÂºïÊìéÂØπÊØî\n\nMySQL‰∏≠Âêå‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÔºå‰∏çÂêåÁöÑË°®ÂèØ‰ª•ÈÄâÊã©‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇÂ¶Ç‰∏ãË°®ÂØπÂ∏∏Áî®Â≠òÂÇ®ÂºïÊìéÂÅöÂá∫‰∫ÜÂØπÊØî„ÄÇ\n\n| ÁâπÁÇπ           | MyISAM                                                    | InnoDB                                                       | MEMORY | MERGE | NDB  |\n| :------------- | :-------------------------------------------------------- | :----------------------------------------------------------- | :----- | :---- | :--- |\n| Â≠òÂÇ®ÈôêÂà∂       | Êúâ                                                        | 64TB                                                         | Êúâ     | Ê≤°Êúâ  | Êúâ   |\n| `‰∫ãÂä°ÂÆâÂÖ®ÊÄß`   |                                                           | ÊîØÊåÅ                                                         |        |       |      |\n| `ÈîÅÊú∫Âà∂`       | Ë°®ÈîÅÔºåÂç≥‰ΩøÊìç‰Ωú‰∏ÄÊù° ËÆ∞ÂΩï‰πü‰ºöÈîÅ‰ΩèÊï¥‰∏™Ë°®Ôºå‰∏çÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú | Ë°åÈîÅÔºåÊìç‰ΩúÊó∂Âè™ÈîÅÊüê‰∏ÄË°åÔºå‰∏çÂØπÂÖ∂ÂÆÉË°åÊúâÂΩ±ÂìçÔºåÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú   | Ë°®ÈîÅ   | Ë°®ÈîÅ  | Ë°åÈîÅ |\n| BÊ†ëÁ¥¢Âºï        | ÊîØÊåÅ                                                      | ÊîØÊåÅ                                                         | ÊîØÊåÅ   | ÊîØÊåÅ  | ÊîØÊåÅ |\n| ÂìàÂ∏åÁ¥¢Âºï       |                                                           |                                                              | ÊîØÊåÅ   |       | ÊîØÊåÅ |\n| ÂÖ®ÊñáÁ¥¢Âºï       | ÊîØÊåÅ                                                      |                                                              |        |       |      |\n| ÈõÜÁæ§Á¥¢Âºï       |                                                           | ÊîØÊåÅ                                                         |        |       |      |\n| Êï∞ÊçÆÁºìÂ≠ò       |                                                           | ÊîØÊåÅ                                                         | ÊîØÊåÅ   |       |      |\n| `Á¥¢ÂºïÁºìÂ≠ò`     | Âè™ÁºìÂ≠òÁ¥¢ÂºïÔºå‰∏çÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆ                                | ‰∏ç‰ªÖÁºìÂ≠òÁ¥¢ÂºïËøòË¶ÅÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆÔºåÂØπÂÜÖÂ≠òË¶ÅÊ±ÇËæÉÈ´òÔºåËÄå‰∏îÂÜÖÂ≠òÂ§ßÂ∞èÂØπÊÄßËÉΩÊúâÂÜ≥ÂÆöÊÄßÁöÑÂΩ±Âìç | ÊîØÊåÅ   | ÊîØÊåÅ  | ÊîØÊåÅ |\n| Êï∞ÊçÆÂèØÂéãÁº©     | ÊîØÊåÅ                                                      |                                                              |        |       |      |\n| Á©∫Èó¥‰ΩøÁî®       | ‰Ωé                                                        | È´ò                                                           | N/A    | ‰Ωé    | ‰Ωé   |\n| ÂÜÖÂ≠ò‰ΩøÁî®       | ‰Ωé                                                        | È´ò                                                           | ‰∏≠Á≠â   | ‰Ωé    | È´ò   |\n| ÊâπÈáèÊèíÂÖ•ÁöÑÈÄüÂ∫¶ | È´ò                                                        | ‰Ωé                                                           | È´ò     | È´ò    | È´ò   |\n| `ÊîØÊåÅÂ§ñÈîÆ`     |                                                           | ÊîØÊåÅ                                                         |        |       |      |\n\n# 5. MyISAM Âíå InnoDB\n\n![image-20220713230507218](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132336896.png)\n\n|     ÂØπÊØîÈ°π     |                          MyISAM                          |                            InnoDB                            |\n| :------------: | :------------------------------------------------------: | :----------------------------------------------------------: |\n|      Â§ñÈîÆ      |                          ‰∏çÊîØÊåÅ                          |                             ÊîØÊåÅ                             |\n|      ‰∫ãÂä°      |                          ‰∏çÊîØÊåÅ                          |                             ÊîØÊåÅ                             |\n|     Ë°åË°®ÈîÅ     | Ë°®ÈîÅÔºåÂç≥‰ΩøÊìç‰Ωú‰∏ÄÊù°ËÆ∞ÂΩï‰πü‰ºöÈîÅ‰ΩèÊï¥‰∏™Ë°®Ôºå‰∏çÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú |  Ë°åÈîÅÔºåÊìç‰ΩúÊó∂Âè™ÈîÅÊüê‰∏ÄË°åÔºå‰∏çÂØπÂÖ∂ÂÆÉË°åÊúâÂΩ±ÂìçÔºåÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú  |\n|      ÁºìÂ≠ò      |                Âè™ÁºìÂ≠òÁ¥¢ÂºïÔºå‰∏çÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆ                | ‰∏ç‰ªÖÁºìÂ≠òÁ¥¢ÂºïËøòË¶ÅÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆÔºåÂØπÂÜÖÂ≠òË¶ÅÊ±ÇËæÉÈ´òÔºåËÄå‰∏îÂÜÖÂ≠òÂ§ßÂ∞èÂØπÊÄßËÉΩÊúâÂÜ≥ÂÆöÊÄßÁöÑÂΩ±Âìç |\n| Ëá™Â∏¶Á≥ªÁªüË°®‰ΩøÁî® |                            Y                             |                              N                               |\n|     ÂÖ≥Ê≥®ÁÇπ     |             ÊÄßËÉΩÔºöËäÇÁúÅËµÑÊ∫ê„ÄÅÊ∂àËÄóÂ∞ë„ÄÅÁÆÄÂçï‰∏öÂä°             |                 ‰∫ãÂä°ÔºöÂπ∂ÂèëÂÜô„ÄÅ‰∫ãÂä°„ÄÅÊõ¥Â§ßËµÑÊ∫ê                 |\n|    ÈªòËÆ§ÂÆâË£Ö    |                            Y                             |                              Y                               |\n|    ÈªòËÆ§‰ΩøÁî®    |                            N                             |                              Y                               |\n\n# 6. ÈòøÈáåÂ∑¥Â∑¥„ÄÅÊ∑òÂÆùÁî®Âì™‰∏™\n\n\n\n![image-20220713230922017](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132336908.png)\n\n- **Percona** ‰∏∫ MySQL Êï∞ÊçÆÂ∫ìÊúçÂä°Âô®ËøõË°å‰∫ÜÊîπËøõÔºåÂú®ÂäüËÉΩÂíåÊÄßËÉΩ‰∏äËæÉ MySQL ÊúâÂæàÊòæËëóÁöÑÊèêÂçá„ÄÇ\n- ËØ•ÁâàÊú¨ÊèêÂçá‰∫ÜÂú®È´òË¥üËΩΩÊÉÖÂÜµ‰∏ãÁöÑ InnoDB ÁöÑÊÄßËÉΩ„ÄÅ‰∏∫ DBA Êèê‰æõ‰∏Ä‰∫õÈùûÂ∏∏ÊúâÁî®ÁöÑÊÄßËÉΩËØäÊñ≠Â∑•ÂÖ∑ÔºõÂè¶Â§ñÊúâÊõ¥Â§öÁöÑÂèÇÊï∞ÂíåÂëΩ‰ª§Êù•ÊéßÂà∂ÊúçÂä°Âô®Ë°å‰∏∫„ÄÇ\n- ËØ•ÂÖ¨Âè∏Êñ∞Âª∫‰∫Ü‰∏ÄÊ¨æÂ≠òÂÇ®ÂºïÊìéÂè´ `Xtradb` ÂÆåÂÖ®ÂèØ‰ª•Êõø‰ª£`Innodb` ÔºåÂπ∂‰∏îÂú®ÊÄßËÉΩÂíåÂπ∂Âèë‰∏äÂÅöÂæóÊõ¥Â•Ω\n- ÈòøÈáåÂ∑¥Â∑¥Â§ßÈÉ®ÂàÜ MySQL Êï∞ÊçÆÂ∫ìÂÖ∂ÂÆû‰ΩøÁî®ÁöÑ percona ÁöÑÂéüÂûãÂä†‰ª•‰øÆÊîπ„ÄÇ\n\n# 7. Ë°•ÂÖÖ:\n\n\n\n## 7.1 InnoDB Ë°®ÁöÑ‰ºòÂäø\n\nInnoDB Â≠òÂÇ®ÂºïÊìéÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠Êã•ÊúâËØ∏Â§ö‰ºòÂäøÔºåÊØîÂ¶ÇÊìç‰Ωú‰æøÂà©„ÄÅÊèêÈ´ò‰∫ÜÊï∞ÊçÆÂ∫ìÁöÑÊÄßËÉΩ„ÄÅÁª¥Êä§ÊàêÊú¨‰ΩéÁ≠â„ÄÇÂ¶ÇÊûúÁî±‰∫éÁ°¨‰ª∂ÊàñËΩØ‰ª∂ÁöÑÂéüÂõ†ÂØºËá¥ÊúçÂä°Âô®Â¥©Ê∫ÉÔºåÈÇ£‰πàÂú®ÈáçÂêØÊúçÂä°Âô®‰πãÂêé‰∏çÈúÄË¶ÅËøõË°åÈ¢ùÂ§ñÁöÑÊìç‰Ωú„ÄÇInnoDB Â¥©Ê∫ÉÊÅ¢Â§çÂäüËÉΩËá™Âä®Â∞Ü‰πãÂâçÊèê‰∫§ÁöÑÂÜÖÂÆπÂÆöÂûãÔºåÁÑ∂ÂêéÊí§ÈîÄÊ≤°ÊúâÊèê‰∫§ÁöÑËøõÁ®ãÔºåÈáçÂêØ‰πãÂêéÁªßÁª≠‰ªéÂ¥©Ê∫ÉÁÇπÂºÄÂßãÊâßË°å„ÄÇ\n\nInnoDB Â≠òÂÇ®ÂºïÊìéÂú®‰∏ªÂÜÖÂ≠ò‰∏≠Áª¥Êä§ÁºìÂÜ≤Ê±†ÔºåÈ´òÈ¢ëÁéá‰ΩøÁî®ÁöÑÊï∞ÊçÆÂ∞ÜÂú®ÂÜÖÂ≠ò‰∏≠Áõ¥Êé•Ë¢´Â§ÑÁêÜ„ÄÇËøôÁßçÁºìÂ≠òÊñπÂºèÂ∫îÁî®‰∫éÂ§öÁßç‰ø°ÊÅØÔºåÂä†ÈÄü‰∫ÜÂ§ÑÁêÜËøõÁ®ã„ÄÇ\n\nÂú®‰∏ìÁî®ÊúçÂä°Âô®‰∏äÔºåÁâ©ÁêÜÂÜÖÂ≠ò‰∏≠È´òËææ 80% ÁöÑÈÉ®ÂàÜË¢´Â∫îÁî®‰∫éÁºìÂÜ≤Ê±†„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÊèíÂÖ•‰∏çÂêåÁöÑË°®‰∏≠ÔºåÂèØ‰ª•ËÆæÁΩÆÂ§ñÈîÆÂä†Âº∫Êï∞ÊçÆÁöÑÂÆåÊï¥ÊÄß„ÄÇÊõ¥Êñ∞ÊàñËÄÖÂà†Èô§Êï∞ÊçÆÔºåÂÖ≥ËÅîÊï∞ÊçÆÂ∞Ü‰ºöË¢´Ëá™Âä®Êõ¥Êñ∞ÊàñÂà†Èô§„ÄÇÂ¶ÇÊûúËØïÂõæÂ∞ÜÊï∞ÊçÆÊèíÂÖ•‰ªéË°®Ôºå‰ΩÜÂú®‰∏ªË°®‰∏≠Ê≤°ÊúâÂØπÂ∫îÁöÑÊï∞ÊçÆÔºåÊèíÂÖ•ÁöÑÊï∞ÊçÆÂ∞ÜË¢´Ëá™Âä®ÁßªÈô§„ÄÇÂ¶ÇÊûúÁ£ÅÁõòÊàñÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂá∫Áé∞Â¥©Ê∫ÉÔºå Âú®‰ΩøÁî®ËÑèÊï∞ÊçÆ‰πãÂâçÔºåÊ†°È™åÂíåÊú∫Âà∂‰ºöÂèëÂá∫Ë≠¶Âëä„ÄÇÂΩìÊØè‰∏™Ë°®ÁöÑ‰∏ªÈîÆÈÉΩËÆæÁΩÆÂêàÁêÜÊó∂Ôºå‰∏éËøô‰∫õÂàóÊúâÂÖ≥ÁöÑÊìç‰Ωú‰ºöË¢´Ëá™Âä®‰ºòÂåñ„ÄÇÊèíÂÖ•„ÄÅÊõ¥Êñ∞ÂíåÂà†Èô§Êìç‰ΩúÈÄöËøáÂÅöÊîπÂèòÁºìÂÜ≤Ëá™Âä®Êú∫Âà∂ËøõË°å‰ºòÂåñ„ÄÇ`InnoDB ‰∏çÊîØÊåÅÂΩìÂâçËØªÂÜôÔºå‰πü‰ºöÁºìÂÜ≤ÊîπÂèòÁöÑÊï∞ÊçÆÂà∞Êï∞ÊçÆÊµÅÁ£ÅÁõò`.\n\nInnoDB ÁöÑÊÄßËÉΩ‰ºòÂäø‰∏çÂè™Â≠òÂú®‰∫éÈïøÊó∂ËøêË°åÊü•ËØ¢ÁöÑÂ§ßÂûãË°®„ÄÇÂú®Âêå‰∏ÄÂàóÂ§öÊ¨°Ë¢´Êü•ËØ¢Êó∂ÔºåËá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢Âºï‰ºöÊèêÈ´òÊü•ËØ¢ÁöÑÈÄüÂ∫¶„ÄÇ‰ΩøÁî® InnoDB ÂèØ‰ª•ÂéãÁº©Ë°®ÂíåÁõ∏ÂÖ≥ÁöÑÁ¥¢ÂºïÔºåÂèØ‰ª• `Âú®‰∏çÂΩ±ÂìçÊÄßËÉΩÂíåÂèØÁî®ÊÄßÁöÑÊÉÖÂÜµ‰∏ãÂàõÂª∫ÊàñÂà†Èô§Á¥¢Âºï`„ÄÇÂØπ‰∫éÂ§ßÂûãÊñáÊú¨Âíå BLOB Êï∞ÊçÆÔºå‰ΩøÁî®Âä®ÊÄÅË°åÂΩ¢ÂºèÔºåËøôÁßçÂ≠òÂÇ®Â∏ÉÂ±ÄÊõ¥È´òÊïà„ÄÇÈÄöËøáÊü•ËØ¢ INFORMATION_SCHEMA Â∫ì‰∏≠ÁöÑË°®ÂèØ‰ª•ÁõëÊéßÂ≠òÂÇ®ÂºïÊìéÁöÑÂÜÖÈÉ®Â∑•‰Ωú„ÄÇÂú®Âêå‰∏Ä‰∏™ËØ≠Âè•‰∏≠ÔºåInnoDB Ë°®ÂèØ‰ª•‰∏éÂÖ∂‰ªñÂ≠òÂÇ®ÂºïÊìéË°®Ê∑∑Áî®„ÄÇÂç≥‰ΩøÊúâ‰∫õÊìç‰ΩúÁ≥ªÁªüÈôêÂà∂Êñá‰ª∂Â§ßÂ∞è‰∏∫ 2GBÔºåInnoDB ‰ªçÁÑ∂ÂèØ‰ª•Â§ÑÁêÜ„ÄÇ`ÂΩìÂ§ÑÁêÜÂ§ßÊï∞ÊçÆÈáèÊó∂ÔºåInnoDB ÂÖºÈ°æ CPUÔºå‰ª•ËææÂà∞ÊúÄÂ§ßÊÄßËÉΩ`\n\n## 7.2 InnoDB Âíå ACID Ê®°Âûã\n\nACID Ê®°ÂûãÊòØ‰∏ÄÁ≥ªÂàóÊï∞ÊçÆÂ∫ìËÆæËÆ°ËßÑÂàôÔºåËøô‰∫õËßÑÂàôÁùÄÈáçÂº∫Ë∞ÉÂèØÈù†ÊÄßÔºåËÄåÂèØÈù†ÊÄßÂØπ‰∫éÂïÜ‰∏öÊï∞ÊçÆÂíå‰ªªÂä°ÂÖ≥ÈîÆÂûãÂ∫îÁî®ÈùûÂ∏∏ÈáçË¶Å„ÄÇMySQL ÂåÖÂê´Á±ª‰ºº InnoDB Â≠òÂÇ®ÂºïÊìéÁöÑÁªÑ‰ª∂Ôºå‰∏é ACID Ê®°ÂûãÁ¥ßÂØÜÁõ∏ËøûÔºåËøôÊ†∑Âá∫Áé∞ÊÑèÂ§ñÊó∂ÔºåÊï∞ÊçÆ‰∏ç‰ºöÂ¥©Ê∫ÉÔºåÁªìÊûú‰∏ç‰ºöÂ§±Áúü„ÄÇÂ¶ÇÊûú‰æùËµñ ACID Ê®°ÂûãÔºåÂèØ‰ª•‰∏ç‰ΩøÁî®‰∏ÄËá¥ÊÄßÊ£ÄÊü•ÂíåÂ¥©Ê∫ÉÊÅ¢Â§çÊú∫Âà∂„ÄÇÂ¶ÇÊûúÊã•ÊúâÈ¢ùÂ§ñÁöÑËΩØ‰ª∂‰øùÊä§ÔºåÊûÅÂèØÈù†ÁöÑÁ°¨‰ª∂ÊàñËÄÖÂ∫îÁî®ÂèØ‰ª•ÂÆπÂøç‰∏ÄÂ∞èÈÉ®ÂàÜÁöÑÊï∞ÊçÆ‰∏¢Â§±Âíå‰∏ç‰∏ÄËá¥ÔºåÂèØ‰ª•Â∞Ü MySQL ËÆæÁΩÆË∞ÉÊï¥‰∏∫Âè™‰æùËµñÈÉ®ÂàÜ ACID ÁâπÊÄßÔºå‰ª•ËææÂà∞Êõ¥È´òÁöÑÊÄßËÉΩ„ÄÇ‰∏ãÈù¢ËÆ≤Ëß£ InnoDB Â≠òÂÇ®ÂºïÊìé‰∏é ACID Ê®°ÂûãÁõ∏Âêå‰ΩúÁî®ÁöÑÂõõ‰∏™ÊñπÈù¢„ÄÇ\n\n1. **ÂéüÂ≠êÊñπÈù¢** ACID ÁöÑÂéüÂ≠êÊñπÈù¢‰∏ªË¶ÅÊ∂âÂèä InnoDB ‰∫ãÂä°Ôºå‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄß‰∏ªË¶ÅÂåÖÊã¨:\n   - Ëá™Âä®Êèê‰∫§ËÆæÁΩÆ„ÄÇ\n   - COMMIT ËØ≠Âè•„ÄÇ\n   - ROLLBACK ËØ≠Âè•„ÄÇ\n   - Êìç‰Ωú INFORMATION_SCHEMA Â∫ì‰∏≠ÁöÑË°®Êï∞ÊçÆ„ÄÇ\n2. **‰∏ÄËá¥ÊÄßÊñπÈù¢** ACID Ê®°ÂûãÁöÑ‰∏ÄËá¥ÊÄß‰∏ªË¶ÅÊ∂âÂèä‰øùÊä§Êï∞ÊçÆ‰∏çÂ¥©Ê∫ÉÁöÑÂÜÖÈÉ® InnoDB Â§ÑÁêÜËøáÁ®ãÔºå‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄß‰∏ªË¶ÅÂåÖÊã¨:\n   - InnoDB ÂèåÂÜôÁºìÂ≠ò„ÄÇ\n   - InnoDB Â¥©Ê∫ÉÊÅ¢Â§ç„ÄÇ\n3. **ÈöîÁ¶ªÊñπÈù¢** ÈöîÁ¶ªÊòØÂ∫îÁî®‰∫é‰∫ãÂä°ÁöÑÁ∫ßÂà´Ôºå‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄß‰∏ªË¶ÅÂåÖÊã¨:\n   - Ëá™Âä®Êèê‰∫§ËÆæÁΩÆ„ÄÇ\n   - SET ISOLATION LEVEL ËØ≠Âè•„ÄÇ\n   - InnoDB ÈîÅÁöÑ‰ΩéÁ∫ßÂà´‰ø°ÊÅØ„ÄÇ\n4. **ËÄê‰πÖÊÄßÊñπÈù¢** ACID Ê®°ÂûãÁöÑËÄê‰πÖÊÄß‰∏ªË¶ÅÊ∂âÂèä‰∏éÁ°¨‰ª∂ÈÖçÁΩÆÁõ∏‰∫íÂΩ±ÂìçÁöÑ MySQL ËΩØ‰ª∂ÁâπÊÄß„ÄÇÁî±‰∫éÁ°¨‰ª∂Â§çÊùÇÂ§öÊ†∑ÂåñÔºåËÄê‰πÖÊÄßÊñπÈù¢Ê≤°ÊúâÂÖ∑‰ΩìÁöÑËßÑÂàôÂèØÂæ™„ÄÇ‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄßÊúâ:\n   - InnoDB ÂèåÂÜôÁºìÂ≠òÔºåÈÄöËøá innodb_doublewrite ÈÖçÁΩÆÈ°πÈÖçÁΩÆ„ÄÇ\n   - ÈÖçÁΩÆÈ°π innodb_flush_log_at_trx_commit„ÄÇ\n   - ÈÖçÁΩÆÈ°π sync_binlog„ÄÇ\n   - ÈÖçÁΩÆÈ°π innodb_file_per_table„ÄÇ\n   - Â≠òÂÇ®ËÆæÂ§áÁöÑÂÜôÂÖ•ÁºìÂ≠ò„ÄÇ\n   - Â≠òÂÇ®ËÆæÂ§áÁöÑÂ§áÁî®ÁîµÊ±†ÁºìÂ≠ò„ÄÇ\n   - ËøêË°å MySQL ÁöÑÊìç‰ΩúÁ≥ªÁªü„ÄÇ\n   - ÊåÅÁª≠ÁöÑÁîµÂäõ‰æõÂ∫î„ÄÇ\n   - Â§á‰ªΩÁ≠ñÁï•„ÄÇ\n   - ÂØπÂàÜÂ∏ÉÂºèÊàñÊâòÁÆ°ÁöÑÂ∫îÁî®ÔºåÊúÄ‰∏ªË¶ÅÁöÑÂú®‰∫éÁ°¨‰ª∂ËÆæÂ§áÁöÑÂú∞ÁÇπ‰ª•ÂèäÁΩëÁªúÊÉÖÂÜµ„ÄÇ\n\n## 7.3 InnoDBÊû∂ÊûÑ\n\n1. **ÁºìÂÜ≤Ê±†** ÁºìÂÜ≤Ê±†ÊòØ‰∏ªÂÜÖÂ≠ò‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÁ©∫Èó¥ÔºåÁî®Êù•ÁºìÂ≠òÂ∑≤‰ΩøÁî®ÁöÑË°®ÂíåÁ¥¢ÂºïÊï∞ÊçÆ„ÄÇÁºìÂÜ≤Ê±†‰ΩøÂæóÁªèÂ∏∏Ë¢´‰ΩøÁî®ÁöÑÊï∞ÊçÆËÉΩÂ§üÁõ¥Êé•Âú®ÂÜÖÂ≠ò‰∏≠Ëé∑ÂæóÔºå‰ªéËÄåÊèêÈ´òÈÄüÂ∫¶„ÄÇ\n2. **Êõ¥ÊîπÁºìÂ≠ò** Êõ¥ÊîπÁºìÂ≠òÊòØ‰∏Ä‰∏™ÁâπÊÆäÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂΩìÂèóÂΩ±ÂìçÁöÑÁ¥¢ÂºïÈ°µ‰∏çÂú®ÁºìÂ≠ò‰∏≠Êó∂ÔºåÊõ¥ÊîπÁºìÂ≠ò‰ºöÁºìÂ≠òËæÖÂä©Á¥¢ÂºïÈ°µÁöÑÊõ¥Êîπ„ÄÇÁ¥¢ÂºïÈ°µË¢´ÂÖ∂‰ªñËØªÂèñÊìç‰ΩúÊó∂‰ºöÂä†ËΩΩÂà∞ÁºìÂ≠òÊ±†ÔºåÁºìÂ≠òÁöÑÊõ¥ÊîπÂÜÖÂÆπÂ∞±‰ºöË¢´ÂêàÂπ∂„ÄÇ‰∏çÂêå‰∫éÈõÜÁæ§Á¥¢ÂºïÔºåËæÖÂä©Á¥¢ÂºïÂπ∂ÈùûÁã¨‰∏ÄÊó†‰∫åÁöÑ„ÄÇÂΩìÁ≥ªÁªüÂ§ßÈÉ®ÂàÜÈó≤ÁΩÆÊó∂ÔºåÊ∏ÖÈô§Êìç‰Ωú‰ºöÂÆöÊúüËøêË°åÔºåÂ∞ÜÊõ¥Êñ∞ÁöÑÁ¥¢ÂºïÈ°µÂà∑ÂÖ•Á£Å Áõò„ÄÇÊõ¥Êñ∞ÁºìÂ≠òÂêàÂπ∂ÊúüÈó¥ÔºåÂèØËÉΩ‰ºöÂ§ßÂ§ßÈôç‰ΩéÊü•ËØ¢ÁöÑÊÄßËÉΩ„ÄÇÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊõ¥Êñ∞ÁºìÂ≠òÂç†Áî®‰∏ÄÈÉ®ÂàÜ InnoDB ÁºìÂÜ≤Ê±†„ÄÇ Âú®Á£ÅÁõò‰∏≠ÔºåÊõ¥Êñ∞ÁºìÂ≠òÊòØÁ≥ªÁªüË°®Á©∫Èó¥ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÊõ¥Êñ∞ÁºìÂ≠òÁöÑÊï∞ÊçÆÁ±ªÂûãÁî± innodb_change_buffering ÈÖçÁΩÆÈ°πÁÆ°ÁêÜ„ÄÇ\n3. **Ëá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢Âºï** Ëá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢ÂºïÂ∞ÜË¥üËΩΩÂíåË∂≥Â§üÁöÑÂÜÖÂ≠òÁªìÂêàËµ∑Êù•Ôºå‰ΩøÂæó InnoDB ÂÉèÂÜÖÂ≠òÊï∞ÊçÆÂ∫ì‰∏ÄÊ†∑ËøêË°åÔºå ‰∏çÈúÄË¶ÅÈôç‰Ωé‰∫ãÂä°‰∏äÁöÑÊÄßËÉΩÊàñÂèØÈù†ÊÄß„ÄÇËøô‰∏™ÁâπÊÄßÈÄöËøá innodb_adaptive_hash_index ÈÄâÈ°πÈÖçÁΩÆÔºåÊàñËÄÖÈÄöËøá `-- skip-innodb_adaptive_hash_index` ÂëΩ‰ª§Ë°åÂú®ÊúçÂä°ÂêØÂä®Êó∂ÂÖ≥Èó≠„ÄÇ\n4. **ÈáçÂÅöÊó•ÂøóÁºìÂ≠ò** ÈáçÂÅöÊó•ÂøóÁºìÂ≠òÂ≠òÊîæË¶ÅÊîæÂÖ•ÈáçÂÅöÊó•ÂøóÁöÑÊï∞ÊçÆ„ÄÇÈáçÂÅöÊó•ÂøóÁºìÂ≠òÂ§ßÂ∞èÈÄöËøá innodb_log_buffer_size ÈÖçÁΩÆÈ°πÈÖçÁΩÆ„ÄÇÈáçÂÅöÊó•ÂøóÁºìÂ≠ò‰ºöÂÆöÊúüÂú∞Â∞ÜÊó•ÂøóÊñá‰ª∂Âà∑ÂÖ•Á£ÅÁõò„ÄÇÂ§ßÂûãÁöÑÈáçÂÅöÊó•ÂøóÁºìÂ≠ò‰ΩøÂæóÂ§ßÂûã‰∫ãÂä°ËÉΩÂ§üÊ≠£Â∏∏ËøêË°åËÄå‰∏çÈúÄË¶ÅÂÜôÂÖ•Á£ÅÁõò„ÄÇ\n5. **Á≥ªÁªüË°®Á©∫Èó¥** Á≥ªÁªüË°®Á©∫Èó¥ÂåÖÊã¨ InnoDB Êï∞ÊçÆÂ≠óÂÖ∏„ÄÅÂèåÂÜôÁºìÂ≠ò„ÄÅÊõ¥Êñ∞ÁºìÂ≠òÂíåÊí§ÈîÄÊó•ÂøóÔºåÂêåÊó∂‰πüÂåÖÊã¨Ë°®ÂíåÁ¥¢ÂºïÊï∞ÊçÆ„ÄÇÂ§öË°®ÂÖ±‰∫´ÔºåÁ≥ªÁªüË°®Á©∫Èó¥Ë¢´ËßÜ‰∏∫ÂÖ±‰∫´Ë°®Á©∫Èó¥„ÄÇ\n6. **ÂèåÂÜôÁºìÂ≠ò** ÂèåÂÜôÁºìÂ≠ò‰Ωç‰∫éÁ≥ªÁªüË°®Á©∫Èó¥‰∏≠ÔºåÁî®‰∫éÂÜôÂÖ•‰ªéÁºìÂ≠òÊ±†Âà∑Êñ∞ÁöÑÊï∞ÊçÆÈ°µ„ÄÇÂè™ÊúâÂú®Âà∑Êñ∞Âπ∂ÂÜôÂÖ•ÂèåÂÜôÁºìÂ≠òÂêéÔºåInnoDB Êâç‰ºöÂ∞ÜÊï∞ÊçÆÈ°µÂÜôÂÖ•ÂêàÈÄÇÁöÑ‰ΩçÁΩÆ„ÄÇ\n7. **Êí§ÈîÄÊó•Âøó** Êí§ÈîÄÊó•ÂøóÊòØ‰∏ÄÁ≥ªÂàó‰∏é‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÊí§ÈîÄËÆ∞ÂΩïÁöÑÈõÜÂêàÔºåÂåÖÂê´Â¶Ç‰ΩïÊí§ÈîÄ‰∫ãÂä°ÊúÄËøëÁöÑÊõ¥Êîπ„ÄÇÂ¶ÇÊûúÂÖ∂‰ªñ‰∫ãÂä°Ë¶ÅÊü•ËØ¢ÂéüÂßãÊï∞ÊçÆÔºåÂèØ‰ª•‰ªéÊí§ÈîÄÊó•ÂøóËÆ∞ÂΩï‰∏≠ËøΩÊ∫ØÊú™Êõ¥ÊîπÁöÑÊï∞ÊçÆ„ÄÇÊí§ÈîÄÊó•ÂøóÂ≠òÂú®‰∫éÊí§ÈîÄÊó•ÂøóÁâáÊÆµ‰∏≠ÔºåËøô‰∫õÁâáÊÆµÂåÖÂê´‰∫éÂõûÊªöÁâáÊÆµ‰∏≠„ÄÇ\n8. **ÊØè‰∏™Ë°®‰∏Ä‰∏™Êñá‰ª∂ÁöÑË°®Á©∫Èó¥** ÊØè‰∏™Ë°®‰∏Ä‰∏™Êñá‰ª∂ÁöÑË°®Á©∫Èó¥ÊòØÊåáÊØè‰∏™ÂçïÁã¨ÁöÑË°®Á©∫Èó¥ÂàõÂª∫Âú®Ëá™Ë∫´ÁöÑÊï∞ÊçÆÊñá‰ª∂‰∏≠Ôºå ËÄå‰∏çÊòØÁ≥ªÁªüË°®Á©∫Èó¥‰∏≠„ÄÇËøô‰∏™ÂäüËÉΩÈÄöËøá innodb_file_per_table ÈÖçÁΩÆÈ°πÂºÄÂêØ„ÄÇÊØè‰∏™Ë°®Á©∫Èó¥Áî±‰∏Ä‰∏™ÂçïÁã¨ÁöÑ `.ibd` Êï∞ÊçÆÊñá‰ª∂‰ª£Ë°®ÔºåËØ•Êñá‰ª∂ÈªòËÆ§Ë¢´ÂàõÂª∫Âú®Êï∞ÊçÆÂ∫ìÁõÆÂΩï‰∏≠„ÄÇ\n9. **ÈÄöÁî®Ë°®Á©∫Èó¥** ‰ΩøÁî® CREATE TABLESPACE ËØ≠Ê≥ïÂàõÂª∫ÂÖ±‰∫´ÁöÑ InnoDB Ë°®Á©∫Èó¥„ÄÇÈÄöÁî®Ë°®Á©∫Èó¥ÂèØ‰ª•ÂàõÂª∫Âú® MySQL Êï∞ÊçÆÁõÆÂΩï‰πãÂ§ñËÉΩÂ§üÁÆ°ÁêÜÂ§ö‰∏™Ë°®Âπ∂ÊîØÊåÅÊâÄÊúâË°åÊ†ºÂºèÁöÑË°®„ÄÇ\n10. **Êí§ÈîÄË°®Á©∫Èó¥** Êí§ÈîÄË°®Á©∫Èó¥Áî±‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂåÖÂê´Êí§ÈîÄÊó•ÂøóÁöÑÊñá‰ª∂ÁªÑÊàê„ÄÇÊí§ÈîÄË°®Á©∫Èó¥ÁöÑÊï∞ÈáèÁî± innodb_undo_tablespaces ÈÖçÁΩÆÈ°πÈÖçÁΩÆ„ÄÇ\n11. **‰∏¥Êó∂Ë°®Á©∫Èó¥** Áî®Êà∑ÂàõÂª∫ÁöÑ‰∏¥Êó∂Ë°®Á©∫Èó¥ÂíåÂü∫‰∫éÁ£ÅÁõòÁöÑÂÜÖÈÉ®‰∏¥Êó∂Ë°®ÈÉΩÂàõÂª∫‰∫é‰∏¥Êó∂Ë°®Á©∫Èó¥„ÄÇ innodb_temp_data_file_path ÈÖçÁΩÆÈ°πÂÆö‰πâ‰∫ÜÁõ∏ÂÖ≥ÁöÑË∑ØÂæÑ„ÄÅÂêçÁß∞„ÄÅÂ§ßÂ∞èÂíåÂ±ûÊÄß„ÄÇÂ¶ÇÊûúËØ•ÂÄº‰∏∫Á©∫ÔºåÈªòËÆ§‰ºöÂú® innodb_data_home_dir ÂèòÈáèÊåáÂÆöÁöÑÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Ëá™Âä®Êâ©Â±ïÁöÑÊï∞ÊçÆÊñá‰ª∂„ÄÇ\n12. **ÈáçÂÅöÊó•Âøó** ÈáçÂÅöÊó•ÂøóÊòØÂü∫‰∫éÁ£ÅÁõòÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂú®Â¥©Ê∫ÉÊÅ¢Â§çÊúüÈó¥‰ΩøÁî®ÔºåÁî®Êù•Á∫†Ê≠£Êï∞ÊçÆ„ÄÇÊ≠£Â∏∏Êìç‰ΩúÊúüÈó¥Ôºå ÈáçÂÅöÊó•Âøó‰ºöÂ∞ÜËØ∑Ê±ÇÊï∞ÊçÆËøõË°åÁºñÁ†ÅÔºåËøô‰∫õËØ∑Ê±Ç‰ºöÊîπÂèò InnoDB Ë°®Êï∞ÊçÆ„ÄÇÈÅáÂà∞ÊÑèÂ§ñÂ¥©Ê∫ÉÂêéÔºåÊú™ÂÆåÊàêÁöÑÊõ¥Êîπ‰ºöËá™Âä®Âú®ÂàùÂßãÂåñÊúüÈó¥ÈáçÊñ∞ËøõË°å„ÄÇ","source":"_posts/Â≠òÂÇ®ÂºïÊìé.md","raw":"---\ntitle: Â≠òÂÇ®ÂºïÊìé\ndate: 2024-04-01 16:39:34\ntags: MySQL\ncover: /img/cover_02.png\ntop_img: https://bu.dusays.com/2022/08/17/62fbc3487f6e9.jpg\n---\n\n![image-20220713231227788](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335455.png)\n\n# 1. Êü•ÁúãÂ≠òÂÇ®ÂºïÊìé\n\nÊü•ÁúãmysqlÊèê‰æõ‰ªÄ‰πàÂ≠òÂÇ®ÂºïÊìé:\n\n```sql\nshow engines;\n```\n\n![image-20220713223052510](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335257.png)\n\n# 2. ËÆæÁΩÆÁ≥ªÁªüÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé\n\n- Êü•ÁúãÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé:\n\n  ```mysql\n  show variables like '%storage_engine%'; \n  #Êàñ\n  SELECT @@default_storage_engine;\n  ```\n\n  \n\n  ![image-20220713223312035](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335167.png)\n\n- ‰øÆÊîπÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé\n\n  Â¶ÇÊûúÂú®ÂàõÂª∫Ë°®ÁöÑËØ≠Âè•‰∏≠Ê≤°ÊúâÊòæÂºèÊåáÂÆöË°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÁöÑËØùÔºåÈÇ£Â∞±‰ºöÈªòËÆ§‰ΩøÁî® `InnoDB` ‰Ωú‰∏∫Ë°®ÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇ Â¶ÇÊûúÊàë‰ª¨ÊÉ≥ÊîπÂèòË°®ÁöÑÈªòËÆ§Â≠òÂÇ®ÂºïÊìéÁöÑËØùÔºåÂèØ‰ª•ËøôÊ†∑ÂÜôÂêØÂä®ÊúçÂä°Âô®ÁöÑÂëΩ‰ª§Ë°å:\n\n  ```mysql\n  SET DEFAULT_STORAGE_ENGINE=MyISAM;\n  ```\n\n  ÊàñËÄÖ‰øÆÊîπ `my.cnf` Êñá‰ª∂:\n\n  ```mysql\n  default-storage-engine=MyISAM\n  # ÈáçÂêØÊúçÂä°\n  systemctl restart mysqld.service\n  ```\n\n\n# 3. ËÆæÁΩÆË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\n\nÂ≠òÂÇ®ÂºïÊìéÊòØË¥üË¥£ÂØπË°®‰∏≠ÁöÑÊï∞ÊçÆËøõË°åÊèêÂèñÂíåÂÜôÂÖ•Â∑•‰ΩúÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•‰∏∫ `‰∏çÂêåÁöÑË°®ËÆæÁΩÆ‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìé` Ôºå‰πüÂ∞±ÊòØËØ¥‰∏çÂêåÁöÑË°®ÂèØ‰ª•Êúâ‰∏çÂêåÁöÑÁâ©ÁêÜÂ≠òÂÇ®ÁªìÊûÑÔºå‰∏çÂêåÁöÑÊèêÂèñÂíåÂÜôÂÖ•ÊñπÂºè„ÄÇ\n\n## 3.1 ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÂ≠òÂÇ®ÂºïÊìé\n\nÊàë‰ª¨‰πãÂâçÂàõÂª∫Ë°®ÁöÑËØ≠Âè•ÈÉΩÊ≤°ÊúâÊåáÂÆöË°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºåÈÇ£Â∞±‰ºö‰ΩøÁî®ÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé `InnoDB` „ÄÇÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥ÊòæÂºèÁöÑÊåáÂÆö‰∏Ä‰∏ãË°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºåÈÇ£ÂèØ‰ª•Ëøô‰πàÂÜôÔºö\n\n```mysql\nCREATE TABLE Ë°®Âêç( \n  Âª∫Ë°®ËØ≠Âè•;\n) ENGINE = Â≠òÂÇ®ÂºïÊìéÂêçÁß∞;\n```\n\n## 3.2 ‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\n\nÂ¶ÇÊûúË°®Â∑≤ÁªèÂª∫Â•Ω‰∫ÜÔºåÊàë‰ª¨‰πüÂèØ‰ª•‰ΩøÁî®‰∏ãËæπËøô‰∏™ËØ≠Âè•Êù•‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé:\n\n```mysql\nALTER TABLE Ë°®Âêç ENGINE = Â≠òÂÇ®ÂºïÊìéÂêçÁß∞; \n```\n\nÊØîÂ¶ÇÊàë‰ª¨‰øÆÊîπ‰∏Ä‰∏ã `engine_demo_table` Ë°®ÁöÑÂ≠òÂÇ®ÂºïÊìé:\n\n```mysql\nmysql> ALTER TABLE engine_demo_table ENGINE = InnoDB;\nQuery OK, 0 rows affected (0.05 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n```\n\nËøôÊó∂Êàë‰ª¨ÂÜçÊü•Áúã‰∏Ä‰∏ã `engine_demo_table` ÁöÑË°®ÁªìÊûÑ:\n\n```sql\nmysql> SHOW CREATE TABLE engine_demo_table\\G\n*************************** 1. row ***************************\nTable: engine_demo_table\nCreate Table: CREATE TABLE `engine_demo_table` (\n  `i` int(11) DEFAULT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8\n1 row in set (0.01 sec)\n```\n\nÂèØ‰ª•ÁúãÂà∞ËØ•Ë°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÂ∑≤ÁªèÊîπ‰∏∫`InnoDB`‰∫Ü„ÄÇ\n\n# 4. ÂºïÊìé‰ªãÁªç\n\n## 4.1 InnoDB ÂºïÊìéÔºöÂÖ∑Â§á==Â§ñÈîÆ==ÊîØÊåÅÂäüËÉΩÁöÑ‰∫ãÂä°Â≠òÂÇ®ÂºïÊìé\n\n- MySQL ‰ªé 3.23.34a ÂºÄÂßãÂ∞±ÂåÖÂê´ InnoDB Â≠òÂÇ®ÂºïÊìé„ÄÇ`Â§ß‰∫éÁ≠â‰∫é 5.5 ‰πãÂêéÔºåÈªòËÆ§ÈááÁî® InnoDB ÂºïÊìé` \n- InnoDB ÊòØ MySQL ÁöÑ ==ÈªòËÆ§‰∫ãÂä°ÂûãÂºïÊìé== ÔºåÂÆÉË¢´ËÆæËÆ°Áî®Êù•Â§ÑÁêÜÂ§ßÈáèÁöÑÁü≠ÊúüÔºàshort-livedÔºâ‰∫ãÂä°„ÄÇÂèØ‰ª•Á°Æ‰øù‰∫ãÂä°ÁöÑÂÆåÊï¥Êèê‰∫§ÔºàCommitÔºâÂíåÂõûÊªöÔºàRollbackÔºâ„ÄÇ\n- ==Èô§‰∫ÜÂ¢ûÂä†ÂíåÊü•ËØ¢Â§ñÔºåËøòÈúÄË¶ÅÊõ¥Êñ∞„ÄÅÂà†Èô§Êìç‰Ωú==ÔºåÈÇ£‰πàÔºåÂ∫î‰ºòÂÖàÈÄâÊã© InnoDB Â≠òÂÇ®ÂºïÊìé„ÄÇ\n- **Èô§ÈùûÊúâÈùûÂ∏∏ÁâπÂà´ÁöÑÂéüÂõ†ÈúÄË¶Å‰ΩøÁî®ÂÖ∂‰ªñÁöÑÂ≠òÂÇ®ÂºïÊìéÔºåÂê¶ÂàôÂ∫îËØ•‰ºòÂÖàËÄÉËôëInnoDBÂºïÊìé**„ÄÇ Êï∞ÊçÆÊñá‰ª∂ÁªìÊûÑÔºö\n- `Ë°®Âêç.frm` Â≠òÂÇ®Ë°®ÁªìÊûÑÔºàMySQL8.0Êó∂ÔºåÂêàÂπ∂Âú®Ë°®Âêç.ibd‰∏≠Ôºâ\n- `Ë°®Âêç.ibd` Â≠òÂÇ®Êï∞ÊçÆÂíåÁ¥¢Âºï\n- ==InnoDBÊòØ ‰∏∫Â§ÑÁêÜÂ∑®Â§ßÊï∞ÊçÆÈáèÁöÑÊúÄÂ§ßÊÄßËÉΩËÆæËÆ°==„ÄÇ\n  - Âú®‰ª•ÂâçÁöÑÁâàÊú¨‰∏≠ÔºåÂ≠óÂÖ∏Êï∞ÊçÆ‰ª•ÂÖÉÊï∞ÊçÆÊñá‰ª∂„ÄÅÈùû‰∫ãÂä°Ë°®Á≠âÊù•Â≠òÂÇ®„ÄÇÁé∞Âú®Ëøô‰∫õÂÖÉÊï∞ÊçÆÊñá‰ª∂Ë¢´Âà†Èô§‰∫Ü„ÄÇÊØîÂ¶ÇÔºö`.frm` Ôºå `.par` Ôºå `.trn` Ôºå `.isl` Ôºå Á≠âÈÉΩÂú® MySQL 8.0 ‰∏≠‰∏çÂ≠òÂú®‰∫Ü„ÄÇ\n- ÂØπÊØî MyISAM ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºå`InnoDBÂÜôÁöÑÂ§ÑÁêÜÊïàÁéáÂ∑Æ‰∏Ä‰∫õ` ÔºåÂπ∂‰∏î‰ºöÂç†Áî®Êõ¥Â§öÁöÑÁ£ÅÁõòÁ©∫Èó¥‰ª•‰øùÂ≠òÊï∞ÊçÆÂíåÁ¥¢Âºï„ÄÇ\n- MyISAM Âè™ÁºìÂ≠òÁ¥¢ÂºïÔºå‰∏çÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆÔºõInnoDB‰∏ç‰ªÖÁºìÂ≠òÁ¥¢ÂºïËøòË¶ÅÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆ(Âä†ËΩΩÊï∞ÊçÆÊó∂Ôºå‰πüË¶ÅÂä†ËΩΩÁ¥¢Âºï)Ôºå`ÂØπÂÜÖÂ≠òË¶ÅÊ±ÇËæÉÈ´ò` ÔºåËÄå‰∏îÂÜÖÂ≠òÂ§ßÂ∞èÂØπÊÄßËÉΩÊúâÂÜ≥ÂÆöÊÄßÁöÑÂΩ±Âìç„ÄÇ\n\n## 4.2 MyISAM ÂºïÊìéÔºö‰∏ªË¶ÅÁöÑÈùû‰∫ãÂä°Â§ÑÁêÜÂ≠òÂÇ®ÂºïÊìé\n\n- MyISAM Êèê‰æõ‰∫ÜÂ§ßÈáèÁöÑÁâπÊÄßÔºåÂåÖÊã¨ÂÖ®ÊñáÁ¥¢Âºï„ÄÅÂéãÁº©„ÄÅÁ©∫Èó¥ÂáΩÊï∞ÔºàGISÔºâÁ≠âÔºå‰ΩÜ MyISAM `‰∏çÊîØÊåÅ‰∫ãÂä°„ÄÅË°åÁ∫ßÈîÅ„ÄÅÂ§ñÈîÆ`ÔºåÊúâ‰∏Ä‰∏™ÊØ´Êó†ÁñëÈóÆÁöÑÁº∫Èô∑Â∞±ÊòØ `Â¥©Ê∫ÉÂêéÊó†Ê≥ïÂÆâÂÖ®ÊÅ¢Â§ç`„ÄÇ\n- `5.5 ‰πãÂâçÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé`\n- ‰ºòÂäøÊòØËÆøÈóÆÁöÑ `ÈÄüÂ∫¶Âø´` ÔºåÂØπ‰∫ãÂä°ÂÆåÊï¥ÊÄßÊ≤°ÊúâË¶ÅÊ±ÇÊàñËÄÖ‰ª• SELECT„ÄÅINSERT ‰∏∫‰∏ªÁöÑÂ∫îÁî®\n- ÈíàÂØπÊï∞ÊçÆÁªüËÆ°ÊúâÈ¢ùÂ§ñÁöÑÂ∏∏Êï∞Â≠òÂÇ®„ÄÇÊïÖËÄå`count(*)` ÁöÑÊü•ËØ¢ÊïàÁéáÂæàÈ´ò\n- Êï∞ÊçÆÊñá‰ª∂ÁªìÊûÑ\n  - `Ë°®Âêç.frm` Â≠òÂÇ®Ë°®ÁªìÊûÑ\n  - `Ë°®Âêç.MYD` Â≠òÂÇ®Êï∞ÊçÆÔºàMYDataÔºâ\n  - `Ë°®Âêç.MYI` Â≠òÂÇ®Á¥¢ÂºïÔºàMYIndexÔºâ\n- Â∫îÁî®Âú∫ÊôØ:Âè™ËØªÂ∫îÁî®ÊàñËÄÖ‰ª•ËØª‰∏∫‰∏ªÁöÑ‰∏öÂä°\n\n## 4.3 Archive ÂºïÊìéÔºöÁî®‰∫éÊï∞ÊçÆÂ≠òÊ°£\n\n![image-20220713231445827](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335661.png)\n\n‰∏ãË°®Â±ïÁ§∫‰∫Ü ARCHIVE Â≠òÂÇ®ÂºïÊìéÂäüËÉΩÔºö\n\n| ÁâπÂæÅ                                                  | ÊîØÊåÅ         |\n| :---------------------------------------------------- | :----------- |\n| BÊ†ëÁ¥¢Âºï                                               | ‰∏çÊîØÊåÅ       |\n| `Â§á‰ªΩ/Êó∂Èó¥ÁÇπÊÅ¢Â§ç`(Âú®ÊúçÂä°Âô®‰∏≠ÂÆûÁé∞ÔºåËÄå‰∏çÊòØÂú®Â≠òÂÇ®ÂºïÊìé‰∏≠) | ÊîØÊåÅ         |\n| ÈõÜÁæ§Êï∞ÊçÆÂ∫ìÊîØÊåÅ                                        | ‰∏çÊîØÊåÅ       |\n| ËÅöÈõÜÁ¥¢Âºï                                              | ‰∏çÊîØÊåÅ       |\n| ÂéãÁº©Êï∞ÊçÆ                                              | ÊîØÊåÅ         |\n| Êï∞ÊçÆÁºìÂ≠ò                                              | ‰∏çÊîØÊåÅ       |\n| Âä†ÂØÜÊï∞ÊçÆ(Âä†ÂØÜÂäüËÉΩÂú®ÊúçÂä°Âô®‰∏≠ÂÆûÁé∞)                      | ÊîØÊåÅ         |\n| Â§ñÈîÆÊîØÊåÅ                                              | ‰∏çÊîØÊåÅ       |\n| ÂÖ®ÊñáÊ£ÄÁ¥¢Á¥¢Âºï                                          | ‰∏çÊîØÊåÅ       |\n| Âú∞ÁêÜÁ©∫Èó¥Êï∞ÊçÆÁ±ªÂûãÊîØÊåÅ                                  | ÊîØÊåÅ         |\n| Âú∞ÁêÜÁ©∫Èó¥Á¥¢ÂºïÊîØÊåÅ                                      | ‰∏çÊîØÊåÅ       |\n| ÂìàÂ∏åÁ¥¢Âºï                                              | ‰∏çÊîØÊåÅ       |\n| Á¥¢ÂºïÁºìÂ≠ò                                              | ‰∏çÊîØÊåÅ       |\n| `ÈîÅÁ≤íÂ∫¶`                                              | Ë°åÈîÅ         |\n| MVCC                                                  | ‰∏çÊîØÊåÅ       |\n| Â≠òÂÇ®ÈôêÂà∂                                              | Ê≤°Êúâ‰ªª‰ΩïÈôêÂà∂ |\n| ‰∫§Êòì                                                  | ‰∏çÊîØÊåÅ       |\n| Êõ¥Êñ∞Êï∞ÊçÆÂ≠óÂÖ∏ÁöÑÁªüËÆ°‰ø°ÊÅØ                                | ÊîØÊåÅ         |\n\n## 4.4 Blackhole ÂºïÊìéÔºö‰∏¢ÂºÉÂÜôÊìç‰ΩúÔºåËØªÊìç‰Ωú‰ºöËøîÂõûÁ©∫ÂÜÖÂÆπ\n\n![image-20220713231926786](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335029.png)\n\n## 4.5 CSV ÂºïÊìéÔºöÂ≠òÂÇ®Êï∞ÊçÆÊó∂Ôºå‰ª•ÈÄóÂè∑ÂàÜÈöîÂêÑ‰∏™Êï∞ÊçÆÈ°π\n\n![image-20220713232053842](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335774.png)\n\n‰ΩøÁî®Ê°à‰æãÂ¶Ç‰∏ã\n\n```sql\nmysql> CREATE TABLE test (i INT NOT NULL, c CHAR(10) NOT NULL) ENGINE = CSV;\nQuery OK, 0 rows affected (0.06 sec)\n\nmysql> INSERT INTO test VALUES(1,'record one'),(2,'record two');\nQuery OK, 2 rows affected (0.05 sec)\nRecords: 2  Duplicates: 0  Warnings: 0\n\nmysql> SELECT * FROM test; \n+---+------------+\n|i  |c           | \n+---+------------+\n| 1 | record one |\n| 2 | record two |\n+---+------------+\n2 rows in set (0.00 sec)\n```\n\n\n\nÂàõÂª∫ CSV Ë°®Ëøò‰ºöÂàõÂª∫Áõ∏Â∫îÁöÑ `ÂÖÉÊñá‰ª∂` ÔºåÁî®‰∫é `Â≠òÂÇ®Ë°®ÁöÑÁä∂ÊÄÅ` Âíå `Ë°®‰∏≠Â≠òÂú®ÁöÑË°åÊï∞` „ÄÇÊ≠§Êñá‰ª∂ÁöÑÂêçÁß∞‰∏éË°®ÁöÑÂêçÁß∞Áõ∏ ÂêåÔºåÂêéÁºÄ‰∏∫ `CSM`„ÄÇÂ¶ÇÂõæÊâÄÁ§∫\n\n![image-20220713232615402](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335054.png)\n\n\n\nÂ¶ÇÊûúÊ£ÄÊü• `test.CSV` ÈÄöËøáÊâßË°å‰∏äËø∞ËØ≠Âè•ÂàõÂª∫ÁöÑÊï∞ÊçÆÂ∫ìÁõÆÂΩï‰∏≠ÁöÑÊñá‰ª∂ÔºåÂÖ∂ÂÜÖÂÆπ‰ΩøÁî®Notepad++ÊâìÂºÄÂ¶Ç‰∏ã:\n\n```sql\n\"1\",\"record one\"\n\"2\",\"record two\"\n```\n\n\n\nËøôÁßçÊ†ºÂºèÂèØ‰ª•Ë¢´ Microsoft Excel Á≠âÁîµÂ≠êË°®Ê†ºÂ∫îÁî®Á®ãÂ∫èËØªÂèñÔºåÁîöËá≥ÂÜôÂÖ•„ÄÇ‰ΩøÁî® Microsoft Excel ÊâìÂºÄÂ¶ÇÂõæÊâÄÁ§∫Ôºö\n\n![image-20220713232637071](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335502.png)\n\n## 4.6 Memory ÂºïÊìéÔºöÁΩÆ‰∫éÂÜÖÂ≠òÁöÑË°®\n\n**Ê¶ÇËø∞:**\n\nMemory ÈááÁî®ÁöÑÈÄªËæë‰ªãË¥®ÊòØ `ÂÜÖÂ≠ò Ôºå ÂìçÂ∫îÈÄüÂ∫¶ÂæàÂø´` Ôºå‰ΩÜÊòØÂΩìmysqldÂÆàÊä§ËøõÁ®ãÂ¥©Ê∫ÉÁöÑÊó∂ÂÄô `Êï∞ÊçÆ‰ºö‰∏¢Â§±` „ÄÇÂè¶ Â§ñÔºåË¶ÅÊ±ÇÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÊòØÊï∞ÊçÆÈïøÂ∫¶‰∏çÂèòÁöÑÊ†ºÂºèÔºåÊØîÂ¶ÇÔºåBlob Âíå Text Á±ªÂûãÁöÑÊï∞ÊçÆ‰∏çÂèØÁî®„ÄÇ\n\n**‰∏ªË¶ÅÁâπÂæÅ:**\n\n- Memory ÂêåÊó∂ `ÊîØÊåÅÂìàÂ∏åÔºàHASHÔºâÁ¥¢Âºï`Âíå `B+Ê†ëÁ¥¢Âºï` „ÄÇ\n- Memory Ë°®Ëá≥Â∞ëÊØî MyISAMË°® Ë¶Å `Âø´‰∏Ä‰∏™Êï∞ÈáèÁ∫ß`„ÄÇ\n- MEMORY `Ë°®ÁöÑÂ§ßÂ∞èÊòØÂèóÈôêÂà∂`ÁöÑ„ÄÇË°®ÁöÑÂ§ßÂ∞è‰∏ªË¶ÅÂèñÂÜ≥‰∫é‰∏§‰∏™ÂèÇÊï∞ÔºåÂàÜÂà´ÊòØ `max_rows` Âíå`max_heap_table_size`„ÄÇÂÖ∂‰∏≠Ôºåmax_rowsÂèØ‰ª•Âú®ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÔºõmax_heap_table_size ÁöÑÂ§ßÂ∞èÈªòËÆ§‰∏∫ 16 MBÔºåÂèØ‰ª•ÊåâÈúÄË¶ÅËøõË°åÊâ©Â§ß„ÄÇ\n- Êï∞ÊçÆÊñá‰ª∂‰∏éÁ¥¢ÂºïÊñá‰ª∂ÂàÜÂºÄÂ≠òÂÇ®„ÄÇ\n- Áº∫ÁÇπÔºöÂÖ∂Êï∞ÊçÆÊòì‰∏¢Â§±ÔºåÁîüÂëΩÂë®ÊúüÁü≠„ÄÇÂü∫‰∫éËøô‰∏™Áº∫Èô∑ÔºåÈÄâÊã© MEMORY Â≠òÂÇ®ÂºïÊìéÊó∂ÈúÄË¶ÅÁâπÂà´Â∞èÂøÉ„ÄÇ\n\n**‰ΩøÁî®MemoryÂ≠òÂÇ®ÂºïÊìéÁöÑÂú∫ÊôØ:**\n\n1. `ÁõÆÊ†áÊï∞ÊçÆÊØîËæÉÂ∞è`ÔºåËÄå‰∏îÈùûÂ∏∏ `È¢ëÁπÅÁöÑËøõË°åËÆøÈóÆ`ÔºåÂú®ÂÜÖÂ≠ò‰∏≠Â≠òÊîæÊï∞ÊçÆÔºåÂ¶ÇÊûúÂ§™Â§ßÁöÑÊï∞ÊçÆ‰ºöÈÄ†Êàê `ÂÜÖÂ≠òÊ∫¢Âá∫` „ÄÇÂèØ‰ª•ÈÄöËøáÂèÇÊï∞ `max_heap_table_size` ÊéßÂà∂ Memory Ë°®ÁöÑÂ§ßÂ∞èÔºåÈôêÂà∂ Memory Ë°®ÁöÑÊúÄÂ§ßÁöÑÂ§ßÂ∞è„ÄÇ\n2. Â¶ÇÊûú `Êï∞ÊçÆÊòØ‰∏¥Êó∂ÁöÑ` ÔºåËÄå‰∏î `ÂøÖÈ°ªÁ´ãÂç≥ÂèØÁî®` ÂæóÂà∞ÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•ÊîæÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇ\n3. Â≠òÂÇ®Âú® Memory Ë°®‰∏≠ÁöÑÊï∞ÊçÆÂ¶ÇÊûúÁ™ÅÁÑ∂Èó¥ `‰∏¢Â§±ÁöÑËØù‰πüÊ≤°ÊúâÂ§™Â§ßÁöÑÂÖ≥Á≥ª`„ÄÇ\n\n## 4.7 Federated ÂºïÊìéÔºöËÆøÈóÆËøúÁ®ãË°®\n\nFederated ÂºïÊìéÊòØËÆøÈóÆÂÖ∂‰ªñMySQLÊúçÂä°Âô®ÁöÑ‰∏Ä‰∏™ ‰ª£ÁêÜ ÔºåÂ∞ΩÁÆ°ËØ•ÂºïÊìéÁúãËµ∑Êù•Êèê‰æõ‰∫Ü‰∏ÄÁßçÂæàÂ•ΩÁöÑË∑®ÊúçÂä°Âô®ÁöÑÁÅµÊ¥ªÊÄß Ôºå‰ΩÜ‰πüÁªèÂ∏∏Â∏¶Êù•ÈóÆÈ¢òÔºåÂõ†Ê≠§ÈªòËÆ§ÊòØÁ¶ÅÁî®ÁöÑ „ÄÇ\n\n## 4.8 Merge ÂºïÊìéÔºöÁÆ°ÁêÜÂ§ö‰∏™MyISAMË°®ÊûÑÊàêÁöÑË°®ÈõÜÂêà\n\n## 4.9 NDBÂºïÊìéÔºöMySQLÈõÜÁæ§‰∏ìÁî®Â≠òÂÇ®ÂºïÊìé\n\n‰πüÂè´ÂÅö NDB Cluster Â≠òÂÇ®ÂºïÊìéÔºå‰∏ªË¶ÅÁî®‰∫é `MySQL Cluster ÂàÜÂ∏ÉÂºèÈõÜÁæ§` ÁéØÂ¢É„ÄÇ\n\n## 4.10 ÂºïÊìéÂØπÊØî\n\nMySQL‰∏≠Âêå‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÔºå‰∏çÂêåÁöÑË°®ÂèØ‰ª•ÈÄâÊã©‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇÂ¶Ç‰∏ãË°®ÂØπÂ∏∏Áî®Â≠òÂÇ®ÂºïÊìéÂÅöÂá∫‰∫ÜÂØπÊØî„ÄÇ\n\n| ÁâπÁÇπ           | MyISAM                                                    | InnoDB                                                       | MEMORY | MERGE | NDB  |\n| :------------- | :-------------------------------------------------------- | :----------------------------------------------------------- | :----- | :---- | :--- |\n| Â≠òÂÇ®ÈôêÂà∂       | Êúâ                                                        | 64TB                                                         | Êúâ     | Ê≤°Êúâ  | Êúâ   |\n| `‰∫ãÂä°ÂÆâÂÖ®ÊÄß`   |                                                           | ÊîØÊåÅ                                                         |        |       |      |\n| `ÈîÅÊú∫Âà∂`       | Ë°®ÈîÅÔºåÂç≥‰ΩøÊìç‰Ωú‰∏ÄÊù° ËÆ∞ÂΩï‰πü‰ºöÈîÅ‰ΩèÊï¥‰∏™Ë°®Ôºå‰∏çÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú | Ë°åÈîÅÔºåÊìç‰ΩúÊó∂Âè™ÈîÅÊüê‰∏ÄË°åÔºå‰∏çÂØπÂÖ∂ÂÆÉË°åÊúâÂΩ±ÂìçÔºåÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú   | Ë°®ÈîÅ   | Ë°®ÈîÅ  | Ë°åÈîÅ |\n| BÊ†ëÁ¥¢Âºï        | ÊîØÊåÅ                                                      | ÊîØÊåÅ                                                         | ÊîØÊåÅ   | ÊîØÊåÅ  | ÊîØÊåÅ |\n| ÂìàÂ∏åÁ¥¢Âºï       |                                                           |                                                              | ÊîØÊåÅ   |       | ÊîØÊåÅ |\n| ÂÖ®ÊñáÁ¥¢Âºï       | ÊîØÊåÅ                                                      |                                                              |        |       |      |\n| ÈõÜÁæ§Á¥¢Âºï       |                                                           | ÊîØÊåÅ                                                         |        |       |      |\n| Êï∞ÊçÆÁºìÂ≠ò       |                                                           | ÊîØÊåÅ                                                         | ÊîØÊåÅ   |       |      |\n| `Á¥¢ÂºïÁºìÂ≠ò`     | Âè™ÁºìÂ≠òÁ¥¢ÂºïÔºå‰∏çÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆ                                | ‰∏ç‰ªÖÁºìÂ≠òÁ¥¢ÂºïËøòË¶ÅÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆÔºåÂØπÂÜÖÂ≠òË¶ÅÊ±ÇËæÉÈ´òÔºåËÄå‰∏îÂÜÖÂ≠òÂ§ßÂ∞èÂØπÊÄßËÉΩÊúâÂÜ≥ÂÆöÊÄßÁöÑÂΩ±Âìç | ÊîØÊåÅ   | ÊîØÊåÅ  | ÊîØÊåÅ |\n| Êï∞ÊçÆÂèØÂéãÁº©     | ÊîØÊåÅ                                                      |                                                              |        |       |      |\n| Á©∫Èó¥‰ΩøÁî®       | ‰Ωé                                                        | È´ò                                                           | N/A    | ‰Ωé    | ‰Ωé   |\n| ÂÜÖÂ≠ò‰ΩøÁî®       | ‰Ωé                                                        | È´ò                                                           | ‰∏≠Á≠â   | ‰Ωé    | È´ò   |\n| ÊâπÈáèÊèíÂÖ•ÁöÑÈÄüÂ∫¶ | È´ò                                                        | ‰Ωé                                                           | È´ò     | È´ò    | È´ò   |\n| `ÊîØÊåÅÂ§ñÈîÆ`     |                                                           | ÊîØÊåÅ                                                         |        |       |      |\n\n# 5. MyISAM Âíå InnoDB\n\n![image-20220713230507218](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132336896.png)\n\n|     ÂØπÊØîÈ°π     |                          MyISAM                          |                            InnoDB                            |\n| :------------: | :------------------------------------------------------: | :----------------------------------------------------------: |\n|      Â§ñÈîÆ      |                          ‰∏çÊîØÊåÅ                          |                             ÊîØÊåÅ                             |\n|      ‰∫ãÂä°      |                          ‰∏çÊîØÊåÅ                          |                             ÊîØÊåÅ                             |\n|     Ë°åË°®ÈîÅ     | Ë°®ÈîÅÔºåÂç≥‰ΩøÊìç‰Ωú‰∏ÄÊù°ËÆ∞ÂΩï‰πü‰ºöÈîÅ‰ΩèÊï¥‰∏™Ë°®Ôºå‰∏çÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú |  Ë°åÈîÅÔºåÊìç‰ΩúÊó∂Âè™ÈîÅÊüê‰∏ÄË°åÔºå‰∏çÂØπÂÖ∂ÂÆÉË°åÊúâÂΩ±ÂìçÔºåÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú  |\n|      ÁºìÂ≠ò      |                Âè™ÁºìÂ≠òÁ¥¢ÂºïÔºå‰∏çÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆ                | ‰∏ç‰ªÖÁºìÂ≠òÁ¥¢ÂºïËøòË¶ÅÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆÔºåÂØπÂÜÖÂ≠òË¶ÅÊ±ÇËæÉÈ´òÔºåËÄå‰∏îÂÜÖÂ≠òÂ§ßÂ∞èÂØπÊÄßËÉΩÊúâÂÜ≥ÂÆöÊÄßÁöÑÂΩ±Âìç |\n| Ëá™Â∏¶Á≥ªÁªüË°®‰ΩøÁî® |                            Y                             |                              N                               |\n|     ÂÖ≥Ê≥®ÁÇπ     |             ÊÄßËÉΩÔºöËäÇÁúÅËµÑÊ∫ê„ÄÅÊ∂àËÄóÂ∞ë„ÄÅÁÆÄÂçï‰∏öÂä°             |                 ‰∫ãÂä°ÔºöÂπ∂ÂèëÂÜô„ÄÅ‰∫ãÂä°„ÄÅÊõ¥Â§ßËµÑÊ∫ê                 |\n|    ÈªòËÆ§ÂÆâË£Ö    |                            Y                             |                              Y                               |\n|    ÈªòËÆ§‰ΩøÁî®    |                            N                             |                              Y                               |\n\n# 6. ÈòøÈáåÂ∑¥Â∑¥„ÄÅÊ∑òÂÆùÁî®Âì™‰∏™\n\n\n\n![image-20220713230922017](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132336908.png)\n\n- **Percona** ‰∏∫ MySQL Êï∞ÊçÆÂ∫ìÊúçÂä°Âô®ËøõË°å‰∫ÜÊîπËøõÔºåÂú®ÂäüËÉΩÂíåÊÄßËÉΩ‰∏äËæÉ MySQL ÊúâÂæàÊòæËëóÁöÑÊèêÂçá„ÄÇ\n- ËØ•ÁâàÊú¨ÊèêÂçá‰∫ÜÂú®È´òË¥üËΩΩÊÉÖÂÜµ‰∏ãÁöÑ InnoDB ÁöÑÊÄßËÉΩ„ÄÅ‰∏∫ DBA Êèê‰æõ‰∏Ä‰∫õÈùûÂ∏∏ÊúâÁî®ÁöÑÊÄßËÉΩËØäÊñ≠Â∑•ÂÖ∑ÔºõÂè¶Â§ñÊúâÊõ¥Â§öÁöÑÂèÇÊï∞ÂíåÂëΩ‰ª§Êù•ÊéßÂà∂ÊúçÂä°Âô®Ë°å‰∏∫„ÄÇ\n- ËØ•ÂÖ¨Âè∏Êñ∞Âª∫‰∫Ü‰∏ÄÊ¨æÂ≠òÂÇ®ÂºïÊìéÂè´ `Xtradb` ÂÆåÂÖ®ÂèØ‰ª•Êõø‰ª£`Innodb` ÔºåÂπ∂‰∏îÂú®ÊÄßËÉΩÂíåÂπ∂Âèë‰∏äÂÅöÂæóÊõ¥Â•Ω\n- ÈòøÈáåÂ∑¥Â∑¥Â§ßÈÉ®ÂàÜ MySQL Êï∞ÊçÆÂ∫ìÂÖ∂ÂÆû‰ΩøÁî®ÁöÑ percona ÁöÑÂéüÂûãÂä†‰ª•‰øÆÊîπ„ÄÇ\n\n# 7. Ë°•ÂÖÖ:\n\n\n\n## 7.1 InnoDB Ë°®ÁöÑ‰ºòÂäø\n\nInnoDB Â≠òÂÇ®ÂºïÊìéÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠Êã•ÊúâËØ∏Â§ö‰ºòÂäøÔºåÊØîÂ¶ÇÊìç‰Ωú‰æøÂà©„ÄÅÊèêÈ´ò‰∫ÜÊï∞ÊçÆÂ∫ìÁöÑÊÄßËÉΩ„ÄÅÁª¥Êä§ÊàêÊú¨‰ΩéÁ≠â„ÄÇÂ¶ÇÊûúÁî±‰∫éÁ°¨‰ª∂ÊàñËΩØ‰ª∂ÁöÑÂéüÂõ†ÂØºËá¥ÊúçÂä°Âô®Â¥©Ê∫ÉÔºåÈÇ£‰πàÂú®ÈáçÂêØÊúçÂä°Âô®‰πãÂêé‰∏çÈúÄË¶ÅËøõË°åÈ¢ùÂ§ñÁöÑÊìç‰Ωú„ÄÇInnoDB Â¥©Ê∫ÉÊÅ¢Â§çÂäüËÉΩËá™Âä®Â∞Ü‰πãÂâçÊèê‰∫§ÁöÑÂÜÖÂÆπÂÆöÂûãÔºåÁÑ∂ÂêéÊí§ÈîÄÊ≤°ÊúâÊèê‰∫§ÁöÑËøõÁ®ãÔºåÈáçÂêØ‰πãÂêéÁªßÁª≠‰ªéÂ¥©Ê∫ÉÁÇπÂºÄÂßãÊâßË°å„ÄÇ\n\nInnoDB Â≠òÂÇ®ÂºïÊìéÂú®‰∏ªÂÜÖÂ≠ò‰∏≠Áª¥Êä§ÁºìÂÜ≤Ê±†ÔºåÈ´òÈ¢ëÁéá‰ΩøÁî®ÁöÑÊï∞ÊçÆÂ∞ÜÂú®ÂÜÖÂ≠ò‰∏≠Áõ¥Êé•Ë¢´Â§ÑÁêÜ„ÄÇËøôÁßçÁºìÂ≠òÊñπÂºèÂ∫îÁî®‰∫éÂ§öÁßç‰ø°ÊÅØÔºåÂä†ÈÄü‰∫ÜÂ§ÑÁêÜËøõÁ®ã„ÄÇ\n\nÂú®‰∏ìÁî®ÊúçÂä°Âô®‰∏äÔºåÁâ©ÁêÜÂÜÖÂ≠ò‰∏≠È´òËææ 80% ÁöÑÈÉ®ÂàÜË¢´Â∫îÁî®‰∫éÁºìÂÜ≤Ê±†„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÊèíÂÖ•‰∏çÂêåÁöÑË°®‰∏≠ÔºåÂèØ‰ª•ËÆæÁΩÆÂ§ñÈîÆÂä†Âº∫Êï∞ÊçÆÁöÑÂÆåÊï¥ÊÄß„ÄÇÊõ¥Êñ∞ÊàñËÄÖÂà†Èô§Êï∞ÊçÆÔºåÂÖ≥ËÅîÊï∞ÊçÆÂ∞Ü‰ºöË¢´Ëá™Âä®Êõ¥Êñ∞ÊàñÂà†Èô§„ÄÇÂ¶ÇÊûúËØïÂõæÂ∞ÜÊï∞ÊçÆÊèíÂÖ•‰ªéË°®Ôºå‰ΩÜÂú®‰∏ªË°®‰∏≠Ê≤°ÊúâÂØπÂ∫îÁöÑÊï∞ÊçÆÔºåÊèíÂÖ•ÁöÑÊï∞ÊçÆÂ∞ÜË¢´Ëá™Âä®ÁßªÈô§„ÄÇÂ¶ÇÊûúÁ£ÅÁõòÊàñÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂá∫Áé∞Â¥©Ê∫ÉÔºå Âú®‰ΩøÁî®ËÑèÊï∞ÊçÆ‰πãÂâçÔºåÊ†°È™åÂíåÊú∫Âà∂‰ºöÂèëÂá∫Ë≠¶Âëä„ÄÇÂΩìÊØè‰∏™Ë°®ÁöÑ‰∏ªÈîÆÈÉΩËÆæÁΩÆÂêàÁêÜÊó∂Ôºå‰∏éËøô‰∫õÂàóÊúâÂÖ≥ÁöÑÊìç‰Ωú‰ºöË¢´Ëá™Âä®‰ºòÂåñ„ÄÇÊèíÂÖ•„ÄÅÊõ¥Êñ∞ÂíåÂà†Èô§Êìç‰ΩúÈÄöËøáÂÅöÊîπÂèòÁºìÂÜ≤Ëá™Âä®Êú∫Âà∂ËøõË°å‰ºòÂåñ„ÄÇ`InnoDB ‰∏çÊîØÊåÅÂΩìÂâçËØªÂÜôÔºå‰πü‰ºöÁºìÂÜ≤ÊîπÂèòÁöÑÊï∞ÊçÆÂà∞Êï∞ÊçÆÊµÅÁ£ÅÁõò`.\n\nInnoDB ÁöÑÊÄßËÉΩ‰ºòÂäø‰∏çÂè™Â≠òÂú®‰∫éÈïøÊó∂ËøêË°åÊü•ËØ¢ÁöÑÂ§ßÂûãË°®„ÄÇÂú®Âêå‰∏ÄÂàóÂ§öÊ¨°Ë¢´Êü•ËØ¢Êó∂ÔºåËá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢Âºï‰ºöÊèêÈ´òÊü•ËØ¢ÁöÑÈÄüÂ∫¶„ÄÇ‰ΩøÁî® InnoDB ÂèØ‰ª•ÂéãÁº©Ë°®ÂíåÁõ∏ÂÖ≥ÁöÑÁ¥¢ÂºïÔºåÂèØ‰ª• `Âú®‰∏çÂΩ±ÂìçÊÄßËÉΩÂíåÂèØÁî®ÊÄßÁöÑÊÉÖÂÜµ‰∏ãÂàõÂª∫ÊàñÂà†Èô§Á¥¢Âºï`„ÄÇÂØπ‰∫éÂ§ßÂûãÊñáÊú¨Âíå BLOB Êï∞ÊçÆÔºå‰ΩøÁî®Âä®ÊÄÅË°åÂΩ¢ÂºèÔºåËøôÁßçÂ≠òÂÇ®Â∏ÉÂ±ÄÊõ¥È´òÊïà„ÄÇÈÄöËøáÊü•ËØ¢ INFORMATION_SCHEMA Â∫ì‰∏≠ÁöÑË°®ÂèØ‰ª•ÁõëÊéßÂ≠òÂÇ®ÂºïÊìéÁöÑÂÜÖÈÉ®Â∑•‰Ωú„ÄÇÂú®Âêå‰∏Ä‰∏™ËØ≠Âè•‰∏≠ÔºåInnoDB Ë°®ÂèØ‰ª•‰∏éÂÖ∂‰ªñÂ≠òÂÇ®ÂºïÊìéË°®Ê∑∑Áî®„ÄÇÂç≥‰ΩøÊúâ‰∫õÊìç‰ΩúÁ≥ªÁªüÈôêÂà∂Êñá‰ª∂Â§ßÂ∞è‰∏∫ 2GBÔºåInnoDB ‰ªçÁÑ∂ÂèØ‰ª•Â§ÑÁêÜ„ÄÇ`ÂΩìÂ§ÑÁêÜÂ§ßÊï∞ÊçÆÈáèÊó∂ÔºåInnoDB ÂÖºÈ°æ CPUÔºå‰ª•ËææÂà∞ÊúÄÂ§ßÊÄßËÉΩ`\n\n## 7.2 InnoDB Âíå ACID Ê®°Âûã\n\nACID Ê®°ÂûãÊòØ‰∏ÄÁ≥ªÂàóÊï∞ÊçÆÂ∫ìËÆæËÆ°ËßÑÂàôÔºåËøô‰∫õËßÑÂàôÁùÄÈáçÂº∫Ë∞ÉÂèØÈù†ÊÄßÔºåËÄåÂèØÈù†ÊÄßÂØπ‰∫éÂïÜ‰∏öÊï∞ÊçÆÂíå‰ªªÂä°ÂÖ≥ÈîÆÂûãÂ∫îÁî®ÈùûÂ∏∏ÈáçË¶Å„ÄÇMySQL ÂåÖÂê´Á±ª‰ºº InnoDB Â≠òÂÇ®ÂºïÊìéÁöÑÁªÑ‰ª∂Ôºå‰∏é ACID Ê®°ÂûãÁ¥ßÂØÜÁõ∏ËøûÔºåËøôÊ†∑Âá∫Áé∞ÊÑèÂ§ñÊó∂ÔºåÊï∞ÊçÆ‰∏ç‰ºöÂ¥©Ê∫ÉÔºåÁªìÊûú‰∏ç‰ºöÂ§±Áúü„ÄÇÂ¶ÇÊûú‰æùËµñ ACID Ê®°ÂûãÔºåÂèØ‰ª•‰∏ç‰ΩøÁî®‰∏ÄËá¥ÊÄßÊ£ÄÊü•ÂíåÂ¥©Ê∫ÉÊÅ¢Â§çÊú∫Âà∂„ÄÇÂ¶ÇÊûúÊã•ÊúâÈ¢ùÂ§ñÁöÑËΩØ‰ª∂‰øùÊä§ÔºåÊûÅÂèØÈù†ÁöÑÁ°¨‰ª∂ÊàñËÄÖÂ∫îÁî®ÂèØ‰ª•ÂÆπÂøç‰∏ÄÂ∞èÈÉ®ÂàÜÁöÑÊï∞ÊçÆ‰∏¢Â§±Âíå‰∏ç‰∏ÄËá¥ÔºåÂèØ‰ª•Â∞Ü MySQL ËÆæÁΩÆË∞ÉÊï¥‰∏∫Âè™‰æùËµñÈÉ®ÂàÜ ACID ÁâπÊÄßÔºå‰ª•ËææÂà∞Êõ¥È´òÁöÑÊÄßËÉΩ„ÄÇ‰∏ãÈù¢ËÆ≤Ëß£ InnoDB Â≠òÂÇ®ÂºïÊìé‰∏é ACID Ê®°ÂûãÁõ∏Âêå‰ΩúÁî®ÁöÑÂõõ‰∏™ÊñπÈù¢„ÄÇ\n\n1. **ÂéüÂ≠êÊñπÈù¢** ACID ÁöÑÂéüÂ≠êÊñπÈù¢‰∏ªË¶ÅÊ∂âÂèä InnoDB ‰∫ãÂä°Ôºå‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄß‰∏ªË¶ÅÂåÖÊã¨:\n   - Ëá™Âä®Êèê‰∫§ËÆæÁΩÆ„ÄÇ\n   - COMMIT ËØ≠Âè•„ÄÇ\n   - ROLLBACK ËØ≠Âè•„ÄÇ\n   - Êìç‰Ωú INFORMATION_SCHEMA Â∫ì‰∏≠ÁöÑË°®Êï∞ÊçÆ„ÄÇ\n2. **‰∏ÄËá¥ÊÄßÊñπÈù¢** ACID Ê®°ÂûãÁöÑ‰∏ÄËá¥ÊÄß‰∏ªË¶ÅÊ∂âÂèä‰øùÊä§Êï∞ÊçÆ‰∏çÂ¥©Ê∫ÉÁöÑÂÜÖÈÉ® InnoDB Â§ÑÁêÜËøáÁ®ãÔºå‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄß‰∏ªË¶ÅÂåÖÊã¨:\n   - InnoDB ÂèåÂÜôÁºìÂ≠ò„ÄÇ\n   - InnoDB Â¥©Ê∫ÉÊÅ¢Â§ç„ÄÇ\n3. **ÈöîÁ¶ªÊñπÈù¢** ÈöîÁ¶ªÊòØÂ∫îÁî®‰∫é‰∫ãÂä°ÁöÑÁ∫ßÂà´Ôºå‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄß‰∏ªË¶ÅÂåÖÊã¨:\n   - Ëá™Âä®Êèê‰∫§ËÆæÁΩÆ„ÄÇ\n   - SET ISOLATION LEVEL ËØ≠Âè•„ÄÇ\n   - InnoDB ÈîÅÁöÑ‰ΩéÁ∫ßÂà´‰ø°ÊÅØ„ÄÇ\n4. **ËÄê‰πÖÊÄßÊñπÈù¢** ACID Ê®°ÂûãÁöÑËÄê‰πÖÊÄß‰∏ªË¶ÅÊ∂âÂèä‰∏éÁ°¨‰ª∂ÈÖçÁΩÆÁõ∏‰∫íÂΩ±ÂìçÁöÑ MySQL ËΩØ‰ª∂ÁâπÊÄß„ÄÇÁî±‰∫éÁ°¨‰ª∂Â§çÊùÇÂ§öÊ†∑ÂåñÔºåËÄê‰πÖÊÄßÊñπÈù¢Ê≤°ÊúâÂÖ∑‰ΩìÁöÑËßÑÂàôÂèØÂæ™„ÄÇ‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄßÊúâ:\n   - InnoDB ÂèåÂÜôÁºìÂ≠òÔºåÈÄöËøá innodb_doublewrite ÈÖçÁΩÆÈ°πÈÖçÁΩÆ„ÄÇ\n   - ÈÖçÁΩÆÈ°π innodb_flush_log_at_trx_commit„ÄÇ\n   - ÈÖçÁΩÆÈ°π sync_binlog„ÄÇ\n   - ÈÖçÁΩÆÈ°π innodb_file_per_table„ÄÇ\n   - Â≠òÂÇ®ËÆæÂ§áÁöÑÂÜôÂÖ•ÁºìÂ≠ò„ÄÇ\n   - Â≠òÂÇ®ËÆæÂ§áÁöÑÂ§áÁî®ÁîµÊ±†ÁºìÂ≠ò„ÄÇ\n   - ËøêË°å MySQL ÁöÑÊìç‰ΩúÁ≥ªÁªü„ÄÇ\n   - ÊåÅÁª≠ÁöÑÁîµÂäõ‰æõÂ∫î„ÄÇ\n   - Â§á‰ªΩÁ≠ñÁï•„ÄÇ\n   - ÂØπÂàÜÂ∏ÉÂºèÊàñÊâòÁÆ°ÁöÑÂ∫îÁî®ÔºåÊúÄ‰∏ªË¶ÅÁöÑÂú®‰∫éÁ°¨‰ª∂ËÆæÂ§áÁöÑÂú∞ÁÇπ‰ª•ÂèäÁΩëÁªúÊÉÖÂÜµ„ÄÇ\n\n## 7.3 InnoDBÊû∂ÊûÑ\n\n1. **ÁºìÂÜ≤Ê±†** ÁºìÂÜ≤Ê±†ÊòØ‰∏ªÂÜÖÂ≠ò‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÁ©∫Èó¥ÔºåÁî®Êù•ÁºìÂ≠òÂ∑≤‰ΩøÁî®ÁöÑË°®ÂíåÁ¥¢ÂºïÊï∞ÊçÆ„ÄÇÁºìÂÜ≤Ê±†‰ΩøÂæóÁªèÂ∏∏Ë¢´‰ΩøÁî®ÁöÑÊï∞ÊçÆËÉΩÂ§üÁõ¥Êé•Âú®ÂÜÖÂ≠ò‰∏≠Ëé∑ÂæóÔºå‰ªéËÄåÊèêÈ´òÈÄüÂ∫¶„ÄÇ\n2. **Êõ¥ÊîπÁºìÂ≠ò** Êõ¥ÊîπÁºìÂ≠òÊòØ‰∏Ä‰∏™ÁâπÊÆäÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂΩìÂèóÂΩ±ÂìçÁöÑÁ¥¢ÂºïÈ°µ‰∏çÂú®ÁºìÂ≠ò‰∏≠Êó∂ÔºåÊõ¥ÊîπÁºìÂ≠ò‰ºöÁºìÂ≠òËæÖÂä©Á¥¢ÂºïÈ°µÁöÑÊõ¥Êîπ„ÄÇÁ¥¢ÂºïÈ°µË¢´ÂÖ∂‰ªñËØªÂèñÊìç‰ΩúÊó∂‰ºöÂä†ËΩΩÂà∞ÁºìÂ≠òÊ±†ÔºåÁºìÂ≠òÁöÑÊõ¥ÊîπÂÜÖÂÆπÂ∞±‰ºöË¢´ÂêàÂπ∂„ÄÇ‰∏çÂêå‰∫éÈõÜÁæ§Á¥¢ÂºïÔºåËæÖÂä©Á¥¢ÂºïÂπ∂ÈùûÁã¨‰∏ÄÊó†‰∫åÁöÑ„ÄÇÂΩìÁ≥ªÁªüÂ§ßÈÉ®ÂàÜÈó≤ÁΩÆÊó∂ÔºåÊ∏ÖÈô§Êìç‰Ωú‰ºöÂÆöÊúüËøêË°åÔºåÂ∞ÜÊõ¥Êñ∞ÁöÑÁ¥¢ÂºïÈ°µÂà∑ÂÖ•Á£Å Áõò„ÄÇÊõ¥Êñ∞ÁºìÂ≠òÂêàÂπ∂ÊúüÈó¥ÔºåÂèØËÉΩ‰ºöÂ§ßÂ§ßÈôç‰ΩéÊü•ËØ¢ÁöÑÊÄßËÉΩ„ÄÇÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊõ¥Êñ∞ÁºìÂ≠òÂç†Áî®‰∏ÄÈÉ®ÂàÜ InnoDB ÁºìÂÜ≤Ê±†„ÄÇ Âú®Á£ÅÁõò‰∏≠ÔºåÊõ¥Êñ∞ÁºìÂ≠òÊòØÁ≥ªÁªüË°®Á©∫Èó¥ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÊõ¥Êñ∞ÁºìÂ≠òÁöÑÊï∞ÊçÆÁ±ªÂûãÁî± innodb_change_buffering ÈÖçÁΩÆÈ°πÁÆ°ÁêÜ„ÄÇ\n3. **Ëá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢Âºï** Ëá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢ÂºïÂ∞ÜË¥üËΩΩÂíåË∂≥Â§üÁöÑÂÜÖÂ≠òÁªìÂêàËµ∑Êù•Ôºå‰ΩøÂæó InnoDB ÂÉèÂÜÖÂ≠òÊï∞ÊçÆÂ∫ì‰∏ÄÊ†∑ËøêË°åÔºå ‰∏çÈúÄË¶ÅÈôç‰Ωé‰∫ãÂä°‰∏äÁöÑÊÄßËÉΩÊàñÂèØÈù†ÊÄß„ÄÇËøô‰∏™ÁâπÊÄßÈÄöËøá innodb_adaptive_hash_index ÈÄâÈ°πÈÖçÁΩÆÔºåÊàñËÄÖÈÄöËøá `-- skip-innodb_adaptive_hash_index` ÂëΩ‰ª§Ë°åÂú®ÊúçÂä°ÂêØÂä®Êó∂ÂÖ≥Èó≠„ÄÇ\n4. **ÈáçÂÅöÊó•ÂøóÁºìÂ≠ò** ÈáçÂÅöÊó•ÂøóÁºìÂ≠òÂ≠òÊîæË¶ÅÊîæÂÖ•ÈáçÂÅöÊó•ÂøóÁöÑÊï∞ÊçÆ„ÄÇÈáçÂÅöÊó•ÂøóÁºìÂ≠òÂ§ßÂ∞èÈÄöËøá innodb_log_buffer_size ÈÖçÁΩÆÈ°πÈÖçÁΩÆ„ÄÇÈáçÂÅöÊó•ÂøóÁºìÂ≠ò‰ºöÂÆöÊúüÂú∞Â∞ÜÊó•ÂøóÊñá‰ª∂Âà∑ÂÖ•Á£ÅÁõò„ÄÇÂ§ßÂûãÁöÑÈáçÂÅöÊó•ÂøóÁºìÂ≠ò‰ΩøÂæóÂ§ßÂûã‰∫ãÂä°ËÉΩÂ§üÊ≠£Â∏∏ËøêË°åËÄå‰∏çÈúÄË¶ÅÂÜôÂÖ•Á£ÅÁõò„ÄÇ\n5. **Á≥ªÁªüË°®Á©∫Èó¥** Á≥ªÁªüË°®Á©∫Èó¥ÂåÖÊã¨ InnoDB Êï∞ÊçÆÂ≠óÂÖ∏„ÄÅÂèåÂÜôÁºìÂ≠ò„ÄÅÊõ¥Êñ∞ÁºìÂ≠òÂíåÊí§ÈîÄÊó•ÂøóÔºåÂêåÊó∂‰πüÂåÖÊã¨Ë°®ÂíåÁ¥¢ÂºïÊï∞ÊçÆ„ÄÇÂ§öË°®ÂÖ±‰∫´ÔºåÁ≥ªÁªüË°®Á©∫Èó¥Ë¢´ËßÜ‰∏∫ÂÖ±‰∫´Ë°®Á©∫Èó¥„ÄÇ\n6. **ÂèåÂÜôÁºìÂ≠ò** ÂèåÂÜôÁºìÂ≠ò‰Ωç‰∫éÁ≥ªÁªüË°®Á©∫Èó¥‰∏≠ÔºåÁî®‰∫éÂÜôÂÖ•‰ªéÁºìÂ≠òÊ±†Âà∑Êñ∞ÁöÑÊï∞ÊçÆÈ°µ„ÄÇÂè™ÊúâÂú®Âà∑Êñ∞Âπ∂ÂÜôÂÖ•ÂèåÂÜôÁºìÂ≠òÂêéÔºåInnoDB Êâç‰ºöÂ∞ÜÊï∞ÊçÆÈ°µÂÜôÂÖ•ÂêàÈÄÇÁöÑ‰ΩçÁΩÆ„ÄÇ\n7. **Êí§ÈîÄÊó•Âøó** Êí§ÈîÄÊó•ÂøóÊòØ‰∏ÄÁ≥ªÂàó‰∏é‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÊí§ÈîÄËÆ∞ÂΩïÁöÑÈõÜÂêàÔºåÂåÖÂê´Â¶Ç‰ΩïÊí§ÈîÄ‰∫ãÂä°ÊúÄËøëÁöÑÊõ¥Êîπ„ÄÇÂ¶ÇÊûúÂÖ∂‰ªñ‰∫ãÂä°Ë¶ÅÊü•ËØ¢ÂéüÂßãÊï∞ÊçÆÔºåÂèØ‰ª•‰ªéÊí§ÈîÄÊó•ÂøóËÆ∞ÂΩï‰∏≠ËøΩÊ∫ØÊú™Êõ¥ÊîπÁöÑÊï∞ÊçÆ„ÄÇÊí§ÈîÄÊó•ÂøóÂ≠òÂú®‰∫éÊí§ÈîÄÊó•ÂøóÁâáÊÆµ‰∏≠ÔºåËøô‰∫õÁâáÊÆµÂåÖÂê´‰∫éÂõûÊªöÁâáÊÆµ‰∏≠„ÄÇ\n8. **ÊØè‰∏™Ë°®‰∏Ä‰∏™Êñá‰ª∂ÁöÑË°®Á©∫Èó¥** ÊØè‰∏™Ë°®‰∏Ä‰∏™Êñá‰ª∂ÁöÑË°®Á©∫Èó¥ÊòØÊåáÊØè‰∏™ÂçïÁã¨ÁöÑË°®Á©∫Èó¥ÂàõÂª∫Âú®Ëá™Ë∫´ÁöÑÊï∞ÊçÆÊñá‰ª∂‰∏≠Ôºå ËÄå‰∏çÊòØÁ≥ªÁªüË°®Á©∫Èó¥‰∏≠„ÄÇËøô‰∏™ÂäüËÉΩÈÄöËøá innodb_file_per_table ÈÖçÁΩÆÈ°πÂºÄÂêØ„ÄÇÊØè‰∏™Ë°®Á©∫Èó¥Áî±‰∏Ä‰∏™ÂçïÁã¨ÁöÑ `.ibd` Êï∞ÊçÆÊñá‰ª∂‰ª£Ë°®ÔºåËØ•Êñá‰ª∂ÈªòËÆ§Ë¢´ÂàõÂª∫Âú®Êï∞ÊçÆÂ∫ìÁõÆÂΩï‰∏≠„ÄÇ\n9. **ÈÄöÁî®Ë°®Á©∫Èó¥** ‰ΩøÁî® CREATE TABLESPACE ËØ≠Ê≥ïÂàõÂª∫ÂÖ±‰∫´ÁöÑ InnoDB Ë°®Á©∫Èó¥„ÄÇÈÄöÁî®Ë°®Á©∫Èó¥ÂèØ‰ª•ÂàõÂª∫Âú® MySQL Êï∞ÊçÆÁõÆÂΩï‰πãÂ§ñËÉΩÂ§üÁÆ°ÁêÜÂ§ö‰∏™Ë°®Âπ∂ÊîØÊåÅÊâÄÊúâË°åÊ†ºÂºèÁöÑË°®„ÄÇ\n10. **Êí§ÈîÄË°®Á©∫Èó¥** Êí§ÈîÄË°®Á©∫Èó¥Áî±‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂåÖÂê´Êí§ÈîÄÊó•ÂøóÁöÑÊñá‰ª∂ÁªÑÊàê„ÄÇÊí§ÈîÄË°®Á©∫Èó¥ÁöÑÊï∞ÈáèÁî± innodb_undo_tablespaces ÈÖçÁΩÆÈ°πÈÖçÁΩÆ„ÄÇ\n11. **‰∏¥Êó∂Ë°®Á©∫Èó¥** Áî®Êà∑ÂàõÂª∫ÁöÑ‰∏¥Êó∂Ë°®Á©∫Èó¥ÂíåÂü∫‰∫éÁ£ÅÁõòÁöÑÂÜÖÈÉ®‰∏¥Êó∂Ë°®ÈÉΩÂàõÂª∫‰∫é‰∏¥Êó∂Ë°®Á©∫Èó¥„ÄÇ innodb_temp_data_file_path ÈÖçÁΩÆÈ°πÂÆö‰πâ‰∫ÜÁõ∏ÂÖ≥ÁöÑË∑ØÂæÑ„ÄÅÂêçÁß∞„ÄÅÂ§ßÂ∞èÂíåÂ±ûÊÄß„ÄÇÂ¶ÇÊûúËØ•ÂÄº‰∏∫Á©∫ÔºåÈªòËÆ§‰ºöÂú® innodb_data_home_dir ÂèòÈáèÊåáÂÆöÁöÑÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Ëá™Âä®Êâ©Â±ïÁöÑÊï∞ÊçÆÊñá‰ª∂„ÄÇ\n12. **ÈáçÂÅöÊó•Âøó** ÈáçÂÅöÊó•ÂøóÊòØÂü∫‰∫éÁ£ÅÁõòÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂú®Â¥©Ê∫ÉÊÅ¢Â§çÊúüÈó¥‰ΩøÁî®ÔºåÁî®Êù•Á∫†Ê≠£Êï∞ÊçÆ„ÄÇÊ≠£Â∏∏Êìç‰ΩúÊúüÈó¥Ôºå ÈáçÂÅöÊó•Âøó‰ºöÂ∞ÜËØ∑Ê±ÇÊï∞ÊçÆËøõË°åÁºñÁ†ÅÔºåËøô‰∫õËØ∑Ê±Ç‰ºöÊîπÂèò InnoDB Ë°®Êï∞ÊçÆ„ÄÇÈÅáÂà∞ÊÑèÂ§ñÂ¥©Ê∫ÉÂêéÔºåÊú™ÂÆåÊàêÁöÑÊõ¥Êîπ‰ºöËá™Âä®Âú®ÂàùÂßãÂåñÊúüÈó¥ÈáçÊñ∞ËøõË°å„ÄÇ","slug":"Â≠òÂÇ®ÂºïÊìé","published":1,"updated":"2024-04-01T15:42:25.477Z","comments":1,"layout":"post","photos":[],"_id":"cluh5pivd0008gs2va25q3gth","content":"<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335455.png\" alt=\"image-20220713231227788\"></p>\n<h1 id=\"1-Êü•ÁúãÂ≠òÂÇ®ÂºïÊìé\"><a href=\"#1-Êü•ÁúãÂ≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"1. Êü•ÁúãÂ≠òÂÇ®ÂºïÊìé\"></a>1. Êü•ÁúãÂ≠òÂÇ®ÂºïÊìé</h1><p>Êü•ÁúãmysqlÊèê‰æõ‰ªÄ‰πàÂ≠òÂÇ®ÂºïÊìé:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> engines;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335257.png\" alt=\"image-20220713223052510\"></p>\n<h1 id=\"2-ËÆæÁΩÆÁ≥ªÁªüÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé\"><a href=\"#2-ËÆæÁΩÆÁ≥ªÁªüÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"2. ËÆæÁΩÆÁ≥ªÁªüÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé\"></a>2. ËÆæÁΩÆÁ≥ªÁªüÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé</h1><ul>\n<li><p>Êü•ÁúãÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show variables like &#x27;%storage_engine%&#x27;; </span><br><span class=\"line\">#Êàñ</span><br><span class=\"line\">SELECT @@default_storage_engine;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335167.png\" alt=\"image-20220713223312035\"></p>\n</li>\n<li><p>‰øÆÊîπÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé</p>\n<p>Â¶ÇÊûúÂú®ÂàõÂª∫Ë°®ÁöÑËØ≠Âè•‰∏≠Ê≤°ÊúâÊòæÂºèÊåáÂÆöË°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÁöÑËØùÔºåÈÇ£Â∞±‰ºöÈªòËÆ§‰ΩøÁî® <code>InnoDB</code> ‰Ωú‰∏∫Ë°®ÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇ Â¶ÇÊûúÊàë‰ª¨ÊÉ≥ÊîπÂèòË°®ÁöÑÈªòËÆ§Â≠òÂÇ®ÂºïÊìéÁöÑËØùÔºåÂèØ‰ª•ËøôÊ†∑ÂÜôÂêØÂä®ÊúçÂä°Âô®ÁöÑÂëΩ‰ª§Ë°å:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SET DEFAULT_STORAGE_ENGINE=MyISAM;</span><br></pre></td></tr></table></figure>\n\n<p>ÊàñËÄÖ‰øÆÊîπ <code>my.cnf</code> Êñá‰ª∂:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">default-storage-engine=MyISAM</span><br><span class=\"line\"># ÈáçÂêØÊúçÂä°</span><br><span class=\"line\">systemctl restart mysqld.service</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"3-ËÆæÁΩÆË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\"><a href=\"#3-ËÆæÁΩÆË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"3. ËÆæÁΩÆË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\"></a>3. ËÆæÁΩÆË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé</h1><p>Â≠òÂÇ®ÂºïÊìéÊòØË¥üË¥£ÂØπË°®‰∏≠ÁöÑÊï∞ÊçÆËøõË°åÊèêÂèñÂíåÂÜôÂÖ•Â∑•‰ΩúÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•‰∏∫ <code>‰∏çÂêåÁöÑË°®ËÆæÁΩÆ‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìé</code> Ôºå‰πüÂ∞±ÊòØËØ¥‰∏çÂêåÁöÑË°®ÂèØ‰ª•Êúâ‰∏çÂêåÁöÑÁâ©ÁêÜÂ≠òÂÇ®ÁªìÊûÑÔºå‰∏çÂêåÁöÑÊèêÂèñÂíåÂÜôÂÖ•ÊñπÂºè„ÄÇ</p>\n<h2 id=\"3-1-ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÂ≠òÂÇ®ÂºïÊìé\"><a href=\"#3-1-ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÂ≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"3.1 ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÂ≠òÂÇ®ÂºïÊìé\"></a>3.1 ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÂ≠òÂÇ®ÂºïÊìé</h2><p>Êàë‰ª¨‰πãÂâçÂàõÂª∫Ë°®ÁöÑËØ≠Âè•ÈÉΩÊ≤°ÊúâÊåáÂÆöË°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºåÈÇ£Â∞±‰ºö‰ΩøÁî®ÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé <code>InnoDB</code> „ÄÇÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥ÊòæÂºèÁöÑÊåáÂÆö‰∏Ä‰∏ãË°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºåÈÇ£ÂèØ‰ª•Ëøô‰πàÂÜôÔºö</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TABLE Ë°®Âêç( </span><br><span class=\"line\">  Âª∫Ë°®ËØ≠Âè•;</span><br><span class=\"line\">) ENGINE = Â≠òÂÇ®ÂºïÊìéÂêçÁß∞;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-2-‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\"><a href=\"#3-2-‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"3.2 ‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\"></a>3.2 ‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé</h2><p>Â¶ÇÊûúË°®Â∑≤ÁªèÂª∫Â•Ω‰∫ÜÔºåÊàë‰ª¨‰πüÂèØ‰ª•‰ΩøÁî®‰∏ãËæπËøô‰∏™ËØ≠Âè•Êù•‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE Ë°®Âêç ENGINE = Â≠òÂÇ®ÂºïÊìéÂêçÁß∞; </span><br></pre></td></tr></table></figure>\n\n<p>ÊØîÂ¶ÇÊàë‰ª¨‰øÆÊîπ‰∏Ä‰∏ã <code>engine_demo_table</code> Ë°®ÁöÑÂ≠òÂÇ®ÂºïÊìé:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; ALTER TABLE engine_demo_table ENGINE = InnoDB;</span><br><span class=\"line\">Query OK, 0 rows affected (0.05 sec)</span><br><span class=\"line\">Records: 0  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>\n\n<p>ËøôÊó∂Êàë‰ª¨ÂÜçÊü•Áúã‰∏Ä‰∏ã <code>engine_demo_table</code> ÁöÑË°®ÁªìÊûÑ:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SHOW</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> engine_demo_table\\G</span><br><span class=\"line\"><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span> <span class=\"number\">1.</span> <span class=\"type\">row</span> <span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">Table</span>: engine_demo_table</span><br><span class=\"line\"><span class=\"keyword\">Create</span> <span class=\"keyword\">Table</span>: <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `engine_demo_table` (</span><br><span class=\"line\">  `i` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span></span><br><span class=\"line\">) ENGINE<span class=\"operator\">=</span>InnoDB <span class=\"keyword\">DEFAULT</span> CHARSET<span class=\"operator\">=</span>utf8</span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.01</span> sec)</span><br></pre></td></tr></table></figure>\n\n<p>ÂèØ‰ª•ÁúãÂà∞ËØ•Ë°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÂ∑≤ÁªèÊîπ‰∏∫<code>InnoDB</code>‰∫Ü„ÄÇ</p>\n<h1 id=\"4-ÂºïÊìé‰ªãÁªç\"><a href=\"#4-ÂºïÊìé‰ªãÁªç\" class=\"headerlink\" title=\"4. ÂºïÊìé‰ªãÁªç\"></a>4. ÂºïÊìé‰ªãÁªç</h1><h2 id=\"4-1-InnoDB-ÂºïÊìéÔºöÂÖ∑Â§á-Â§ñÈîÆ-ÊîØÊåÅÂäüËÉΩÁöÑ‰∫ãÂä°Â≠òÂÇ®ÂºïÊìé\"><a href=\"#4-1-InnoDB-ÂºïÊìéÔºöÂÖ∑Â§á-Â§ñÈîÆ-ÊîØÊåÅÂäüËÉΩÁöÑ‰∫ãÂä°Â≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"4.1 InnoDB ÂºïÊìéÔºöÂÖ∑Â§á&#x3D;&#x3D;Â§ñÈîÆ&#x3D;&#x3D;ÊîØÊåÅÂäüËÉΩÁöÑ‰∫ãÂä°Â≠òÂÇ®ÂºïÊìé\"></a>4.1 InnoDB ÂºïÊìéÔºöÂÖ∑Â§á&#x3D;&#x3D;Â§ñÈîÆ&#x3D;&#x3D;ÊîØÊåÅÂäüËÉΩÁöÑ‰∫ãÂä°Â≠òÂÇ®ÂºïÊìé</h2><ul>\n<li>MySQL ‰ªé 3.23.34a ÂºÄÂßãÂ∞±ÂåÖÂê´ InnoDB Â≠òÂÇ®ÂºïÊìé„ÄÇ<code>Â§ß‰∫éÁ≠â‰∫é 5.5 ‰πãÂêéÔºåÈªòËÆ§ÈááÁî® InnoDB ÂºïÊìé</code> </li>\n<li>InnoDB ÊòØ MySQL ÁöÑ &#x3D;&#x3D;ÈªòËÆ§‰∫ãÂä°ÂûãÂºïÊìé&#x3D;&#x3D; ÔºåÂÆÉË¢´ËÆæËÆ°Áî®Êù•Â§ÑÁêÜÂ§ßÈáèÁöÑÁü≠ÊúüÔºàshort-livedÔºâ‰∫ãÂä°„ÄÇÂèØ‰ª•Á°Æ‰øù‰∫ãÂä°ÁöÑÂÆåÊï¥Êèê‰∫§ÔºàCommitÔºâÂíåÂõûÊªöÔºàRollbackÔºâ„ÄÇ</li>\n<li>&#x3D;&#x3D;Èô§‰∫ÜÂ¢ûÂä†ÂíåÊü•ËØ¢Â§ñÔºåËøòÈúÄË¶ÅÊõ¥Êñ∞„ÄÅÂà†Èô§Êìç‰Ωú&#x3D;&#x3D;ÔºåÈÇ£‰πàÔºåÂ∫î‰ºòÂÖàÈÄâÊã© InnoDB Â≠òÂÇ®ÂºïÊìé„ÄÇ</li>\n<li><strong>Èô§ÈùûÊúâÈùûÂ∏∏ÁâπÂà´ÁöÑÂéüÂõ†ÈúÄË¶Å‰ΩøÁî®ÂÖ∂‰ªñÁöÑÂ≠òÂÇ®ÂºïÊìéÔºåÂê¶ÂàôÂ∫îËØ•‰ºòÂÖàËÄÉËôëInnoDBÂºïÊìé</strong>„ÄÇ Êï∞ÊçÆÊñá‰ª∂ÁªìÊûÑÔºö</li>\n<li><code>Ë°®Âêç.frm</code> Â≠òÂÇ®Ë°®ÁªìÊûÑÔºàMySQL8.0Êó∂ÔºåÂêàÂπ∂Âú®Ë°®Âêç.ibd‰∏≠Ôºâ</li>\n<li><code>Ë°®Âêç.ibd</code> Â≠òÂÇ®Êï∞ÊçÆÂíåÁ¥¢Âºï</li>\n<li>&#x3D;&#x3D;InnoDBÊòØ ‰∏∫Â§ÑÁêÜÂ∑®Â§ßÊï∞ÊçÆÈáèÁöÑÊúÄÂ§ßÊÄßËÉΩËÆæËÆ°&#x3D;&#x3D;„ÄÇ<ul>\n<li>Âú®‰ª•ÂâçÁöÑÁâàÊú¨‰∏≠ÔºåÂ≠óÂÖ∏Êï∞ÊçÆ‰ª•ÂÖÉÊï∞ÊçÆÊñá‰ª∂„ÄÅÈùû‰∫ãÂä°Ë°®Á≠âÊù•Â≠òÂÇ®„ÄÇÁé∞Âú®Ëøô‰∫õÂÖÉÊï∞ÊçÆÊñá‰ª∂Ë¢´Âà†Èô§‰∫Ü„ÄÇÊØîÂ¶ÇÔºö<code>.frm</code> Ôºå <code>.par</code> Ôºå <code>.trn</code> Ôºå <code>.isl</code> Ôºå Á≠âÈÉΩÂú® MySQL 8.0 ‰∏≠‰∏çÂ≠òÂú®‰∫Ü„ÄÇ</li>\n</ul>\n</li>\n<li>ÂØπÊØî MyISAM ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºå<code>InnoDBÂÜôÁöÑÂ§ÑÁêÜÊïàÁéáÂ∑Æ‰∏Ä‰∫õ</code> ÔºåÂπ∂‰∏î‰ºöÂç†Áî®Êõ¥Â§öÁöÑÁ£ÅÁõòÁ©∫Èó¥‰ª•‰øùÂ≠òÊï∞ÊçÆÂíåÁ¥¢Âºï„ÄÇ</li>\n<li>MyISAM Âè™ÁºìÂ≠òÁ¥¢ÂºïÔºå‰∏çÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆÔºõInnoDB‰∏ç‰ªÖÁºìÂ≠òÁ¥¢ÂºïËøòË¶ÅÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆ(Âä†ËΩΩÊï∞ÊçÆÊó∂Ôºå‰πüË¶ÅÂä†ËΩΩÁ¥¢Âºï)Ôºå<code>ÂØπÂÜÖÂ≠òË¶ÅÊ±ÇËæÉÈ´ò</code> ÔºåËÄå‰∏îÂÜÖÂ≠òÂ§ßÂ∞èÂØπÊÄßËÉΩÊúâÂÜ≥ÂÆöÊÄßÁöÑÂΩ±Âìç„ÄÇ</li>\n</ul>\n<h2 id=\"4-2-MyISAM-ÂºïÊìéÔºö‰∏ªË¶ÅÁöÑÈùû‰∫ãÂä°Â§ÑÁêÜÂ≠òÂÇ®ÂºïÊìé\"><a href=\"#4-2-MyISAM-ÂºïÊìéÔºö‰∏ªË¶ÅÁöÑÈùû‰∫ãÂä°Â§ÑÁêÜÂ≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"4.2 MyISAM ÂºïÊìéÔºö‰∏ªË¶ÅÁöÑÈùû‰∫ãÂä°Â§ÑÁêÜÂ≠òÂÇ®ÂºïÊìé\"></a>4.2 MyISAM ÂºïÊìéÔºö‰∏ªË¶ÅÁöÑÈùû‰∫ãÂä°Â§ÑÁêÜÂ≠òÂÇ®ÂºïÊìé</h2><ul>\n<li>MyISAM Êèê‰æõ‰∫ÜÂ§ßÈáèÁöÑÁâπÊÄßÔºåÂåÖÊã¨ÂÖ®ÊñáÁ¥¢Âºï„ÄÅÂéãÁº©„ÄÅÁ©∫Èó¥ÂáΩÊï∞ÔºàGISÔºâÁ≠âÔºå‰ΩÜ MyISAM <code>‰∏çÊîØÊåÅ‰∫ãÂä°„ÄÅË°åÁ∫ßÈîÅ„ÄÅÂ§ñÈîÆ</code>ÔºåÊúâ‰∏Ä‰∏™ÊØ´Êó†ÁñëÈóÆÁöÑÁº∫Èô∑Â∞±ÊòØ <code>Â¥©Ê∫ÉÂêéÊó†Ê≥ïÂÆâÂÖ®ÊÅ¢Â§ç</code>„ÄÇ</li>\n<li><code>5.5 ‰πãÂâçÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé</code></li>\n<li>‰ºòÂäøÊòØËÆøÈóÆÁöÑ <code>ÈÄüÂ∫¶Âø´</code> ÔºåÂØπ‰∫ãÂä°ÂÆåÊï¥ÊÄßÊ≤°ÊúâË¶ÅÊ±ÇÊàñËÄÖ‰ª• SELECT„ÄÅINSERT ‰∏∫‰∏ªÁöÑÂ∫îÁî®</li>\n<li>ÈíàÂØπÊï∞ÊçÆÁªüËÆ°ÊúâÈ¢ùÂ§ñÁöÑÂ∏∏Êï∞Â≠òÂÇ®„ÄÇÊïÖËÄå<code>count(*)</code> ÁöÑÊü•ËØ¢ÊïàÁéáÂæàÈ´ò</li>\n<li>Êï∞ÊçÆÊñá‰ª∂ÁªìÊûÑ<ul>\n<li><code>Ë°®Âêç.frm</code> Â≠òÂÇ®Ë°®ÁªìÊûÑ</li>\n<li><code>Ë°®Âêç.MYD</code> Â≠òÂÇ®Êï∞ÊçÆÔºàMYDataÔºâ</li>\n<li><code>Ë°®Âêç.MYI</code> Â≠òÂÇ®Á¥¢ÂºïÔºàMYIndexÔºâ</li>\n</ul>\n</li>\n<li>Â∫îÁî®Âú∫ÊôØ:Âè™ËØªÂ∫îÁî®ÊàñËÄÖ‰ª•ËØª‰∏∫‰∏ªÁöÑ‰∏öÂä°</li>\n</ul>\n<h2 id=\"4-3-Archive-ÂºïÊìéÔºöÁî®‰∫éÊï∞ÊçÆÂ≠òÊ°£\"><a href=\"#4-3-Archive-ÂºïÊìéÔºöÁî®‰∫éÊï∞ÊçÆÂ≠òÊ°£\" class=\"headerlink\" title=\"4.3 Archive ÂºïÊìéÔºöÁî®‰∫éÊï∞ÊçÆÂ≠òÊ°£\"></a>4.3 Archive ÂºïÊìéÔºöÁî®‰∫éÊï∞ÊçÆÂ≠òÊ°£</h2><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335661.png\" alt=\"image-20220713231445827\"></p>\n<p>‰∏ãË°®Â±ïÁ§∫‰∫Ü ARCHIVE Â≠òÂÇ®ÂºïÊìéÂäüËÉΩÔºö</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">ÁâπÂæÅ</th>\n<th align=\"left\">ÊîØÊåÅ</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">BÊ†ëÁ¥¢Âºï</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\"><code>Â§á‰ªΩ/Êó∂Èó¥ÁÇπÊÅ¢Â§ç</code>(Âú®ÊúçÂä°Âô®‰∏≠ÂÆûÁé∞ÔºåËÄå‰∏çÊòØÂú®Â≠òÂÇ®ÂºïÊìé‰∏≠)</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ÈõÜÁæ§Êï∞ÊçÆÂ∫ìÊîØÊåÅ</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ËÅöÈõÜÁ¥¢Âºï</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ÂéãÁº©Êï∞ÊçÆ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Êï∞ÊçÆÁºìÂ≠ò</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Âä†ÂØÜÊï∞ÊçÆ(Âä†ÂØÜÂäüËÉΩÂú®ÊúçÂä°Âô®‰∏≠ÂÆûÁé∞)</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Â§ñÈîÆÊîØÊåÅ</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ÂÖ®ÊñáÊ£ÄÁ¥¢Á¥¢Âºï</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Âú∞ÁêÜÁ©∫Èó¥Êï∞ÊçÆÁ±ªÂûãÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Âú∞ÁêÜÁ©∫Èó¥Á¥¢ÂºïÊîØÊåÅ</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ÂìàÂ∏åÁ¥¢Âºï</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Á¥¢ÂºïÁºìÂ≠ò</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\"><code>ÈîÅÁ≤íÂ∫¶</code></td>\n<td align=\"left\">Ë°åÈîÅ</td>\n</tr>\n<tr>\n<td align=\"left\">MVCC</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Â≠òÂÇ®ÈôêÂà∂</td>\n<td align=\"left\">Ê≤°Êúâ‰ªª‰ΩïÈôêÂà∂</td>\n</tr>\n<tr>\n<td align=\"left\">‰∫§Êòì</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Êõ¥Êñ∞Êï∞ÊçÆÂ≠óÂÖ∏ÁöÑÁªüËÆ°‰ø°ÊÅØ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n</tbody></table>\n<h2 id=\"4-4-Blackhole-ÂºïÊìéÔºö‰∏¢ÂºÉÂÜôÊìç‰ΩúÔºåËØªÊìç‰Ωú‰ºöËøîÂõûÁ©∫ÂÜÖÂÆπ\"><a href=\"#4-4-Blackhole-ÂºïÊìéÔºö‰∏¢ÂºÉÂÜôÊìç‰ΩúÔºåËØªÊìç‰Ωú‰ºöËøîÂõûÁ©∫ÂÜÖÂÆπ\" class=\"headerlink\" title=\"4.4 Blackhole ÂºïÊìéÔºö‰∏¢ÂºÉÂÜôÊìç‰ΩúÔºåËØªÊìç‰Ωú‰ºöËøîÂõûÁ©∫ÂÜÖÂÆπ\"></a>4.4 Blackhole ÂºïÊìéÔºö‰∏¢ÂºÉÂÜôÊìç‰ΩúÔºåËØªÊìç‰Ωú‰ºöËøîÂõûÁ©∫ÂÜÖÂÆπ</h2><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335029.png\" alt=\"image-20220713231926786\"></p>\n<h2 id=\"4-5-CSV-ÂºïÊìéÔºöÂ≠òÂÇ®Êï∞ÊçÆÊó∂Ôºå‰ª•ÈÄóÂè∑ÂàÜÈöîÂêÑ‰∏™Êï∞ÊçÆÈ°π\"><a href=\"#4-5-CSV-ÂºïÊìéÔºöÂ≠òÂÇ®Êï∞ÊçÆÊó∂Ôºå‰ª•ÈÄóÂè∑ÂàÜÈöîÂêÑ‰∏™Êï∞ÊçÆÈ°π\" class=\"headerlink\" title=\"4.5 CSV ÂºïÊìéÔºöÂ≠òÂÇ®Êï∞ÊçÆÊó∂Ôºå‰ª•ÈÄóÂè∑ÂàÜÈöîÂêÑ‰∏™Êï∞ÊçÆÈ°π\"></a>4.5 CSV ÂºïÊìéÔºöÂ≠òÂÇ®Êï∞ÊçÆÊó∂Ôºå‰ª•ÈÄóÂè∑ÂàÜÈöîÂêÑ‰∏™Êï∞ÊçÆÈ°π</h2><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335774.png\" alt=\"image-20220713232053842\"></p>\n<p>‰ΩøÁî®Ê°à‰æãÂ¶Ç‰∏ã</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> test (i <span class=\"type\">INT</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>, c <span class=\"type\">CHAR</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>) ENGINE <span class=\"operator\">=</span> CSV;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.06</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> test <span class=\"keyword\">VALUES</span>(<span class=\"number\">1</span>,<span class=\"string\">&#x27;record one&#x27;</span>),(<span class=\"number\">2</span>,<span class=\"string\">&#x27;record two&#x27;</span>);</span><br><span class=\"line\">Query OK, <span class=\"number\">2</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.05</span> sec)</span><br><span class=\"line\">Records: <span class=\"number\">2</span>  Duplicates: <span class=\"number\">0</span>  Warnings: <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> test; </span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---+------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span>i  <span class=\"operator\">|</span>c           <span class=\"operator\">|</span> </span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---+------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> <span class=\"number\">1</span> <span class=\"operator\">|</span> record <span class=\"keyword\">one</span> <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> <span class=\"number\">2</span> <span class=\"operator\">|</span> record two <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---+------------+</span></span><br><span class=\"line\"><span class=\"number\">2</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ÂàõÂª∫ CSV Ë°®Ëøò‰ºöÂàõÂª∫Áõ∏Â∫îÁöÑ <code>ÂÖÉÊñá‰ª∂</code> ÔºåÁî®‰∫é <code>Â≠òÂÇ®Ë°®ÁöÑÁä∂ÊÄÅ</code> Âíå <code>Ë°®‰∏≠Â≠òÂú®ÁöÑË°åÊï∞</code> „ÄÇÊ≠§Êñá‰ª∂ÁöÑÂêçÁß∞‰∏éË°®ÁöÑÂêçÁß∞Áõ∏ ÂêåÔºåÂêéÁºÄ‰∏∫ <code>CSM</code>„ÄÇÂ¶ÇÂõæÊâÄÁ§∫</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335054.png\" alt=\"image-20220713232615402\"></p>\n<p>Â¶ÇÊûúÊ£ÄÊü• <code>test.CSV</code> ÈÄöËøáÊâßË°å‰∏äËø∞ËØ≠Âè•ÂàõÂª∫ÁöÑÊï∞ÊçÆÂ∫ìÁõÆÂΩï‰∏≠ÁöÑÊñá‰ª∂ÔºåÂÖ∂ÂÜÖÂÆπ‰ΩøÁî®Notepad++ÊâìÂºÄÂ¶Ç‰∏ã:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;1&quot;,&quot;record one&quot;</span><br><span class=\"line\">&quot;2&quot;,&quot;record two&quot;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ËøôÁßçÊ†ºÂºèÂèØ‰ª•Ë¢´ Microsoft Excel Á≠âÁîµÂ≠êË°®Ê†ºÂ∫îÁî®Á®ãÂ∫èËØªÂèñÔºåÁîöËá≥ÂÜôÂÖ•„ÄÇ‰ΩøÁî® Microsoft Excel ÊâìÂºÄÂ¶ÇÂõæÊâÄÁ§∫Ôºö</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335502.png\" alt=\"image-20220713232637071\"></p>\n<h2 id=\"4-6-Memory-ÂºïÊìéÔºöÁΩÆ‰∫éÂÜÖÂ≠òÁöÑË°®\"><a href=\"#4-6-Memory-ÂºïÊìéÔºöÁΩÆ‰∫éÂÜÖÂ≠òÁöÑË°®\" class=\"headerlink\" title=\"4.6 Memory ÂºïÊìéÔºöÁΩÆ‰∫éÂÜÖÂ≠òÁöÑË°®\"></a>4.6 Memory ÂºïÊìéÔºöÁΩÆ‰∫éÂÜÖÂ≠òÁöÑË°®</h2><p><strong>Ê¶ÇËø∞:</strong></p>\n<p>Memory ÈááÁî®ÁöÑÈÄªËæë‰ªãË¥®ÊòØ <code>ÂÜÖÂ≠ò Ôºå ÂìçÂ∫îÈÄüÂ∫¶ÂæàÂø´</code> Ôºå‰ΩÜÊòØÂΩìmysqldÂÆàÊä§ËøõÁ®ãÂ¥©Ê∫ÉÁöÑÊó∂ÂÄô <code>Êï∞ÊçÆ‰ºö‰∏¢Â§±</code> „ÄÇÂè¶ Â§ñÔºåË¶ÅÊ±ÇÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÊòØÊï∞ÊçÆÈïøÂ∫¶‰∏çÂèòÁöÑÊ†ºÂºèÔºåÊØîÂ¶ÇÔºåBlob Âíå Text Á±ªÂûãÁöÑÊï∞ÊçÆ‰∏çÂèØÁî®„ÄÇ</p>\n<p><strong>‰∏ªË¶ÅÁâπÂæÅ:</strong></p>\n<ul>\n<li>Memory ÂêåÊó∂ <code>ÊîØÊåÅÂìàÂ∏åÔºàHASHÔºâÁ¥¢Âºï</code>Âíå <code>B+Ê†ëÁ¥¢Âºï</code> „ÄÇ</li>\n<li>Memory Ë°®Ëá≥Â∞ëÊØî MyISAMË°® Ë¶Å <code>Âø´‰∏Ä‰∏™Êï∞ÈáèÁ∫ß</code>„ÄÇ</li>\n<li>MEMORY <code>Ë°®ÁöÑÂ§ßÂ∞èÊòØÂèóÈôêÂà∂</code>ÁöÑ„ÄÇË°®ÁöÑÂ§ßÂ∞è‰∏ªË¶ÅÂèñÂÜ≥‰∫é‰∏§‰∏™ÂèÇÊï∞ÔºåÂàÜÂà´ÊòØ <code>max_rows</code> Âíå<code>max_heap_table_size</code>„ÄÇÂÖ∂‰∏≠Ôºåmax_rowsÂèØ‰ª•Âú®ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÔºõmax_heap_table_size ÁöÑÂ§ßÂ∞èÈªòËÆ§‰∏∫ 16 MBÔºåÂèØ‰ª•ÊåâÈúÄË¶ÅËøõË°åÊâ©Â§ß„ÄÇ</li>\n<li>Êï∞ÊçÆÊñá‰ª∂‰∏éÁ¥¢ÂºïÊñá‰ª∂ÂàÜÂºÄÂ≠òÂÇ®„ÄÇ</li>\n<li>Áº∫ÁÇπÔºöÂÖ∂Êï∞ÊçÆÊòì‰∏¢Â§±ÔºåÁîüÂëΩÂë®ÊúüÁü≠„ÄÇÂü∫‰∫éËøô‰∏™Áº∫Èô∑ÔºåÈÄâÊã© MEMORY Â≠òÂÇ®ÂºïÊìéÊó∂ÈúÄË¶ÅÁâπÂà´Â∞èÂøÉ„ÄÇ</li>\n</ul>\n<p><strong>‰ΩøÁî®MemoryÂ≠òÂÇ®ÂºïÊìéÁöÑÂú∫ÊôØ:</strong></p>\n<ol>\n<li><code>ÁõÆÊ†áÊï∞ÊçÆÊØîËæÉÂ∞è</code>ÔºåËÄå‰∏îÈùûÂ∏∏ <code>È¢ëÁπÅÁöÑËøõË°åËÆøÈóÆ</code>ÔºåÂú®ÂÜÖÂ≠ò‰∏≠Â≠òÊîæÊï∞ÊçÆÔºåÂ¶ÇÊûúÂ§™Â§ßÁöÑÊï∞ÊçÆ‰ºöÈÄ†Êàê <code>ÂÜÖÂ≠òÊ∫¢Âá∫</code> „ÄÇÂèØ‰ª•ÈÄöËøáÂèÇÊï∞ <code>max_heap_table_size</code> ÊéßÂà∂ Memory Ë°®ÁöÑÂ§ßÂ∞èÔºåÈôêÂà∂ Memory Ë°®ÁöÑÊúÄÂ§ßÁöÑÂ§ßÂ∞è„ÄÇ</li>\n<li>Â¶ÇÊûú <code>Êï∞ÊçÆÊòØ‰∏¥Êó∂ÁöÑ</code> ÔºåËÄå‰∏î <code>ÂøÖÈ°ªÁ´ãÂç≥ÂèØÁî®</code> ÂæóÂà∞ÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•ÊîæÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇ</li>\n<li>Â≠òÂÇ®Âú® Memory Ë°®‰∏≠ÁöÑÊï∞ÊçÆÂ¶ÇÊûúÁ™ÅÁÑ∂Èó¥ <code>‰∏¢Â§±ÁöÑËØù‰πüÊ≤°ÊúâÂ§™Â§ßÁöÑÂÖ≥Á≥ª</code>„ÄÇ</li>\n</ol>\n<h2 id=\"4-7-Federated-ÂºïÊìéÔºöËÆøÈóÆËøúÁ®ãË°®\"><a href=\"#4-7-Federated-ÂºïÊìéÔºöËÆøÈóÆËøúÁ®ãË°®\" class=\"headerlink\" title=\"4.7 Federated ÂºïÊìéÔºöËÆøÈóÆËøúÁ®ãË°®\"></a>4.7 Federated ÂºïÊìéÔºöËÆøÈóÆËøúÁ®ãË°®</h2><p>Federated ÂºïÊìéÊòØËÆøÈóÆÂÖ∂‰ªñMySQLÊúçÂä°Âô®ÁöÑ‰∏Ä‰∏™ ‰ª£ÁêÜ ÔºåÂ∞ΩÁÆ°ËØ•ÂºïÊìéÁúãËµ∑Êù•Êèê‰æõ‰∫Ü‰∏ÄÁßçÂæàÂ•ΩÁöÑË∑®ÊúçÂä°Âô®ÁöÑÁÅµÊ¥ªÊÄß Ôºå‰ΩÜ‰πüÁªèÂ∏∏Â∏¶Êù•ÈóÆÈ¢òÔºåÂõ†Ê≠§ÈªòËÆ§ÊòØÁ¶ÅÁî®ÁöÑ „ÄÇ</p>\n<h2 id=\"4-8-Merge-ÂºïÊìéÔºöÁÆ°ÁêÜÂ§ö‰∏™MyISAMË°®ÊûÑÊàêÁöÑË°®ÈõÜÂêà\"><a href=\"#4-8-Merge-ÂºïÊìéÔºöÁÆ°ÁêÜÂ§ö‰∏™MyISAMË°®ÊûÑÊàêÁöÑË°®ÈõÜÂêà\" class=\"headerlink\" title=\"4.8 Merge ÂºïÊìéÔºöÁÆ°ÁêÜÂ§ö‰∏™MyISAMË°®ÊûÑÊàêÁöÑË°®ÈõÜÂêà\"></a>4.8 Merge ÂºïÊìéÔºöÁÆ°ÁêÜÂ§ö‰∏™MyISAMË°®ÊûÑÊàêÁöÑË°®ÈõÜÂêà</h2><h2 id=\"4-9-NDBÂºïÊìéÔºöMySQLÈõÜÁæ§‰∏ìÁî®Â≠òÂÇ®ÂºïÊìé\"><a href=\"#4-9-NDBÂºïÊìéÔºöMySQLÈõÜÁæ§‰∏ìÁî®Â≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"4.9 NDBÂºïÊìéÔºöMySQLÈõÜÁæ§‰∏ìÁî®Â≠òÂÇ®ÂºïÊìé\"></a>4.9 NDBÂºïÊìéÔºöMySQLÈõÜÁæ§‰∏ìÁî®Â≠òÂÇ®ÂºïÊìé</h2><p>‰πüÂè´ÂÅö NDB Cluster Â≠òÂÇ®ÂºïÊìéÔºå‰∏ªË¶ÅÁî®‰∫é <code>MySQL Cluster ÂàÜÂ∏ÉÂºèÈõÜÁæ§</code> ÁéØÂ¢É„ÄÇ</p>\n<h2 id=\"4-10-ÂºïÊìéÂØπÊØî\"><a href=\"#4-10-ÂºïÊìéÂØπÊØî\" class=\"headerlink\" title=\"4.10 ÂºïÊìéÂØπÊØî\"></a>4.10 ÂºïÊìéÂØπÊØî</h2><p>MySQL‰∏≠Âêå‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÔºå‰∏çÂêåÁöÑË°®ÂèØ‰ª•ÈÄâÊã©‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇÂ¶Ç‰∏ãË°®ÂØπÂ∏∏Áî®Â≠òÂÇ®ÂºïÊìéÂÅöÂá∫‰∫ÜÂØπÊØî„ÄÇ</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">ÁâπÁÇπ</th>\n<th align=\"left\">MyISAM</th>\n<th align=\"left\">InnoDB</th>\n<th align=\"left\">MEMORY</th>\n<th align=\"left\">MERGE</th>\n<th align=\"left\">NDB</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">Â≠òÂÇ®ÈôêÂà∂</td>\n<td align=\"left\">Êúâ</td>\n<td align=\"left\">64TB</td>\n<td align=\"left\">Êúâ</td>\n<td align=\"left\">Ê≤°Êúâ</td>\n<td align=\"left\">Êúâ</td>\n</tr>\n<tr>\n<td align=\"left\"><code>‰∫ãÂä°ÂÆâÂÖ®ÊÄß</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><code>ÈîÅÊú∫Âà∂</code></td>\n<td align=\"left\">Ë°®ÈîÅÔºåÂç≥‰ΩøÊìç‰Ωú‰∏ÄÊù° ËÆ∞ÂΩï‰πü‰ºöÈîÅ‰ΩèÊï¥‰∏™Ë°®Ôºå‰∏çÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú</td>\n<td align=\"left\">Ë°åÈîÅÔºåÊìç‰ΩúÊó∂Âè™ÈîÅÊüê‰∏ÄË°åÔºå‰∏çÂØπÂÖ∂ÂÆÉË°åÊúâÂΩ±ÂìçÔºåÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú</td>\n<td align=\"left\">Ë°®ÈîÅ</td>\n<td align=\"left\">Ë°®ÈîÅ</td>\n<td align=\"left\">Ë°åÈîÅ</td>\n</tr>\n<tr>\n<td align=\"left\">BÊ†ëÁ¥¢Âºï</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ÂìàÂ∏åÁ¥¢Âºï</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ÂÖ®ÊñáÁ¥¢Âºï</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">ÈõÜÁæ§Á¥¢Âºï</td>\n<td align=\"left\"></td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">Êï∞ÊçÆÁºìÂ≠ò</td>\n<td align=\"left\"></td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><code>Á¥¢ÂºïÁºìÂ≠ò</code></td>\n<td align=\"left\">Âè™ÁºìÂ≠òÁ¥¢ÂºïÔºå‰∏çÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆ</td>\n<td align=\"left\">‰∏ç‰ªÖÁºìÂ≠òÁ¥¢ÂºïËøòË¶ÅÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆÔºåÂØπÂÜÖÂ≠òË¶ÅÊ±ÇËæÉÈ´òÔºåËÄå‰∏îÂÜÖÂ≠òÂ§ßÂ∞èÂØπÊÄßËÉΩÊúâÂÜ≥ÂÆöÊÄßÁöÑÂΩ±Âìç</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Êï∞ÊçÆÂèØÂéãÁº©</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">Á©∫Èó¥‰ΩøÁî®</td>\n<td align=\"left\">‰Ωé</td>\n<td align=\"left\">È´ò</td>\n<td align=\"left\">N&#x2F;A</td>\n<td align=\"left\">‰Ωé</td>\n<td align=\"left\">‰Ωé</td>\n</tr>\n<tr>\n<td align=\"left\">ÂÜÖÂ≠ò‰ΩøÁî®</td>\n<td align=\"left\">‰Ωé</td>\n<td align=\"left\">È´ò</td>\n<td align=\"left\">‰∏≠Á≠â</td>\n<td align=\"left\">‰Ωé</td>\n<td align=\"left\">È´ò</td>\n</tr>\n<tr>\n<td align=\"left\">ÊâπÈáèÊèíÂÖ•ÁöÑÈÄüÂ∫¶</td>\n<td align=\"left\">È´ò</td>\n<td align=\"left\">‰Ωé</td>\n<td align=\"left\">È´ò</td>\n<td align=\"left\">È´ò</td>\n<td align=\"left\">È´ò</td>\n</tr>\n<tr>\n<td align=\"left\"><code>ÊîØÊåÅÂ§ñÈîÆ</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<h1 id=\"5-MyISAM-Âíå-InnoDB\"><a href=\"#5-MyISAM-Âíå-InnoDB\" class=\"headerlink\" title=\"5. MyISAM Âíå InnoDB\"></a>5. MyISAM Âíå InnoDB</h1><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132336896.png\" alt=\"image-20220713230507218\"></p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">ÂØπÊØîÈ°π</th>\n<th align=\"center\">MyISAM</th>\n<th align=\"center\">InnoDB</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Â§ñÈîÆ</td>\n<td align=\"center\">‰∏çÊîØÊåÅ</td>\n<td align=\"center\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"center\">‰∫ãÂä°</td>\n<td align=\"center\">‰∏çÊîØÊåÅ</td>\n<td align=\"center\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"center\">Ë°åË°®ÈîÅ</td>\n<td align=\"center\">Ë°®ÈîÅÔºåÂç≥‰ΩøÊìç‰Ωú‰∏ÄÊù°ËÆ∞ÂΩï‰πü‰ºöÈîÅ‰ΩèÊï¥‰∏™Ë°®Ôºå‰∏çÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú</td>\n<td align=\"center\">Ë°åÈîÅÔºåÊìç‰ΩúÊó∂Âè™ÈîÅÊüê‰∏ÄË°åÔºå‰∏çÂØπÂÖ∂ÂÆÉË°åÊúâÂΩ±ÂìçÔºåÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú</td>\n</tr>\n<tr>\n<td align=\"center\">ÁºìÂ≠ò</td>\n<td align=\"center\">Âè™ÁºìÂ≠òÁ¥¢ÂºïÔºå‰∏çÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆ</td>\n<td align=\"center\">‰∏ç‰ªÖÁºìÂ≠òÁ¥¢ÂºïËøòË¶ÅÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆÔºåÂØπÂÜÖÂ≠òË¶ÅÊ±ÇËæÉÈ´òÔºåËÄå‰∏îÂÜÖÂ≠òÂ§ßÂ∞èÂØπÊÄßËÉΩÊúâÂÜ≥ÂÆöÊÄßÁöÑÂΩ±Âìç</td>\n</tr>\n<tr>\n<td align=\"center\">Ëá™Â∏¶Á≥ªÁªüË°®‰ΩøÁî®</td>\n<td align=\"center\">Y</td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td align=\"center\">ÂÖ≥Ê≥®ÁÇπ</td>\n<td align=\"center\">ÊÄßËÉΩÔºöËäÇÁúÅËµÑÊ∫ê„ÄÅÊ∂àËÄóÂ∞ë„ÄÅÁÆÄÂçï‰∏öÂä°</td>\n<td align=\"center\">‰∫ãÂä°ÔºöÂπ∂ÂèëÂÜô„ÄÅ‰∫ãÂä°„ÄÅÊõ¥Â§ßËµÑÊ∫ê</td>\n</tr>\n<tr>\n<td align=\"center\">ÈªòËÆ§ÂÆâË£Ö</td>\n<td align=\"center\">Y</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td align=\"center\">ÈªòËÆ§‰ΩøÁî®</td>\n<td align=\"center\">N</td>\n<td align=\"center\">Y</td>\n</tr>\n</tbody></table>\n<h1 id=\"6-ÈòøÈáåÂ∑¥Â∑¥„ÄÅÊ∑òÂÆùÁî®Âì™‰∏™\"><a href=\"#6-ÈòøÈáåÂ∑¥Â∑¥„ÄÅÊ∑òÂÆùÁî®Âì™‰∏™\" class=\"headerlink\" title=\"6. ÈòøÈáåÂ∑¥Â∑¥„ÄÅÊ∑òÂÆùÁî®Âì™‰∏™\"></a>6. ÈòøÈáåÂ∑¥Â∑¥„ÄÅÊ∑òÂÆùÁî®Âì™‰∏™</h1><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132336908.png\" alt=\"image-20220713230922017\"></p>\n<ul>\n<li><strong>Percona</strong> ‰∏∫ MySQL Êï∞ÊçÆÂ∫ìÊúçÂä°Âô®ËøõË°å‰∫ÜÊîπËøõÔºåÂú®ÂäüËÉΩÂíåÊÄßËÉΩ‰∏äËæÉ MySQL ÊúâÂæàÊòæËëóÁöÑÊèêÂçá„ÄÇ</li>\n<li>ËØ•ÁâàÊú¨ÊèêÂçá‰∫ÜÂú®È´òË¥üËΩΩÊÉÖÂÜµ‰∏ãÁöÑ InnoDB ÁöÑÊÄßËÉΩ„ÄÅ‰∏∫ DBA Êèê‰æõ‰∏Ä‰∫õÈùûÂ∏∏ÊúâÁî®ÁöÑÊÄßËÉΩËØäÊñ≠Â∑•ÂÖ∑ÔºõÂè¶Â§ñÊúâÊõ¥Â§öÁöÑÂèÇÊï∞ÂíåÂëΩ‰ª§Êù•ÊéßÂà∂ÊúçÂä°Âô®Ë°å‰∏∫„ÄÇ</li>\n<li>ËØ•ÂÖ¨Âè∏Êñ∞Âª∫‰∫Ü‰∏ÄÊ¨æÂ≠òÂÇ®ÂºïÊìéÂè´ <code>Xtradb</code> ÂÆåÂÖ®ÂèØ‰ª•Êõø‰ª£<code>Innodb</code> ÔºåÂπ∂‰∏îÂú®ÊÄßËÉΩÂíåÂπ∂Âèë‰∏äÂÅöÂæóÊõ¥Â•Ω</li>\n<li>ÈòøÈáåÂ∑¥Â∑¥Â§ßÈÉ®ÂàÜ MySQL Êï∞ÊçÆÂ∫ìÂÖ∂ÂÆû‰ΩøÁî®ÁöÑ percona ÁöÑÂéüÂûãÂä†‰ª•‰øÆÊîπ„ÄÇ</li>\n</ul>\n<h1 id=\"7-Ë°•ÂÖÖ\"><a href=\"#7-Ë°•ÂÖÖ\" class=\"headerlink\" title=\"7. Ë°•ÂÖÖ:\"></a>7. Ë°•ÂÖÖ:</h1><h2 id=\"7-1-InnoDB-Ë°®ÁöÑ‰ºòÂäø\"><a href=\"#7-1-InnoDB-Ë°®ÁöÑ‰ºòÂäø\" class=\"headerlink\" title=\"7.1 InnoDB Ë°®ÁöÑ‰ºòÂäø\"></a>7.1 InnoDB Ë°®ÁöÑ‰ºòÂäø</h2><p>InnoDB Â≠òÂÇ®ÂºïÊìéÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠Êã•ÊúâËØ∏Â§ö‰ºòÂäøÔºåÊØîÂ¶ÇÊìç‰Ωú‰æøÂà©„ÄÅÊèêÈ´ò‰∫ÜÊï∞ÊçÆÂ∫ìÁöÑÊÄßËÉΩ„ÄÅÁª¥Êä§ÊàêÊú¨‰ΩéÁ≠â„ÄÇÂ¶ÇÊûúÁî±‰∫éÁ°¨‰ª∂ÊàñËΩØ‰ª∂ÁöÑÂéüÂõ†ÂØºËá¥ÊúçÂä°Âô®Â¥©Ê∫ÉÔºåÈÇ£‰πàÂú®ÈáçÂêØÊúçÂä°Âô®‰πãÂêé‰∏çÈúÄË¶ÅËøõË°åÈ¢ùÂ§ñÁöÑÊìç‰Ωú„ÄÇInnoDB Â¥©Ê∫ÉÊÅ¢Â§çÂäüËÉΩËá™Âä®Â∞Ü‰πãÂâçÊèê‰∫§ÁöÑÂÜÖÂÆπÂÆöÂûãÔºåÁÑ∂ÂêéÊí§ÈîÄÊ≤°ÊúâÊèê‰∫§ÁöÑËøõÁ®ãÔºåÈáçÂêØ‰πãÂêéÁªßÁª≠‰ªéÂ¥©Ê∫ÉÁÇπÂºÄÂßãÊâßË°å„ÄÇ</p>\n<p>InnoDB Â≠òÂÇ®ÂºïÊìéÂú®‰∏ªÂÜÖÂ≠ò‰∏≠Áª¥Êä§ÁºìÂÜ≤Ê±†ÔºåÈ´òÈ¢ëÁéá‰ΩøÁî®ÁöÑÊï∞ÊçÆÂ∞ÜÂú®ÂÜÖÂ≠ò‰∏≠Áõ¥Êé•Ë¢´Â§ÑÁêÜ„ÄÇËøôÁßçÁºìÂ≠òÊñπÂºèÂ∫îÁî®‰∫éÂ§öÁßç‰ø°ÊÅØÔºåÂä†ÈÄü‰∫ÜÂ§ÑÁêÜËøõÁ®ã„ÄÇ</p>\n<p>Âú®‰∏ìÁî®ÊúçÂä°Âô®‰∏äÔºåÁâ©ÁêÜÂÜÖÂ≠ò‰∏≠È´òËææ 80% ÁöÑÈÉ®ÂàÜË¢´Â∫îÁî®‰∫éÁºìÂÜ≤Ê±†„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÊèíÂÖ•‰∏çÂêåÁöÑË°®‰∏≠ÔºåÂèØ‰ª•ËÆæÁΩÆÂ§ñÈîÆÂä†Âº∫Êï∞ÊçÆÁöÑÂÆåÊï¥ÊÄß„ÄÇÊõ¥Êñ∞ÊàñËÄÖÂà†Èô§Êï∞ÊçÆÔºåÂÖ≥ËÅîÊï∞ÊçÆÂ∞Ü‰ºöË¢´Ëá™Âä®Êõ¥Êñ∞ÊàñÂà†Èô§„ÄÇÂ¶ÇÊûúËØïÂõæÂ∞ÜÊï∞ÊçÆÊèíÂÖ•‰ªéË°®Ôºå‰ΩÜÂú®‰∏ªË°®‰∏≠Ê≤°ÊúâÂØπÂ∫îÁöÑÊï∞ÊçÆÔºåÊèíÂÖ•ÁöÑÊï∞ÊçÆÂ∞ÜË¢´Ëá™Âä®ÁßªÈô§„ÄÇÂ¶ÇÊûúÁ£ÅÁõòÊàñÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂá∫Áé∞Â¥©Ê∫ÉÔºå Âú®‰ΩøÁî®ËÑèÊï∞ÊçÆ‰πãÂâçÔºåÊ†°È™åÂíåÊú∫Âà∂‰ºöÂèëÂá∫Ë≠¶Âëä„ÄÇÂΩìÊØè‰∏™Ë°®ÁöÑ‰∏ªÈîÆÈÉΩËÆæÁΩÆÂêàÁêÜÊó∂Ôºå‰∏éËøô‰∫õÂàóÊúâÂÖ≥ÁöÑÊìç‰Ωú‰ºöË¢´Ëá™Âä®‰ºòÂåñ„ÄÇÊèíÂÖ•„ÄÅÊõ¥Êñ∞ÂíåÂà†Èô§Êìç‰ΩúÈÄöËøáÂÅöÊîπÂèòÁºìÂÜ≤Ëá™Âä®Êú∫Âà∂ËøõË°å‰ºòÂåñ„ÄÇ<code>InnoDB ‰∏çÊîØÊåÅÂΩìÂâçËØªÂÜôÔºå‰πü‰ºöÁºìÂÜ≤ÊîπÂèòÁöÑÊï∞ÊçÆÂà∞Êï∞ÊçÆÊµÅÁ£ÅÁõò</code>.</p>\n<p>InnoDB ÁöÑÊÄßËÉΩ‰ºòÂäø‰∏çÂè™Â≠òÂú®‰∫éÈïøÊó∂ËøêË°åÊü•ËØ¢ÁöÑÂ§ßÂûãË°®„ÄÇÂú®Âêå‰∏ÄÂàóÂ§öÊ¨°Ë¢´Êü•ËØ¢Êó∂ÔºåËá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢Âºï‰ºöÊèêÈ´òÊü•ËØ¢ÁöÑÈÄüÂ∫¶„ÄÇ‰ΩøÁî® InnoDB ÂèØ‰ª•ÂéãÁº©Ë°®ÂíåÁõ∏ÂÖ≥ÁöÑÁ¥¢ÂºïÔºåÂèØ‰ª• <code>Âú®‰∏çÂΩ±ÂìçÊÄßËÉΩÂíåÂèØÁî®ÊÄßÁöÑÊÉÖÂÜµ‰∏ãÂàõÂª∫ÊàñÂà†Èô§Á¥¢Âºï</code>„ÄÇÂØπ‰∫éÂ§ßÂûãÊñáÊú¨Âíå BLOB Êï∞ÊçÆÔºå‰ΩøÁî®Âä®ÊÄÅË°åÂΩ¢ÂºèÔºåËøôÁßçÂ≠òÂÇ®Â∏ÉÂ±ÄÊõ¥È´òÊïà„ÄÇÈÄöËøáÊü•ËØ¢ INFORMATION_SCHEMA Â∫ì‰∏≠ÁöÑË°®ÂèØ‰ª•ÁõëÊéßÂ≠òÂÇ®ÂºïÊìéÁöÑÂÜÖÈÉ®Â∑•‰Ωú„ÄÇÂú®Âêå‰∏Ä‰∏™ËØ≠Âè•‰∏≠ÔºåInnoDB Ë°®ÂèØ‰ª•‰∏éÂÖ∂‰ªñÂ≠òÂÇ®ÂºïÊìéË°®Ê∑∑Áî®„ÄÇÂç≥‰ΩøÊúâ‰∫õÊìç‰ΩúÁ≥ªÁªüÈôêÂà∂Êñá‰ª∂Â§ßÂ∞è‰∏∫ 2GBÔºåInnoDB ‰ªçÁÑ∂ÂèØ‰ª•Â§ÑÁêÜ„ÄÇ<code>ÂΩìÂ§ÑÁêÜÂ§ßÊï∞ÊçÆÈáèÊó∂ÔºåInnoDB ÂÖºÈ°æ CPUÔºå‰ª•ËææÂà∞ÊúÄÂ§ßÊÄßËÉΩ</code></p>\n<h2 id=\"7-2-InnoDB-Âíå-ACID-Ê®°Âûã\"><a href=\"#7-2-InnoDB-Âíå-ACID-Ê®°Âûã\" class=\"headerlink\" title=\"7.2 InnoDB Âíå ACID Ê®°Âûã\"></a>7.2 InnoDB Âíå ACID Ê®°Âûã</h2><p>ACID Ê®°ÂûãÊòØ‰∏ÄÁ≥ªÂàóÊï∞ÊçÆÂ∫ìËÆæËÆ°ËßÑÂàôÔºåËøô‰∫õËßÑÂàôÁùÄÈáçÂº∫Ë∞ÉÂèØÈù†ÊÄßÔºåËÄåÂèØÈù†ÊÄßÂØπ‰∫éÂïÜ‰∏öÊï∞ÊçÆÂíå‰ªªÂä°ÂÖ≥ÈîÆÂûãÂ∫îÁî®ÈùûÂ∏∏ÈáçË¶Å„ÄÇMySQL ÂåÖÂê´Á±ª‰ºº InnoDB Â≠òÂÇ®ÂºïÊìéÁöÑÁªÑ‰ª∂Ôºå‰∏é ACID Ê®°ÂûãÁ¥ßÂØÜÁõ∏ËøûÔºåËøôÊ†∑Âá∫Áé∞ÊÑèÂ§ñÊó∂ÔºåÊï∞ÊçÆ‰∏ç‰ºöÂ¥©Ê∫ÉÔºåÁªìÊûú‰∏ç‰ºöÂ§±Áúü„ÄÇÂ¶ÇÊûú‰æùËµñ ACID Ê®°ÂûãÔºåÂèØ‰ª•‰∏ç‰ΩøÁî®‰∏ÄËá¥ÊÄßÊ£ÄÊü•ÂíåÂ¥©Ê∫ÉÊÅ¢Â§çÊú∫Âà∂„ÄÇÂ¶ÇÊûúÊã•ÊúâÈ¢ùÂ§ñÁöÑËΩØ‰ª∂‰øùÊä§ÔºåÊûÅÂèØÈù†ÁöÑÁ°¨‰ª∂ÊàñËÄÖÂ∫îÁî®ÂèØ‰ª•ÂÆπÂøç‰∏ÄÂ∞èÈÉ®ÂàÜÁöÑÊï∞ÊçÆ‰∏¢Â§±Âíå‰∏ç‰∏ÄËá¥ÔºåÂèØ‰ª•Â∞Ü MySQL ËÆæÁΩÆË∞ÉÊï¥‰∏∫Âè™‰æùËµñÈÉ®ÂàÜ ACID ÁâπÊÄßÔºå‰ª•ËææÂà∞Êõ¥È´òÁöÑÊÄßËÉΩ„ÄÇ‰∏ãÈù¢ËÆ≤Ëß£ InnoDB Â≠òÂÇ®ÂºïÊìé‰∏é ACID Ê®°ÂûãÁõ∏Âêå‰ΩúÁî®ÁöÑÂõõ‰∏™ÊñπÈù¢„ÄÇ</p>\n<ol>\n<li><strong>ÂéüÂ≠êÊñπÈù¢</strong> ACID ÁöÑÂéüÂ≠êÊñπÈù¢‰∏ªË¶ÅÊ∂âÂèä InnoDB ‰∫ãÂä°Ôºå‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄß‰∏ªË¶ÅÂåÖÊã¨:<ul>\n<li>Ëá™Âä®Êèê‰∫§ËÆæÁΩÆ„ÄÇ</li>\n<li>COMMIT ËØ≠Âè•„ÄÇ</li>\n<li>ROLLBACK ËØ≠Âè•„ÄÇ</li>\n<li>Êìç‰Ωú INFORMATION_SCHEMA Â∫ì‰∏≠ÁöÑË°®Êï∞ÊçÆ„ÄÇ</li>\n</ul>\n</li>\n<li><strong>‰∏ÄËá¥ÊÄßÊñπÈù¢</strong> ACID Ê®°ÂûãÁöÑ‰∏ÄËá¥ÊÄß‰∏ªË¶ÅÊ∂âÂèä‰øùÊä§Êï∞ÊçÆ‰∏çÂ¥©Ê∫ÉÁöÑÂÜÖÈÉ® InnoDB Â§ÑÁêÜËøáÁ®ãÔºå‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄß‰∏ªË¶ÅÂåÖÊã¨:<ul>\n<li>InnoDB ÂèåÂÜôÁºìÂ≠ò„ÄÇ</li>\n<li>InnoDB Â¥©Ê∫ÉÊÅ¢Â§ç„ÄÇ</li>\n</ul>\n</li>\n<li><strong>ÈöîÁ¶ªÊñπÈù¢</strong> ÈöîÁ¶ªÊòØÂ∫îÁî®‰∫é‰∫ãÂä°ÁöÑÁ∫ßÂà´Ôºå‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄß‰∏ªË¶ÅÂåÖÊã¨:<ul>\n<li>Ëá™Âä®Êèê‰∫§ËÆæÁΩÆ„ÄÇ</li>\n<li>SET ISOLATION LEVEL ËØ≠Âè•„ÄÇ</li>\n<li>InnoDB ÈîÅÁöÑ‰ΩéÁ∫ßÂà´‰ø°ÊÅØ„ÄÇ</li>\n</ul>\n</li>\n<li><strong>ËÄê‰πÖÊÄßÊñπÈù¢</strong> ACID Ê®°ÂûãÁöÑËÄê‰πÖÊÄß‰∏ªË¶ÅÊ∂âÂèä‰∏éÁ°¨‰ª∂ÈÖçÁΩÆÁõ∏‰∫íÂΩ±ÂìçÁöÑ MySQL ËΩØ‰ª∂ÁâπÊÄß„ÄÇÁî±‰∫éÁ°¨‰ª∂Â§çÊùÇÂ§öÊ†∑ÂåñÔºåËÄê‰πÖÊÄßÊñπÈù¢Ê≤°ÊúâÂÖ∑‰ΩìÁöÑËßÑÂàôÂèØÂæ™„ÄÇ‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄßÊúâ:<ul>\n<li>InnoDB ÂèåÂÜôÁºìÂ≠òÔºåÈÄöËøá innodb_doublewrite ÈÖçÁΩÆÈ°πÈÖçÁΩÆ„ÄÇ</li>\n<li>ÈÖçÁΩÆÈ°π innodb_flush_log_at_trx_commit„ÄÇ</li>\n<li>ÈÖçÁΩÆÈ°π sync_binlog„ÄÇ</li>\n<li>ÈÖçÁΩÆÈ°π innodb_file_per_table„ÄÇ</li>\n<li>Â≠òÂÇ®ËÆæÂ§áÁöÑÂÜôÂÖ•ÁºìÂ≠ò„ÄÇ</li>\n<li>Â≠òÂÇ®ËÆæÂ§áÁöÑÂ§áÁî®ÁîµÊ±†ÁºìÂ≠ò„ÄÇ</li>\n<li>ËøêË°å MySQL ÁöÑÊìç‰ΩúÁ≥ªÁªü„ÄÇ</li>\n<li>ÊåÅÁª≠ÁöÑÁîµÂäõ‰æõÂ∫î„ÄÇ</li>\n<li>Â§á‰ªΩÁ≠ñÁï•„ÄÇ</li>\n<li>ÂØπÂàÜÂ∏ÉÂºèÊàñÊâòÁÆ°ÁöÑÂ∫îÁî®ÔºåÊúÄ‰∏ªË¶ÅÁöÑÂú®‰∫éÁ°¨‰ª∂ËÆæÂ§áÁöÑÂú∞ÁÇπ‰ª•ÂèäÁΩëÁªúÊÉÖÂÜµ„ÄÇ</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"7-3-InnoDBÊû∂ÊûÑ\"><a href=\"#7-3-InnoDBÊû∂ÊûÑ\" class=\"headerlink\" title=\"7.3 InnoDBÊû∂ÊûÑ\"></a>7.3 InnoDBÊû∂ÊûÑ</h2><ol>\n<li><strong>ÁºìÂÜ≤Ê±†</strong> ÁºìÂÜ≤Ê±†ÊòØ‰∏ªÂÜÖÂ≠ò‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÁ©∫Èó¥ÔºåÁî®Êù•ÁºìÂ≠òÂ∑≤‰ΩøÁî®ÁöÑË°®ÂíåÁ¥¢ÂºïÊï∞ÊçÆ„ÄÇÁºìÂÜ≤Ê±†‰ΩøÂæóÁªèÂ∏∏Ë¢´‰ΩøÁî®ÁöÑÊï∞ÊçÆËÉΩÂ§üÁõ¥Êé•Âú®ÂÜÖÂ≠ò‰∏≠Ëé∑ÂæóÔºå‰ªéËÄåÊèêÈ´òÈÄüÂ∫¶„ÄÇ</li>\n<li><strong>Êõ¥ÊîπÁºìÂ≠ò</strong> Êõ¥ÊîπÁºìÂ≠òÊòØ‰∏Ä‰∏™ÁâπÊÆäÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂΩìÂèóÂΩ±ÂìçÁöÑÁ¥¢ÂºïÈ°µ‰∏çÂú®ÁºìÂ≠ò‰∏≠Êó∂ÔºåÊõ¥ÊîπÁºìÂ≠ò‰ºöÁºìÂ≠òËæÖÂä©Á¥¢ÂºïÈ°µÁöÑÊõ¥Êîπ„ÄÇÁ¥¢ÂºïÈ°µË¢´ÂÖ∂‰ªñËØªÂèñÊìç‰ΩúÊó∂‰ºöÂä†ËΩΩÂà∞ÁºìÂ≠òÊ±†ÔºåÁºìÂ≠òÁöÑÊõ¥ÊîπÂÜÖÂÆπÂ∞±‰ºöË¢´ÂêàÂπ∂„ÄÇ‰∏çÂêå‰∫éÈõÜÁæ§Á¥¢ÂºïÔºåËæÖÂä©Á¥¢ÂºïÂπ∂ÈùûÁã¨‰∏ÄÊó†‰∫åÁöÑ„ÄÇÂΩìÁ≥ªÁªüÂ§ßÈÉ®ÂàÜÈó≤ÁΩÆÊó∂ÔºåÊ∏ÖÈô§Êìç‰Ωú‰ºöÂÆöÊúüËøêË°åÔºåÂ∞ÜÊõ¥Êñ∞ÁöÑÁ¥¢ÂºïÈ°µÂà∑ÂÖ•Á£Å Áõò„ÄÇÊõ¥Êñ∞ÁºìÂ≠òÂêàÂπ∂ÊúüÈó¥ÔºåÂèØËÉΩ‰ºöÂ§ßÂ§ßÈôç‰ΩéÊü•ËØ¢ÁöÑÊÄßËÉΩ„ÄÇÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊõ¥Êñ∞ÁºìÂ≠òÂç†Áî®‰∏ÄÈÉ®ÂàÜ InnoDB ÁºìÂÜ≤Ê±†„ÄÇ Âú®Á£ÅÁõò‰∏≠ÔºåÊõ¥Êñ∞ÁºìÂ≠òÊòØÁ≥ªÁªüË°®Á©∫Èó¥ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÊõ¥Êñ∞ÁºìÂ≠òÁöÑÊï∞ÊçÆÁ±ªÂûãÁî± innodb_change_buffering ÈÖçÁΩÆÈ°πÁÆ°ÁêÜ„ÄÇ</li>\n<li><strong>Ëá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢Âºï</strong> Ëá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢ÂºïÂ∞ÜË¥üËΩΩÂíåË∂≥Â§üÁöÑÂÜÖÂ≠òÁªìÂêàËµ∑Êù•Ôºå‰ΩøÂæó InnoDB ÂÉèÂÜÖÂ≠òÊï∞ÊçÆÂ∫ì‰∏ÄÊ†∑ËøêË°åÔºå ‰∏çÈúÄË¶ÅÈôç‰Ωé‰∫ãÂä°‰∏äÁöÑÊÄßËÉΩÊàñÂèØÈù†ÊÄß„ÄÇËøô‰∏™ÁâπÊÄßÈÄöËøá innodb_adaptive_hash_index ÈÄâÈ°πÈÖçÁΩÆÔºåÊàñËÄÖÈÄöËøá <code>-- skip-innodb_adaptive_hash_index</code> ÂëΩ‰ª§Ë°åÂú®ÊúçÂä°ÂêØÂä®Êó∂ÂÖ≥Èó≠„ÄÇ</li>\n<li><strong>ÈáçÂÅöÊó•ÂøóÁºìÂ≠ò</strong> ÈáçÂÅöÊó•ÂøóÁºìÂ≠òÂ≠òÊîæË¶ÅÊîæÂÖ•ÈáçÂÅöÊó•ÂøóÁöÑÊï∞ÊçÆ„ÄÇÈáçÂÅöÊó•ÂøóÁºìÂ≠òÂ§ßÂ∞èÈÄöËøá innodb_log_buffer_size ÈÖçÁΩÆÈ°πÈÖçÁΩÆ„ÄÇÈáçÂÅöÊó•ÂøóÁºìÂ≠ò‰ºöÂÆöÊúüÂú∞Â∞ÜÊó•ÂøóÊñá‰ª∂Âà∑ÂÖ•Á£ÅÁõò„ÄÇÂ§ßÂûãÁöÑÈáçÂÅöÊó•ÂøóÁºìÂ≠ò‰ΩøÂæóÂ§ßÂûã‰∫ãÂä°ËÉΩÂ§üÊ≠£Â∏∏ËøêË°åËÄå‰∏çÈúÄË¶ÅÂÜôÂÖ•Á£ÅÁõò„ÄÇ</li>\n<li><strong>Á≥ªÁªüË°®Á©∫Èó¥</strong> Á≥ªÁªüË°®Á©∫Èó¥ÂåÖÊã¨ InnoDB Êï∞ÊçÆÂ≠óÂÖ∏„ÄÅÂèåÂÜôÁºìÂ≠ò„ÄÅÊõ¥Êñ∞ÁºìÂ≠òÂíåÊí§ÈîÄÊó•ÂøóÔºåÂêåÊó∂‰πüÂåÖÊã¨Ë°®ÂíåÁ¥¢ÂºïÊï∞ÊçÆ„ÄÇÂ§öË°®ÂÖ±‰∫´ÔºåÁ≥ªÁªüË°®Á©∫Èó¥Ë¢´ËßÜ‰∏∫ÂÖ±‰∫´Ë°®Á©∫Èó¥„ÄÇ</li>\n<li><strong>ÂèåÂÜôÁºìÂ≠ò</strong> ÂèåÂÜôÁºìÂ≠ò‰Ωç‰∫éÁ≥ªÁªüË°®Á©∫Èó¥‰∏≠ÔºåÁî®‰∫éÂÜôÂÖ•‰ªéÁºìÂ≠òÊ±†Âà∑Êñ∞ÁöÑÊï∞ÊçÆÈ°µ„ÄÇÂè™ÊúâÂú®Âà∑Êñ∞Âπ∂ÂÜôÂÖ•ÂèåÂÜôÁºìÂ≠òÂêéÔºåInnoDB Êâç‰ºöÂ∞ÜÊï∞ÊçÆÈ°µÂÜôÂÖ•ÂêàÈÄÇÁöÑ‰ΩçÁΩÆ„ÄÇ</li>\n<li><strong>Êí§ÈîÄÊó•Âøó</strong> Êí§ÈîÄÊó•ÂøóÊòØ‰∏ÄÁ≥ªÂàó‰∏é‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÊí§ÈîÄËÆ∞ÂΩïÁöÑÈõÜÂêàÔºåÂåÖÂê´Â¶Ç‰ΩïÊí§ÈîÄ‰∫ãÂä°ÊúÄËøëÁöÑÊõ¥Êîπ„ÄÇÂ¶ÇÊûúÂÖ∂‰ªñ‰∫ãÂä°Ë¶ÅÊü•ËØ¢ÂéüÂßãÊï∞ÊçÆÔºåÂèØ‰ª•‰ªéÊí§ÈîÄÊó•ÂøóËÆ∞ÂΩï‰∏≠ËøΩÊ∫ØÊú™Êõ¥ÊîπÁöÑÊï∞ÊçÆ„ÄÇÊí§ÈîÄÊó•ÂøóÂ≠òÂú®‰∫éÊí§ÈîÄÊó•ÂøóÁâáÊÆµ‰∏≠ÔºåËøô‰∫õÁâáÊÆµÂåÖÂê´‰∫éÂõûÊªöÁâáÊÆµ‰∏≠„ÄÇ</li>\n<li><strong>ÊØè‰∏™Ë°®‰∏Ä‰∏™Êñá‰ª∂ÁöÑË°®Á©∫Èó¥</strong> ÊØè‰∏™Ë°®‰∏Ä‰∏™Êñá‰ª∂ÁöÑË°®Á©∫Èó¥ÊòØÊåáÊØè‰∏™ÂçïÁã¨ÁöÑË°®Á©∫Èó¥ÂàõÂª∫Âú®Ëá™Ë∫´ÁöÑÊï∞ÊçÆÊñá‰ª∂‰∏≠Ôºå ËÄå‰∏çÊòØÁ≥ªÁªüË°®Á©∫Èó¥‰∏≠„ÄÇËøô‰∏™ÂäüËÉΩÈÄöËøá innodb_file_per_table ÈÖçÁΩÆÈ°πÂºÄÂêØ„ÄÇÊØè‰∏™Ë°®Á©∫Èó¥Áî±‰∏Ä‰∏™ÂçïÁã¨ÁöÑ <code>.ibd</code> Êï∞ÊçÆÊñá‰ª∂‰ª£Ë°®ÔºåËØ•Êñá‰ª∂ÈªòËÆ§Ë¢´ÂàõÂª∫Âú®Êï∞ÊçÆÂ∫ìÁõÆÂΩï‰∏≠„ÄÇ</li>\n<li><strong>ÈÄöÁî®Ë°®Á©∫Èó¥</strong> ‰ΩøÁî® CREATE TABLESPACE ËØ≠Ê≥ïÂàõÂª∫ÂÖ±‰∫´ÁöÑ InnoDB Ë°®Á©∫Èó¥„ÄÇÈÄöÁî®Ë°®Á©∫Èó¥ÂèØ‰ª•ÂàõÂª∫Âú® MySQL Êï∞ÊçÆÁõÆÂΩï‰πãÂ§ñËÉΩÂ§üÁÆ°ÁêÜÂ§ö‰∏™Ë°®Âπ∂ÊîØÊåÅÊâÄÊúâË°åÊ†ºÂºèÁöÑË°®„ÄÇ</li>\n<li><strong>Êí§ÈîÄË°®Á©∫Èó¥</strong> Êí§ÈîÄË°®Á©∫Èó¥Áî±‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂåÖÂê´Êí§ÈîÄÊó•ÂøóÁöÑÊñá‰ª∂ÁªÑÊàê„ÄÇÊí§ÈîÄË°®Á©∫Èó¥ÁöÑÊï∞ÈáèÁî± innodb_undo_tablespaces ÈÖçÁΩÆÈ°πÈÖçÁΩÆ„ÄÇ</li>\n<li><strong>‰∏¥Êó∂Ë°®Á©∫Èó¥</strong> Áî®Êà∑ÂàõÂª∫ÁöÑ‰∏¥Êó∂Ë°®Á©∫Èó¥ÂíåÂü∫‰∫éÁ£ÅÁõòÁöÑÂÜÖÈÉ®‰∏¥Êó∂Ë°®ÈÉΩÂàõÂª∫‰∫é‰∏¥Êó∂Ë°®Á©∫Èó¥„ÄÇ innodb_temp_data_file_path ÈÖçÁΩÆÈ°πÂÆö‰πâ‰∫ÜÁõ∏ÂÖ≥ÁöÑË∑ØÂæÑ„ÄÅÂêçÁß∞„ÄÅÂ§ßÂ∞èÂíåÂ±ûÊÄß„ÄÇÂ¶ÇÊûúËØ•ÂÄº‰∏∫Á©∫ÔºåÈªòËÆ§‰ºöÂú® innodb_data_home_dir ÂèòÈáèÊåáÂÆöÁöÑÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Ëá™Âä®Êâ©Â±ïÁöÑÊï∞ÊçÆÊñá‰ª∂„ÄÇ</li>\n<li><strong>ÈáçÂÅöÊó•Âøó</strong> ÈáçÂÅöÊó•ÂøóÊòØÂü∫‰∫éÁ£ÅÁõòÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂú®Â¥©Ê∫ÉÊÅ¢Â§çÊúüÈó¥‰ΩøÁî®ÔºåÁî®Êù•Á∫†Ê≠£Êï∞ÊçÆ„ÄÇÊ≠£Â∏∏Êìç‰ΩúÊúüÈó¥Ôºå ÈáçÂÅöÊó•Âøó‰ºöÂ∞ÜËØ∑Ê±ÇÊï∞ÊçÆËøõË°åÁºñÁ†ÅÔºåËøô‰∫õËØ∑Ê±Ç‰ºöÊîπÂèò InnoDB Ë°®Êï∞ÊçÆ„ÄÇÈÅáÂà∞ÊÑèÂ§ñÂ¥©Ê∫ÉÂêéÔºåÊú™ÂÆåÊàêÁöÑÊõ¥Êîπ‰ºöËá™Âä®Âú®ÂàùÂßãÂåñÊúüÈó¥ÈáçÊñ∞ËøõË°å„ÄÇ</li>\n</ol>\n","cover_type":"img","excerpt":"","more":"<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335455.png\" alt=\"image-20220713231227788\"></p>\n<h1 id=\"1-Êü•ÁúãÂ≠òÂÇ®ÂºïÊìé\"><a href=\"#1-Êü•ÁúãÂ≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"1. Êü•ÁúãÂ≠òÂÇ®ÂºïÊìé\"></a>1. Êü•ÁúãÂ≠òÂÇ®ÂºïÊìé</h1><p>Êü•ÁúãmysqlÊèê‰æõ‰ªÄ‰πàÂ≠òÂÇ®ÂºïÊìé:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> engines;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335257.png\" alt=\"image-20220713223052510\"></p>\n<h1 id=\"2-ËÆæÁΩÆÁ≥ªÁªüÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé\"><a href=\"#2-ËÆæÁΩÆÁ≥ªÁªüÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"2. ËÆæÁΩÆÁ≥ªÁªüÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé\"></a>2. ËÆæÁΩÆÁ≥ªÁªüÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé</h1><ul>\n<li><p>Êü•ÁúãÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show variables like &#x27;%storage_engine%&#x27;; </span><br><span class=\"line\">#Êàñ</span><br><span class=\"line\">SELECT @@default_storage_engine;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335167.png\" alt=\"image-20220713223312035\"></p>\n</li>\n<li><p>‰øÆÊîπÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé</p>\n<p>Â¶ÇÊûúÂú®ÂàõÂª∫Ë°®ÁöÑËØ≠Âè•‰∏≠Ê≤°ÊúâÊòæÂºèÊåáÂÆöË°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÁöÑËØùÔºåÈÇ£Â∞±‰ºöÈªòËÆ§‰ΩøÁî® <code>InnoDB</code> ‰Ωú‰∏∫Ë°®ÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇ Â¶ÇÊûúÊàë‰ª¨ÊÉ≥ÊîπÂèòË°®ÁöÑÈªòËÆ§Â≠òÂÇ®ÂºïÊìéÁöÑËØùÔºåÂèØ‰ª•ËøôÊ†∑ÂÜôÂêØÂä®ÊúçÂä°Âô®ÁöÑÂëΩ‰ª§Ë°å:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SET DEFAULT_STORAGE_ENGINE=MyISAM;</span><br></pre></td></tr></table></figure>\n\n<p>ÊàñËÄÖ‰øÆÊîπ <code>my.cnf</code> Êñá‰ª∂:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">default-storage-engine=MyISAM</span><br><span class=\"line\"># ÈáçÂêØÊúçÂä°</span><br><span class=\"line\">systemctl restart mysqld.service</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"3-ËÆæÁΩÆË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\"><a href=\"#3-ËÆæÁΩÆË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"3. ËÆæÁΩÆË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\"></a>3. ËÆæÁΩÆË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé</h1><p>Â≠òÂÇ®ÂºïÊìéÊòØË¥üË¥£ÂØπË°®‰∏≠ÁöÑÊï∞ÊçÆËøõË°åÊèêÂèñÂíåÂÜôÂÖ•Â∑•‰ΩúÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•‰∏∫ <code>‰∏çÂêåÁöÑË°®ËÆæÁΩÆ‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìé</code> Ôºå‰πüÂ∞±ÊòØËØ¥‰∏çÂêåÁöÑË°®ÂèØ‰ª•Êúâ‰∏çÂêåÁöÑÁâ©ÁêÜÂ≠òÂÇ®ÁªìÊûÑÔºå‰∏çÂêåÁöÑÊèêÂèñÂíåÂÜôÂÖ•ÊñπÂºè„ÄÇ</p>\n<h2 id=\"3-1-ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÂ≠òÂÇ®ÂºïÊìé\"><a href=\"#3-1-ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÂ≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"3.1 ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÂ≠òÂÇ®ÂºïÊìé\"></a>3.1 ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÂ≠òÂÇ®ÂºïÊìé</h2><p>Êàë‰ª¨‰πãÂâçÂàõÂª∫Ë°®ÁöÑËØ≠Âè•ÈÉΩÊ≤°ÊúâÊåáÂÆöË°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºåÈÇ£Â∞±‰ºö‰ΩøÁî®ÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé <code>InnoDB</code> „ÄÇÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥ÊòæÂºèÁöÑÊåáÂÆö‰∏Ä‰∏ãË°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºåÈÇ£ÂèØ‰ª•Ëøô‰πàÂÜôÔºö</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TABLE Ë°®Âêç( </span><br><span class=\"line\">  Âª∫Ë°®ËØ≠Âè•;</span><br><span class=\"line\">) ENGINE = Â≠òÂÇ®ÂºïÊìéÂêçÁß∞;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-2-‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\"><a href=\"#3-2-‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"3.2 ‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé\"></a>3.2 ‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé</h2><p>Â¶ÇÊûúË°®Â∑≤ÁªèÂª∫Â•Ω‰∫ÜÔºåÊàë‰ª¨‰πüÂèØ‰ª•‰ΩøÁî®‰∏ãËæπËøô‰∏™ËØ≠Âè•Êù•‰øÆÊîπË°®ÁöÑÂ≠òÂÇ®ÂºïÊìé:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE Ë°®Âêç ENGINE = Â≠òÂÇ®ÂºïÊìéÂêçÁß∞; </span><br></pre></td></tr></table></figure>\n\n<p>ÊØîÂ¶ÇÊàë‰ª¨‰øÆÊîπ‰∏Ä‰∏ã <code>engine_demo_table</code> Ë°®ÁöÑÂ≠òÂÇ®ÂºïÊìé:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; ALTER TABLE engine_demo_table ENGINE = InnoDB;</span><br><span class=\"line\">Query OK, 0 rows affected (0.05 sec)</span><br><span class=\"line\">Records: 0  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>\n\n<p>ËøôÊó∂Êàë‰ª¨ÂÜçÊü•Áúã‰∏Ä‰∏ã <code>engine_demo_table</code> ÁöÑË°®ÁªìÊûÑ:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SHOW</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> engine_demo_table\\G</span><br><span class=\"line\"><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span> <span class=\"number\">1.</span> <span class=\"type\">row</span> <span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">Table</span>: engine_demo_table</span><br><span class=\"line\"><span class=\"keyword\">Create</span> <span class=\"keyword\">Table</span>: <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `engine_demo_table` (</span><br><span class=\"line\">  `i` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span></span><br><span class=\"line\">) ENGINE<span class=\"operator\">=</span>InnoDB <span class=\"keyword\">DEFAULT</span> CHARSET<span class=\"operator\">=</span>utf8</span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.01</span> sec)</span><br></pre></td></tr></table></figure>\n\n<p>ÂèØ‰ª•ÁúãÂà∞ËØ•Ë°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÂ∑≤ÁªèÊîπ‰∏∫<code>InnoDB</code>‰∫Ü„ÄÇ</p>\n<h1 id=\"4-ÂºïÊìé‰ªãÁªç\"><a href=\"#4-ÂºïÊìé‰ªãÁªç\" class=\"headerlink\" title=\"4. ÂºïÊìé‰ªãÁªç\"></a>4. ÂºïÊìé‰ªãÁªç</h1><h2 id=\"4-1-InnoDB-ÂºïÊìéÔºöÂÖ∑Â§á-Â§ñÈîÆ-ÊîØÊåÅÂäüËÉΩÁöÑ‰∫ãÂä°Â≠òÂÇ®ÂºïÊìé\"><a href=\"#4-1-InnoDB-ÂºïÊìéÔºöÂÖ∑Â§á-Â§ñÈîÆ-ÊîØÊåÅÂäüËÉΩÁöÑ‰∫ãÂä°Â≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"4.1 InnoDB ÂºïÊìéÔºöÂÖ∑Â§á&#x3D;&#x3D;Â§ñÈîÆ&#x3D;&#x3D;ÊîØÊåÅÂäüËÉΩÁöÑ‰∫ãÂä°Â≠òÂÇ®ÂºïÊìé\"></a>4.1 InnoDB ÂºïÊìéÔºöÂÖ∑Â§á&#x3D;&#x3D;Â§ñÈîÆ&#x3D;&#x3D;ÊîØÊåÅÂäüËÉΩÁöÑ‰∫ãÂä°Â≠òÂÇ®ÂºïÊìé</h2><ul>\n<li>MySQL ‰ªé 3.23.34a ÂºÄÂßãÂ∞±ÂåÖÂê´ InnoDB Â≠òÂÇ®ÂºïÊìé„ÄÇ<code>Â§ß‰∫éÁ≠â‰∫é 5.5 ‰πãÂêéÔºåÈªòËÆ§ÈááÁî® InnoDB ÂºïÊìé</code> </li>\n<li>InnoDB ÊòØ MySQL ÁöÑ &#x3D;&#x3D;ÈªòËÆ§‰∫ãÂä°ÂûãÂºïÊìé&#x3D;&#x3D; ÔºåÂÆÉË¢´ËÆæËÆ°Áî®Êù•Â§ÑÁêÜÂ§ßÈáèÁöÑÁü≠ÊúüÔºàshort-livedÔºâ‰∫ãÂä°„ÄÇÂèØ‰ª•Á°Æ‰øù‰∫ãÂä°ÁöÑÂÆåÊï¥Êèê‰∫§ÔºàCommitÔºâÂíåÂõûÊªöÔºàRollbackÔºâ„ÄÇ</li>\n<li>&#x3D;&#x3D;Èô§‰∫ÜÂ¢ûÂä†ÂíåÊü•ËØ¢Â§ñÔºåËøòÈúÄË¶ÅÊõ¥Êñ∞„ÄÅÂà†Èô§Êìç‰Ωú&#x3D;&#x3D;ÔºåÈÇ£‰πàÔºåÂ∫î‰ºòÂÖàÈÄâÊã© InnoDB Â≠òÂÇ®ÂºïÊìé„ÄÇ</li>\n<li><strong>Èô§ÈùûÊúâÈùûÂ∏∏ÁâπÂà´ÁöÑÂéüÂõ†ÈúÄË¶Å‰ΩøÁî®ÂÖ∂‰ªñÁöÑÂ≠òÂÇ®ÂºïÊìéÔºåÂê¶ÂàôÂ∫îËØ•‰ºòÂÖàËÄÉËôëInnoDBÂºïÊìé</strong>„ÄÇ Êï∞ÊçÆÊñá‰ª∂ÁªìÊûÑÔºö</li>\n<li><code>Ë°®Âêç.frm</code> Â≠òÂÇ®Ë°®ÁªìÊûÑÔºàMySQL8.0Êó∂ÔºåÂêàÂπ∂Âú®Ë°®Âêç.ibd‰∏≠Ôºâ</li>\n<li><code>Ë°®Âêç.ibd</code> Â≠òÂÇ®Êï∞ÊçÆÂíåÁ¥¢Âºï</li>\n<li>&#x3D;&#x3D;InnoDBÊòØ ‰∏∫Â§ÑÁêÜÂ∑®Â§ßÊï∞ÊçÆÈáèÁöÑÊúÄÂ§ßÊÄßËÉΩËÆæËÆ°&#x3D;&#x3D;„ÄÇ<ul>\n<li>Âú®‰ª•ÂâçÁöÑÁâàÊú¨‰∏≠ÔºåÂ≠óÂÖ∏Êï∞ÊçÆ‰ª•ÂÖÉÊï∞ÊçÆÊñá‰ª∂„ÄÅÈùû‰∫ãÂä°Ë°®Á≠âÊù•Â≠òÂÇ®„ÄÇÁé∞Âú®Ëøô‰∫õÂÖÉÊï∞ÊçÆÊñá‰ª∂Ë¢´Âà†Èô§‰∫Ü„ÄÇÊØîÂ¶ÇÔºö<code>.frm</code> Ôºå <code>.par</code> Ôºå <code>.trn</code> Ôºå <code>.isl</code> Ôºå Á≠âÈÉΩÂú® MySQL 8.0 ‰∏≠‰∏çÂ≠òÂú®‰∫Ü„ÄÇ</li>\n</ul>\n</li>\n<li>ÂØπÊØî MyISAM ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºå<code>InnoDBÂÜôÁöÑÂ§ÑÁêÜÊïàÁéáÂ∑Æ‰∏Ä‰∫õ</code> ÔºåÂπ∂‰∏î‰ºöÂç†Áî®Êõ¥Â§öÁöÑÁ£ÅÁõòÁ©∫Èó¥‰ª•‰øùÂ≠òÊï∞ÊçÆÂíåÁ¥¢Âºï„ÄÇ</li>\n<li>MyISAM Âè™ÁºìÂ≠òÁ¥¢ÂºïÔºå‰∏çÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆÔºõInnoDB‰∏ç‰ªÖÁºìÂ≠òÁ¥¢ÂºïËøòË¶ÅÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆ(Âä†ËΩΩÊï∞ÊçÆÊó∂Ôºå‰πüË¶ÅÂä†ËΩΩÁ¥¢Âºï)Ôºå<code>ÂØπÂÜÖÂ≠òË¶ÅÊ±ÇËæÉÈ´ò</code> ÔºåËÄå‰∏îÂÜÖÂ≠òÂ§ßÂ∞èÂØπÊÄßËÉΩÊúâÂÜ≥ÂÆöÊÄßÁöÑÂΩ±Âìç„ÄÇ</li>\n</ul>\n<h2 id=\"4-2-MyISAM-ÂºïÊìéÔºö‰∏ªË¶ÅÁöÑÈùû‰∫ãÂä°Â§ÑÁêÜÂ≠òÂÇ®ÂºïÊìé\"><a href=\"#4-2-MyISAM-ÂºïÊìéÔºö‰∏ªË¶ÅÁöÑÈùû‰∫ãÂä°Â§ÑÁêÜÂ≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"4.2 MyISAM ÂºïÊìéÔºö‰∏ªË¶ÅÁöÑÈùû‰∫ãÂä°Â§ÑÁêÜÂ≠òÂÇ®ÂºïÊìé\"></a>4.2 MyISAM ÂºïÊìéÔºö‰∏ªË¶ÅÁöÑÈùû‰∫ãÂä°Â§ÑÁêÜÂ≠òÂÇ®ÂºïÊìé</h2><ul>\n<li>MyISAM Êèê‰æõ‰∫ÜÂ§ßÈáèÁöÑÁâπÊÄßÔºåÂåÖÊã¨ÂÖ®ÊñáÁ¥¢Âºï„ÄÅÂéãÁº©„ÄÅÁ©∫Èó¥ÂáΩÊï∞ÔºàGISÔºâÁ≠âÔºå‰ΩÜ MyISAM <code>‰∏çÊîØÊåÅ‰∫ãÂä°„ÄÅË°åÁ∫ßÈîÅ„ÄÅÂ§ñÈîÆ</code>ÔºåÊúâ‰∏Ä‰∏™ÊØ´Êó†ÁñëÈóÆÁöÑÁº∫Èô∑Â∞±ÊòØ <code>Â¥©Ê∫ÉÂêéÊó†Ê≥ïÂÆâÂÖ®ÊÅ¢Â§ç</code>„ÄÇ</li>\n<li><code>5.5 ‰πãÂâçÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìé</code></li>\n<li>‰ºòÂäøÊòØËÆøÈóÆÁöÑ <code>ÈÄüÂ∫¶Âø´</code> ÔºåÂØπ‰∫ãÂä°ÂÆåÊï¥ÊÄßÊ≤°ÊúâË¶ÅÊ±ÇÊàñËÄÖ‰ª• SELECT„ÄÅINSERT ‰∏∫‰∏ªÁöÑÂ∫îÁî®</li>\n<li>ÈíàÂØπÊï∞ÊçÆÁªüËÆ°ÊúâÈ¢ùÂ§ñÁöÑÂ∏∏Êï∞Â≠òÂÇ®„ÄÇÊïÖËÄå<code>count(*)</code> ÁöÑÊü•ËØ¢ÊïàÁéáÂæàÈ´ò</li>\n<li>Êï∞ÊçÆÊñá‰ª∂ÁªìÊûÑ<ul>\n<li><code>Ë°®Âêç.frm</code> Â≠òÂÇ®Ë°®ÁªìÊûÑ</li>\n<li><code>Ë°®Âêç.MYD</code> Â≠òÂÇ®Êï∞ÊçÆÔºàMYDataÔºâ</li>\n<li><code>Ë°®Âêç.MYI</code> Â≠òÂÇ®Á¥¢ÂºïÔºàMYIndexÔºâ</li>\n</ul>\n</li>\n<li>Â∫îÁî®Âú∫ÊôØ:Âè™ËØªÂ∫îÁî®ÊàñËÄÖ‰ª•ËØª‰∏∫‰∏ªÁöÑ‰∏öÂä°</li>\n</ul>\n<h2 id=\"4-3-Archive-ÂºïÊìéÔºöÁî®‰∫éÊï∞ÊçÆÂ≠òÊ°£\"><a href=\"#4-3-Archive-ÂºïÊìéÔºöÁî®‰∫éÊï∞ÊçÆÂ≠òÊ°£\" class=\"headerlink\" title=\"4.3 Archive ÂºïÊìéÔºöÁî®‰∫éÊï∞ÊçÆÂ≠òÊ°£\"></a>4.3 Archive ÂºïÊìéÔºöÁî®‰∫éÊï∞ÊçÆÂ≠òÊ°£</h2><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335661.png\" alt=\"image-20220713231445827\"></p>\n<p>‰∏ãË°®Â±ïÁ§∫‰∫Ü ARCHIVE Â≠òÂÇ®ÂºïÊìéÂäüËÉΩÔºö</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">ÁâπÂæÅ</th>\n<th align=\"left\">ÊîØÊåÅ</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">BÊ†ëÁ¥¢Âºï</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\"><code>Â§á‰ªΩ/Êó∂Èó¥ÁÇπÊÅ¢Â§ç</code>(Âú®ÊúçÂä°Âô®‰∏≠ÂÆûÁé∞ÔºåËÄå‰∏çÊòØÂú®Â≠òÂÇ®ÂºïÊìé‰∏≠)</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ÈõÜÁæ§Êï∞ÊçÆÂ∫ìÊîØÊåÅ</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ËÅöÈõÜÁ¥¢Âºï</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ÂéãÁº©Êï∞ÊçÆ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Êï∞ÊçÆÁºìÂ≠ò</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Âä†ÂØÜÊï∞ÊçÆ(Âä†ÂØÜÂäüËÉΩÂú®ÊúçÂä°Âô®‰∏≠ÂÆûÁé∞)</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Â§ñÈîÆÊîØÊåÅ</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ÂÖ®ÊñáÊ£ÄÁ¥¢Á¥¢Âºï</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Âú∞ÁêÜÁ©∫Èó¥Êï∞ÊçÆÁ±ªÂûãÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Âú∞ÁêÜÁ©∫Èó¥Á¥¢ÂºïÊîØÊåÅ</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ÂìàÂ∏åÁ¥¢Âºï</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Á¥¢ÂºïÁºìÂ≠ò</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\"><code>ÈîÅÁ≤íÂ∫¶</code></td>\n<td align=\"left\">Ë°åÈîÅ</td>\n</tr>\n<tr>\n<td align=\"left\">MVCC</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Â≠òÂÇ®ÈôêÂà∂</td>\n<td align=\"left\">Ê≤°Êúâ‰ªª‰ΩïÈôêÂà∂</td>\n</tr>\n<tr>\n<td align=\"left\">‰∫§Êòì</td>\n<td align=\"left\">‰∏çÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Êõ¥Êñ∞Êï∞ÊçÆÂ≠óÂÖ∏ÁöÑÁªüËÆ°‰ø°ÊÅØ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n</tbody></table>\n<h2 id=\"4-4-Blackhole-ÂºïÊìéÔºö‰∏¢ÂºÉÂÜôÊìç‰ΩúÔºåËØªÊìç‰Ωú‰ºöËøîÂõûÁ©∫ÂÜÖÂÆπ\"><a href=\"#4-4-Blackhole-ÂºïÊìéÔºö‰∏¢ÂºÉÂÜôÊìç‰ΩúÔºåËØªÊìç‰Ωú‰ºöËøîÂõûÁ©∫ÂÜÖÂÆπ\" class=\"headerlink\" title=\"4.4 Blackhole ÂºïÊìéÔºö‰∏¢ÂºÉÂÜôÊìç‰ΩúÔºåËØªÊìç‰Ωú‰ºöËøîÂõûÁ©∫ÂÜÖÂÆπ\"></a>4.4 Blackhole ÂºïÊìéÔºö‰∏¢ÂºÉÂÜôÊìç‰ΩúÔºåËØªÊìç‰Ωú‰ºöËøîÂõûÁ©∫ÂÜÖÂÆπ</h2><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335029.png\" alt=\"image-20220713231926786\"></p>\n<h2 id=\"4-5-CSV-ÂºïÊìéÔºöÂ≠òÂÇ®Êï∞ÊçÆÊó∂Ôºå‰ª•ÈÄóÂè∑ÂàÜÈöîÂêÑ‰∏™Êï∞ÊçÆÈ°π\"><a href=\"#4-5-CSV-ÂºïÊìéÔºöÂ≠òÂÇ®Êï∞ÊçÆÊó∂Ôºå‰ª•ÈÄóÂè∑ÂàÜÈöîÂêÑ‰∏™Êï∞ÊçÆÈ°π\" class=\"headerlink\" title=\"4.5 CSV ÂºïÊìéÔºöÂ≠òÂÇ®Êï∞ÊçÆÊó∂Ôºå‰ª•ÈÄóÂè∑ÂàÜÈöîÂêÑ‰∏™Êï∞ÊçÆÈ°π\"></a>4.5 CSV ÂºïÊìéÔºöÂ≠òÂÇ®Êï∞ÊçÆÊó∂Ôºå‰ª•ÈÄóÂè∑ÂàÜÈöîÂêÑ‰∏™Êï∞ÊçÆÈ°π</h2><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335774.png\" alt=\"image-20220713232053842\"></p>\n<p>‰ΩøÁî®Ê°à‰æãÂ¶Ç‰∏ã</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> test (i <span class=\"type\">INT</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>, c <span class=\"type\">CHAR</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>) ENGINE <span class=\"operator\">=</span> CSV;</span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.06</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> test <span class=\"keyword\">VALUES</span>(<span class=\"number\">1</span>,<span class=\"string\">&#x27;record one&#x27;</span>),(<span class=\"number\">2</span>,<span class=\"string\">&#x27;record two&#x27;</span>);</span><br><span class=\"line\">Query OK, <span class=\"number\">2</span> <span class=\"keyword\">rows</span> affected (<span class=\"number\">0.05</span> sec)</span><br><span class=\"line\">Records: <span class=\"number\">2</span>  Duplicates: <span class=\"number\">0</span>  Warnings: <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> test; </span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---+------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span>i  <span class=\"operator\">|</span>c           <span class=\"operator\">|</span> </span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---+------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> <span class=\"number\">1</span> <span class=\"operator\">|</span> record <span class=\"keyword\">one</span> <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> <span class=\"number\">2</span> <span class=\"operator\">|</span> record two <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---+------------+</span></span><br><span class=\"line\"><span class=\"number\">2</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ÂàõÂª∫ CSV Ë°®Ëøò‰ºöÂàõÂª∫Áõ∏Â∫îÁöÑ <code>ÂÖÉÊñá‰ª∂</code> ÔºåÁî®‰∫é <code>Â≠òÂÇ®Ë°®ÁöÑÁä∂ÊÄÅ</code> Âíå <code>Ë°®‰∏≠Â≠òÂú®ÁöÑË°åÊï∞</code> „ÄÇÊ≠§Êñá‰ª∂ÁöÑÂêçÁß∞‰∏éË°®ÁöÑÂêçÁß∞Áõ∏ ÂêåÔºåÂêéÁºÄ‰∏∫ <code>CSM</code>„ÄÇÂ¶ÇÂõæÊâÄÁ§∫</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335054.png\" alt=\"image-20220713232615402\"></p>\n<p>Â¶ÇÊûúÊ£ÄÊü• <code>test.CSV</code> ÈÄöËøáÊâßË°å‰∏äËø∞ËØ≠Âè•ÂàõÂª∫ÁöÑÊï∞ÊçÆÂ∫ìÁõÆÂΩï‰∏≠ÁöÑÊñá‰ª∂ÔºåÂÖ∂ÂÜÖÂÆπ‰ΩøÁî®Notepad++ÊâìÂºÄÂ¶Ç‰∏ã:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;1&quot;,&quot;record one&quot;</span><br><span class=\"line\">&quot;2&quot;,&quot;record two&quot;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ËøôÁßçÊ†ºÂºèÂèØ‰ª•Ë¢´ Microsoft Excel Á≠âÁîµÂ≠êË°®Ê†ºÂ∫îÁî®Á®ãÂ∫èËØªÂèñÔºåÁîöËá≥ÂÜôÂÖ•„ÄÇ‰ΩøÁî® Microsoft Excel ÊâìÂºÄÂ¶ÇÂõæÊâÄÁ§∫Ôºö</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132335502.png\" alt=\"image-20220713232637071\"></p>\n<h2 id=\"4-6-Memory-ÂºïÊìéÔºöÁΩÆ‰∫éÂÜÖÂ≠òÁöÑË°®\"><a href=\"#4-6-Memory-ÂºïÊìéÔºöÁΩÆ‰∫éÂÜÖÂ≠òÁöÑË°®\" class=\"headerlink\" title=\"4.6 Memory ÂºïÊìéÔºöÁΩÆ‰∫éÂÜÖÂ≠òÁöÑË°®\"></a>4.6 Memory ÂºïÊìéÔºöÁΩÆ‰∫éÂÜÖÂ≠òÁöÑË°®</h2><p><strong>Ê¶ÇËø∞:</strong></p>\n<p>Memory ÈááÁî®ÁöÑÈÄªËæë‰ªãË¥®ÊòØ <code>ÂÜÖÂ≠ò Ôºå ÂìçÂ∫îÈÄüÂ∫¶ÂæàÂø´</code> Ôºå‰ΩÜÊòØÂΩìmysqldÂÆàÊä§ËøõÁ®ãÂ¥©Ê∫ÉÁöÑÊó∂ÂÄô <code>Êï∞ÊçÆ‰ºö‰∏¢Â§±</code> „ÄÇÂè¶ Â§ñÔºåË¶ÅÊ±ÇÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÊòØÊï∞ÊçÆÈïøÂ∫¶‰∏çÂèòÁöÑÊ†ºÂºèÔºåÊØîÂ¶ÇÔºåBlob Âíå Text Á±ªÂûãÁöÑÊï∞ÊçÆ‰∏çÂèØÁî®„ÄÇ</p>\n<p><strong>‰∏ªË¶ÅÁâπÂæÅ:</strong></p>\n<ul>\n<li>Memory ÂêåÊó∂ <code>ÊîØÊåÅÂìàÂ∏åÔºàHASHÔºâÁ¥¢Âºï</code>Âíå <code>B+Ê†ëÁ¥¢Âºï</code> „ÄÇ</li>\n<li>Memory Ë°®Ëá≥Â∞ëÊØî MyISAMË°® Ë¶Å <code>Âø´‰∏Ä‰∏™Êï∞ÈáèÁ∫ß</code>„ÄÇ</li>\n<li>MEMORY <code>Ë°®ÁöÑÂ§ßÂ∞èÊòØÂèóÈôêÂà∂</code>ÁöÑ„ÄÇË°®ÁöÑÂ§ßÂ∞è‰∏ªË¶ÅÂèñÂÜ≥‰∫é‰∏§‰∏™ÂèÇÊï∞ÔºåÂàÜÂà´ÊòØ <code>max_rows</code> Âíå<code>max_heap_table_size</code>„ÄÇÂÖ∂‰∏≠Ôºåmax_rowsÂèØ‰ª•Âú®ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÔºõmax_heap_table_size ÁöÑÂ§ßÂ∞èÈªòËÆ§‰∏∫ 16 MBÔºåÂèØ‰ª•ÊåâÈúÄË¶ÅËøõË°åÊâ©Â§ß„ÄÇ</li>\n<li>Êï∞ÊçÆÊñá‰ª∂‰∏éÁ¥¢ÂºïÊñá‰ª∂ÂàÜÂºÄÂ≠òÂÇ®„ÄÇ</li>\n<li>Áº∫ÁÇπÔºöÂÖ∂Êï∞ÊçÆÊòì‰∏¢Â§±ÔºåÁîüÂëΩÂë®ÊúüÁü≠„ÄÇÂü∫‰∫éËøô‰∏™Áº∫Èô∑ÔºåÈÄâÊã© MEMORY Â≠òÂÇ®ÂºïÊìéÊó∂ÈúÄË¶ÅÁâπÂà´Â∞èÂøÉ„ÄÇ</li>\n</ul>\n<p><strong>‰ΩøÁî®MemoryÂ≠òÂÇ®ÂºïÊìéÁöÑÂú∫ÊôØ:</strong></p>\n<ol>\n<li><code>ÁõÆÊ†áÊï∞ÊçÆÊØîËæÉÂ∞è</code>ÔºåËÄå‰∏îÈùûÂ∏∏ <code>È¢ëÁπÅÁöÑËøõË°åËÆøÈóÆ</code>ÔºåÂú®ÂÜÖÂ≠ò‰∏≠Â≠òÊîæÊï∞ÊçÆÔºåÂ¶ÇÊûúÂ§™Â§ßÁöÑÊï∞ÊçÆ‰ºöÈÄ†Êàê <code>ÂÜÖÂ≠òÊ∫¢Âá∫</code> „ÄÇÂèØ‰ª•ÈÄöËøáÂèÇÊï∞ <code>max_heap_table_size</code> ÊéßÂà∂ Memory Ë°®ÁöÑÂ§ßÂ∞èÔºåÈôêÂà∂ Memory Ë°®ÁöÑÊúÄÂ§ßÁöÑÂ§ßÂ∞è„ÄÇ</li>\n<li>Â¶ÇÊûú <code>Êï∞ÊçÆÊòØ‰∏¥Êó∂ÁöÑ</code> ÔºåËÄå‰∏î <code>ÂøÖÈ°ªÁ´ãÂç≥ÂèØÁî®</code> ÂæóÂà∞ÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•ÊîæÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇ</li>\n<li>Â≠òÂÇ®Âú® Memory Ë°®‰∏≠ÁöÑÊï∞ÊçÆÂ¶ÇÊûúÁ™ÅÁÑ∂Èó¥ <code>‰∏¢Â§±ÁöÑËØù‰πüÊ≤°ÊúâÂ§™Â§ßÁöÑÂÖ≥Á≥ª</code>„ÄÇ</li>\n</ol>\n<h2 id=\"4-7-Federated-ÂºïÊìéÔºöËÆøÈóÆËøúÁ®ãË°®\"><a href=\"#4-7-Federated-ÂºïÊìéÔºöËÆøÈóÆËøúÁ®ãË°®\" class=\"headerlink\" title=\"4.7 Federated ÂºïÊìéÔºöËÆøÈóÆËøúÁ®ãË°®\"></a>4.7 Federated ÂºïÊìéÔºöËÆøÈóÆËøúÁ®ãË°®</h2><p>Federated ÂºïÊìéÊòØËÆøÈóÆÂÖ∂‰ªñMySQLÊúçÂä°Âô®ÁöÑ‰∏Ä‰∏™ ‰ª£ÁêÜ ÔºåÂ∞ΩÁÆ°ËØ•ÂºïÊìéÁúãËµ∑Êù•Êèê‰æõ‰∫Ü‰∏ÄÁßçÂæàÂ•ΩÁöÑË∑®ÊúçÂä°Âô®ÁöÑÁÅµÊ¥ªÊÄß Ôºå‰ΩÜ‰πüÁªèÂ∏∏Â∏¶Êù•ÈóÆÈ¢òÔºåÂõ†Ê≠§ÈªòËÆ§ÊòØÁ¶ÅÁî®ÁöÑ „ÄÇ</p>\n<h2 id=\"4-8-Merge-ÂºïÊìéÔºöÁÆ°ÁêÜÂ§ö‰∏™MyISAMË°®ÊûÑÊàêÁöÑË°®ÈõÜÂêà\"><a href=\"#4-8-Merge-ÂºïÊìéÔºöÁÆ°ÁêÜÂ§ö‰∏™MyISAMË°®ÊûÑÊàêÁöÑË°®ÈõÜÂêà\" class=\"headerlink\" title=\"4.8 Merge ÂºïÊìéÔºöÁÆ°ÁêÜÂ§ö‰∏™MyISAMË°®ÊûÑÊàêÁöÑË°®ÈõÜÂêà\"></a>4.8 Merge ÂºïÊìéÔºöÁÆ°ÁêÜÂ§ö‰∏™MyISAMË°®ÊûÑÊàêÁöÑË°®ÈõÜÂêà</h2><h2 id=\"4-9-NDBÂºïÊìéÔºöMySQLÈõÜÁæ§‰∏ìÁî®Â≠òÂÇ®ÂºïÊìé\"><a href=\"#4-9-NDBÂºïÊìéÔºöMySQLÈõÜÁæ§‰∏ìÁî®Â≠òÂÇ®ÂºïÊìé\" class=\"headerlink\" title=\"4.9 NDBÂºïÊìéÔºöMySQLÈõÜÁæ§‰∏ìÁî®Â≠òÂÇ®ÂºïÊìé\"></a>4.9 NDBÂºïÊìéÔºöMySQLÈõÜÁæ§‰∏ìÁî®Â≠òÂÇ®ÂºïÊìé</h2><p>‰πüÂè´ÂÅö NDB Cluster Â≠òÂÇ®ÂºïÊìéÔºå‰∏ªË¶ÅÁî®‰∫é <code>MySQL Cluster ÂàÜÂ∏ÉÂºèÈõÜÁæ§</code> ÁéØÂ¢É„ÄÇ</p>\n<h2 id=\"4-10-ÂºïÊìéÂØπÊØî\"><a href=\"#4-10-ÂºïÊìéÂØπÊØî\" class=\"headerlink\" title=\"4.10 ÂºïÊìéÂØπÊØî\"></a>4.10 ÂºïÊìéÂØπÊØî</h2><p>MySQL‰∏≠Âêå‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÔºå‰∏çÂêåÁöÑË°®ÂèØ‰ª•ÈÄâÊã©‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇÂ¶Ç‰∏ãË°®ÂØπÂ∏∏Áî®Â≠òÂÇ®ÂºïÊìéÂÅöÂá∫‰∫ÜÂØπÊØî„ÄÇ</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">ÁâπÁÇπ</th>\n<th align=\"left\">MyISAM</th>\n<th align=\"left\">InnoDB</th>\n<th align=\"left\">MEMORY</th>\n<th align=\"left\">MERGE</th>\n<th align=\"left\">NDB</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">Â≠òÂÇ®ÈôêÂà∂</td>\n<td align=\"left\">Êúâ</td>\n<td align=\"left\">64TB</td>\n<td align=\"left\">Êúâ</td>\n<td align=\"left\">Ê≤°Êúâ</td>\n<td align=\"left\">Êúâ</td>\n</tr>\n<tr>\n<td align=\"left\"><code>‰∫ãÂä°ÂÆâÂÖ®ÊÄß</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><code>ÈîÅÊú∫Âà∂</code></td>\n<td align=\"left\">Ë°®ÈîÅÔºåÂç≥‰ΩøÊìç‰Ωú‰∏ÄÊù° ËÆ∞ÂΩï‰πü‰ºöÈîÅ‰ΩèÊï¥‰∏™Ë°®Ôºå‰∏çÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú</td>\n<td align=\"left\">Ë°åÈîÅÔºåÊìç‰ΩúÊó∂Âè™ÈîÅÊüê‰∏ÄË°åÔºå‰∏çÂØπÂÖ∂ÂÆÉË°åÊúâÂΩ±ÂìçÔºåÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú</td>\n<td align=\"left\">Ë°®ÈîÅ</td>\n<td align=\"left\">Ë°®ÈîÅ</td>\n<td align=\"left\">Ë°åÈîÅ</td>\n</tr>\n<tr>\n<td align=\"left\">BÊ†ëÁ¥¢Âºï</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ÂìàÂ∏åÁ¥¢Âºï</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">ÂÖ®ÊñáÁ¥¢Âºï</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">ÈõÜÁæ§Á¥¢Âºï</td>\n<td align=\"left\"></td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">Êï∞ÊçÆÁºìÂ≠ò</td>\n<td align=\"left\"></td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><code>Á¥¢ÂºïÁºìÂ≠ò</code></td>\n<td align=\"left\">Âè™ÁºìÂ≠òÁ¥¢ÂºïÔºå‰∏çÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆ</td>\n<td align=\"left\">‰∏ç‰ªÖÁºìÂ≠òÁ¥¢ÂºïËøòË¶ÅÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆÔºåÂØπÂÜÖÂ≠òË¶ÅÊ±ÇËæÉÈ´òÔºåËÄå‰∏îÂÜÖÂ≠òÂ§ßÂ∞èÂØπÊÄßËÉΩÊúâÂÜ≥ÂÆöÊÄßÁöÑÂΩ±Âìç</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"left\">Êï∞ÊçÆÂèØÂéãÁº©</td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">Á©∫Èó¥‰ΩøÁî®</td>\n<td align=\"left\">‰Ωé</td>\n<td align=\"left\">È´ò</td>\n<td align=\"left\">N&#x2F;A</td>\n<td align=\"left\">‰Ωé</td>\n<td align=\"left\">‰Ωé</td>\n</tr>\n<tr>\n<td align=\"left\">ÂÜÖÂ≠ò‰ΩøÁî®</td>\n<td align=\"left\">‰Ωé</td>\n<td align=\"left\">È´ò</td>\n<td align=\"left\">‰∏≠Á≠â</td>\n<td align=\"left\">‰Ωé</td>\n<td align=\"left\">È´ò</td>\n</tr>\n<tr>\n<td align=\"left\">ÊâπÈáèÊèíÂÖ•ÁöÑÈÄüÂ∫¶</td>\n<td align=\"left\">È´ò</td>\n<td align=\"left\">‰Ωé</td>\n<td align=\"left\">È´ò</td>\n<td align=\"left\">È´ò</td>\n<td align=\"left\">È´ò</td>\n</tr>\n<tr>\n<td align=\"left\"><code>ÊîØÊåÅÂ§ñÈîÆ</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">ÊîØÊåÅ</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<h1 id=\"5-MyISAM-Âíå-InnoDB\"><a href=\"#5-MyISAM-Âíå-InnoDB\" class=\"headerlink\" title=\"5. MyISAM Âíå InnoDB\"></a>5. MyISAM Âíå InnoDB</h1><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132336896.png\" alt=\"image-20220713230507218\"></p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">ÂØπÊØîÈ°π</th>\n<th align=\"center\">MyISAM</th>\n<th align=\"center\">InnoDB</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Â§ñÈîÆ</td>\n<td align=\"center\">‰∏çÊîØÊåÅ</td>\n<td align=\"center\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"center\">‰∫ãÂä°</td>\n<td align=\"center\">‰∏çÊîØÊåÅ</td>\n<td align=\"center\">ÊîØÊåÅ</td>\n</tr>\n<tr>\n<td align=\"center\">Ë°åË°®ÈîÅ</td>\n<td align=\"center\">Ë°®ÈîÅÔºåÂç≥‰ΩøÊìç‰Ωú‰∏ÄÊù°ËÆ∞ÂΩï‰πü‰ºöÈîÅ‰ΩèÊï¥‰∏™Ë°®Ôºå‰∏çÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú</td>\n<td align=\"center\">Ë°åÈîÅÔºåÊìç‰ΩúÊó∂Âè™ÈîÅÊüê‰∏ÄË°åÔºå‰∏çÂØπÂÖ∂ÂÆÉË°åÊúâÂΩ±ÂìçÔºåÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÊìç‰Ωú</td>\n</tr>\n<tr>\n<td align=\"center\">ÁºìÂ≠ò</td>\n<td align=\"center\">Âè™ÁºìÂ≠òÁ¥¢ÂºïÔºå‰∏çÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆ</td>\n<td align=\"center\">‰∏ç‰ªÖÁºìÂ≠òÁ¥¢ÂºïËøòË¶ÅÁºìÂ≠òÁúüÂÆûÊï∞ÊçÆÔºåÂØπÂÜÖÂ≠òË¶ÅÊ±ÇËæÉÈ´òÔºåËÄå‰∏îÂÜÖÂ≠òÂ§ßÂ∞èÂØπÊÄßËÉΩÊúâÂÜ≥ÂÆöÊÄßÁöÑÂΩ±Âìç</td>\n</tr>\n<tr>\n<td align=\"center\">Ëá™Â∏¶Á≥ªÁªüË°®‰ΩøÁî®</td>\n<td align=\"center\">Y</td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td align=\"center\">ÂÖ≥Ê≥®ÁÇπ</td>\n<td align=\"center\">ÊÄßËÉΩÔºöËäÇÁúÅËµÑÊ∫ê„ÄÅÊ∂àËÄóÂ∞ë„ÄÅÁÆÄÂçï‰∏öÂä°</td>\n<td align=\"center\">‰∫ãÂä°ÔºöÂπ∂ÂèëÂÜô„ÄÅ‰∫ãÂä°„ÄÅÊõ¥Â§ßËµÑÊ∫ê</td>\n</tr>\n<tr>\n<td align=\"center\">ÈªòËÆ§ÂÆâË£Ö</td>\n<td align=\"center\">Y</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td align=\"center\">ÈªòËÆ§‰ΩøÁî®</td>\n<td align=\"center\">N</td>\n<td align=\"center\">Y</td>\n</tr>\n</tbody></table>\n<h1 id=\"6-ÈòøÈáåÂ∑¥Â∑¥„ÄÅÊ∑òÂÆùÁî®Âì™‰∏™\"><a href=\"#6-ÈòøÈáåÂ∑¥Â∑¥„ÄÅÊ∑òÂÆùÁî®Âì™‰∏™\" class=\"headerlink\" title=\"6. ÈòøÈáåÂ∑¥Â∑¥„ÄÅÊ∑òÂÆùÁî®Âì™‰∏™\"></a>6. ÈòøÈáåÂ∑¥Â∑¥„ÄÅÊ∑òÂÆùÁî®Âì™‰∏™</h1><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207132336908.png\" alt=\"image-20220713230922017\"></p>\n<ul>\n<li><strong>Percona</strong> ‰∏∫ MySQL Êï∞ÊçÆÂ∫ìÊúçÂä°Âô®ËøõË°å‰∫ÜÊîπËøõÔºåÂú®ÂäüËÉΩÂíåÊÄßËÉΩ‰∏äËæÉ MySQL ÊúâÂæàÊòæËëóÁöÑÊèêÂçá„ÄÇ</li>\n<li>ËØ•ÁâàÊú¨ÊèêÂçá‰∫ÜÂú®È´òË¥üËΩΩÊÉÖÂÜµ‰∏ãÁöÑ InnoDB ÁöÑÊÄßËÉΩ„ÄÅ‰∏∫ DBA Êèê‰æõ‰∏Ä‰∫õÈùûÂ∏∏ÊúâÁî®ÁöÑÊÄßËÉΩËØäÊñ≠Â∑•ÂÖ∑ÔºõÂè¶Â§ñÊúâÊõ¥Â§öÁöÑÂèÇÊï∞ÂíåÂëΩ‰ª§Êù•ÊéßÂà∂ÊúçÂä°Âô®Ë°å‰∏∫„ÄÇ</li>\n<li>ËØ•ÂÖ¨Âè∏Êñ∞Âª∫‰∫Ü‰∏ÄÊ¨æÂ≠òÂÇ®ÂºïÊìéÂè´ <code>Xtradb</code> ÂÆåÂÖ®ÂèØ‰ª•Êõø‰ª£<code>Innodb</code> ÔºåÂπ∂‰∏îÂú®ÊÄßËÉΩÂíåÂπ∂Âèë‰∏äÂÅöÂæóÊõ¥Â•Ω</li>\n<li>ÈòøÈáåÂ∑¥Â∑¥Â§ßÈÉ®ÂàÜ MySQL Êï∞ÊçÆÂ∫ìÂÖ∂ÂÆû‰ΩøÁî®ÁöÑ percona ÁöÑÂéüÂûãÂä†‰ª•‰øÆÊîπ„ÄÇ</li>\n</ul>\n<h1 id=\"7-Ë°•ÂÖÖ\"><a href=\"#7-Ë°•ÂÖÖ\" class=\"headerlink\" title=\"7. Ë°•ÂÖÖ:\"></a>7. Ë°•ÂÖÖ:</h1><h2 id=\"7-1-InnoDB-Ë°®ÁöÑ‰ºòÂäø\"><a href=\"#7-1-InnoDB-Ë°®ÁöÑ‰ºòÂäø\" class=\"headerlink\" title=\"7.1 InnoDB Ë°®ÁöÑ‰ºòÂäø\"></a>7.1 InnoDB Ë°®ÁöÑ‰ºòÂäø</h2><p>InnoDB Â≠òÂÇ®ÂºïÊìéÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠Êã•ÊúâËØ∏Â§ö‰ºòÂäøÔºåÊØîÂ¶ÇÊìç‰Ωú‰æøÂà©„ÄÅÊèêÈ´ò‰∫ÜÊï∞ÊçÆÂ∫ìÁöÑÊÄßËÉΩ„ÄÅÁª¥Êä§ÊàêÊú¨‰ΩéÁ≠â„ÄÇÂ¶ÇÊûúÁî±‰∫éÁ°¨‰ª∂ÊàñËΩØ‰ª∂ÁöÑÂéüÂõ†ÂØºËá¥ÊúçÂä°Âô®Â¥©Ê∫ÉÔºåÈÇ£‰πàÂú®ÈáçÂêØÊúçÂä°Âô®‰πãÂêé‰∏çÈúÄË¶ÅËøõË°åÈ¢ùÂ§ñÁöÑÊìç‰Ωú„ÄÇInnoDB Â¥©Ê∫ÉÊÅ¢Â§çÂäüËÉΩËá™Âä®Â∞Ü‰πãÂâçÊèê‰∫§ÁöÑÂÜÖÂÆπÂÆöÂûãÔºåÁÑ∂ÂêéÊí§ÈîÄÊ≤°ÊúâÊèê‰∫§ÁöÑËøõÁ®ãÔºåÈáçÂêØ‰πãÂêéÁªßÁª≠‰ªéÂ¥©Ê∫ÉÁÇπÂºÄÂßãÊâßË°å„ÄÇ</p>\n<p>InnoDB Â≠òÂÇ®ÂºïÊìéÂú®‰∏ªÂÜÖÂ≠ò‰∏≠Áª¥Êä§ÁºìÂÜ≤Ê±†ÔºåÈ´òÈ¢ëÁéá‰ΩøÁî®ÁöÑÊï∞ÊçÆÂ∞ÜÂú®ÂÜÖÂ≠ò‰∏≠Áõ¥Êé•Ë¢´Â§ÑÁêÜ„ÄÇËøôÁßçÁºìÂ≠òÊñπÂºèÂ∫îÁî®‰∫éÂ§öÁßç‰ø°ÊÅØÔºåÂä†ÈÄü‰∫ÜÂ§ÑÁêÜËøõÁ®ã„ÄÇ</p>\n<p>Âú®‰∏ìÁî®ÊúçÂä°Âô®‰∏äÔºåÁâ©ÁêÜÂÜÖÂ≠ò‰∏≠È´òËææ 80% ÁöÑÈÉ®ÂàÜË¢´Â∫îÁî®‰∫éÁºìÂÜ≤Ê±†„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÊèíÂÖ•‰∏çÂêåÁöÑË°®‰∏≠ÔºåÂèØ‰ª•ËÆæÁΩÆÂ§ñÈîÆÂä†Âº∫Êï∞ÊçÆÁöÑÂÆåÊï¥ÊÄß„ÄÇÊõ¥Êñ∞ÊàñËÄÖÂà†Èô§Êï∞ÊçÆÔºåÂÖ≥ËÅîÊï∞ÊçÆÂ∞Ü‰ºöË¢´Ëá™Âä®Êõ¥Êñ∞ÊàñÂà†Èô§„ÄÇÂ¶ÇÊûúËØïÂõæÂ∞ÜÊï∞ÊçÆÊèíÂÖ•‰ªéË°®Ôºå‰ΩÜÂú®‰∏ªË°®‰∏≠Ê≤°ÊúâÂØπÂ∫îÁöÑÊï∞ÊçÆÔºåÊèíÂÖ•ÁöÑÊï∞ÊçÆÂ∞ÜË¢´Ëá™Âä®ÁßªÈô§„ÄÇÂ¶ÇÊûúÁ£ÅÁõòÊàñÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂá∫Áé∞Â¥©Ê∫ÉÔºå Âú®‰ΩøÁî®ËÑèÊï∞ÊçÆ‰πãÂâçÔºåÊ†°È™åÂíåÊú∫Âà∂‰ºöÂèëÂá∫Ë≠¶Âëä„ÄÇÂΩìÊØè‰∏™Ë°®ÁöÑ‰∏ªÈîÆÈÉΩËÆæÁΩÆÂêàÁêÜÊó∂Ôºå‰∏éËøô‰∫õÂàóÊúâÂÖ≥ÁöÑÊìç‰Ωú‰ºöË¢´Ëá™Âä®‰ºòÂåñ„ÄÇÊèíÂÖ•„ÄÅÊõ¥Êñ∞ÂíåÂà†Èô§Êìç‰ΩúÈÄöËøáÂÅöÊîπÂèòÁºìÂÜ≤Ëá™Âä®Êú∫Âà∂ËøõË°å‰ºòÂåñ„ÄÇ<code>InnoDB ‰∏çÊîØÊåÅÂΩìÂâçËØªÂÜôÔºå‰πü‰ºöÁºìÂÜ≤ÊîπÂèòÁöÑÊï∞ÊçÆÂà∞Êï∞ÊçÆÊµÅÁ£ÅÁõò</code>.</p>\n<p>InnoDB ÁöÑÊÄßËÉΩ‰ºòÂäø‰∏çÂè™Â≠òÂú®‰∫éÈïøÊó∂ËøêË°åÊü•ËØ¢ÁöÑÂ§ßÂûãË°®„ÄÇÂú®Âêå‰∏ÄÂàóÂ§öÊ¨°Ë¢´Êü•ËØ¢Êó∂ÔºåËá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢Âºï‰ºöÊèêÈ´òÊü•ËØ¢ÁöÑÈÄüÂ∫¶„ÄÇ‰ΩøÁî® InnoDB ÂèØ‰ª•ÂéãÁº©Ë°®ÂíåÁõ∏ÂÖ≥ÁöÑÁ¥¢ÂºïÔºåÂèØ‰ª• <code>Âú®‰∏çÂΩ±ÂìçÊÄßËÉΩÂíåÂèØÁî®ÊÄßÁöÑÊÉÖÂÜµ‰∏ãÂàõÂª∫ÊàñÂà†Èô§Á¥¢Âºï</code>„ÄÇÂØπ‰∫éÂ§ßÂûãÊñáÊú¨Âíå BLOB Êï∞ÊçÆÔºå‰ΩøÁî®Âä®ÊÄÅË°åÂΩ¢ÂºèÔºåËøôÁßçÂ≠òÂÇ®Â∏ÉÂ±ÄÊõ¥È´òÊïà„ÄÇÈÄöËøáÊü•ËØ¢ INFORMATION_SCHEMA Â∫ì‰∏≠ÁöÑË°®ÂèØ‰ª•ÁõëÊéßÂ≠òÂÇ®ÂºïÊìéÁöÑÂÜÖÈÉ®Â∑•‰Ωú„ÄÇÂú®Âêå‰∏Ä‰∏™ËØ≠Âè•‰∏≠ÔºåInnoDB Ë°®ÂèØ‰ª•‰∏éÂÖ∂‰ªñÂ≠òÂÇ®ÂºïÊìéË°®Ê∑∑Áî®„ÄÇÂç≥‰ΩøÊúâ‰∫õÊìç‰ΩúÁ≥ªÁªüÈôêÂà∂Êñá‰ª∂Â§ßÂ∞è‰∏∫ 2GBÔºåInnoDB ‰ªçÁÑ∂ÂèØ‰ª•Â§ÑÁêÜ„ÄÇ<code>ÂΩìÂ§ÑÁêÜÂ§ßÊï∞ÊçÆÈáèÊó∂ÔºåInnoDB ÂÖºÈ°æ CPUÔºå‰ª•ËææÂà∞ÊúÄÂ§ßÊÄßËÉΩ</code></p>\n<h2 id=\"7-2-InnoDB-Âíå-ACID-Ê®°Âûã\"><a href=\"#7-2-InnoDB-Âíå-ACID-Ê®°Âûã\" class=\"headerlink\" title=\"7.2 InnoDB Âíå ACID Ê®°Âûã\"></a>7.2 InnoDB Âíå ACID Ê®°Âûã</h2><p>ACID Ê®°ÂûãÊòØ‰∏ÄÁ≥ªÂàóÊï∞ÊçÆÂ∫ìËÆæËÆ°ËßÑÂàôÔºåËøô‰∫õËßÑÂàôÁùÄÈáçÂº∫Ë∞ÉÂèØÈù†ÊÄßÔºåËÄåÂèØÈù†ÊÄßÂØπ‰∫éÂïÜ‰∏öÊï∞ÊçÆÂíå‰ªªÂä°ÂÖ≥ÈîÆÂûãÂ∫îÁî®ÈùûÂ∏∏ÈáçË¶Å„ÄÇMySQL ÂåÖÂê´Á±ª‰ºº InnoDB Â≠òÂÇ®ÂºïÊìéÁöÑÁªÑ‰ª∂Ôºå‰∏é ACID Ê®°ÂûãÁ¥ßÂØÜÁõ∏ËøûÔºåËøôÊ†∑Âá∫Áé∞ÊÑèÂ§ñÊó∂ÔºåÊï∞ÊçÆ‰∏ç‰ºöÂ¥©Ê∫ÉÔºåÁªìÊûú‰∏ç‰ºöÂ§±Áúü„ÄÇÂ¶ÇÊûú‰æùËµñ ACID Ê®°ÂûãÔºåÂèØ‰ª•‰∏ç‰ΩøÁî®‰∏ÄËá¥ÊÄßÊ£ÄÊü•ÂíåÂ¥©Ê∫ÉÊÅ¢Â§çÊú∫Âà∂„ÄÇÂ¶ÇÊûúÊã•ÊúâÈ¢ùÂ§ñÁöÑËΩØ‰ª∂‰øùÊä§ÔºåÊûÅÂèØÈù†ÁöÑÁ°¨‰ª∂ÊàñËÄÖÂ∫îÁî®ÂèØ‰ª•ÂÆπÂøç‰∏ÄÂ∞èÈÉ®ÂàÜÁöÑÊï∞ÊçÆ‰∏¢Â§±Âíå‰∏ç‰∏ÄËá¥ÔºåÂèØ‰ª•Â∞Ü MySQL ËÆæÁΩÆË∞ÉÊï¥‰∏∫Âè™‰æùËµñÈÉ®ÂàÜ ACID ÁâπÊÄßÔºå‰ª•ËææÂà∞Êõ¥È´òÁöÑÊÄßËÉΩ„ÄÇ‰∏ãÈù¢ËÆ≤Ëß£ InnoDB Â≠òÂÇ®ÂºïÊìé‰∏é ACID Ê®°ÂûãÁõ∏Âêå‰ΩúÁî®ÁöÑÂõõ‰∏™ÊñπÈù¢„ÄÇ</p>\n<ol>\n<li><strong>ÂéüÂ≠êÊñπÈù¢</strong> ACID ÁöÑÂéüÂ≠êÊñπÈù¢‰∏ªË¶ÅÊ∂âÂèä InnoDB ‰∫ãÂä°Ôºå‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄß‰∏ªË¶ÅÂåÖÊã¨:<ul>\n<li>Ëá™Âä®Êèê‰∫§ËÆæÁΩÆ„ÄÇ</li>\n<li>COMMIT ËØ≠Âè•„ÄÇ</li>\n<li>ROLLBACK ËØ≠Âè•„ÄÇ</li>\n<li>Êìç‰Ωú INFORMATION_SCHEMA Â∫ì‰∏≠ÁöÑË°®Êï∞ÊçÆ„ÄÇ</li>\n</ul>\n</li>\n<li><strong>‰∏ÄËá¥ÊÄßÊñπÈù¢</strong> ACID Ê®°ÂûãÁöÑ‰∏ÄËá¥ÊÄß‰∏ªË¶ÅÊ∂âÂèä‰øùÊä§Êï∞ÊçÆ‰∏çÂ¥©Ê∫ÉÁöÑÂÜÖÈÉ® InnoDB Â§ÑÁêÜËøáÁ®ãÔºå‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄß‰∏ªË¶ÅÂåÖÊã¨:<ul>\n<li>InnoDB ÂèåÂÜôÁºìÂ≠ò„ÄÇ</li>\n<li>InnoDB Â¥©Ê∫ÉÊÅ¢Â§ç„ÄÇ</li>\n</ul>\n</li>\n<li><strong>ÈöîÁ¶ªÊñπÈù¢</strong> ÈöîÁ¶ªÊòØÂ∫îÁî®‰∫é‰∫ãÂä°ÁöÑÁ∫ßÂà´Ôºå‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄß‰∏ªË¶ÅÂåÖÊã¨:<ul>\n<li>Ëá™Âä®Êèê‰∫§ËÆæÁΩÆ„ÄÇ</li>\n<li>SET ISOLATION LEVEL ËØ≠Âè•„ÄÇ</li>\n<li>InnoDB ÈîÅÁöÑ‰ΩéÁ∫ßÂà´‰ø°ÊÅØ„ÄÇ</li>\n</ul>\n</li>\n<li><strong>ËÄê‰πÖÊÄßÊñπÈù¢</strong> ACID Ê®°ÂûãÁöÑËÄê‰πÖÊÄß‰∏ªË¶ÅÊ∂âÂèä‰∏éÁ°¨‰ª∂ÈÖçÁΩÆÁõ∏‰∫íÂΩ±ÂìçÁöÑ MySQL ËΩØ‰ª∂ÁâπÊÄß„ÄÇÁî±‰∫éÁ°¨‰ª∂Â§çÊùÇÂ§öÊ†∑ÂåñÔºåËÄê‰πÖÊÄßÊñπÈù¢Ê≤°ÊúâÂÖ∑‰ΩìÁöÑËßÑÂàôÂèØÂæ™„ÄÇ‰∏é MySQL Áõ∏ÂÖ≥ÁöÑÁâπÊÄßÊúâ:<ul>\n<li>InnoDB ÂèåÂÜôÁºìÂ≠òÔºåÈÄöËøá innodb_doublewrite ÈÖçÁΩÆÈ°πÈÖçÁΩÆ„ÄÇ</li>\n<li>ÈÖçÁΩÆÈ°π innodb_flush_log_at_trx_commit„ÄÇ</li>\n<li>ÈÖçÁΩÆÈ°π sync_binlog„ÄÇ</li>\n<li>ÈÖçÁΩÆÈ°π innodb_file_per_table„ÄÇ</li>\n<li>Â≠òÂÇ®ËÆæÂ§áÁöÑÂÜôÂÖ•ÁºìÂ≠ò„ÄÇ</li>\n<li>Â≠òÂÇ®ËÆæÂ§áÁöÑÂ§áÁî®ÁîµÊ±†ÁºìÂ≠ò„ÄÇ</li>\n<li>ËøêË°å MySQL ÁöÑÊìç‰ΩúÁ≥ªÁªü„ÄÇ</li>\n<li>ÊåÅÁª≠ÁöÑÁîµÂäõ‰æõÂ∫î„ÄÇ</li>\n<li>Â§á‰ªΩÁ≠ñÁï•„ÄÇ</li>\n<li>ÂØπÂàÜÂ∏ÉÂºèÊàñÊâòÁÆ°ÁöÑÂ∫îÁî®ÔºåÊúÄ‰∏ªË¶ÅÁöÑÂú®‰∫éÁ°¨‰ª∂ËÆæÂ§áÁöÑÂú∞ÁÇπ‰ª•ÂèäÁΩëÁªúÊÉÖÂÜµ„ÄÇ</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"7-3-InnoDBÊû∂ÊûÑ\"><a href=\"#7-3-InnoDBÊû∂ÊûÑ\" class=\"headerlink\" title=\"7.3 InnoDBÊû∂ÊûÑ\"></a>7.3 InnoDBÊû∂ÊûÑ</h2><ol>\n<li><strong>ÁºìÂÜ≤Ê±†</strong> ÁºìÂÜ≤Ê±†ÊòØ‰∏ªÂÜÖÂ≠ò‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÁ©∫Èó¥ÔºåÁî®Êù•ÁºìÂ≠òÂ∑≤‰ΩøÁî®ÁöÑË°®ÂíåÁ¥¢ÂºïÊï∞ÊçÆ„ÄÇÁºìÂÜ≤Ê±†‰ΩøÂæóÁªèÂ∏∏Ë¢´‰ΩøÁî®ÁöÑÊï∞ÊçÆËÉΩÂ§üÁõ¥Êé•Âú®ÂÜÖÂ≠ò‰∏≠Ëé∑ÂæóÔºå‰ªéËÄåÊèêÈ´òÈÄüÂ∫¶„ÄÇ</li>\n<li><strong>Êõ¥ÊîπÁºìÂ≠ò</strong> Êõ¥ÊîπÁºìÂ≠òÊòØ‰∏Ä‰∏™ÁâπÊÆäÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂΩìÂèóÂΩ±ÂìçÁöÑÁ¥¢ÂºïÈ°µ‰∏çÂú®ÁºìÂ≠ò‰∏≠Êó∂ÔºåÊõ¥ÊîπÁºìÂ≠ò‰ºöÁºìÂ≠òËæÖÂä©Á¥¢ÂºïÈ°µÁöÑÊõ¥Êîπ„ÄÇÁ¥¢ÂºïÈ°µË¢´ÂÖ∂‰ªñËØªÂèñÊìç‰ΩúÊó∂‰ºöÂä†ËΩΩÂà∞ÁºìÂ≠òÊ±†ÔºåÁºìÂ≠òÁöÑÊõ¥ÊîπÂÜÖÂÆπÂ∞±‰ºöË¢´ÂêàÂπ∂„ÄÇ‰∏çÂêå‰∫éÈõÜÁæ§Á¥¢ÂºïÔºåËæÖÂä©Á¥¢ÂºïÂπ∂ÈùûÁã¨‰∏ÄÊó†‰∫åÁöÑ„ÄÇÂΩìÁ≥ªÁªüÂ§ßÈÉ®ÂàÜÈó≤ÁΩÆÊó∂ÔºåÊ∏ÖÈô§Êìç‰Ωú‰ºöÂÆöÊúüËøêË°åÔºåÂ∞ÜÊõ¥Êñ∞ÁöÑÁ¥¢ÂºïÈ°µÂà∑ÂÖ•Á£Å Áõò„ÄÇÊõ¥Êñ∞ÁºìÂ≠òÂêàÂπ∂ÊúüÈó¥ÔºåÂèØËÉΩ‰ºöÂ§ßÂ§ßÈôç‰ΩéÊü•ËØ¢ÁöÑÊÄßËÉΩ„ÄÇÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊõ¥Êñ∞ÁºìÂ≠òÂç†Áî®‰∏ÄÈÉ®ÂàÜ InnoDB ÁºìÂÜ≤Ê±†„ÄÇ Âú®Á£ÅÁõò‰∏≠ÔºåÊõ¥Êñ∞ÁºìÂ≠òÊòØÁ≥ªÁªüË°®Á©∫Èó¥ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÊõ¥Êñ∞ÁºìÂ≠òÁöÑÊï∞ÊçÆÁ±ªÂûãÁî± innodb_change_buffering ÈÖçÁΩÆÈ°πÁÆ°ÁêÜ„ÄÇ</li>\n<li><strong>Ëá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢Âºï</strong> Ëá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢ÂºïÂ∞ÜË¥üËΩΩÂíåË∂≥Â§üÁöÑÂÜÖÂ≠òÁªìÂêàËµ∑Êù•Ôºå‰ΩøÂæó InnoDB ÂÉèÂÜÖÂ≠òÊï∞ÊçÆÂ∫ì‰∏ÄÊ†∑ËøêË°åÔºå ‰∏çÈúÄË¶ÅÈôç‰Ωé‰∫ãÂä°‰∏äÁöÑÊÄßËÉΩÊàñÂèØÈù†ÊÄß„ÄÇËøô‰∏™ÁâπÊÄßÈÄöËøá innodb_adaptive_hash_index ÈÄâÈ°πÈÖçÁΩÆÔºåÊàñËÄÖÈÄöËøá <code>-- skip-innodb_adaptive_hash_index</code> ÂëΩ‰ª§Ë°åÂú®ÊúçÂä°ÂêØÂä®Êó∂ÂÖ≥Èó≠„ÄÇ</li>\n<li><strong>ÈáçÂÅöÊó•ÂøóÁºìÂ≠ò</strong> ÈáçÂÅöÊó•ÂøóÁºìÂ≠òÂ≠òÊîæË¶ÅÊîæÂÖ•ÈáçÂÅöÊó•ÂøóÁöÑÊï∞ÊçÆ„ÄÇÈáçÂÅöÊó•ÂøóÁºìÂ≠òÂ§ßÂ∞èÈÄöËøá innodb_log_buffer_size ÈÖçÁΩÆÈ°πÈÖçÁΩÆ„ÄÇÈáçÂÅöÊó•ÂøóÁºìÂ≠ò‰ºöÂÆöÊúüÂú∞Â∞ÜÊó•ÂøóÊñá‰ª∂Âà∑ÂÖ•Á£ÅÁõò„ÄÇÂ§ßÂûãÁöÑÈáçÂÅöÊó•ÂøóÁºìÂ≠ò‰ΩøÂæóÂ§ßÂûã‰∫ãÂä°ËÉΩÂ§üÊ≠£Â∏∏ËøêË°åËÄå‰∏çÈúÄË¶ÅÂÜôÂÖ•Á£ÅÁõò„ÄÇ</li>\n<li><strong>Á≥ªÁªüË°®Á©∫Èó¥</strong> Á≥ªÁªüË°®Á©∫Èó¥ÂåÖÊã¨ InnoDB Êï∞ÊçÆÂ≠óÂÖ∏„ÄÅÂèåÂÜôÁºìÂ≠ò„ÄÅÊõ¥Êñ∞ÁºìÂ≠òÂíåÊí§ÈîÄÊó•ÂøóÔºåÂêåÊó∂‰πüÂåÖÊã¨Ë°®ÂíåÁ¥¢ÂºïÊï∞ÊçÆ„ÄÇÂ§öË°®ÂÖ±‰∫´ÔºåÁ≥ªÁªüË°®Á©∫Èó¥Ë¢´ËßÜ‰∏∫ÂÖ±‰∫´Ë°®Á©∫Èó¥„ÄÇ</li>\n<li><strong>ÂèåÂÜôÁºìÂ≠ò</strong> ÂèåÂÜôÁºìÂ≠ò‰Ωç‰∫éÁ≥ªÁªüË°®Á©∫Èó¥‰∏≠ÔºåÁî®‰∫éÂÜôÂÖ•‰ªéÁºìÂ≠òÊ±†Âà∑Êñ∞ÁöÑÊï∞ÊçÆÈ°µ„ÄÇÂè™ÊúâÂú®Âà∑Êñ∞Âπ∂ÂÜôÂÖ•ÂèåÂÜôÁºìÂ≠òÂêéÔºåInnoDB Êâç‰ºöÂ∞ÜÊï∞ÊçÆÈ°µÂÜôÂÖ•ÂêàÈÄÇÁöÑ‰ΩçÁΩÆ„ÄÇ</li>\n<li><strong>Êí§ÈîÄÊó•Âøó</strong> Êí§ÈîÄÊó•ÂøóÊòØ‰∏ÄÁ≥ªÂàó‰∏é‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÊí§ÈîÄËÆ∞ÂΩïÁöÑÈõÜÂêàÔºåÂåÖÂê´Â¶Ç‰ΩïÊí§ÈîÄ‰∫ãÂä°ÊúÄËøëÁöÑÊõ¥Êîπ„ÄÇÂ¶ÇÊûúÂÖ∂‰ªñ‰∫ãÂä°Ë¶ÅÊü•ËØ¢ÂéüÂßãÊï∞ÊçÆÔºåÂèØ‰ª•‰ªéÊí§ÈîÄÊó•ÂøóËÆ∞ÂΩï‰∏≠ËøΩÊ∫ØÊú™Êõ¥ÊîπÁöÑÊï∞ÊçÆ„ÄÇÊí§ÈîÄÊó•ÂøóÂ≠òÂú®‰∫éÊí§ÈîÄÊó•ÂøóÁâáÊÆµ‰∏≠ÔºåËøô‰∫õÁâáÊÆµÂåÖÂê´‰∫éÂõûÊªöÁâáÊÆµ‰∏≠„ÄÇ</li>\n<li><strong>ÊØè‰∏™Ë°®‰∏Ä‰∏™Êñá‰ª∂ÁöÑË°®Á©∫Èó¥</strong> ÊØè‰∏™Ë°®‰∏Ä‰∏™Êñá‰ª∂ÁöÑË°®Á©∫Èó¥ÊòØÊåáÊØè‰∏™ÂçïÁã¨ÁöÑË°®Á©∫Èó¥ÂàõÂª∫Âú®Ëá™Ë∫´ÁöÑÊï∞ÊçÆÊñá‰ª∂‰∏≠Ôºå ËÄå‰∏çÊòØÁ≥ªÁªüË°®Á©∫Èó¥‰∏≠„ÄÇËøô‰∏™ÂäüËÉΩÈÄöËøá innodb_file_per_table ÈÖçÁΩÆÈ°πÂºÄÂêØ„ÄÇÊØè‰∏™Ë°®Á©∫Èó¥Áî±‰∏Ä‰∏™ÂçïÁã¨ÁöÑ <code>.ibd</code> Êï∞ÊçÆÊñá‰ª∂‰ª£Ë°®ÔºåËØ•Êñá‰ª∂ÈªòËÆ§Ë¢´ÂàõÂª∫Âú®Êï∞ÊçÆÂ∫ìÁõÆÂΩï‰∏≠„ÄÇ</li>\n<li><strong>ÈÄöÁî®Ë°®Á©∫Èó¥</strong> ‰ΩøÁî® CREATE TABLESPACE ËØ≠Ê≥ïÂàõÂª∫ÂÖ±‰∫´ÁöÑ InnoDB Ë°®Á©∫Èó¥„ÄÇÈÄöÁî®Ë°®Á©∫Èó¥ÂèØ‰ª•ÂàõÂª∫Âú® MySQL Êï∞ÊçÆÁõÆÂΩï‰πãÂ§ñËÉΩÂ§üÁÆ°ÁêÜÂ§ö‰∏™Ë°®Âπ∂ÊîØÊåÅÊâÄÊúâË°åÊ†ºÂºèÁöÑË°®„ÄÇ</li>\n<li><strong>Êí§ÈîÄË°®Á©∫Èó¥</strong> Êí§ÈîÄË°®Á©∫Èó¥Áî±‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂåÖÂê´Êí§ÈîÄÊó•ÂøóÁöÑÊñá‰ª∂ÁªÑÊàê„ÄÇÊí§ÈîÄË°®Á©∫Èó¥ÁöÑÊï∞ÈáèÁî± innodb_undo_tablespaces ÈÖçÁΩÆÈ°πÈÖçÁΩÆ„ÄÇ</li>\n<li><strong>‰∏¥Êó∂Ë°®Á©∫Èó¥</strong> Áî®Êà∑ÂàõÂª∫ÁöÑ‰∏¥Êó∂Ë°®Á©∫Èó¥ÂíåÂü∫‰∫éÁ£ÅÁõòÁöÑÂÜÖÈÉ®‰∏¥Êó∂Ë°®ÈÉΩÂàõÂª∫‰∫é‰∏¥Êó∂Ë°®Á©∫Èó¥„ÄÇ innodb_temp_data_file_path ÈÖçÁΩÆÈ°πÂÆö‰πâ‰∫ÜÁõ∏ÂÖ≥ÁöÑË∑ØÂæÑ„ÄÅÂêçÁß∞„ÄÅÂ§ßÂ∞èÂíåÂ±ûÊÄß„ÄÇÂ¶ÇÊûúËØ•ÂÄº‰∏∫Á©∫ÔºåÈªòËÆ§‰ºöÂú® innodb_data_home_dir ÂèòÈáèÊåáÂÆöÁöÑÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™Ëá™Âä®Êâ©Â±ïÁöÑÊï∞ÊçÆÊñá‰ª∂„ÄÇ</li>\n<li><strong>ÈáçÂÅöÊó•Âøó</strong> ÈáçÂÅöÊó•ÂøóÊòØÂü∫‰∫éÁ£ÅÁõòÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂú®Â¥©Ê∫ÉÊÅ¢Â§çÊúüÈó¥‰ΩøÁî®ÔºåÁî®Êù•Á∫†Ê≠£Êï∞ÊçÆ„ÄÇÊ≠£Â∏∏Êìç‰ΩúÊúüÈó¥Ôºå ÈáçÂÅöÊó•Âøó‰ºöÂ∞ÜËØ∑Ê±ÇÊï∞ÊçÆËøõË°åÁºñÁ†ÅÔºåËøô‰∫õËØ∑Ê±Ç‰ºöÊîπÂèò InnoDB Ë°®Êï∞ÊçÆ„ÄÇÈÅáÂà∞ÊÑèÂ§ñÂ¥©Ê∫ÉÂêéÔºåÊú™ÂÆåÊàêÁöÑÊõ¥Êîπ‰ºöËá™Âä®Âú®ÂàùÂßãÂåñÊúüÈó¥ÈáçÊñ∞ËøõË°å„ÄÇ</li>\n</ol>\n"},{"title":"ÈÄªËæëÊû∂ÊûÑÂàÜÊûê","date":"2024-04-01T08:38:58.000Z","cover":"/img/cover_03.png","top_img":"https://bu.dusays.com/2021/03/06/38a2c5cd8b44e.jpg","_content":"\n# 1. ÈÄªËæëÊû∂ÊûÑÂâñÊûê\n\n## 1.1 ÊúçÂä°Âô®Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±Ç\n\nÈ¶ñÂÖàMySQLÊòØÂÖ∏ÂûãÁöÑC/SÊû∂ÊûÑÔºåÂç≥`Client/Server` Êû∂ÊûÑ‚Äò Ôºå ÊúçÂä°Âô®Á´ØÁ®ãÂ∫è‰ΩøÁî®ÁöÑmysqld„ÄÇ\n\n‰∏çËÆ∫ÂÆ¢Êà∑Á´ØËøõÁ®ãÂíåÊúçÂä°Âô®ËøõÁ®ãÊòØÈááÁî®Âì™ÁßçÊñπÂºèËøõË°åÈÄö‰ø°ÔºåÊúÄÂêéÂÆûÁé∞ÁöÑÊïàÊûúÈÉΩÊòØ:**ÂÆ¢Êà∑Á´ØËøõÁ®ãÂêëÊúçÂä°Âô®ËøõÁ®ãÂèëÈÄÅ‰∏ÄÊÆµÊñáÊú¨(SQLËØ≠Âè•) ,ÊúçÂä°Âô®ËøõÁ®ãÂ§ÑÁêÜÂêéÂÜçÂêëÂÆ¢Êà∑Á´ØËøõÁ®ãÂèëÈÄÅ‰∏ÄÊÆµÊñáÊú¨(Â§ÑÁêÜÁªìÊûú)**\n\nÈÇ£ÊúçÂä°Âô®ËøõÁ®ãÂØπÂÆ¢Êà∑Á´ØËøõÁ®ãÂèëÈÄÅÁöÑËØ∑Ê±ÇÂÅö‰∫Ü‰ªÄ‰πàÂ§ÑÁêÜÔºåÊâçËÉΩ‰∫ßÁîüÊúÄÂêéÁöÑÂ§ÑÁêÜÁªìÊûúÂë¢?ËøôÈáå‰ª•Êü•ËØ¢ËØ∑Ê±Ç‰∏∫‰æãÂ±ïÁ§∫Ôºö\n\n![image-20220709175522383](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116081.png)\n\n\n\n‰∏ãÈù¢ÂÖ∑‰ΩìÂ±ïÂºÄÁúã‰∏Ä‰∏ã:(ÈíàÂØπMySQL5.7)\n\n![image-20220115171412362](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116304.png)\n\n**ÂàÜÊûê**\n\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116078.png)\n\n## 1.2 Connectors\n\nConnectorsÊåáÁöÑÊòØ‰∏çÂêåËØ≠Ë®Ä‰∏≠‰∏éSQLÁöÑ‰∫§‰∫í„ÄÇMySQLÈ¶ñÂÖàÊòØ‰∏Ä ‰∏™ÁΩëÁªúÁ®ãÂ∫èÔºåÂú®TCP‰πã‰∏äÂÆö‰πâ‰∫ÜËá™Â∑±ÁöÑÂ∫îÁî®Â±ÇÂçèËÆÆ„ÄÇÊâÄ‰ª•Ë¶Å‰ΩøÁî®MySQL,Êàë‰ª¨ÂèØ‰ª•ÁºñÂÜô‰ª£Á†ÅÔºåË∑üMySQL Server`Âª∫Á´ãTCPËøûÊé•`Ôºå‰πãÂêéÊåâÁÖßÂÖ∂ÂÆö‰πâÂ•ΩÁöÑÂçèËÆÆËøõË°å‰∫§‰∫í„ÄÇÊàñËÄÖÊØîËæÉÊñπ‰æøÁöÑÂäûÊ≥ïÊòØË∞ÉÁî®SDKÔºåÊØîÂ¶ÇNative C API„ÄÅJDBC„ÄÅ PHPÁ≠âÂêÑËØ≠ Ë®ÄMySQL Connector,ÊàñËÄÖÈÄöËøáODBC„ÄÇ ‰ΩÜ==ÈÄöËøáSDKÊù•ËÆøÈóÆMySQLÔºåÊú¨Ë¥®‰∏äËøòÊòØÂú®TCPËøûÊé•‰∏äÈÄöËøáMySQLÂçèËÆÆË∑üMySQLËøõË°å‰∫§‰∫í==„ÄÇ\n\nÊé•‰∏ãÊù•ÁöÑMySQL ServerÁªìÊûÑÂèØ‰ª•ÂàÜ‰∏∫Â¶Ç‰∏ãÁöÑ‰∏âÂ±ÇÔºö\n\n## 1.3 Á¨¨ 1 Â±ÇÔºöËøûÊé•Â±Ç\n\nÁ≥ªÁªü(ÂÆ¢Êà∑Á´Ø)ËÆøÈóÆ MySQL ÊúçÂä°Âô®ÂâçÔºåÂÅöÁöÑÁ¨¨‰∏Ä‰ª∂‰∫ãÂ∞±ÊòØÂª∫Á´ã `TCP` ËøûÊé•„ÄÇ ÁªèËøá‰∏âÊ¨°Êè°ÊâãÂª∫Á´ãËøûÊé•ÊàêÂäüÂêéÔºåMySQL ÊúçÂä°Âô®ÂØπ `TCP` ‰º†ËæìËøáÊù•ÁöÑË¥¶Âè∑ÂØÜÁ†ÅÂÅöË∫´‰ªΩËÆ§ËØÅ„ÄÅÊùÉÈôêËé∑Âèñ„ÄÇ\n\n- Áî®Êà∑ÂêçÊàñÂØÜÁ†Å‰∏çÂØπÔºå‰ºöÊî∂Âà∞‰∏Ä‰∏™ Access denied for user ÈîôËØØÔºåÂÆ¢Êà∑Á´ØÁ®ãÂ∫èÁªìÊùüÊâßË°å\n- Áî®Êà∑ÂêçÂØÜÁ†ÅËÆ§ËØÅÈÄöËøáÔºå‰ºö‰ªéÊùÉÈôêË°®Êü•Âá∫Ë¥¶Âè∑Êã•ÊúâÁöÑÊùÉÈôê‰∏éËøûÊé•ÂÖ≥ËÅîÔºå‰πãÂêéÁöÑÊùÉÈôêÂà§Êñ≠ÈÄªËæëÔºåÈÉΩÂ∞Ü‰æùËµñ‰∫éÊ≠§Êó∂ËØªÂà∞ÁöÑÊùÉÈôê\n\n`TCP` ËøûÊé•Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÂøÖÈ°ªË¶ÅÂàÜÈÖçÁªô‰∏Ä‰∏™Á∫øÁ®ã‰∏ìÈó®‰∏éËøô‰∏™ÂÆ¢Êà∑Á´ØÁöÑ‰∫§‰∫í„ÄÇÊâÄ‰ª•Ëøò‰ºöÊúâ‰∏™Á∫øÁ®ãÊ±†ÔºåÂéªËµ∞ÂêéÈù¢ÁöÑÊµÅÁ®ã„ÄÇÊØè‰∏Ä‰∏™ËøûÊé•‰ªéÁ∫øÁ®ãÊ±†‰∏≠Ëé∑ÂèñÁ∫øÁ®ãÔºåÁúÅÂéª‰∫ÜÂàõÂª∫ÂíåÈîÄÊØÅÁ∫øÁ®ãÁöÑÂºÄÈîÄ„ÄÇ\n\n**Êé•ÁùÄÊàë‰ª¨Êù•ÊÄùËÄÉ‰∏Ä‰∏™ÈóÆÈ¢ò**\n\n==‰∏Ä‰∏™Á≥ªÁªüÂè™‰ºöÂíåMySQLÊúçÂä°Âô®Âª∫Á´ã‰∏Ä‰∏™ËøûÊé•ÂêóÔºüÂè™ËÉΩÊúâ‰∏Ä‰∏™Á≥ªÁªüÂíåMySQLÊúçÂä° Âô®Âª∫Á´ãËøûÊé•ÂêóÔºü==\nÂΩìÁÑ∂‰∏çÊòØÔºåÂ§ö‰∏™Á≥ªÁªüÈÉΩÂèØ‰ª•ÂíåMySQLÊúçÂä°Âô®Âª∫Á´ãËøûÊé•ÔºåÊØè‰∏™Á≥ªÁªüÂª∫Á´ãÁöÑËøûÊé•ËÇØÂÆö‰∏çÊ≠¢‰∏Ä‰∏™„ÄÇÊâÄ‰ª•Ôºå‰∏∫‰∫ÜËß£ÂÜ≥TCPÊó†ÈôêÂàõÂª∫‰∏éTCPÈ¢ëÁπÅÂàõÂª∫ÈîÄÊØÅÂ∏¶Êù•ÁöÑËµÑÊ∫êËÄóÂ∞Ω„ÄÅÊÄßËÉΩ‰∏ãÈôçÈóÆÈ¢ò„ÄÇMySQLÊúçÂä°Âô®ÈáåÊúâ‰∏ìÈó®ÁöÑ`TCPËøûÊé•Ê±†`ÈôêÂà∂ËøûÊé•Êï∞ÔºåÈááÁî®`ÈïøËøûÊé•Ê®°Âºè`Â§çÁî®TCPËøûÊé•,Êù•Ëß£ÂÜ≥‰∏äËø∞ÈóÆÈ¢ò„ÄÇ\n\n![image-20220709192708094](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116686.png)\n\n`TCP`ËøûÊé•Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÂøÖÈ°ªË¶ÅÂàÜÈÖçÁªô‰∏Ä‰∏™Á∫øÁ®ã‰∏ìÈó®‰∏éËøô‰∏™ÂÆ¢Êà∑Á´ØÁöÑ‰∫§‰∫í„ÄÇÊâÄ‰ª•Ëøò‰ºöÊúâ‰∏™Á∫øÁ®ãÊ±†ÔºåÂéªËµ∞ÂêéÈù¢ÁöÑÊµÅÁ®ã„ÄÇÊØè‰∏Ä‰∏™ËøûÊé•‰ªéÁ∫øÁ®ãÊ±†‰∏≠Ëé∑ÂèñÁ∫øÁ®ãÔºåÁúÅÂéª‰∫ÜÂàõÂª∫ÂíåÈîÄÊØÅÁ∫øÁ®ãÁöÑÂºÄÈîÄ„ÄÇ\n\nËøô‰∫õÂÜÖÂÆπÊàë‰ª¨ÈÉΩÂΩíÁ∫≥Âà∞`MySQL`ÁöÑËøûÊé•ÁÆ°ÁêÜÁªÑ‰ª∂‰∏≠„ÄÇ\n\nÊâÄ‰ª•==ËøûÊé•ÁÆ°ÁêÜÁöÑËÅåË¥£ÊòØË¥üË¥£ËÆ§ËØÅ„ÄÅÁÆ°ÁêÜËøûÊé•„ÄÅËé∑ÂèñÊùÉÈôê‰ø°ÊÅØ==„ÄÇ\n\n## 1.4 Á¨¨ 2 Â±ÇÔºöÊúçÂä°Â±Ç\n\nÁ¨¨‰∫åÂ±ÇÊû∂ÊûÑ‰∏ªË¶ÅÂÆåÊàêÂ§ßÂ§öÊï∞ÁöÑÊ†∏ÂøÉÊúçÂä°ÂäüËÉΩÔºåÂ¶ÇSQLÊé•Âè£Ôºå Âπ∂ÂÆåÊàêÁºìÂ≠òÁöÑÊü•ËØ¢ÔºåSQLÁöÑÂàÜÊûêÂíå‰ºòÂåñÂèäÈÉ®ÂàÜÂÜÖÁΩÆÂáΩÊï∞ÁöÑÊâßË°å„ÄÇÊâÄÊúâË∑®Â≠òÂÇ®ÂºïÊìéÁöÑÂäüËÉΩ‰πüÂú®Ëøô‰∏ÄÂ±ÇÂÆûÁé∞ÔºåÂ¶ÇËøáÁ®ã„ÄÅÂáΩÊï∞Á≠â„ÄÇ\n\nÂú®ËØ•Â±ÇÔºåÊúçÂä°Âô®‰ºö**Ëß£ÊûêÊü•ËØ¢**Âπ∂ÂàõÂª∫Áõ∏Â∫îÁöÑÂÜÖÈÉ®**Ëß£ÊûêÊ†ë**ÔºåÂπ∂ÂØπÂÖ∂ÂÆåÊàêÁõ∏Â∫îÁöÑ**‰ºòÂåñ**ÔºöÂ¶ÇÁ°ÆÂÆöÊü•ËØ¢Ë°®ÁöÑÈ°∫Â∫èÔºåÊòØÂê¶Âà©Áî®Á¥¢ÂºïÁ≠âÔºåÊúÄÂêéÁîüÊàêÁõ∏Â∫îÁöÑÊâßË°åÊìç‰Ωú„ÄÇ\n\n==Â¶ÇÊûúÊòØSELECTËØ≠Âè•ÔºåÊúçÂä°Âô®Ëøò‰ºöÊü•ËØ¢ÂÜÖÈÉ®ÁöÑÁºìÂ≠ò==„ÄÇÂ¶ÇÊûúÁºìÂ≠òÁ©∫Èó¥Ë∂≥Â§üÂ§ßÔºåËøôÊ†∑Âú®Ëß£ÂÜ≥Â§ßÈáèËØªÊìç‰ΩúÁöÑÁéØÂ¢É‰∏≠ËÉΩÂ§üÂæàÂ•ΩÁöÑÊèêÂçáÁ≥ªÁªüÁöÑÊÄßËÉΩ„ÄÇ\n\n- **SQL InterfaceÔºöSQLÊé•Âè£**\n\n  - Êé•Êî∂Áî®Êà∑ÁöÑ SQL ÂëΩ‰ª§ÔºåÂπ∂‰∏îËøîÂõûÁî®Êà∑ÈúÄË¶ÅÊü•ËØ¢ÁöÑÁªìÊûú„ÄÇÊØîÂ¶Ç `SELECT ... FROM` Â∞±ÊòØË∞ÉÁî® SQL Interface\n  - MySQL ÊîØÊåÅ DMLÔºàÊï∞ÊçÆÊìç‰ΩúËØ≠Ë®ÄÔºâ„ÄÅDDLÔºàÊï∞ÊçÆÂÆö‰πâËØ≠Ë®ÄÔºâ„ÄÅÂ≠òÂÇ®ËøáÁ®ã„ÄÅËßÜÂõæ„ÄÅËß¶ÂèëÂô®„ÄÅËá™ÂÆö‰πâÂáΩÊï∞Á≠âÂ§öÁßç SQL ËØ≠Ë®ÄÊé•Âè£\n\n- **ParserÔºöËß£ÊûêÂô®**\n\n  - Âú®Ëß£ÊûêÂô®‰∏≠ÂØπ SQL ËØ≠Âè•ËøõË°åËØ≠Ê≥ïÂàÜÊûê„ÄÅËØ≠‰πâÂàÜÊûê„ÄÇÂ∞Ü SQL ËØ≠Âè•ÂàÜËß£ÊàêÊï∞ÊçÆÁªìÊûÑÔºåÂπ∂Â∞ÜËøô‰∏™ÁªìÊûÑ‰º†ÈÄíÂà∞ÂêéÁª≠Ê≠•È™§Ôºå‰ª•Âêé SQL ËØ≠Âè•ÁöÑ‰º†ÈÄíÂíåÂ§ÑÁêÜÂ∞±ÊòØÂü∫‰∫éËøô‰∏™ÁªìÊûÑÁöÑ„ÄÇÂ¶ÇÊûúÂú®ÂàÜËß£ÊûÑÊàê‰∏≠ÈÅáÂà∞ÈîôËØØÔºåÈÇ£‰πàÂ∞±ËØ¥ÊòéËøô‰∏™ SQL ËØ≠Âè•ÊòØ‰∏çÂêàÁêÜÁöÑ„ÄÇ\n  - Âú® SQL ÂëΩ‰ª§‰º†ÈÄíÂà∞Ëß£ÊûêÂô®ÁöÑÊó∂ÂÄô‰ºöË¢´Ëß£ÊûêÂô®È™åËØÅÂíåËß£ÊûêÔºåÂπ∂‰∏∫ÂÖ∂ÂàõÂª∫ `ËØ≠Ê≥ïÊ†ë`ÔºåÂπ∂Ê†πÊçÆÊï∞ÊçÆÂ≠óÂÖ∏‰∏∞ÂØåÊü•ËØ¢ËØ≠Ê≥ïÊ†ëÔºå‰ºö `È™åËØÅËØ•ÂÆ¢Êà∑Á´ØÊòØÂê¶ÂÖ∑ÊúâÊâßË°åËØ•Êü•ËØ¢ÁöÑÊùÉÈôê` „ÄÇÂàõÂª∫Â•ΩËØ≠Ê≥ïÊ†ëÂêéÔºåMySQL Ëøò‰ºöÂØπ SQL Êü•ËØ¢ËøõË°åËØ≠Ê≥ï‰∏äÁöÑ‰ºòÂåñÔºåËøõË°åÊü•ËØ¢ÈáçÂÜô„ÄÇ\n\n- **OptimizerÔºöÊü•ËØ¢‰ºòÂåñÂô®**\n\n  - SQL ËØ≠Âè•Âú®ËØ≠Ê≥ïËß£Êûê‰πãÂêé„ÄÅÊü•ËØ¢‰πãÂâç‰ºö‰ΩøÁî®Êü•ËØ¢‰ºòÂåñÂô®Á°ÆÂÆö SQL ËØ≠Âè•ÁöÑÊâßË°åË∑ØÂæÑÔºåÁîüÊàê‰∏Ä‰∏™ `ÊâßË°åËÆ°Âàí` „ÄÇ\n\n  - Ëøô‰∏™ÊâßË°åËÆ°ÂàíË°®ÊòéÂ∫îËØ• `‰ΩøÁî®Âì™‰∫õÁ¥¢Âºï` ËøõË°åÊü•ËØ¢ÔºàÂÖ®Ë°®Ê£ÄÁ¥¢ËøòÊòØ‰ΩøÁî®Á¥¢ÂºïÊ£ÄÁ¥¢ÔºâÔºåË°®‰πãÈó¥ÁöÑËøûÊé•È°∫Â∫èÂ¶Ç‰ΩïÔºåÊúÄÂêé‰ºöÊåâÁÖßÊâßË°åËÆ°Âàí‰∏≠ÁöÑÊ≠•È™§Ë∞ÉÁî®Â≠òÂÇ®ÂºïÊìéÊèê‰æõÁöÑÊñπÊ≥ïÊù•ÁúüÊ≠£ÁöÑÊâßË°åÊü•ËØ¢ÔºåÂπ∂Â∞ÜÊü•ËØ¢ÁªìÊûúËøîÂõûÁªôÁî®Êà∑„ÄÇ\n\n  - ÂÆÉ‰ΩøÁî®‚Äú `ÈÄâÂèñ-ÊäïÂΩ±-ËøûÊé•` ‚ÄùÁ≠ñÁï•ËøõË°åÊü•ËØ¢„ÄÇ‰æãÂ¶Ç:\n\n    ```sql\n    SELECT id,name FROM student WHERE gender = 'Â•≥';\n    ```\n\n    Ëøô‰∏™ SELECT Êü•ËØ¢ÂÖàÊ†πÊçÆ WHERE ËØ≠Âè•ËøõË°åÈÄâÂèñ ÔºåËÄå‰∏çÊòØÂ∞ÜË°®ÂÖ®ÈÉ®Êü•ËØ¢Âá∫Êù•‰ª•ÂêéÂÜçËøõË°å gender ËøáÊª§„ÄÇ Ëøô‰∏™ SELECT Êü•ËØ¢ÂÖàÊ†πÊçÆ id Âíå name ËøõË°åÂ±ûÊÄßÊäïÂΩ± ÔºåËÄå‰∏çÊòØÂ∞ÜÂ±ûÊÄßÂÖ®ÈÉ®ÂèñÂá∫‰ª•ÂêéÂÜçËøõË°åËøáÊª§ÔºåÂ∞ÜËøô‰∏§‰∏™Êü•ËØ¢Êù°‰ª∂ ËøûÊé•Ëµ∑Êù•ÁîüÊàêÊúÄÁªàÊü•ËØ¢ÁªìÊûú„ÄÇ\n\n- **Caches & Buffers: Êü•ËØ¢ÁºìÂ≠òÁªÑ‰ª∂**\n\n  - MySQLÂÜÖÈÉ®Áª¥ÊåÅÁùÄ‰∏Ä‰∫õ Cache Âíå BufferÔºåÊØîÂ¶Ç Query Cache Áî®Êù•ÁºìÂ≠ò‰∏ÄÊù° SELECT ËØ≠Âè•ÁöÑÊâßË°åÁªìÊûúÔºåÂ¶ÇÊûúËÉΩÂ§üÂú®ÂÖ∂‰∏≠ÊâæÂà∞ÂØπÂ∫îÁöÑÊü•ËØ¢ÁªìÊûúÔºåÈÇ£‰πàÂ∞±‰∏çÂøÖÂÜçËøõË°åÊü•ËØ¢Ëß£Êûê„ÄÅ‰ºòÂåñÂíåÊâßË°åÁöÑÊï¥‰∏™ËøáÁ®ã‰∫ÜÔºåÁõ¥Êé•Â∞ÜÁªìÊûúÂèçÈ¶àÁªôÂÆ¢Êà∑Á´Ø„ÄÇ\n  - Ëøô‰∏™ÁºìÂ≠òÊú∫Âà∂ÊòØÁî±‰∏ÄÁ≥ªÂàóÂ∞èÁºìÂ≠òÁªÑÊàêÁöÑ„ÄÇÊØîÂ¶ÇË°®ÁºìÂ≠òÔºåËÆ∞ÂΩïÁºìÂ≠òÔºåkeyÁºìÂ≠òÔºåÊùÉÈôêÁºìÂ≠òÁ≠â „ÄÇ\n  - Ëøô‰∏™Êü•ËØ¢ÁºìÂ≠òÂèØ‰ª•Âú® `‰∏çÂêåÂÆ¢Êà∑Á´Ø‰πãÈó¥ÂÖ±‰∫´` „ÄÇ\n  - ‰ªé MySQL 5.7.20 ÂºÄÂßãÔºå‰∏çÊé®Ëçê‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÔºåÂπ∂Âú® `MySQL 8.0‰∏≠Âà†Èô§` „ÄÇ\n\n  ```tex\n  Â∞èÊïÖ‰∫ãÔºö\n  Â¶ÇÊûúÊàëÈóÆ‰Ω†9+8√ó16-3√ó2√ó17ÁöÑÂÄºÊòØÂ§öÂ∞ëÔºå‰Ω†ÂèØËÉΩ‰ºöÁî®ËÆ°ÁÆóÂô®ÂéªÁÆó‰∏Ä‰∏ãÔºåÊúÄÁªàÁªìÊûú35„ÄÇÂ¶ÇÊûúÂÜçÈóÆ‰Ω†‰∏ÄÈÅç9+8√ó16-\n  3√ó2√ó17ÁöÑÂÄºÊòØÂ§öÂ∞ëÔºå‰Ω†ËøòÁî®ÂÜçÂÇªÂëµÂëµÁöÑÂÜçÁÆó‰∏ÄÈÅçÂêóÔºüÊàë‰ª¨ÂàöÂàöÂ∑≤ÁªèÁÆóËøá‰∫ÜÔºåÁõ¥Êé•ËØ¥Á≠îÊ°àÂ∞±Â•Ω‰∫Ü„ÄÇ\n  ```\n\n## 1.5 Á¨¨ 3 Â±ÇÔºöÂºïÊìéÂ±Ç\n\nÂíåÂÖ∂ÂÆÉÊï∞ÊçÆÂ∫ìÁõ∏ÊØîÔºåMySQLÊúâÁÇπ‰∏é‰ºó‰∏çÂêåÔºåÂÆÉÁöÑÊû∂ÊûÑÂèØ‰ª•Âú®Â§öÁßç‰∏çÂêåÂú∫ÊôØ‰∏≠Â∫îÁî®Âπ∂ÂèëÊå•ËâØÂ•Ω‰ΩúÁî®Ôºå‰∏ªË¶Å‰ΩìÁé∞Âú®Â≠òÂÇ®ÂºïÊìéÁöÑÊû∂ÊûÑ‰∏äÔºåÊèí‰ª∂ÂºèÁöÑÂ≠òÂÇ®ÂºïÊìéÊû∂ÊûÑÂ∞ÜÊü•ËØ¢Â§ÑÁêÜÂíåÂÖ∂ÂÆÉÁöÑÁ≥ªÁªü‰ªªÂä°‰ª•ÂèäÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÊèêÂèñÁõ∏ÂàÜÁ¶ª„ÄÇËøôÁßçÊû∂ÊûÑÂèØ‰ª•Ê†πÊçÆ‰∏öÂä°ÁöÑÈúÄÊ±ÇÂíåÂÆûÈôÖÈúÄË¶ÅÈÄâÊã©ÂêàÈÄÇÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇÂêåÊó∂ÂºÄÊ∫êÁöÑ MySQLËøò**ÂÖÅËÆ∏ÂºÄÂèë‰∫∫ÂëòËÆæÁΩÆËá™Â∑±ÁöÑÂ≠òÂÇ®ÂºïÊìé**„ÄÇ\n\nËøôÁßçÈ´òÊïàÁöÑÊ®°ÂùóÂåñÊû∂ÊûÑ‰∏∫ÈÇ£‰∫õÂ∏åÊúõ‰∏ìÈó®ÈíàÂØπÁâπÂÆöÂ∫îÁî®Á®ãÂ∫èÈúÄÊ±Ç(‰æãÂ¶ÇÊï∞ÊçÆ‰ªìÂ∫ì„ÄÅ‰∫ãÂä°Â§ÑÁêÜÊàñÈ´òÂèØÁî®ÊÄßÊÉÖÂÜµ)ÁöÑ‰∫∫Êèê‰æõ‰∫ÜÂ∑®Â§ßÁöÑÂ•ΩÂ§ÑÔºåÂêåÊó∂‰∫´Âèó‰ΩøÁî®‰∏ÄÁªÑÁã¨Á´ã‰∫é‰ªª‰ΩïÊé•Âè£ÂíåÊúçÂä°ÁöÑ‰ºòÂäøÂ≠òÂÇ®ÂºïÊìé„ÄÇ\n\nÊèí‰ª∂ÂºèÂ≠òÂÇ®ÂºïÊìéÂ±ÇÔºàStorage EnginesÔºâÔºå==ÁúüÊ≠£ÁöÑË¥üË¥£‰∫ÜMySQL‰∏≠Êï∞ÊçÆÁöÑÂ≠òÂÇ®ÂíåÊèêÂèñÔºåÂØπÁâ©ÁêÜÊúçÂä°Âô®Á∫ßÂà´Áª¥Êä§ÁöÑÂ∫ïÂ±ÇÊï∞ÊçÆÊâßË°åÊìç‰Ωú== ÔºåÊúçÂä°Âô®ÈÄöËøá API ‰∏éÂ≠òÂÇ®ÂºïÊìéËøõË°åÈÄö‰ø°„ÄÇ‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìéÂÖ∑ÊúâÁöÑÂäüËÉΩ‰∏çÂêåÔºåËøôÊ†∑Êàë‰ª¨ÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÂÆûÈôÖÈúÄË¶ÅËøõË°åÈÄâÂèñ„ÄÇ\n\nMySQL 8.0.25 ÈªòËÆ§ÊîØÊåÅÁöÑÂ≠òÂÇ®ÂºïÊìéÂ¶Ç‰∏ã:\n\n![image-20220115171937681](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116558.png)\n\n## 1.6 Â≠òÂÇ®Â±Ç\n\nÊâÄÊúâÁöÑÊï∞ÊçÆÔºåÊï∞ÊçÆÂ∫ì„ÄÅË°®ÁöÑÂÆö‰πâÔºåË°®ÁöÑÊØè‰∏ÄË°åÁöÑÂÜÖÂÆπÔºåÁ¥¢ÂºïÔºåÈÉΩÊòØÂ≠òÂú® `Êñá‰ª∂Á≥ªÁªü` ‰∏äÔºå‰ª• `Êñá‰ª∂` ÁöÑÊñπÂºèÂ≠ò Âú®ÁöÑÔºåÂπ∂ÂÆåÊàê‰∏éÂ≠òÂÇ®ÂºïÊìéÁöÑ‰∫§‰∫í„ÄÇÂΩìÁÑ∂Êúâ‰∫õÂ≠òÂÇ®ÂºïÊìéÊØîÂ¶ÇInnoDBÔºå‰πüÊîØÊåÅ‰∏ç‰ΩøÁî®Êñá‰ª∂Á≥ªÁªüÁõ¥Êé•ÁÆ°ÁêÜË£∏ËÆæÂ§áÔºå‰ΩÜÁé∞‰ª£Êñá‰ª∂Á≥ªÁªüÁöÑÂÆûÁé∞‰ΩøÂæóËøôÊ†∑ÂÅöÊ≤°ÊúâÂøÖË¶Å‰∫Ü„ÄÇÂú®Êñá‰ª∂Á≥ªÁªü‰πã‰∏ãÔºåÂèØ‰ª•‰ΩøÁî®Êú¨Âú∞Á£ÅÁõòÔºåÂèØ‰ª•‰ΩøÁî® DAS„ÄÅNAS„ÄÅSANÁ≠âÂêÑÁßçÂ≠òÂÇ®Á≥ªÁªü„ÄÇ\n\n## 1.7 Â∞èÁªì\n\nMySQL Êû∂ÊûÑÂõæÊú¨ËäÇÂºÄÁØáÊâÄÁ§∫„ÄÇ‰∏ãÈù¢‰∏∫‰∫ÜÁÜüÊÇâ SQL ÊâßË°åÊµÅÁ®ãÊñπ‰æøÔºåÊàë‰ª¨ÂèØ‰ª•ÁÆÄÂåñÂ¶Ç‰∏ã:\n\n![image-20220115172118991](https://blog-images-1309598269.cos.ap-beijing.myqcloud.com/blogImgs/202206300055402.png)\n\n\n\nÁÆÄÂåñ‰∏∫‰∏âÂ±ÇÁªìÊûÑÔºö\n\n1. ËøûÊé•Â±ÇÔºöÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®Á´ØÂª∫Á´ãËøûÊé•ÔºåÂÆ¢Êà∑Á´ØÂèëÈÄÅ SQL Ëá≥ÊúçÂä°Âô®Á´Ø;\n2. SQL Â±ÇÔºàÊúçÂä°Â±ÇÔºâÔºöÂØπ SQL ËØ≠Âè•ËøõË°åÊü•ËØ¢Â§ÑÁêÜÔºõ‰∏éÊï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÂÇ®ÊñπÂºèÊó†ÂÖ≥;\n3. Â≠òÂÇ®ÂºïÊìéÂ±ÇÔºö‰∏éÊï∞ÊçÆÂ∫ìÊñá‰ª∂Êâì‰∫§ÈÅìÔºåË¥üË¥£Êï∞ÊçÆÁöÑÂ≠òÂÇ®ÂíåËØªÂèñ„ÄÇ\n\n# 2. SQL ÊâßË°åÊµÅÁ®ã\n\n## 2.1 MySQL ‰∏≠ÁöÑ SQLÊâßË°åÊµÅÁ®ã\n\n==MySQLÁöÑÊü•ËØ¢ÊµÅÁ®ã:==\n\n![image-20220115172223043](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116406.png)\n\n\n\n### 2.1.1 **Êü•ËØ¢ÁºìÂ≠ò**\n\nServer Â¶ÇÊûúÂú®Êü•ËØ¢ÁºìÂ≠ò‰∏≠ÂèëÁé∞‰∫ÜËøôÊù° SQL ËØ≠Âè•ÔºåÂ∞±‰ºöÁõ¥Êé•Â∞ÜÁªìÊûúËøîÂõûÁªôÂÆ¢Êà∑Á´Ø;Â¶ÇÊûúÊ≤° ÊúâÔºåÂ∞±ËøõÂÖ•Âà∞Ëß£ÊûêÂô®Èò∂ÊÆµ„ÄÇÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂõ†‰∏∫Êü•ËØ¢ÁºìÂ≠òÂæÄÂæÄÊïàÁéá‰∏çÈ´òÔºåÊâÄ‰ª•Âú® MySQL 8.0 ‰πãÂêéÂ∞±ÊäõÂºÉ ‰∫ÜËøô‰∏™ÂäüËÉΩ„ÄÇ\n\n**Â§ßÂ§öÊï∞ÊÉÖÂÜµÊü•ËØ¢ÁºìÂ≠òÂ∞±ÊòØ‰∏™È∏°ËÇãÔºå‰∏∫‰ªÄ‰πàÂë¢?**\n\n```sql\nSELECT employee_id,last_name FROM employees WHERE employee_id = 101;\n```\n\nÊü•ËØ¢ÁºìÂ≠òÊòØÊèêÂâçÊääÊü•ËØ¢ÁªìÊûúÁºìÂ≠òËµ∑Êù•ÔºåËøôÊ†∑‰∏ãÊ¨°‰∏çÈúÄË¶ÅÊâßË°åÂ∞±ÂèØ‰ª•Áõ¥Êé•ÊãøÂà∞ÁªìÊûú„ÄÇÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂú® MySQL ‰∏≠ÁöÑÊü•ËØ¢ÁºìÂ≠òÔºå‰∏çÊòØÁºìÂ≠òÊü•ËØ¢ËÆ°ÂàíÔºåËÄåÊòØÊü•ËØ¢ÂØπÂ∫îÁöÑÁªìÊûú„ÄÇËøôÂ∞±ÊÑèÂë≥ÁùÄÊü•ËØ¢ÂåπÈÖçÁöÑ `È≤ÅÊ£íÊÄßÂ§ßÂ§ßÈôç‰Ωé`ÔºåÂè™Êúâ `Áõ∏ÂêåÁöÑÊü•ËØ¢Êìç‰ΩúÊâç‰ºöÂëΩ‰∏≠Êü•ËØ¢ÁºìÂ≠ò`„ÄÇ‰∏§‰∏™Êü•ËØ¢ËØ∑Ê±ÇÂú®‰ªª‰ΩïÂ≠óÁ¨¶‰∏äÁöÑ‰∏çÂêåÔºà‰æãÂ¶ÇÔºöÁ©∫Ê†º„ÄÅÊ≥®Èáä„ÄÅ Â§ßÂ∞èÂÜôÔºâÔºåÈÉΩ‰ºöÂØºËá¥ÁºìÂ≠ò‰∏ç‰ºöÂëΩ‰∏≠„ÄÇÂõ†Ê≠§ MySQL ÁöÑ `Êü•ËØ¢ÁºìÂ≠òÂëΩ‰∏≠Áéá‰∏çÈ´ò` „ÄÇ\n\nÂêåÊó∂ÔºåÂ¶ÇÊûúÊü•ËØ¢ËØ∑Ê±Ç‰∏≠ÂåÖÂê´Êüê‰∫õÁ≥ªÁªüÂáΩÊï∞„ÄÅÁî®Êà∑Ëá™ÂÆö‰πâÂèòÈáèÂíåÂáΩÊï∞„ÄÅ‰∏Ä‰∫õÁ≥ªÁªüË°®ÔºåÂ¶Ç mysql „ÄÅ information_schema„ÄÅ performance_schema Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°®ÔºåÈÇ£Ëøô‰∏™ËØ∑Ê±ÇÂ∞±‰∏ç‰ºöË¢´ÁºìÂ≠ò„ÄÇ‰ª•Êüê‰∫õÁ≥ªÁªüÂáΩÊï∞‰∏æ‰æãÔºåÂèØËÉΩÂêåÊ†∑ÁöÑÂáΩÊï∞ÁöÑ‰∏§Ê¨°Ë∞ÉÁî®‰ºö‰∫ßÁîü‰∏ç‰∏ÄÊ†∑ÁöÑÁªìÊûúÔºåÊØîÂ¶ÇÂáΩÊï∞ `NOW` ÔºåÊØèÊ¨°Ë∞ÉÁî®ÈÉΩ‰ºö‰∫ßÁîüÊúÄÊñ∞ÁöÑÂΩìÂâçÊó∂Èó¥ÔºåÂ¶ÇÊûúÂú®‰∏Ä‰∏™Êü•ËØ¢ËØ∑Ê±Ç‰∏≠Ë∞ÉÁî®‰∫ÜËøô‰∏™ÂáΩÊï∞ÔºåÈÇ£Âç≥‰ΩøÊü•ËØ¢ËØ∑Ê±ÇÁöÑÊñáÊú¨‰ø°ÊÅØÈÉΩ‰∏ÄÊ†∑ÔºåÈÇ£‰∏çÂêåÊó∂Èó¥ÁöÑ‰∏§Ê¨°Êü•ËØ¢‰πüÂ∫îËØ•ÂæóÂà∞‰∏çÂêåÁöÑÁªìÊûúÔºåÂ¶ÇÊûúÂú®Á¨¨‰∏ÄÊ¨°Êü•ËØ¢Êó∂Â∞±ÁºìÂ≠ò‰∫ÜÔºåÈÇ£Á¨¨‰∫åÊ¨°Êü•ËØ¢ÁöÑÊó∂ÂÄôÁõ¥Êé•‰ΩøÁî®Á¨¨‰∏ÄÊ¨°Êü•ËØ¢ÁöÑÁªìÊûúÂ∞±ÊòØÈîôËØØÁöÑ!\n\nÊ≠§Â§ñÔºåÊó¢ÁÑ∂ÊòØÁºìÂ≠òÔºåÈÇ£Â∞±ÊúâÂÆÉ `ÁºìÂ≠òÂ§±ÊïàÁöÑÊó∂ÂÄô`„ÄÇMySQL ÁöÑÁºìÂ≠òÁ≥ªÁªü‰ºöÁõëÊµãÊ∂âÂèäÂà∞ÁöÑÊØèÂº†Ë°®ÔºåÂè™Ë¶ÅËØ•Ë°®ÁöÑÁªìÊûÑÊàñËÄÖÊï∞ÊçÆË¢´‰øÆÊîπÔºåÂ¶ÇÂØπËØ•Ë°®‰ΩøÁî®‰∫Ü `INSERT`„ÄÅ`UPDATE`„ÄÅ`DELETE`„ÄÅ`TRUNCATE TABLE`„ÄÅ`ALTER TABLE`„ÄÅ`DROP TABLE`Êàñ `DROP DATABASE` ËØ≠Âè•ÔºåÈÇ£‰ΩøÁî®ËØ•Ë°®ÁöÑÊâÄÊúâÈ´òÈÄüÁºìÂ≠òÊü•ËØ¢ÈÉΩÂ∞ÜÂèò‰∏∫Êó†ÊïàÂπ∂‰ªéÈ´òÈÄüÁºìÂ≠ò‰∏≠Âà†Èô§ÔºÅÂØπ‰∫é `Êõ¥Êñ∞ÂéãÂäõÂ§ßÁöÑÊï∞ÊçÆÂ∫ì`Êù•ËØ¥ÔºåÊü•ËØ¢ÁºìÂ≠òÁöÑÂëΩ‰∏≠Áéá‰ºöÈùûÂ∏∏‰Ωé„ÄÇ\n\n**<font color=red>ÊÄª‰πãÔºåÂõ†‰∏∫Êü•ËØ¢ÁºìÂ≠òÂæÄÂæÄÂºäÂ§ß‰∫éÂà©ÔºåÊü•ËØ¢ÁºìÂ≠òÁöÑÂ§±ÊïàÈùûÂ∏∏È¢ëÁπÅ„ÄÇ</font>**\n\n‰∏ÄËà¨Âª∫ËÆÆÂ§ßÂÆ∂Âú®ÈùôÊÄÅË°®Èáå‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÔºå‰ªÄ‰πàÂè´`ÈùôÊÄÅË°®`Âë¢?Â∞±ÊòØ‰∏ÄËà¨Êàë‰ª¨ÊûÅÂ∞ëÊõ¥Êñ∞ÁöÑË°®„ÄÇÊØîÂ¶ÇÔºå‰∏Ä‰∏™Á≥ªÁªüÈÖçÁΩÆË°®„ÄÅÂ≠óÂÖ∏Ë°®ÔºåËøôÂº†Ë°®‰∏äÁöÑÊü•ËØ¢ÊâçÈÄÇÂêà‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠ò„ÄÇÂ•ΩÂú®MySQL‰πüÊèê‰æõ‰∫ÜËøôÁßç‚Äú`ÊåâÈúÄ‰ΩøÁî®`‚ÄùÁöÑÊñπÂºè„ÄÇ‰Ω†ÂèØ‰ª•Â∞Ümy.cnfÂèÇÊï∞ query_ _cache_ type  ËÆæÁΩÆÊàêDEMANDÔºå‰ª£Ë°®ÂΩìsqlËØ≠Âè•‰∏≠ÊúâSQL_ CACHEÂÖ≥ÈîÆËØçÊó∂ÊâçÁºìÂ≠ò„ÄÇÊØîÂ¶ÇÔºö\n\n```shell\n#query_ cache_ typeÊúâ3‰∏™ÂÄº0‰ª£Ë°®ÂÖ≥Èó≠Êü•ËØ¢ÁºìÂ≠ò0FFÔºå1‰ª£Ë°®ÂºÄÂêØONÔºå2 (DEMAND)\nquery_cache_ type=2\n```\n\nËøôÊ†∑ÂØπ‰∫éÈªòËÆ§ÁöÑSQLËØ≠Âè•ÈÉΩ‰∏ç‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠ò„ÄÇËÄåÂØπ‰∫é‰Ω†Á°ÆÂÆöË¶Å‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÁöÑËØ≠Âè•ÔºåÂèØ‰ª•Áî®SQL_CACHEÊòæÂºèÊåáÂÆöÔºåÂÉè‰∏ãÈù¢Ëøô‰∏™ËØ≠Âè•‰∏ÄÊ†∑Ôºö\n\n```sql\nselect SQL. CACHE * from test where ID=5 ;|\n```\n\nÊü•ÁúãÂΩìÂâçmysq|ÂÆû‰æãÊòØÂê¶ÂºÄÂêØÁºìÂ≠òÊú∫Âà∂\n\n```mysql\n# MySQL5.7 ‰∏≠Ôºö\nmysql> show global variables like \"%query_cache_type%\";\n+------------------+-------+\n| Variable_name    | Value |\n+------------------+-------+\n| query_cache_type | OFF   |\n+------------------+-------+\n1 row in set (0.00 sec)\n\n# MySQL8.0 ‰∏≠Ôºö\nmysql> show global variables like \"%query_cache_type%\";\nEmpty set (0.00 sec)\n```\n\nÁõëÊéßÊü•ËØ¢ÁºìÂ≠òÁöÑÂëΩ‰∏≠Áéá\n\n```sql\nshow status like '%Qcache%';\n```\n\n![image-20220712222507959](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116898.png)\n\n- `Qcache_free_blocks` ÔºöË°®Á§∫Êü•ËØ¢ÁºìÂ≠ò‰∏≠ËøòÊúâÂ§öÂ∞ëÂâ©‰ΩôÁöÑblocks,Â¶ÇÊûúËØ•ÂÄºÊòæÁ§∫ËæÉÂ§ß,ÂàôËØ¥ÊòéÊü•ËØ¢ÁºìÂ≠ò‰∏≠ÁöÑ`ÂÜÖÂ≠òÁ¢éÁâá`ËøáÂ§ö‰∫ÜÔºåÂèØËÉΩÂú®‰∏ÄÂÆöÁöÑÊó∂Èó¥ËøõË°åÊï¥ÁêÜ„ÄÇ\n- `Qcache_free_memory` ÔºöÊü•ËØ¢ÁºìÂ≠òÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÔºåÈÄöËøáËøô‰∏™ÂèÇÊï∞ÂèØ‰ª•ÂæàÊ∏ÖÊô∞ÁöÑÁü•ÈÅìÂΩìÂâçÁ≥ªÁªüÁöÑÊü•ËØ¢ÂÜÖÂ≠òÊòØÂê¶Â§üÁî®ÔºåÊòØÂ§ö‰∫ÜÔºåËøòÊòØ‰∏çÂ§üÁî®ÔºåDBAÂèØ‰ª•Ê†πÊçÆÂÆûÈôÖÊÉÖÂÜµÂÅöÂá∫Ë∞ÉÊï¥„ÄÇ\n- `Qcache_hits` ÔºöË°®Á§∫ÊúâÂ§öÂ∞ëÊ¨°ÂëΩ‰∏≠ÁºìÂ≠ò„ÄÇÊàë‰ª¨‰∏ªË¶ÅÂèØ‰ª•ÈÄöËøáËØ•ÂÄºÊù•È™åËØÅÊàë‰ª¨ÁöÑÊü•ËØ¢ÁºìÂ≠òÁöÑÊïàÊûú„ÄÇÊï∞Â≠óË∂äÂ§ßÔºåÁºìÂ≠òÊïàÊûúË∂äÁêÜÊÉ≥„ÄÇ\n- `Qcache_inserts` ÔºöË°®Á§∫Â§öÂ∞ëÊ¨°Êú™ÂëΩ‰∏≠ÁÑ∂ÂêéÊèíÂÖ•ÔºåÊÑèÊÄùÊòØÊñ∞Êù•ÁöÑSQLËØ∑Ê±ÇÂú®ÁºìÂ≠ò‰∏≠Êú™ÊâæÂà∞Ôºå‰∏çÂæó‰∏çÊâßË°åÊü•ËØ¢Â§ÑÁêÜ,ÊâßË°åÊü•ËØ¢Â§ÑÁêÜÂêéÊääÁªìÊûúinsertÂà∞Êü•ËØ¢ÁºìÂ≠ò‰∏≠„ÄÇËøôÊ†∑ÁöÑÊÉÖÂÜµÁöÑÊ¨°Êï∞Ë∂äÂ§öÔºåË°®Á§∫Êü•ËØ¢ÁºìÂ≠òÂ∫îÁî®Âà∞ÁöÑÊØîËæÉÂ∞ëÔºåÊïàÊûú‰πüÂ∞±‰∏çÁêÜÊÉ≥„ÄÇÂΩìÁÑ∂Á≥ªÁªüÂàöÂêØÂä®ÂêéÔºåÊü•ËØ¢ÁºìÂ≠òÊòØÁ©∫ÁöÑÔºåËøôÂæàÊ≠£Â∏∏„ÄÇ\n- `Qcache_lowmem_prunes` ÔºöËØ•ÂèÇÊï∞ËÆ∞ÂΩïÊúâÂ§öÂ∞ëÊù°Êü•ËØ¢Âõ†‰∏∫ÂÜÖÂ≠ò‰∏çË∂≥ËÄåË¢´ÁßªÈô§Âá∫Êü•ËØ¢ÁºìÂ≠ò„ÄÇÈÄöËøáËøô‰∏™ÂÄºÔºåÁî®Êà∑ÂèØ‰ª•ÈÄÇÂΩìÁöÑË∞ÉÊï¥ÁºìÂ≠òÂ§ßÂ∞è„ÄÇ\n- `Qcache_not_cached` ÔºöË°®Á§∫Âõ†‰∏∫query_cache_typeÁöÑËÆæÁΩÆËÄåÊ≤°ÊúâË¢´ÁºìÂ≠òÁöÑÊü•ËØ¢Êï∞Èáè„ÄÇ\n- `Qcache_queries_in_cache`ÔºöÂΩìÂâçÁºìÂ≠ò‰∏≠`ÁºìÂ≠òÁöÑÊü•ËØ¢Êï∞Èáè`„ÄÇ\n- `Qcache_total_blocks` ÔºöÂΩìÂâçÁºìÂ≠òÁöÑblockÊï∞Èáè„ÄÇ\n\n### 2.1.2 **Ëß£ÊûêÂô®**\n\nÂú®Ëß£ÊûêÂô®‰∏≠ÂØπ SQL ËØ≠Âè•ËøõË°åËØ≠Ê≥ïÂàÜÊûê„ÄÅËØ≠‰πâÂàÜÊûê„ÄÇ\n\n![image-20220115172951498](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116982.png)\n\nÂ¶ÇÊûúÊ≤°ÊúâÂëΩ‰∏≠Êü•ËØ¢ÁºìÂ≠òÔºåÂ∞±Ë¶ÅÂºÄÂßãÁúüÊ≠£ÊâßË°åËØ≠Âè•‰∫Ü„ÄÇÈ¶ñÂÖàÔºåMySQL ÈúÄË¶ÅÁü•ÈÅì‰Ω†Ë¶ÅÂÅö‰ªÄ‰πàÔºåÂõ†Ê≠§ÈúÄË¶ÅÂØπSQLËØ≠Âè•ÂÅöËß£Êûê„ÄÇSQLËØ≠Âè•ÁöÑÂàÜÊûêÂàÜ‰∏∫ËØçÊ≥ïÂàÜÊûê‰∏éËØ≠Ê≥ïÂàÜÊûê„ÄÇ\n\nÂàÜÊûêÂô®ÂÖàÂÅö‚Äú`ËØçÊ≥ïÂàÜÊûê` ‚Äù„ÄÇ‰Ω†ËæìÂÖ•ÁöÑÊòØÁî±Â§ö‰∏™Â≠óÁ¨¶‰∏≤ÂíåÁ©∫Ê†ºÁªÑÊàêÁöÑ‰∏ÄÊù° SQL ËØ≠Âè•ÔºåMySQL ÈúÄË¶ÅËØÜÂà´Âá∫ÈáåÈù¢ ÁöÑÂ≠óÁ¨¶‰∏≤ÂàÜÂà´ÊòØ‰ªÄ‰πàÔºå‰ª£Ë°®‰ªÄ‰πà„ÄÇ\n\n MySQL ‰ªé‰Ω†ËæìÂÖ•ÁöÑ\"select\"Ëøô‰∏™ÂÖ≥ÈîÆÂ≠óËØÜÂà´Âá∫Êù•ÔºåËøôÊòØ‰∏Ä‰∏™Êü•ËØ¢ËØ≠Âè•„ÄÇÂÆÉ‰πüË¶ÅÊääÂ≠óÁ¨¶‰∏≤‚ÄúT‚ÄùËØÜÂà´Êàê‚ÄúË°®Âêç T‚ÄùÔºåÊääÂ≠óÁ¨¶‰∏≤‚ÄúID‚ÄùËØÜÂà´Êàê‚ÄúÂàó ID‚Äù„ÄÇ\n\nÊé•ÁùÄÔºåË¶ÅÂÅö‚Äú`ËØçÊ≥ïÂàÜÊûê` ‚Äù„ÄÇÊ†πÊçÆËØçÊ≥ïÂàÜÊûêÁöÑÁªìÊûúÔºåËØ≠Ê≥ïÂàÜÊûêÂô®ÔºàÊØîÂ¶ÇÔºöBisonÔºâ‰ºöÊ†πÊçÆËØ≠Ê≥ïËßÑÂàôÔºåÂà§Êñ≠‰Ω†Ëæì ÂÖ•ÁöÑËøô‰∏™ SQL ËØ≠Âè•ÊòØÂê¶ `Êª°Ë∂≥ MySQL ËØ≠Ê≥ï`„ÄÇ\n\n```sql\nselect department_id,job_id,avg(salary) from employees group by department_id; \n```\n\nÂ¶ÇÊûú‰Ω†ÁöÑËØ≠Âè•‰∏çÂØπÔºåÂ∞±‰ºöÊî∂Âà∞‚Äú‚ÄùÁöÑÈîôËØØÊèêÈÜíÔºåÊØîÂ¶ÇËøô‰∏™ËØ≠Âè•fromÂÜôÊàê‰∫Ürom„ÄÇ\n\n```mysql\nmysql> select * fro user;\nERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'fro user' at line 1\n```\n\nÂ¶ÇÊûúSQLËØ≠Âè•Ê≠£Á°ÆÔºåÂàô‰ºöÁîüÊàê‰∏Ä‰∏™ËøôÊ†∑ÁöÑËØ≠Ê≥ïÊ†ë:\n\n![image-20220115173057415](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117140.png)\n\n‰∏ãÂõæÊòØSQLËØçÊ≥ïÂàÜÊûêÁöÑËøáÁ®ãÊ≠•È™§Ôºö\n\n![image-20220712223741324](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117605.png)\n\nËá≥Ê≠§Êàë‰ª¨Ëß£ÊûêÂô®ÁöÑÂ∑•‰Ωú‰ªªÂä°‰πüÂü∫Êú¨ÂúÜÊª°‰∫Ü„ÄÇÊé•‰∏ãÊù•ËøõÂÖ•Âà∞‰ºòÂåñÂô®„ÄÇ\n\n### 2.1.3 ‰ºòÂåñÂô®\n\nÂú®‰ºòÂåñÂô®‰∏≠‰ºöÁ°ÆÂÆö SQL ËØ≠Âè•ÁöÑÊâßË°åË∑ØÂæÑÔºåÊØîÂ¶ÇÊòØÊ†πÊçÆ `ÂÖ®Ë°®Ê£ÄÁ¥¢` ÔºåËøòÊòØÊ†πÊçÆ `Á¥¢ÂºïÊ£ÄÁ¥¢` Á≠â„ÄÇ\n\nÁªèËøá‰∫ÜËß£ÊûêÂô®ÔºåMySQL Â∞±Áü•ÈÅì‰Ω†Ë¶ÅÂÅö‰ªÄ‰πà‰∫Ü„ÄÇÂú®ÂºÄÂßãÊâßË°å‰πãÂâçÔºåËøòË¶ÅÂÖàÁªèËøá‰ºòÂåñÂô®ÁöÑÂ§ÑÁêÜ„ÄÇ**‰∏ÄÊù°Êü•ËØ¢ÂèØ‰ª•ÊúâÂæàÂ§öÁßçÊâßË°åÊñπÂºèÔºåÊúÄÂêéÈÉΩËøîÂõûÁõ∏ÂêåÁöÑÁªìÊûú„ÄÇ‰ºòÂåñÂô®ÁöÑ‰ΩúÁî®Â∞±ÊòØÊâæÂà∞ËøôÂÖ∂‰∏≠ÊúÄÂ•ΩÁöÑÊâßË°åËÆ°Âàí**„ÄÇ\n\n‰∏æ‰æãÔºöÂ¶Ç‰∏ãËØ≠Âè•ÊòØÊâßË°å‰∏§‰∏™Ë°®ÁöÑ join:\n\n```sql\nselect * from test1 join test2 using(ID)\nwhere test1.name='zhangwei' and test2.name='mysqlÈ´òÁ∫ßËØæÁ®ã';\n```\n\n```\nÊñπÊ°à1:ÂèØ‰ª•ÂÖà‰ªéË°® test1 ÈáåÈù¢ÂèñÂá∫ name='zhangwei'ÁöÑËÆ∞ÂΩïÁöÑ ID ÂÄºÔºåÂÜçÊ†πÊçÆ ID ÂÄºÂÖ≥ËÅîÂà∞Ë°® test2ÔºåÂÜçÂà§Êñ≠ test2 ÈáåÈù¢ name ÁöÑÂÄºÊòØÂê¶Á≠â‰∫é 'mysqlÈ´òÁ∫ßËØæÁ®ã'„ÄÇ\n\nÊñπÊ°à2:ÂèØ‰ª•ÂÖà‰ªéË°® test2 ÈáåÈù¢ÂèñÂá∫ name='mysqlÈ´òÁ∫ßËØæÁ®ã' ÁöÑËÆ∞ÂΩïÁöÑ ID ÂÄºÔºåÂÜçÊ†πÊçÆ ID ÂÄºÂÖ≥ËÅîÂà∞ test1Ôºå ÂÜçÂà§Êñ≠ test1 ÈáåÈù¢ nameÁöÑÂÄºÊòØÂê¶Á≠â‰∫é zhangwei„ÄÇ\n\nËøô‰∏§ÁßçÊâßË°åÊñπÊ≥ïÁöÑÈÄªËæëÁªìÊûúÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰ΩÜÊòØÊâßË°åÁöÑÊïàÁéá‰ºöÊúâ‰∏çÂêåÔºåËÄå‰ºòÂåñÂô®ÁöÑ‰ΩúÁî®Â∞±ÊòØÂÜ≥ÂÆöÈÄâÊã©‰ΩøÁî®Âì™‰∏Ä‰∏™ÊñπÊ°à„ÄÇ‰ºòÂåñ\nÂô®Èò∂ÊÆµÂÆåÊàêÂêéÔºåËøô‰∏™ËØ≠Âè•ÁöÑÊâßË°åÊñπÊ°àÂ∞±Á°ÆÂÆö‰∏ãÊù•‰∫ÜÔºåÁÑ∂ÂêéËøõÂÖ•ÊâßË°åÂô®Èò∂ÊÆµ„ÄÇ\n\nÂ¶ÇÊûú‰Ω†ËøòÊúâ‰∏Ä‰∫õÁñëÈóÆÔºåÊØîÂ¶Ç‰ºòÂåñÂô®ÊòØÊÄé‰πàÈÄâÊã©Á¥¢ÂºïÁöÑÔºåÊúâÊ≤°ÊúâÂèØËÉΩÈÄâÊã©ÈîôÁ≠â„ÄÇÂêéÈù¢ËÆ≤Âà∞Á¥¢ÂºïÊàë‰ª¨ÂÜçË∞à„ÄÇ\n```\n\nÂú®Êü•ËØ¢‰ºòÂåñÂô®‰∏≠ÔºåÂèØ‰ª•ÂàÜ‰∏∫ `ÈÄªËæëÊü•ËØ¢` ‰ºòÂåñÈò∂ÊÆµÂíå `Áâ©ÁêÜÊü•ËØ¢` ‰ºòÂåñÈò∂ÊÆµ„ÄÇ\n\nÈÄªËæëÊü•ËØ¢‰ºòÂåñÂ∞±ÊòØÈÄöËøáÊîπÂèòSQLËØ≠Âè•ÁöÑÂÜÖÂÆπÊù•‰ΩøÂæóSQLÊü•ËØ¢Êõ¥È´òÊïàÔºåÂêåÊó∂‰∏∫Áâ©ÁêÜÊü•ËØ¢‰ºòÂåñÊèê‰æõÊõ¥Â§öÁöÑÂÄôÈÄâÊâßË°åËÆ°Âàí„ÄÇÈÄöÂ∏∏ÈááÁî®ÁöÑÊñπÂºèÊòØÂØπSQLËØ≠Âè•ËøõË°å`Á≠â‰ª∑ÂèòÊç¢`ÔºåÂØπÊü•ËØ¢ËøõË°åÈáçÂÜôÔºåËÄåÊü•ËØ¢ÈáçÂÜôÁöÑÊï∞Â≠¶Âü∫Á°ÄÂ∞±ÊòØÂÖ≥Á≥ª‰ª£Êï∞„ÄÇÂØπÊù°‰ª∂Ë°®ËææÂºèËøõË°åÁ≠â‰ª∑Ë∞ìËØçÈáçÂÜô„ÄÅÊù°‰ª∂ÁÆÄÂåñÔºåÂØπËßÜÂõæËøõË°åÈáçÂÜôÔºåÂØπÂ≠êÊü•ËØ¢ËøõË°å‰ºòÂåñÔºåÂØπËøûÊé•ËØ≠‰πâËøõË°å‰∫ÜÂ§ñËøûÊé•Ê∂àÈô§„ÄÅÂµåÂ•óËøûÊé•Ê∂àÈô§Á≠â„ÄÇ\n\nÁâ©ÁêÜÊü•ËØ¢‰ºòÂåñÊòØÂü∫‰∫éÂÖ≥Á≥ª‰ª£Êï∞ËøõË°åÁöÑÊü•ËØ¢ÈáçÂÜô,ËÄåÂÖ≥Á≥ª‰ª£Êï∞ÁöÑÊØè‰∏ÄÊ≠•ÈÉΩÂØπÂ∫îÁùÄÁâ©ÁêÜËÆ°ÁÆó, Ëøô‰∫õÁâ©ÁêÜËÆ°ÁÆóÂæÄÂæÄÂ≠òÂú®Â§öÁßçÁÆóÊ≥ïÔºåÂõ†Ê≠§ÈúÄË¶ÅËÆ°ÁÆóÂêÑÁßçÁâ©ÁêÜË∑ØÂæÑÁöÑ‰ª£‰ª∑Ôºå‰ªé‰∏≠ÈÄâÊã©‰ª£‰ª∑ÊúÄÂ∞èÁöÑ‰Ωú‰∏∫ÊâßË°åËÆ°Âàí„ÄÇÂú®Ëøô‰∏™Èò∂ÊÆµÈáåÔºåÂØπ‰∫éÂçïË°®ÂíåÂ§öË°®ËøûÊé•ÁöÑÊìç‰ΩúÔºåÈúÄË¶ÅÈ´òÊïàÂú∞`‰ΩøÁî®Á¥¢Âºï`ÔºåÊèêÂçáÊü•ËØ¢ÊïàÁéá„ÄÇ\n\n### 2.1.4 ÊâßË°åÂô®\n\nÊà™Ê≠¢Âà∞Áé∞Âú®ÔºåËøòÊ≤°ÊúâÁúüÊ≠£ÂéªËØªÂÜôÁúüÂÆûÁöÑË°®Ôºå‰ªÖ‰ªÖÂè™ÊòØ‰∫ßÂá∫‰∫Ü‰∏Ä‰∏™ÊâßË°åËÆ°Âàí„ÄÇ‰∫éÊòØÂ∞±ËøõÂÖ•‰∫Ü `ÊâßË°åÂô®Èò∂ÊÆµ` „ÄÇ\n\n![image-20220115173252824](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117552.png)\n\n\n\nÂú®ÊâßË°å‰πãÂâçÈúÄË¶ÅÂà§Êñ≠ËØ•Áî®Êà∑ÊòØÂê¶ÂÖ∑Â§áÊùÉÈôê „ÄÇÂ¶ÇÊûúÊ≤°ÊúâÔºåÂ∞±‰ºöËøîÂõûÊùÉÈôêÈîôËØØ„ÄÇÂ¶ÇÊûúÂÖ∑Â§áÊùÉÈôêÔºåÂ∞±ÊâßË°å SQL Êü•ËØ¢Âπ∂ËøîÂõûÁªìÊûú„ÄÇÂú® MySQL 8.0 ‰ª•‰∏ãÁöÑÁâàÊú¨ÔºåÂ¶ÇÊûúËÆæÁΩÆ‰∫ÜÊü•ËØ¢ÁºìÂ≠òÔºåËøôÊó∂‰ºöÂ∞ÜÊü•ËØ¢ÁªìÊûúËøõË°åÁºìÂ≠ò„ÄÇ\n\n```sql\nselect * from test where id=1;\n```\n\nÂ¶ÇÊûúÊúâÊùÉÈôêÔºåÂ∞±ÊâìÂºÄË°®ÁªßÁª≠ÊâßË°å„ÄÇÊâìÂºÄË°®ÁöÑÊó∂ÂÄôÔºåÊâßË°åÂô®Â∞±‰ºöÊ†πÊçÆË°®ÁöÑÂºïÊìéÂÆö‰πâÔºåË∞ÉÁî®Â≠òÂÇ®ÂºïÊìéAPIÂØπË°®ËøõË°åÁöÑËØªÂÜô„ÄÇÂ≠òÂÇ®ÂºïÊìéAPIÂè™ÊòØÊäΩË±°Êé•Âè£Ôºå‰∏ãÈù¢ËøòÊúâ‰∏™**Â≠òÂÇ®ÂºïÊìéÂ±Ç**ÔºåÂÖ∑‰ΩìÂÆûÁé∞ËøòÊòØË¶ÅÁúãË°®ÈÄâÊã©ÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇ\n\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117221.png)\n\nÊØîÂ¶ÇÔºöË°® test ‰∏≠ÔºåID Â≠óÊÆµÊ≤°ÊúâÁ¥¢ÂºïÔºåÈÇ£‰πàÊâßË°åÂô®ÁöÑÊâßË°åÊµÅÁ®ãÊòØËøôÊ†∑ÁöÑÔºö\n\n- Ë∞ÉÁî® InnoDB ÂºïÊìéÊé•Âè£ÂèñËøô‰∏™Ë°®ÁöÑÁ¨¨‰∏ÄË°åÔºåÂà§Êñ≠ ID ÂÄºÊòØ‰∏çÊòØ1ÔºåÂ¶ÇÊûú‰∏çÊòØÂàôË∑≥ËøáÔºåÂ¶ÇÊûúÊòØÂàôÂ∞ÜËøôË°åÂ≠òÂú®ÁªìÊûúÈõÜ‰∏≠; Ë∞ÉÁî®ÂºïÊìéÊé•Âè£Âèñ‚Äú‰∏ã‰∏ÄË°å‚ÄùÔºåÈáçÂ§çÁõ∏ÂêåÁöÑÂà§Êñ≠ÈÄªËæëÔºåÁõ¥Âà∞ÂèñÂà∞Ëøô‰∏™Ë°®ÁöÑÊúÄÂêé‰∏ÄË°å„ÄÇ\n- ÊâßË°åÂô®Â∞Ü‰∏äËø∞ÈÅçÂéÜËøáÁ®ã‰∏≠ÊâÄÊúâÊª°Ë∂≥Êù°‰ª∂ÁöÑË°åÁªÑÊàêÁöÑËÆ∞ÂΩïÈõÜ‰Ωú‰∏∫ÁªìÊûúÈõÜËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇ\n\nËá≥Ê≠§ÔºåËøô‰∏™ËØ≠Âè•Â∞±ÊâßË°åÂÆåÊàê‰∫Ü„ÄÇÂØπ‰∫éÊúâÁ¥¢ÂºïÁöÑË°®ÔºåÊâßË°åÁöÑÈÄªËæë‰πüÂ∑Æ‰∏çÂ§ö„ÄÇ\n\n==SQL ËØ≠Âè•Âú® MySQL ‰∏≠ÁöÑÊµÅÁ®ãÊòØ==Ôºö`SQL ËØ≠Âè• ‚Üí Êü•ËØ¢ÁºìÂ≠ò ‚Üí Ëß£ÊûêÂô® ‚Üí ‰ºòÂåñÂô® ‚Üí ÊâßË°åÂô®`„ÄÇ\n\n![image-20220115173423050](https://blog-images-1309598269.cos.ap-beijing.myqcloud.com/blogImgs/202206231430741.png)\n\n## 2.2 MySQL8‰∏≠SQLÊâßË°åÂéüÁêÜ\n\nÂâçÈù¢ÁöÑÁªìÊûÑÂõæÂæàÂ§çÊùÇÔºåÊàë‰ª¨ÈúÄË¶ÅÊäìÂèñÊúÄÊ†∏ÂøÉÁöÑÈÉ®ÂàÜ: SQLÁöÑÊâßË°åÂéüÁêÜ„ÄÇ‰∏çÂêåÁöÑDBMSÁöÑSQLÁöÑÊâßË°åÂéüÁêÜÊòØÁõ∏ÈÄöÁöÑÔºåÂè™ÊòØÂú®‰∏çÂêåÁöÑËΩØ‰ª∂‰∏≠ÔºåÂêÑÊúâÂêÑÁöÑÂÆûÁé∞Ë∑ØÂæÑ„ÄÇ\n\nÊó¢ÁÑ∂‰∏ÄÊù°SQLËØ≠Âè•‰ºöÁªèÂéÜ‰∏çÂêåÁöÑÊ®°Âùó,ÈÇ£Êàë‰ª¨Â∞±Êù•Áúã‰∏ãÔºåÂú®‰∏çÂêåÁöÑÊ®°Âùó‰∏≠ÔºåSQL ÊâßË°åÊâÄ‰ΩøÁî®ÁöÑËµÑÊ∫ê(Êó∂Èó¥)ÊòØÊÄéÊ†∑ÁöÑ„ÄÇÂ¶Ç‰ΩïÂú®MySQL‰∏≠ÂØπ‰∏ÄÊù°SQLËØ≠Âè•ÁöÑÊâßË°åÊó∂Èó¥ËøõË°åÂàÜÊûê„ÄÇ\n\n### 2.2.1. Á°ÆËÆ§profilingÊòØÂê¶ÂºÄÂêØ\n\n‰∫ÜËß£Êü•ËØ¢ËØ≠Âè•Â∫ïÂ±ÇÊâßË°åÁöÑËøáÁ®ãÔºö`select @@profiling;` ÊàñËÄÖ`show variables like '%profiling%' `Êü•ÁúãÊòØÂê¶ÂºÄÂêØËÆ°Âàí„ÄÇÂºÄÂêØÂÆÉÂèØ‰ª•ËÆ©MySQLÊî∂ÈõÜÂú®SQLÊâßË°åÊó∂ÊâÄ‰ΩøÁî®ÁöÑËµÑÊ∫êÊÉÖÂÜµÔºåÂëΩ‰ª§Â¶Ç‰∏ãÔºö\n\n```mysql\nmysql> select @@profiling;\nmysq1> show variables like 'profiling';\n```\n\n![image-20220712230716818](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117783.png)\n\nprofiling = 0‰ª£Ë°®ÂÖ≥Èó≠ÔºåÊàë‰ª¨ÈúÄË¶ÅÊääprofilingÊâìÂºÄÔºåÂç≥ËÆæÁΩÆ‰∏∫1Ôºõ\n\n```mysql\nmysql> set profiling = 1;\n```\n\nProfilingÂäüËÉΩÁî±MySQL‰ºöËØùÂèòÈáèÔºöprofilingÊéßÂà∂„ÄÇÈªòËÆ§ÊòØOFFÔºàÂÖ≥Èó≠Áä∂ÊÄÅÔºâ„ÄÇ\n\n### 2.2.2.Â§öÊ¨°ÊâßË°åÁõ∏ÂêåSQLÊü•ËØ¢\n\n```sql\nmysql> select * from employees;\n\nmysql> select * from employees;\n```\n\n### 2.2.3.Êü•Áúãprofiles\n\n```mysql\nmysql> show profiles #Êü•ËØ¢ÊâÄÊúâsqlËØ≠Âè•ÁöÑÂàÜÊûêÊ¶ÇËßà\n```\n\n![image-20220713001646187](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117582.png)\n\n### 2.2.4.Êü•Áúãprofile\n\n```mysql\nmysql> show profie;\n```\n\n![image-20220713001733244](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117949.png)\n\n```mysql\n mysql> show profie for query Query_ID;# Êü•ÁúãÊüê‰∏ÄÊ¨°sqlÊâßË°åÁöÑÂàÜÊûêËøáÁ®ã\n```\n\n![image-20220713001825251](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117654.png)\n\n![image-20220713001556760](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117926.png)\n\n## 2.3 MySQL5.7‰∏≠SQLÊâßË°åÂéüÁêÜ\n\nËøôÈáåÊàë‰ª¨ÈúÄË¶Å`ÊòæÁ§∫ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠òÊ®°Âºè`„ÄÇÂú®MySQL5.7‰∏≠Â¶Ç‰∏ãËÆæÁΩÆÔºö\n\n### 2.3.1.ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠ò\n\n```shell\nquery_cache_type=1\n```\n\n### 2.3.2.ÈáçÂêØMysqlÊúçÂä°\n\n```shell\nsystemctl restart mysqld\n```\n\n### 2.3.3.ÂºÄÂêØÊü•ËØ¢ËÆ°Âàí\n\n```mysql\nmysql> set profiling = 1;\n```\n\n### 2.3.4.ÊâßË°åËØ≠Âè•‰∏§Ê¨°\n\n```mysql\nselect * from departments;\n\nselect * from departments;\n```\n\n### 2.3.5.Êü•Áúãprofiles\n\n![image-20220713000901627](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117455.png)\n\n### 2.3.6.Êü•Áúãprofile\n\n![image-20220713000946556](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117965.png)\n\n![image-20220713001014156](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117166.png)\n\nÁªìËÆ∫‰∏çË®ÄËÄåÂñª.ÊâßË°åÁºñÂè∑10Êó∂,ÊØîÊâßË°åÁºñÂè∑9Êó∂Â∞ë‰∫ÜÂæàÂ§ö‰ø°ÊÅØ,‰ªéÊà™Âõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫Êü•ËØ¢ËØ≠Âè•Áõ¥Êé•‰ªéÁºìÂ≠ò‰∏≠Ëé∑ÂèñÊï∞ÊçÆ .\n\n- **Ê≥®ÊÑè1Ôºö**==SQLÂøÖÈ°ªÊó∂‰∏ÄËá¥ÁöÑ,Âê¶Âàô,‰∏çËÉΩÂëΩ‰∏≠ÁºìÂ≠ò.==\n\n‰æãÂ¶ÇÔºö\n\n```mysql\n#ËôΩÁÑ∂Êü•ËØ¢ÁªìÊûú‰∏ÄËá¥Ôºå ‰ΩÜÂπ∂Ê≤°ÊúâÂëΩ‰∏≠ÁºìÂ≠ò„ÄÇ\nselect * from mydb . mytbl where id=2\nselect * from mydb . mytbl where id>1 and id<3\n```\n\n- **Ê≥®ÊÑè2Ôºö**ÂêåÊ†∑ÁöÑÂºÄÂêØÁºìÂ≠òÁöÑÈÖçÁΩÆ‰ø°ÊÅØÂ¶ÇÊûúÂú®MySQL8‰∏≠Ê∑ªÂä†„ÄÇÈáçÂêØÊúçÂä°Êó∂‰ºöÊä•Èîô:\n\n```shell\n[ root@atguigu01 ~]# vim /etc/my.cnf\n[root@atguigu01 ~]# systemctl restart mysqld;\nJob for mysqld.service failed because the control process exited with error code. See\n\"systemctl status mysqld. service\" and \"journalctl -xe\" for details.\n```\n\nÂàÜÂà´Âú®MySQL5.7ÂíåMySQL8‰∏≠ÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§Ôºö\n\n```mysql\nmysql> show variables like '%query_ cache%';\n```\n\nMySQL5.7‰∏≠ÊòæÁ§∫Ôºö\n\n![image-20220713002324616](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117439.png)\n\nMySQL8.0‰∏≠ÊòæÁ§∫Ôºö\n\n![image-20220713002427047](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117438.png)\n\n## 2.4 SQLËØ≠Ê≥ïÈ°∫Â∫è\n\nÈöèÁùÄ MySQL ÁâàÊú¨ÁöÑÊõ¥Êñ∞Êç¢‰ª£ÔºåÂÖ∂‰ºòÂåñÂô®‰πüÂú®‰∏çÊñ≠ÁöÑÂçáÁ∫ßÔºå‰ºòÂåñÂô®‰ºöÂàÜÊûê‰∏çÂêåÊâßË°åÈ°∫Â∫è‰∫ßÁîüÁöÑÊÄßËÉΩÊ∂àËÄó‰∏çÂêåËÄåÂä®ÊÄÅË∞ÉÊï¥ÊâßË°åÈ°∫Â∫è„ÄÇ\n\nÈúÄÊ±ÇÔºöÊü•ËØ¢ÊØè‰∏™ÈÉ®Èó®Âπ¥ÈæÑÈ´ò‰∫é 20 Â≤ÅÁöÑ‰∫∫Êï∞‰∏îÈ´ò‰∫é 20 Â≤Å‰∫∫Êï∞‰∏çËÉΩÂ∞ë‰∫é 2 ‰∫∫ÔºåÊòæÁ§∫‰∫∫Êï∞ÊúÄÂ§öÁöÑÁ¨¨‰∏ÄÂêçÈÉ®Èó®‰ø°ÊÅØ„ÄÇ\n\n‰∏ãÈù¢ÊòØÁªèÂ∏∏Âá∫Áé∞ÁöÑÊü•ËØ¢È°∫Â∫è:\n\n![image-20220115174625139](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118286.png)]\n\n## 2.5 Oracle‰∏≠ÁöÑSQLÊâßË°åÊµÅÁ®ã(‰∫ÜËß£)\n\nOracle‰∏≠ÈááÁî®‰∫Ü==ÂÖ±‰∫´Ê±†==Êù•Âà§Êñ≠SQLËØ≠Âè•ÊòØÂê¶Â≠òÂú®ÁºìÂ≠òÂíåÊâßË°åËÆ°ÂàíÔºåÈÄöËøáËøô‰∏ÄÊ≠•È™§Êàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÂ∫îËØ•ÈááÁî®Á°¨Ëß£ÊûêËøòÊòØËΩØËß£Êûê„ÄÇ\n\nÊàë‰ª¨ÂÖàÊù•Áúã‰∏ãSQLÂú®Oracle‰∏≠ÁöÑÊâßË°åËøáÁ®ã:\n\n![image-20220713003902294](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118798.png)‰ªé‰∏äÈù¢ËøôÂº†Âõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫, SQLËØ≠Âè•Âú®Oracle‰∏≠ÁªèÂéÜ‰∫Ü‰ª•‰∏ãÁöÑÂá†‰∏™Ê≠•È™§„ÄÇ\n\n1. **ËØ≠Ê≥ïÊ£ÄÊü•**ÔºöÊ£ÄÊü•SQLÊãºÂÜôÊòØÂê¶Ê≠£Á°ÆÔºåÂ¶ÇÊûú‰∏çÊ≠£Á°ÆÔºåOracle ‰ºöÊä•ËØ≠Ê≥ïÈîôËØØ„ÄÇ\n2. **ËØ≠‰πâÊ£ÄÊü•**ÔºöÊ£ÄÊü•SQL‰∏≠ÁöÑËÆøÈóÆÂØπË±°ÊòØÂê¶Â≠òÂú®„ÄÇÊØîÂ¶ÇÊàë‰ª¨Âú®ÂÜôSELECTËØ≠Âè•ÁöÑÊó∂ÂÄôÔºåÂàóÂêçÂÜôÈîô‰∫ÜÔºåÁ≥ªÁªüÂ∞±‰ºöÊèêÁ§∫ÈîôËØØ„ÄÇËØ≠Ê≥ïÊ£ÄÊü•ÂíåËØ≠‰πâÊ£ÄÊü•ÁöÑ‰ΩúÁî®ÊòØ‰øùËØÅSQLËØ≠Âè•Ê≤°ÊúâÈîôËØØ„ÄÇ\n3. **ÊùÉÈôêÊ£ÄÊü•**ÔºöÁúãÁî®Êà∑ÊòØÂê¶ÂÖ∑Â§áËÆøÈóÆËØ•Êï∞ÊçÆÁöÑÊùÉÈôê„ÄÇ\n\nOracleÈÄöËøáÊ£ÄÊü•ÂÖ±‰∫´Ê±†ÊòØÂê¶Â≠òÂú®SQLËØ≠Âè•ÁöÑÊâßË°åËÆ°ÂàíÔºåÊù•Âà§Êñ≠ËøõË°åËΩØËß£Êûê,ËøòÊòØÁ°¨Ëß£Êûê„ÄÇÈÇ£ËΩØËß£ÊûêÂíåÁ°¨Ëß£ÊûêÂèàËØ•ÊÄé‰πàÁêÜËß£Âë¢?\n\nÂú®ÂÖ±‰∫´Ê±†‰∏≠ÔºåOracle È¶ñÂÖàÂØπSQLËØ≠Âè•ËøõË°å`HashËøêÁÆó`ÔºåÁÑ∂ÂêéÊ†πÊçÆHashÂÄºÂú®Â∫ìÁºìÂ≠ò(Library Cache)‰∏≠Êü•ÊâæÔºåÂ¶ÇÊûú`Â≠òÂú®SQLËØ≠Âè•ÁöÑÊâßË°åËÆ°Âàí`ÔºåÂ∞±Áõ¥Êé•ÊãøÊù•ÊâßË°åÔºåÁõ¥Êé•ËøõÂÖ•‚ÄúÊâßË°åÂô®‚ÄùÁöÑÁéØËäÇ,ËøôÂ∞±ÊòØ`ËΩØËß£Êûê`„ÄÇ\n\nÂ¶ÇÊûúÊ≤°ÊúâÊâæÂà∞SQLËØ≠Âè•ÂíåÊâßË°åËÆ°ÂàíÔºåOracle Â∞±ÈúÄË¶ÅÂàõÂª∫Ëß£ÊûêÊ†ëËøõË°åËß£ÊûêÔºåÁîüÊàêÊâßË°åËÆ°ÂàíÔºåËøõÂÖ•‚Äú‰ºòÂåñÂô®‚ÄùËøô‰∏™Ê≠•È™§,ËøôÂ∞±ÊòØ`Á°¨Ëß£Êûê`„ÄÇ\n\n5. **‰ºòÂåñÂô®**:‰ºòÂåñÂô®‰∏≠Â∞±ÊòØË¶ÅËøõË°åÁ°¨Ëß£ÊûêÔºå‰πüÂ∞±ÊòØÂÜ≥ÂÆöÊÄé‰πàÂÅöÔºåÊØîÂ¶ÇÂàõÂª∫Ëß£ÊûêÊ†ëÔºåÁîüÊàêÊâßË°åËÆ°Âàí„ÄÇ\n6. **ÊâßË°åÂô®**:ÂΩìÊúâ‰∫ÜËß£ÊûêÊ†ëÂíåÊâßË°åËÆ°Âàí‰πãÂêé,Â∞±Áü•ÈÅì‰∫ÜSQLËØ•ÊÄé‰πàË¢´ÊâßË°åÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Âú®ÊâßË°åÂô®‰∏≠ÊâßË°åËØ≠Âè•‰∫Ü„ÄÇ\n\nÂÖ±‰∫´Ê±†ÊòØOracle‰∏≠ÁöÑÊúØËØ≠ÔºåÂåÖÊã¨‰∫ÜÂ∫ìÁºìÂ≠ò,Êï∞ÊçÆÂ≠óÂÖ∏ÁºìÂÜ≤Âå∫Á≠â„ÄÇÊàë‰ª¨_‰∏äÈù¢Â∑≤ÁªèËÆ≤Âà∞‰∫ÜÂ∫ìÁºìÂ≠òÂå∫ÔºåÂÆÉ‰∏ªË¶ÅÁºìÂ≠òSQLËØ≠Âè•ÂíåÊâßË°åËÆ°Âàí„ÄÇËÄå`Êï∞ÊçÆÂ≠óÂÖ∏ÁºìÂÜ≤Âå∫`Â≠òÂÇ®ÁöÑÊòØOracle‰∏≠ÁöÑÂØπË±°ÂÆö‰πâ,ÊØîÂ¶ÇË°®„ÄÅËßÜÂõæ„ÄÅÁ¥¢ÂºïÁ≠âÂØπË±°„ÄÇÂΩìÂØπSQLËØ≠Âè•ËøõË°åËß£ÊûêÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÈúÄË¶ÅÁõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÔºå‰ºö‰ªéÊï∞ÊçÆÂ≠óÂÖ∏ÁºìÂÜ≤Âå∫‰∏≠ÊèêÂèñ„ÄÇ\n\n`Â∫ìÁºìÂ≠ò`Ëøô‰∏Ä‰∏™Ê≠•È™§ÔºåÂÜ≥ÂÆö‰∫ÜSQLËØ≠Âè•ÊòØÂê¶ÈúÄË¶ÅËøõË°åÁ°¨Ëß£Êûê„ÄÇ‰∏∫‰∫ÜÊèêÂçáSQLÁöÑÊâßË°åÊïàÁéá,Êàë‰ª¨Â∫îËØ•Â∞ΩÈáèÈÅøÂÖçÁ°¨Ëß£ÊûêÔºåÂõ†‰∏∫Âú®SQLÁöÑÊâßË°åËøáÁ®ã‰∏≠ÔºåÂàõÂª∫Ëß£ÊûêÊ†ëÔºåÁîüÊàêÊâßË°åËÆ°ÂàíÊòØÂæàÊ∂àËÄóËµÑÊ∫êÁöÑ„ÄÇ\n\n‰Ω†ÂèØËÉΩ‰ºöÈóÆÔºåÂ¶Ç‰ΩïÈÅøÂÖçÁ°¨Ëß£ÊûêÔºåÂ∞ΩÈáè‰ΩøÁî®ËΩØËß£ÊûêÂë¢?Âú®Oracle‰∏≠Ôºå`ÁªëÂÆöÂèòÈáè`ÊòØÂÆÉÁöÑ‰∏ÄÂ§ßÁâπËâ≤„ÄÇÁªëÂÆöÂèòÈáèÂ∞±ÊòØÂú®SQLËØ≠Âè•‰∏≠‰ΩøÁî®ÂèòÈáèÔºåÈÄöËøá‰∏çÂêåÁöÑÂèòÈáèÂèñÂÄºÊù•ÊîπÂèòSQLÁöÑÊâßË°åÁªìÊûú„ÄÇËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØËÉΩ`ÊèêÂçáËΩØËß£ÊûêÁöÑÂèØËÉΩÊÄß`Ôºå‰∏çË∂≥‰πãÂ§ÑÂú®‰∫éÂèØËÉΩ‰ºöÂØºËá¥ÁîüÊàêÁöÑÊâßË°åËÆ°Âàí‰∏çÂ§ü‰ºòÂåñÔºåÂõ†Ê≠§ÊòØÂê¶ÈúÄË¶ÅÁªëÂÆöÂèòÈáèËøòÈúÄË¶ÅËßÜÊÉÖÂÜµËÄåÂÆö„ÄÇ\n\n‰∏æ‰∏™‰æãÂ≠êÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑÊü•ËØ¢ËØ≠Âè•Ôºö\n\n```mysql\nSQL> select * from player where player_id = 10001;\n```\n\n‰Ω†‰πüÂèØ‰ª•‰ΩøÁî®ÁªëÂÆöÂèòÈáèÔºåÂ¶Ç:\n\n```mysql\nSOL> select * from plaver where plaver id = :plaver_id:\n```\n\nËøô‰∏§‰∏™Êü•ËØ¢ËØ≠Âè•ÁöÑÊïàÁéáÂú®Oracle‰∏≠ÊòØÂÆåÂÖ®‰∏çÂêåÁöÑ„ÄÇÂ¶ÇÊûú‰Ω†Âú®Êü•ËØ¢player. _id= 10001‰πãÂêé,Ëøò‰ºöÊü•ËØ¢10002„ÄÅ10003‰πãÁ±ªÁöÑÊï∞ÊçÆ,ÈÇ£‰πàÊØè- -Ê¨°Êü•ËØ¢ÈÉΩ‰ºöÂàõÂª∫‰∏Ä ‰∏™Êñ∞ÁöÑÊü•ËØ¢Ëß£Êûê„ÄÇ ËÄåÁ¨¨‰∫åÁßçÊñπÂºè‰ΩøÁî®‰∫ÜÁªëÂÆöÂèòÈáèÔºåÈÇ£‰πàÂú®Á¨¨‰∏Ä-Ê¨°Êü•ËØ¢‰πãÂêéÔºåÂú®ÂÖ±‰∫´Ê±†‰∏≠Â∞±‰ºöÂ≠òÂú®ËøôÁ±ªÊü•ËØ¢ÁöÑÊâßË°åËÆ°ÂàíÔºå‰πüÂ∞±ÊòØËΩØËß£Êûê„ÄÇ\n\nÂõ†Ê≠§ÔºåÊàë**‰ª¨ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁªëÂÆöÂèòÈáèÊù•ÂáèÂ∞ëÁ°¨Ëß£ÊûêÔºåÂáèÂ∞ëOracleÁöÑËß£ÊûêÂ∑•‰ΩúÈáè**„ÄÇ‰ΩÜÊòØËøôÁßçÊñπÂºè‰πüÊúâÁº∫ÁÇπÔºå‰ΩøÁî®Âä®ÊÄÅSQLÁöÑÊñπÂºèÔºåÂõ†‰∏∫ÂèÇÊï∞‰∏çÂêåÔºå‰ºöÂØºËá¥SQLÁöÑÊâßË°åÊïàÁéá‰∏çÂêåÔºåÂêåÊó∂SQL‰ºòÂåñ‰πü‰ºöÊØîËæÉÂõ∞Èöæ„ÄÇ\n\n==OracleÁöÑÊû∂ÊûÑÂõæÔºö==\n\n![image-20220713004228345](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118351.png)\n\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118783.png)\n\n# 3. Êï∞ÊçÆÂ∫ìÁºìÂÜ≤Ê±†Ôºàbuffer poolÔºâ\n\n`InnoDB`Â≠òÂÇ®ÂºïÊìéÊòØ‰ª•È°µ‰∏∫Âçï‰ΩçÊù•ÁÆ°ÁêÜÂ≠òÂÇ®Á©∫Èó¥ÁöÑÔºåÊàë‰ª¨ËøõË°åÁöÑÂ¢ûÂà†ÊîπÊü•Êìç‰ΩúÂÖ∂ÂÆûÊú¨Ë¥®‰∏äÈÉΩÊòØÂú®ËÆøÈóÆÈ°µ Èù¢(ÂåÖÊã¨ËØªÈ°µÈù¢„ÄÅÂÜôÈ°µÈù¢„ÄÅÂàõÂª∫Êñ∞È°µÈù¢Á≠âÊìç‰Ωú)„ÄÇËÄåÁ£ÅÁõò I/O ÈúÄË¶ÅÊ∂àËÄóÁöÑÊó∂Èó¥ÂæàÂ§öÔºåËÄåÂú®ÂÜÖÂ≠ò‰∏≠ËøõË°åÊìç ‰ΩúÔºåÊïàÁéáÂàô‰ºöÈ´òÂæàÂ§öÔºå‰∏∫‰∫ÜËÉΩËÆ©Êï∞ÊçÆË°®ÊàñËÄÖÁ¥¢Âºï‰∏≠ÁöÑÊï∞ÊçÆÈöèÊó∂Ë¢´Êàë‰ª¨ÊâÄÁî®ÔºåDBMS ‰ºöÁî≥ËØ∑`Âç†Áî®ÂÜÖÂ≠òÊù•‰Ωú‰∏∫Êï∞ÊçÆÁºìÂÜ≤Ê±†`ÔºåÂú®ÁúüÊ≠£ËÆøÈóÆÈ°µÈù¢‰πãÂâçÔºåÈúÄË¶ÅÊääÂú®Á£ÅÁõò‰∏äÁöÑÈ°µÁºìÂ≠òÂà∞ÂÜÖÂ≠ò‰∏≠ÁöÑ`Buffer Pool`‰πãÂêéÊâçÂèØ‰ª•ËÆø ÈóÆ„ÄÇ\n\nËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØÂèØ‰ª•ËÆ©Á£ÅÁõòÊ¥ªÂä®ÊúÄÂ∞èÂåñÔºå‰ªéËÄå`ÂáèÂ∞ë‰∏éÁ£ÅÁõòÁõ¥Êé•ËøõË°å I/O ÁöÑÊó∂Èó¥` „ÄÇË¶ÅÁü•ÈÅìÔºåËøôÁßçÁ≠ñÁï•ÂØπÊèê Âçá SQL ËØ≠Âè•ÁöÑÊü•ËØ¢ÊÄßËÉΩÊù•ËØ¥Ëá≥ÂÖ≥ÈáçË¶Å„ÄÇÂ¶ÇÊûúÁ¥¢ÂºïÁöÑÊï∞ÊçÆÂú®ÁºìÂÜ≤Ê±†ÈáåÔºåÈÇ£‰πàËÆøÈóÆÁöÑÊàêÊú¨Â∞±‰ºöÈôç‰ΩéÂæàÂ§ö„ÄÇ\n\n## 3.1 ÁºìÂÜ≤Ê±† vs Êü•ËØ¢ÁºìÂ≠ò\n\n**ÁºìÂÜ≤Ê±†ÂíåÊü•ËØ¢ÁºìÂ≠òÊòØ‰∏Ä‰∏™‰∏úË•øÂêóÔºü‰∏çÊòØ„ÄÇ**\n\n### 3.1.1 ÁºìÂÜ≤Ê±†ÔºàBuffer PoolÔºâ\n\nÈ¶ñÂÖàÊàë‰ª¨ÈúÄË¶Å‰∫ÜËß£Âú® InnoDB Â≠òÂÇ®ÂºïÊìé‰∏≠ÔºåÁºìÂÜ≤Ê±†ÈÉΩÂåÖÊã¨‰∫ÜÂì™‰∫õ„ÄÇ\n\nÂú® InnoDB Â≠òÂÇ®ÂºïÊìé‰∏≠Êúâ‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆ‰ºöÊîæÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÁºìÂÜ≤Ê±†ÂàôÂç†‰∫ÜËøôÈÉ®ÂàÜÂÜÖÂ≠òÁöÑÂ§ßÈÉ®ÂàÜÔºåÂÆÉÁî®Êù•Â≠òÂÇ®ÂêÑÁßçÊï∞ÊçÆÁöÑÁºìÂ≠òÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫:\n\n![image-20220115175644920](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118698.png)\n\n‰ªéÂõæ‰∏≠Ôºå‰Ω†ËÉΩÁúãÂà∞InnoDBÁºìÂÜ≤Ê±†ÂåÖÊã¨‰∫ÜÊï∞ÊçÆÈ°µ„ÄÅÁ¥¢ÂºïÈ°µ„ÄÅÊèíÂÖ•ÁºìÂÜ≤„ÄÅÈîÅ‰ø°ÊÅØ„ÄÅËá™ÈÄÇÂ∫îHashÂíåÊï∞ÊçÆÂ≠óÂÖ∏‰ø°ÊÅØÁ≠â„ÄÇ\n\n**ÁºìÂ≠òÊ±†ÁöÑÈáçË¶ÅÊÄß:**\n\nÂØπ‰∫é‰ΩøÁî®`InnoDB`‰Ωú‰∏∫Â≠òÂÇ®ÂºïÊìéÁöÑË°®Êù•ËØ¥,‰∏çÁÆ°ÊòØÁî®‰∫éÂ≠òÂÇ®Áî®Êà∑Êï∞ÊçÆÁöÑÁ¥¢Âºï(ÂåÖÊã¨ËÅöÁ∞áÁ¥¢ÂºïÂíå‰∫åÁ∫ßÁ¥¢Âºï)ÔºåËøòÊòØÂêÑÁßçÁ≥ªÁªüÊï∞ÊçÆÔºåÈÉΩÊòØ‰ª•`È°µ`ÁöÑÂΩ¢ÂºèÂ≠òÊîæÂú®`Ë°®Á©∫Èó¥`‰∏≠ÁöÑ,ËÄåÊâÄË∞ìÁöÑË°®Á©∫Èó¥Âè™‰∏çËøáÊòØInnoDBÂØπÊñá‰ª∂Á≥ªÁªü‰∏ä‰∏Ä‰∏™ÊàñÂá†‰∏™ÂÆûÈôÖÊñá‰ª∂ÁöÑÊäΩË±°Ôºå‰πüÂ∞±ÊòØËØ¥Êàë‰ª¨ÁöÑÊï∞ÊçÆËØ¥Âà∞Â∫ïËøòÊòØÂ≠òÂÇ®Âú®Á£ÅÁõò‰∏äÁöÑ„ÄÇ‰ΩÜÊòØÂêÑ‰Ωç‰πüÈÉΩÁü•ÈÅìÔºåÁ£ÅÁõòÁöÑÈÄüÂ∫¶ÊÖ¢ÁöÑË∑ü‰πåÈæü‰∏ÄÊ†∑,ÊÄé‰πàËÉΩÈÖçÂæó‰∏ä‚Äú`Âø´Â¶ÇÈ£éÔºåÁñæÂ¶ÇÁîµ‚ÄùÁöÑCPU`Âë¢?ËøôÈáåÔºåÁºìÂÜ≤Ê±†ÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨Ê∂àÈô§CPUÂíåÁ£ÅÁõò‰πãÈó¥ÁöÑÈ∏øÊ≤ü„ÄÇÊâÄ‰ª•InnoDBÂ≠òÂÇ®Âºì|ÊìéÂú®Â§ÑÁêÜÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÊó∂ÔºåÂΩìÈúÄË¶ÅËÆøÈóÆÊüê‰∏™È°µÁöÑÊï∞ÊçÆÊó∂ÔºåÂ∞±‰ºöÊää`ÂÆåÊï¥ÁöÑÈ°µÁöÑÊï∞ÊçÆÂÖ®ÈÉ®Âä†ËΩΩÂà∞ÂÜÖÂ≠ò`‰∏≠Ôºå‰πüÂ∞±ÊòØËØ¥Âç≥‰ΩøÊàë‰ª¨Âè™ÈúÄË¶ÅËÆøÈóÆ‰∏Ä‰∏™È°µÁöÑ‰∏ÄÊù°ËÆ∞ÂΩïÔºåÈÇ£‰πüÈúÄË¶ÅÂÖàÊääÊï¥‰∏™È°µÁöÑÊï∞ÊçÆÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠„ÄÇÂ∞ÜÊï¥‰∏™È°µÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠ÂêéÂ∞±ÂèØ‰ª•ËøõË°åËØªÂÜôËÆøÈóÆ‰∫ÜÔºåÂú®ËøõË°åÂÆåËØªÂÜôËÆøÈóÆ‰πãÂêéÂπ∂‰∏çÁùÄÊÄ•ÊääËØ•È°µÂØπÂ∫îÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÈáäÊîæÊéâ,ËÄåÊòØÂ∞ÜÂÖ∂`ÁºìÂ≠ò`Ëµ∑Êù•,ËøôÊ†∑Â∞ÜÊù•ÊúâËØ∑Ê±ÇÂÜçÊ¨°ËÆøÈóÆËØ•È°µÈù¢Êó∂ÔºåÂ∞±ÂèØ‰ª•`ÁúÅÂéªÁ£ÅÁõòI0`ÁöÑÂºÄÈîÄ‰∫Ü„ÄÇ\n\n**ÁºìÂ≠òÂéüÂàôÔºö**\n\n‚Äú`‰ΩçÁΩÆ * È¢ëÊ¨°` ‚ÄùËøô‰∏™ÂéüÂàôÔºåÂèØ‰ª•Â∏ÆÊàë‰ª¨ÂØπ I/O ËÆøÈóÆÊïàÁéáËøõË°å‰ºòÂåñ„ÄÇ È¶ñÂÖàÔºå‰ΩçÁΩÆÂÜ≥ÂÆöÊïàÁéáÔºåÊèê‰æõÁºìÂÜ≤Ê±†Â∞±ÊòØ‰∏∫‰∫ÜÂú®ÂÜÖÂ≠ò‰∏≠ÂèØ‰ª•Áõ¥Êé•ËÆøÈóÆÊï∞ÊçÆ„ÄÇ\n\nÂÖ∂Ê¨°ÔºåÈ¢ëÊ¨°ÂÜ≥ÂÆö‰ºòÂÖàÁ∫ßÈ°∫Â∫è„ÄÇÂõ†‰∏∫ÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞èÊòØÊúâÈôêÁöÑÔºåÊØîÂ¶ÇÁ£ÅÁõòÊúâ 200GÔºå‰ΩÜÊòØÂÜÖÂ≠òÂè™Êúâ 16GÔºåÁºìÂÜ≤Ê±†Â§ßÂ∞èÂè™Êúâ 1GÔºåÂ∞±Êó†Ê≥ïÂ∞ÜÊâÄÊúâÊï∞ÊçÆÈÉΩÂä†ËΩΩÂà∞ÁºìÂÜ≤Ê±†ÈáåÔºåËøôÊó∂Â∞±Ê∂âÂèäÂà∞‰ºòÂÖàÁ∫ßÈ°∫Â∫èÔºå‰ºö `‰ºòÂÖàÂØπ‰ΩøÁî®È¢ëÊ¨°È´òÁöÑÁÉ≠Êï∞ÊçÆËøõË°åÂä†ËΩΩ`„ÄÇ\n\n**ÁºìÂÜ≤Ê±†ÁöÑÈ¢ÑËØªÁâπÊÄß:**\n\n‰∏Ä‰∏™ÁºìÂ≠ò‰∫ÜËß£‰∫ÜÁºìÂÜ≤Ê±†ÁöÑ‰ΩúÁî®‰πãÂêéÔºåÊàë‰ª¨ËøòÈúÄË¶Å‰∫ÜËß£ÁºìÂÜ≤Ê±†ÁöÑÂè¶‰∏Ä‰∏™ÁâπÊÄß: `È¢ÑËØª`„ÄÇ\n\nÁºìÂÜ≤Ê±†ÁöÑ‰ΩúÁî®Â∞±ÊòØÊèêÂçáI/0ÊïàÁéáÔºåËÄåÊàë‰ª¨ËøõË°åËØªÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÂ≠òÂú®‰∏Ä‰∏™‚ÄúÂ±ÄÈÉ®ÊÄßÂéüÁêÜ‚ÄùÔºå ‰πüÂ∞±ÊòØËØ¥Êàë‰ΩøÁî®‰∫Ü‰∏Ä‰∫õÊï∞ÊçÆÔºå`Â§ßÊ¶ÇÁéáËøò‰ºö‰ΩøÁî®ÂÆÉÂë®Âõ¥ÁöÑ‰∏Ä‰∫õÊï∞ÊçÆ`ÔºåÂõ†Ê≠§ÈááÁî®‚ÄúÈ¢ÑËØª‚ÄùÁöÑÊú∫Âà∂ÊèêÂâçÂä†ËΩΩÔºåÂèØ‰ª•ÂáèÂ∞ëÊú™Êù•ÂèØËÉΩÁöÑÁ£ÅÁõò1/OÊìç‰Ωú„ÄÇ\n\n### 3.1.2 Êü•ËØ¢ÁºìÂ≠ò\n\nÈÇ£‰πà‰ªÄ‰πàÊòØÊü•ËØ¢ÁºìÂ≠òÂë¢?\n\nÊü•ËØ¢ÁºìÂ≠òÊòØÊèêÂâçÊää `Êü•ËØ¢ÁªìÊûúÁºìÂ≠ò` Ëµ∑Êù•ÔºåËøôÊ†∑‰∏ãÊ¨°‰∏çÈúÄË¶ÅÊâßË°åÂ∞±ÂèØ‰ª•Áõ¥Êé•ÊãøÂà∞ÁªìÊûú„ÄÇÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂú® MySQL ‰∏≠ÁöÑÊü•ËØ¢ÁºìÂ≠òÔºå‰∏çÊòØÁºìÂ≠òÊü•ËØ¢ËÆ°ÂàíÔºåËÄåÊòØÊü•ËØ¢ÂØπÂ∫îÁöÑÁªìÊûú„ÄÇÂõ†‰∏∫ÂëΩ‰∏≠Êù°‰ª∂ËãõÂàªÔºåËÄå‰∏îÂè™Ë¶ÅÊï∞ÊçÆË°®ÂèëÁîüÂèòÂåñÔºåÊü•ËØ¢ÁºìÂ≠òÂ∞±‰ºöÂ§±ÊïàÔºåÂõ†Ê≠§ÂëΩ‰∏≠Áéá‰Ωé„ÄÇ\n\n## 3.2 ÁºìÂÜ≤Ê±†Â¶Ç‰ΩïËØªÂèñÊï∞ÊçÆ\n\nÁºìÂÜ≤Ê±†ÁÆ°ÁêÜÂô®‰ºöÂ∞ΩÈáèÂ∞ÜÁªèÂ∏∏‰ΩøÁî®ÁöÑÊï∞ÊçÆ‰øùÂ≠òËµ∑Êù•ÔºåÂú®Êï∞ÊçÆÂ∫ìËøõË°åÈ°µÈù¢ËØªÊìç‰ΩúÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖà‰ºöÂà§Êñ≠ËØ•È°µÈù¢ÊòØÂê¶Âú®ÁºìÂÜ≤Ê±†‰∏≠ÔºåÂ¶ÇÊûúÂ≠òÂú®Â∞±Áõ¥Êé•ËØªÂèñÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®ÔºåÂ∞±‰ºöÈÄöËøáÂÜÖÂ≠òÊàñÁ£ÅÁõòÂ∞ÜÈ°µÈù¢Â≠òÊîæÂà∞ÁºìÂÜ≤Ê±†‰∏≠ÂÜçËøõË°åËØªÂèñ„ÄÇ\nÁºìÂ≠òÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÁªìÊûÑÂíå‰ΩúÁî®Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö\n\n![image-20220115175859026](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118451.png)\n\n\n\n**==Â¶ÇÊûúÊàë‰ª¨ÊâßË°åSQLËØ≠Âè•ÁöÑÊó∂ÂÄôÊõ¥Êñ∞‰∫ÜÁºìÂ≠òÊ±†‰∏≠ÁöÑÊï∞ÊçÆÔºåÈÇ£‰πàËøô‰∫õÊï∞ÊçÆ‰ºöÈ©¨‰∏äÂêåÊ≠•Âà∞Á£ÅÁõò‰∏äÂêó?==** \n\nÂÆûÈôÖ‰∏äÔºåÂΩìÊàë‰ª¨ÂØπÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑËÆ∞ÂΩïËøõË°å‰øÆÊîπÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖà‰ºö‰øÆÊîπÁºìÂÜ≤Ê±†‰∏≠È°µÈáåÈù¢ÁöÑËÆ∞ÂΩï‰ø°ÊÅØ,ÁÑ∂ÂêéÊï∞ÊçÆÂ∫ì‰ºö`‰ª•‰∏ÄÂÆöÁöÑÈ¢ëÁéáÂà∑Êñ∞`Âà∞Á£ÅÁõò‰∏ä„ÄÇÊ≥®ÊÑèÂπ∂‰∏çÊòØÊØèÊ¨°ÂèëÁîüÊõ¥Êñ∞Êìç‰ΩúÔºåÈÉΩ‰ºöÁ´ãÂàªËøõË°åÁ£ÅÁõòÂõûÂÜô„ÄÇÁºìÂÜ≤Ê±†‰ºöÈááÁî®‰∏ÄÁßçÂè´ÂÅö`checkpointÁöÑÊú∫Âà∂`Â∞ÜÊï∞ÊçÆÂõûÂÜôÂà∞Á£ÅÁõò‰∏ä,ËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØÊèêÂçá‰∫ÜÊï∞ÊçÆÂ∫ìÁöÑÊï¥‰ΩìÊÄßËÉΩ„ÄÇ\n\nÊØîÂ¶ÇÔºåÂΩì`ÁºìÂÜ≤Ê±†‰∏çÂ§üÁî®`Êó∂ÔºåÈúÄË¶ÅÈáäÊîæÊéâ‰∏Ä‰∫õ‰∏çÂ∏∏Áî®ÁöÑÈ°µÔºåÊ≠§Êó∂Â∞±ÂèØ‰ª•Âº∫Ë°åÈááÁî®checkpointÁöÑÊñπÂºèÔºåÂ∞Ü‰∏çÂ∏∏Áî®ÁöÑËÑèÈ°µÂõûÂÜôÂà∞Á£ÅÁõò‰∏ä,ÁÑ∂ÂêéÂÜç‰ªéÁºìÂÜ≤Ê±†‰∏≠Â∞ÜËøô‰∫õÈ°µÈáäÊîæÊéâ„ÄÇËøôÈáåËÑèÈ°µ(dirty page)ÊåáÁöÑÊòØÁºìÂÜ≤Ê±†‰∏≠Ë¢´‰øÆÊîπËøáÁöÑÈ°µÔºå‰∏éÁ£ÅÁõò‰∏äÁöÑÊï∞ÊçÆÈ°µ‰∏ç‰∏ÄËá¥„ÄÇ\n\n## 3.3 Êü•Áúã/ËÆæÁΩÆÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞è\n\nÂ¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑÊòØMySQL MyISAMÂ≠òÂÇ®ÂºïÊìé,ÂÆÉÂè™ÁºìÂ≠òÁ¥¢ÂºïÔºå ‰∏çÁºìÂ≠òÊï∞ÊçÆÔºåÂØπÂ∫îÁöÑÈîÆÁºìÂ≠òÂèÇÊï∞\n`key_buffer_size`Ôºå‰Ω†ÂèØ‰ª•Áî®ÂÆÉËøõË°åÊü•Áúã„ÄÇ\n\nÂ¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑÊòØInnoDBÂ≠òÂÇ®ÂºïÊìéÔºåÂèØ‰ª•ÈÄöËøáÊü•Áúã `innodb_buffer_pool_size` ÂèòÈáèÊù•Êü•ÁúãÁºìÂÜ≤Ê±†ÁöÑÂ§ß Â∞è„ÄÇÂëΩ‰ª§Â¶Ç‰∏ã:\n\n```sql\nshow variables like 'innodb_buffer_pool_size';\n```\n\n![image-20220115175953098](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118317.png)\n\n‰Ω†ËÉΩÁúãÂà∞Ê≠§Êó∂ InnoDB ÁöÑÁºìÂÜ≤Ê±†Â§ßÂ∞èÂè™Êúâ 134217728/1024/1024=128MB„ÄÇÊàë‰ª¨ÂèØ‰ª•‰øÆÊîπÁºìÂÜ≤Ê±†Â§ßÂ∞èÔºåÊØîÂ¶Ç Êîπ‰∏∫256MBÔºåÊñπÊ≥ïÂ¶Ç‰∏ã:\n\n```sql\nset global innodb_buffer_pool_size = 268435456;\n```\n\n\n\n![image-20220115180020887](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118511.png)\n\nÊàñËÄÖ:\n\n```sql\n[server]\ninnodb_buffer_pool_size = 268435456\n```\n\nÁÑ∂ÂêéÂÜçÊù•Áúã‰∏ã‰øÆÊîπÂêéÁöÑÁºìÂÜ≤Ê±†Â§ßÂ∞èÔºåÊ≠§Êó∂Â∑≤ÊàêÂäü‰øÆÊîπÊàê‰∫Ü 256 MB:\n\n![image-20220115180055102](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118502.png)\n\n\n\n\n\n## 3.4 Â§ö‰∏™Buffer PoolÂÆû‰æã\n\nBuffer PoolÊú¨Ë¥®ÊòØInnoDBÂêëÊìç‰ΩúÁ≥ªÁªüÁî≥ËØ∑ÁöÑ‰∏ÄÂùó`ËøûÁª≠ÁöÑÂÜÖÂ≠òÁ©∫Èó¥`ÔºåÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÔºåËÆøÈóÆBuffer Pool‰∏≠ÁöÑÊï∞ÊçÆÈÉΩÈúÄË¶Å`Âä†ÈîÅ`Â§ÑÁêÜ„ÄÇÂú®Buffer PoolÁâπÂà´Â§ßËÄå‰∏îÂ§öÁ∫øÁ®ãÂπ∂ÂèëËÆøÈóÆÁâπÂà´È´òÁöÑÊÉÖÂÜµ‰∏ãÔºåÂçï‰∏ÄÁöÑBuffer PoolÂèØËÉΩ‰ºöÂΩ±ÂìçËØ∑Ê±ÇÁöÑÂ§ÑÁêÜÈÄüÂ∫¶„ÄÇÊâÄ‰ª•Âú®Buffer PoolÁâπÂà´Â§ßÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÂèØ‰ª•ÊääÂÆÉ‰ª¨`ÊãÜÂàÜÊàêËã•Âπ≤‰∏™Â∞èÁöÑBuffer Pool` ÔºåÊØè‰∏™Buffer PoolÈÉΩÁß∞‰∏∫‰∏Ä‰∏™`ÂÆû‰æã`ÔºåÂÆÉ‰ª¨ÈÉΩÊòØÁã¨Á´ãÁöÑÔºåÁã¨Á´ãÁöÑÂéªÁî≥ËØ∑ÂÜÖÂ≠òÁ©∫Èó¥ÔºåÁã¨Á´ãÁöÑÁÆ°ÁêÜÂêÑÁßçÈìæË°®„ÄÇÊâÄ‰ª•Âú®Â§öÁ∫øÁ®ãÂπ∂ÂèëËÆøÈóÆÊó∂Âπ∂‰∏ç‰ºöÁõ∏‰∫íÂΩ±ÂìçÔºå‰ªéËÄåÊèêÈ´òÂπ∂ÂèëÂ§ÑÁêÜËÉΩÂäõ„ÄÇ\n\nÊàë‰ª¨ÂèØ‰ª•Âú®ÊúçÂä°Âô®ÂêØÂä®ÁöÑÊó∂ÂÄôÈÄöËøáËÆæÁΩÆ`innodb_buffer_pool_instances` ÁöÑÂÄºÊù•‰øÆÊîπBuffer PoolÂÆû‰æãÁöÑ‰∏™Êï∞,\n\nÊØîÊñπËØ¥ËøôÊ†∑:\n\n```sql\n[server]\ninnodb_buffer_pool_instances = 2\n```\n\nËøôÊ†∑Â∞±Ë°®ÊòéÊàë‰ª¨Ë¶ÅÂàõÂª∫2‰∏™ `Buffer Pool` ÂÆû‰æã„ÄÇ\n\nÊàë‰ª¨Áúã‰∏ãÂ¶Ç‰ΩïÊü•ÁúãÁºìÂÜ≤Ê±†ÁöÑ‰∏™Êï∞Ôºå‰ΩøÁî®ÂëΩ‰ª§:\n\n```sql\nshow variables like 'innodb_buffer_pool_instances';\n```\n\n![image-20220115180223458](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118918.png)\n\nÈÇ£ÊØè‰∏™ `Buffer Pool` ÂÆû‰æãÂÆûÈôÖÂç†Â§öÂ∞ëÂÜÖÂ≠òÁ©∫Èó¥Âë¢?ÂÖ∂ÂÆû‰ΩøÁî®Ëøô‰∏™ÂÖ¨ÂºèÁÆóÂá∫Êù•ÁöÑÔºö`innodb_buffer_pool_size/innodb_buffer_pool_instances`\n\n‰πüÂ∞±ÊòØÊÄªÂÖ±ÁöÑÂ§ßÂ∞èÈô§‰ª•ÂÆû‰æãÁöÑ‰∏™Êï∞ÔºåÁªìÊûúÂ∞±ÊòØÊØè‰∏™`Buffer Pool` ÂÆû‰æãÂç†Áî®ÁöÑÂ§ßÂ∞è„ÄÇ\n\n‰∏çËøá‰πü‰∏çÊòØËØ¥Buffer PoolÂÆû‰æãÂàõÂª∫ÁöÑË∂äÂ§öË∂äÂ•ΩÔºåÂàÜÂà´`ÁÆ°ÁêÜÂêÑ‰∏™Buffer Pool‰πüÊòØÈúÄË¶ÅÊÄßËÉΩÂºÄÈîÄ`ÁöÑÔºåInnoDBËßÑÂÆö:ÂΩìinnodb_buffer_pool_sizeÁöÑÂÄºÂ∞è‰∫é1GÁöÑÊó∂ÂÄôËÆæÁΩÆÂ§ö‰∏™ÂÆû‰æãÊòØÊó†ÊïàÁöÑÔºåInnoDB‰ºöÈªòËÆ§Êääinnodb_ buffe _pool_instances ÁöÑÂÄº‰øÆÊîπ‰∏∫1„ÄÇËÄåÊàë‰ª¨ÈºìÂä±Âú®Buffer PpolÂ§ß‰∫éÊàñÁ≠â‰∫é1GÁöÑÊó∂ÂÄôËÆæÁΩÆÂ§ö‰∏™Buffer PoolÂÆû‰æã„ÄÇ\n\n## 3.5 ÂºïÁî≥ÈóÆÈ¢ò\n\nBuffer Pool ÊòØ MySQL ÂÜÖÂ≠òÁªìÊûÑ‰∏≠ÂçÅÂàÜÊ†∏ÂøÉÁöÑ‰∏Ä‰∏™ÁªÑÊàêÔºå‰Ω†ÂèØ‰ª•ÂÖàÊääÂÆÉÊÉ≥Ë±°Êàê‰∏Ä‰∏™ÈªëÁõíÂ≠ê„ÄÇ\n\n**ÈªëÁõí‰∏ãÁöÑÊõ¥Êñ∞Êï∞ÊçÆÊµÅÁ®ã**\n\nÂΩìÊàë‰ª¨Êü•ËØ¢Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºå‰ºöÂÖàÂéªBuffer Pool‰∏≠Êü•ËØ¢„ÄÇÂ¶ÇÊûúBuffer Pool‰∏≠‰∏çÂ≠òÂú®,Â≠òÂÇ®Âºì|Êìé‰ºöÂÖàÂ∞ÜÊï∞ÊçÆ‰ªéÁ£ÅÁõòÂä†ËΩΩÂà∞Buffer Pool‰∏≠ÔºåÁÑ∂ÂêéÂ∞ÜÊï∞ÊçÆËøîÂõûÁªôÂÆ¢Êà∑Á´Ø;ÂêåÁêÜÔºåÂΩìÊàë‰ª¨Êõ¥Êñ∞Êüê‰∏™Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúËøô‰∏™Êï∞ÊçÆ‰∏çÂ≠òÂú®‰∫éBuffer Pool,ÂêåÊ†∑‰ºöÂÖàÊï∞ÊçÆÂä†ËΩΩËøõÊù•ÔºåÁÑ∂Âêé‰øÆÊîπ‰øÆÊîπÂÜÖÂ≠òÁöÑÊï∞ÊçÆ„ÄÇË¢´‰øÆÊîπËøáÁöÑÊï∞ÊçÆ‰ºöÂú®‰πãÂêéÁªü‰∏ÄÂà∑ÂÖ•Á£ÅÁõò„ÄÇ\n\n![image-20220115180314323](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118256.png)\n\nËøô‰∏™ËøáÁ®ãÁúã‰ººÊ≤°Âï•ÈóÆÈ¢òÔºåÂÆûÂàôÊòØÊúâÈóÆÈ¢òÁöÑ„ÄÇÂÅáËÆæÊàë‰ª¨‰øÆÊîπBuffer Pool‰∏≠ÁöÑÊï∞ÊçÆÊàêÂäüÔºå‰ΩÜÊòØËøòÊ≤°Êù•ÂæóÂèäÂ∞ÜÊï∞ÊçÆÂà∑ÂÖ•Á£ÅÁõòMySQLÂ∞±ÊåÇ‰∫ÜÊÄé‰πàÂäû?ÊåâÁÖß‰∏äÂõæÁöÑÈÄªËæëÔºåÊ≠§Êó∂Êõ¥Êñ∞‰πãÂêéÁöÑÊï∞ÊçÆÂè™Â≠òÂú®‰∫éBuffer Pool‰∏≠,Â¶ÇÊûúÊ≠§Êó∂MySQLÂÆïÊú∫‰∫ÜÔºåËøôÈÉ®ÂàÜÊï∞ÊçÆÂ∞Ü‰ºöÊ∞∏‰πÖÂú∞‰∏¢Â§±;\n\nÊàëÊõ¥Êñ∞Âà∞‰∏ÄÂçäÁ™ÅÁÑ∂ÂèëÁîüÈîôËØØ‰∫ÜÔºåÊÉ≥Ë¶ÅÂõûÊªöÂà∞Êõ¥Êñ∞‰πãÂâçÁöÑÁâàÊú¨ÔºåËØ•ÊÄé‰πàÂäûÔºüËøûÊï∞ÊçÆÊåÅ‰πÖÂåñÁöÑ‰øùËØÅ„ÄÅ‰∫ãÂä°ÂõûÊªöÈÉΩÂÅö‰∏çÂà∞ËøòË∞à‰ªÄ‰πàÂ¥©Ê∫ÉÊÅ¢Â§ç?\n\nÁ≠îÊ°àÔºö**Redo Log & Undo Log**\n\n","source":"_posts/ÈÄªËæëÊû∂ÊûÑÂàÜÊûê.md","raw":"---\ntitle: ÈÄªËæëÊû∂ÊûÑÂàÜÊûê\ndate: 2024-04-01 16:38:58\ntags: MySQL\ncover: /img/cover_03.png\ntop_img: https://bu.dusays.com/2021/03/06/38a2c5cd8b44e.jpg\n---\n\n# 1. ÈÄªËæëÊû∂ÊûÑÂâñÊûê\n\n## 1.1 ÊúçÂä°Âô®Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±Ç\n\nÈ¶ñÂÖàMySQLÊòØÂÖ∏ÂûãÁöÑC/SÊû∂ÊûÑÔºåÂç≥`Client/Server` Êû∂ÊûÑ‚Äò Ôºå ÊúçÂä°Âô®Á´ØÁ®ãÂ∫è‰ΩøÁî®ÁöÑmysqld„ÄÇ\n\n‰∏çËÆ∫ÂÆ¢Êà∑Á´ØËøõÁ®ãÂíåÊúçÂä°Âô®ËøõÁ®ãÊòØÈááÁî®Âì™ÁßçÊñπÂºèËøõË°åÈÄö‰ø°ÔºåÊúÄÂêéÂÆûÁé∞ÁöÑÊïàÊûúÈÉΩÊòØ:**ÂÆ¢Êà∑Á´ØËøõÁ®ãÂêëÊúçÂä°Âô®ËøõÁ®ãÂèëÈÄÅ‰∏ÄÊÆµÊñáÊú¨(SQLËØ≠Âè•) ,ÊúçÂä°Âô®ËøõÁ®ãÂ§ÑÁêÜÂêéÂÜçÂêëÂÆ¢Êà∑Á´ØËøõÁ®ãÂèëÈÄÅ‰∏ÄÊÆµÊñáÊú¨(Â§ÑÁêÜÁªìÊûú)**\n\nÈÇ£ÊúçÂä°Âô®ËøõÁ®ãÂØπÂÆ¢Êà∑Á´ØËøõÁ®ãÂèëÈÄÅÁöÑËØ∑Ê±ÇÂÅö‰∫Ü‰ªÄ‰πàÂ§ÑÁêÜÔºåÊâçËÉΩ‰∫ßÁîüÊúÄÂêéÁöÑÂ§ÑÁêÜÁªìÊûúÂë¢?ËøôÈáå‰ª•Êü•ËØ¢ËØ∑Ê±Ç‰∏∫‰æãÂ±ïÁ§∫Ôºö\n\n![image-20220709175522383](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116081.png)\n\n\n\n‰∏ãÈù¢ÂÖ∑‰ΩìÂ±ïÂºÄÁúã‰∏Ä‰∏ã:(ÈíàÂØπMySQL5.7)\n\n![image-20220115171412362](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116304.png)\n\n**ÂàÜÊûê**\n\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116078.png)\n\n## 1.2 Connectors\n\nConnectorsÊåáÁöÑÊòØ‰∏çÂêåËØ≠Ë®Ä‰∏≠‰∏éSQLÁöÑ‰∫§‰∫í„ÄÇMySQLÈ¶ñÂÖàÊòØ‰∏Ä ‰∏™ÁΩëÁªúÁ®ãÂ∫èÔºåÂú®TCP‰πã‰∏äÂÆö‰πâ‰∫ÜËá™Â∑±ÁöÑÂ∫îÁî®Â±ÇÂçèËÆÆ„ÄÇÊâÄ‰ª•Ë¶Å‰ΩøÁî®MySQL,Êàë‰ª¨ÂèØ‰ª•ÁºñÂÜô‰ª£Á†ÅÔºåË∑üMySQL Server`Âª∫Á´ãTCPËøûÊé•`Ôºå‰πãÂêéÊåâÁÖßÂÖ∂ÂÆö‰πâÂ•ΩÁöÑÂçèËÆÆËøõË°å‰∫§‰∫í„ÄÇÊàñËÄÖÊØîËæÉÊñπ‰æøÁöÑÂäûÊ≥ïÊòØË∞ÉÁî®SDKÔºåÊØîÂ¶ÇNative C API„ÄÅJDBC„ÄÅ PHPÁ≠âÂêÑËØ≠ Ë®ÄMySQL Connector,ÊàñËÄÖÈÄöËøáODBC„ÄÇ ‰ΩÜ==ÈÄöËøáSDKÊù•ËÆøÈóÆMySQLÔºåÊú¨Ë¥®‰∏äËøòÊòØÂú®TCPËøûÊé•‰∏äÈÄöËøáMySQLÂçèËÆÆË∑üMySQLËøõË°å‰∫§‰∫í==„ÄÇ\n\nÊé•‰∏ãÊù•ÁöÑMySQL ServerÁªìÊûÑÂèØ‰ª•ÂàÜ‰∏∫Â¶Ç‰∏ãÁöÑ‰∏âÂ±ÇÔºö\n\n## 1.3 Á¨¨ 1 Â±ÇÔºöËøûÊé•Â±Ç\n\nÁ≥ªÁªü(ÂÆ¢Êà∑Á´Ø)ËÆøÈóÆ MySQL ÊúçÂä°Âô®ÂâçÔºåÂÅöÁöÑÁ¨¨‰∏Ä‰ª∂‰∫ãÂ∞±ÊòØÂª∫Á´ã `TCP` ËøûÊé•„ÄÇ ÁªèËøá‰∏âÊ¨°Êè°ÊâãÂª∫Á´ãËøûÊé•ÊàêÂäüÂêéÔºåMySQL ÊúçÂä°Âô®ÂØπ `TCP` ‰º†ËæìËøáÊù•ÁöÑË¥¶Âè∑ÂØÜÁ†ÅÂÅöË∫´‰ªΩËÆ§ËØÅ„ÄÅÊùÉÈôêËé∑Âèñ„ÄÇ\n\n- Áî®Êà∑ÂêçÊàñÂØÜÁ†Å‰∏çÂØπÔºå‰ºöÊî∂Âà∞‰∏Ä‰∏™ Access denied for user ÈîôËØØÔºåÂÆ¢Êà∑Á´ØÁ®ãÂ∫èÁªìÊùüÊâßË°å\n- Áî®Êà∑ÂêçÂØÜÁ†ÅËÆ§ËØÅÈÄöËøáÔºå‰ºö‰ªéÊùÉÈôêË°®Êü•Âá∫Ë¥¶Âè∑Êã•ÊúâÁöÑÊùÉÈôê‰∏éËøûÊé•ÂÖ≥ËÅîÔºå‰πãÂêéÁöÑÊùÉÈôêÂà§Êñ≠ÈÄªËæëÔºåÈÉΩÂ∞Ü‰æùËµñ‰∫éÊ≠§Êó∂ËØªÂà∞ÁöÑÊùÉÈôê\n\n`TCP` ËøûÊé•Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÂøÖÈ°ªË¶ÅÂàÜÈÖçÁªô‰∏Ä‰∏™Á∫øÁ®ã‰∏ìÈó®‰∏éËøô‰∏™ÂÆ¢Êà∑Á´ØÁöÑ‰∫§‰∫í„ÄÇÊâÄ‰ª•Ëøò‰ºöÊúâ‰∏™Á∫øÁ®ãÊ±†ÔºåÂéªËµ∞ÂêéÈù¢ÁöÑÊµÅÁ®ã„ÄÇÊØè‰∏Ä‰∏™ËøûÊé•‰ªéÁ∫øÁ®ãÊ±†‰∏≠Ëé∑ÂèñÁ∫øÁ®ãÔºåÁúÅÂéª‰∫ÜÂàõÂª∫ÂíåÈîÄÊØÅÁ∫øÁ®ãÁöÑÂºÄÈîÄ„ÄÇ\n\n**Êé•ÁùÄÊàë‰ª¨Êù•ÊÄùËÄÉ‰∏Ä‰∏™ÈóÆÈ¢ò**\n\n==‰∏Ä‰∏™Á≥ªÁªüÂè™‰ºöÂíåMySQLÊúçÂä°Âô®Âª∫Á´ã‰∏Ä‰∏™ËøûÊé•ÂêóÔºüÂè™ËÉΩÊúâ‰∏Ä‰∏™Á≥ªÁªüÂíåMySQLÊúçÂä° Âô®Âª∫Á´ãËøûÊé•ÂêóÔºü==\nÂΩìÁÑ∂‰∏çÊòØÔºåÂ§ö‰∏™Á≥ªÁªüÈÉΩÂèØ‰ª•ÂíåMySQLÊúçÂä°Âô®Âª∫Á´ãËøûÊé•ÔºåÊØè‰∏™Á≥ªÁªüÂª∫Á´ãÁöÑËøûÊé•ËÇØÂÆö‰∏çÊ≠¢‰∏Ä‰∏™„ÄÇÊâÄ‰ª•Ôºå‰∏∫‰∫ÜËß£ÂÜ≥TCPÊó†ÈôêÂàõÂª∫‰∏éTCPÈ¢ëÁπÅÂàõÂª∫ÈîÄÊØÅÂ∏¶Êù•ÁöÑËµÑÊ∫êËÄóÂ∞Ω„ÄÅÊÄßËÉΩ‰∏ãÈôçÈóÆÈ¢ò„ÄÇMySQLÊúçÂä°Âô®ÈáåÊúâ‰∏ìÈó®ÁöÑ`TCPËøûÊé•Ê±†`ÈôêÂà∂ËøûÊé•Êï∞ÔºåÈááÁî®`ÈïøËøûÊé•Ê®°Âºè`Â§çÁî®TCPËøûÊé•,Êù•Ëß£ÂÜ≥‰∏äËø∞ÈóÆÈ¢ò„ÄÇ\n\n![image-20220709192708094](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116686.png)\n\n`TCP`ËøûÊé•Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÂøÖÈ°ªË¶ÅÂàÜÈÖçÁªô‰∏Ä‰∏™Á∫øÁ®ã‰∏ìÈó®‰∏éËøô‰∏™ÂÆ¢Êà∑Á´ØÁöÑ‰∫§‰∫í„ÄÇÊâÄ‰ª•Ëøò‰ºöÊúâ‰∏™Á∫øÁ®ãÊ±†ÔºåÂéªËµ∞ÂêéÈù¢ÁöÑÊµÅÁ®ã„ÄÇÊØè‰∏Ä‰∏™ËøûÊé•‰ªéÁ∫øÁ®ãÊ±†‰∏≠Ëé∑ÂèñÁ∫øÁ®ãÔºåÁúÅÂéª‰∫ÜÂàõÂª∫ÂíåÈîÄÊØÅÁ∫øÁ®ãÁöÑÂºÄÈîÄ„ÄÇ\n\nËøô‰∫õÂÜÖÂÆπÊàë‰ª¨ÈÉΩÂΩíÁ∫≥Âà∞`MySQL`ÁöÑËøûÊé•ÁÆ°ÁêÜÁªÑ‰ª∂‰∏≠„ÄÇ\n\nÊâÄ‰ª•==ËøûÊé•ÁÆ°ÁêÜÁöÑËÅåË¥£ÊòØË¥üË¥£ËÆ§ËØÅ„ÄÅÁÆ°ÁêÜËøûÊé•„ÄÅËé∑ÂèñÊùÉÈôê‰ø°ÊÅØ==„ÄÇ\n\n## 1.4 Á¨¨ 2 Â±ÇÔºöÊúçÂä°Â±Ç\n\nÁ¨¨‰∫åÂ±ÇÊû∂ÊûÑ‰∏ªË¶ÅÂÆåÊàêÂ§ßÂ§öÊï∞ÁöÑÊ†∏ÂøÉÊúçÂä°ÂäüËÉΩÔºåÂ¶ÇSQLÊé•Âè£Ôºå Âπ∂ÂÆåÊàêÁºìÂ≠òÁöÑÊü•ËØ¢ÔºåSQLÁöÑÂàÜÊûêÂíå‰ºòÂåñÂèäÈÉ®ÂàÜÂÜÖÁΩÆÂáΩÊï∞ÁöÑÊâßË°å„ÄÇÊâÄÊúâË∑®Â≠òÂÇ®ÂºïÊìéÁöÑÂäüËÉΩ‰πüÂú®Ëøô‰∏ÄÂ±ÇÂÆûÁé∞ÔºåÂ¶ÇËøáÁ®ã„ÄÅÂáΩÊï∞Á≠â„ÄÇ\n\nÂú®ËØ•Â±ÇÔºåÊúçÂä°Âô®‰ºö**Ëß£ÊûêÊü•ËØ¢**Âπ∂ÂàõÂª∫Áõ∏Â∫îÁöÑÂÜÖÈÉ®**Ëß£ÊûêÊ†ë**ÔºåÂπ∂ÂØπÂÖ∂ÂÆåÊàêÁõ∏Â∫îÁöÑ**‰ºòÂåñ**ÔºöÂ¶ÇÁ°ÆÂÆöÊü•ËØ¢Ë°®ÁöÑÈ°∫Â∫èÔºåÊòØÂê¶Âà©Áî®Á¥¢ÂºïÁ≠âÔºåÊúÄÂêéÁîüÊàêÁõ∏Â∫îÁöÑÊâßË°åÊìç‰Ωú„ÄÇ\n\n==Â¶ÇÊûúÊòØSELECTËØ≠Âè•ÔºåÊúçÂä°Âô®Ëøò‰ºöÊü•ËØ¢ÂÜÖÈÉ®ÁöÑÁºìÂ≠ò==„ÄÇÂ¶ÇÊûúÁºìÂ≠òÁ©∫Èó¥Ë∂≥Â§üÂ§ßÔºåËøôÊ†∑Âú®Ëß£ÂÜ≥Â§ßÈáèËØªÊìç‰ΩúÁöÑÁéØÂ¢É‰∏≠ËÉΩÂ§üÂæàÂ•ΩÁöÑÊèêÂçáÁ≥ªÁªüÁöÑÊÄßËÉΩ„ÄÇ\n\n- **SQL InterfaceÔºöSQLÊé•Âè£**\n\n  - Êé•Êî∂Áî®Êà∑ÁöÑ SQL ÂëΩ‰ª§ÔºåÂπ∂‰∏îËøîÂõûÁî®Êà∑ÈúÄË¶ÅÊü•ËØ¢ÁöÑÁªìÊûú„ÄÇÊØîÂ¶Ç `SELECT ... FROM` Â∞±ÊòØË∞ÉÁî® SQL Interface\n  - MySQL ÊîØÊåÅ DMLÔºàÊï∞ÊçÆÊìç‰ΩúËØ≠Ë®ÄÔºâ„ÄÅDDLÔºàÊï∞ÊçÆÂÆö‰πâËØ≠Ë®ÄÔºâ„ÄÅÂ≠òÂÇ®ËøáÁ®ã„ÄÅËßÜÂõæ„ÄÅËß¶ÂèëÂô®„ÄÅËá™ÂÆö‰πâÂáΩÊï∞Á≠âÂ§öÁßç SQL ËØ≠Ë®ÄÊé•Âè£\n\n- **ParserÔºöËß£ÊûêÂô®**\n\n  - Âú®Ëß£ÊûêÂô®‰∏≠ÂØπ SQL ËØ≠Âè•ËøõË°åËØ≠Ê≥ïÂàÜÊûê„ÄÅËØ≠‰πâÂàÜÊûê„ÄÇÂ∞Ü SQL ËØ≠Âè•ÂàÜËß£ÊàêÊï∞ÊçÆÁªìÊûÑÔºåÂπ∂Â∞ÜËøô‰∏™ÁªìÊûÑ‰º†ÈÄíÂà∞ÂêéÁª≠Ê≠•È™§Ôºå‰ª•Âêé SQL ËØ≠Âè•ÁöÑ‰º†ÈÄíÂíåÂ§ÑÁêÜÂ∞±ÊòØÂü∫‰∫éËøô‰∏™ÁªìÊûÑÁöÑ„ÄÇÂ¶ÇÊûúÂú®ÂàÜËß£ÊûÑÊàê‰∏≠ÈÅáÂà∞ÈîôËØØÔºåÈÇ£‰πàÂ∞±ËØ¥ÊòéËøô‰∏™ SQL ËØ≠Âè•ÊòØ‰∏çÂêàÁêÜÁöÑ„ÄÇ\n  - Âú® SQL ÂëΩ‰ª§‰º†ÈÄíÂà∞Ëß£ÊûêÂô®ÁöÑÊó∂ÂÄô‰ºöË¢´Ëß£ÊûêÂô®È™åËØÅÂíåËß£ÊûêÔºåÂπ∂‰∏∫ÂÖ∂ÂàõÂª∫ `ËØ≠Ê≥ïÊ†ë`ÔºåÂπ∂Ê†πÊçÆÊï∞ÊçÆÂ≠óÂÖ∏‰∏∞ÂØåÊü•ËØ¢ËØ≠Ê≥ïÊ†ëÔºå‰ºö `È™åËØÅËØ•ÂÆ¢Êà∑Á´ØÊòØÂê¶ÂÖ∑ÊúâÊâßË°åËØ•Êü•ËØ¢ÁöÑÊùÉÈôê` „ÄÇÂàõÂª∫Â•ΩËØ≠Ê≥ïÊ†ëÂêéÔºåMySQL Ëøò‰ºöÂØπ SQL Êü•ËØ¢ËøõË°åËØ≠Ê≥ï‰∏äÁöÑ‰ºòÂåñÔºåËøõË°åÊü•ËØ¢ÈáçÂÜô„ÄÇ\n\n- **OptimizerÔºöÊü•ËØ¢‰ºòÂåñÂô®**\n\n  - SQL ËØ≠Âè•Âú®ËØ≠Ê≥ïËß£Êûê‰πãÂêé„ÄÅÊü•ËØ¢‰πãÂâç‰ºö‰ΩøÁî®Êü•ËØ¢‰ºòÂåñÂô®Á°ÆÂÆö SQL ËØ≠Âè•ÁöÑÊâßË°åË∑ØÂæÑÔºåÁîüÊàê‰∏Ä‰∏™ `ÊâßË°åËÆ°Âàí` „ÄÇ\n\n  - Ëøô‰∏™ÊâßË°åËÆ°ÂàíË°®ÊòéÂ∫îËØ• `‰ΩøÁî®Âì™‰∫õÁ¥¢Âºï` ËøõË°åÊü•ËØ¢ÔºàÂÖ®Ë°®Ê£ÄÁ¥¢ËøòÊòØ‰ΩøÁî®Á¥¢ÂºïÊ£ÄÁ¥¢ÔºâÔºåË°®‰πãÈó¥ÁöÑËøûÊé•È°∫Â∫èÂ¶Ç‰ΩïÔºåÊúÄÂêé‰ºöÊåâÁÖßÊâßË°åËÆ°Âàí‰∏≠ÁöÑÊ≠•È™§Ë∞ÉÁî®Â≠òÂÇ®ÂºïÊìéÊèê‰æõÁöÑÊñπÊ≥ïÊù•ÁúüÊ≠£ÁöÑÊâßË°åÊü•ËØ¢ÔºåÂπ∂Â∞ÜÊü•ËØ¢ÁªìÊûúËøîÂõûÁªôÁî®Êà∑„ÄÇ\n\n  - ÂÆÉ‰ΩøÁî®‚Äú `ÈÄâÂèñ-ÊäïÂΩ±-ËøûÊé•` ‚ÄùÁ≠ñÁï•ËøõË°åÊü•ËØ¢„ÄÇ‰æãÂ¶Ç:\n\n    ```sql\n    SELECT id,name FROM student WHERE gender = 'Â•≥';\n    ```\n\n    Ëøô‰∏™ SELECT Êü•ËØ¢ÂÖàÊ†πÊçÆ WHERE ËØ≠Âè•ËøõË°åÈÄâÂèñ ÔºåËÄå‰∏çÊòØÂ∞ÜË°®ÂÖ®ÈÉ®Êü•ËØ¢Âá∫Êù•‰ª•ÂêéÂÜçËøõË°å gender ËøáÊª§„ÄÇ Ëøô‰∏™ SELECT Êü•ËØ¢ÂÖàÊ†πÊçÆ id Âíå name ËøõË°åÂ±ûÊÄßÊäïÂΩ± ÔºåËÄå‰∏çÊòØÂ∞ÜÂ±ûÊÄßÂÖ®ÈÉ®ÂèñÂá∫‰ª•ÂêéÂÜçËøõË°åËøáÊª§ÔºåÂ∞ÜËøô‰∏§‰∏™Êü•ËØ¢Êù°‰ª∂ ËøûÊé•Ëµ∑Êù•ÁîüÊàêÊúÄÁªàÊü•ËØ¢ÁªìÊûú„ÄÇ\n\n- **Caches & Buffers: Êü•ËØ¢ÁºìÂ≠òÁªÑ‰ª∂**\n\n  - MySQLÂÜÖÈÉ®Áª¥ÊåÅÁùÄ‰∏Ä‰∫õ Cache Âíå BufferÔºåÊØîÂ¶Ç Query Cache Áî®Êù•ÁºìÂ≠ò‰∏ÄÊù° SELECT ËØ≠Âè•ÁöÑÊâßË°åÁªìÊûúÔºåÂ¶ÇÊûúËÉΩÂ§üÂú®ÂÖ∂‰∏≠ÊâæÂà∞ÂØπÂ∫îÁöÑÊü•ËØ¢ÁªìÊûúÔºåÈÇ£‰πàÂ∞±‰∏çÂøÖÂÜçËøõË°åÊü•ËØ¢Ëß£Êûê„ÄÅ‰ºòÂåñÂíåÊâßË°åÁöÑÊï¥‰∏™ËøáÁ®ã‰∫ÜÔºåÁõ¥Êé•Â∞ÜÁªìÊûúÂèçÈ¶àÁªôÂÆ¢Êà∑Á´Ø„ÄÇ\n  - Ëøô‰∏™ÁºìÂ≠òÊú∫Âà∂ÊòØÁî±‰∏ÄÁ≥ªÂàóÂ∞èÁºìÂ≠òÁªÑÊàêÁöÑ„ÄÇÊØîÂ¶ÇË°®ÁºìÂ≠òÔºåËÆ∞ÂΩïÁºìÂ≠òÔºåkeyÁºìÂ≠òÔºåÊùÉÈôêÁºìÂ≠òÁ≠â „ÄÇ\n  - Ëøô‰∏™Êü•ËØ¢ÁºìÂ≠òÂèØ‰ª•Âú® `‰∏çÂêåÂÆ¢Êà∑Á´Ø‰πãÈó¥ÂÖ±‰∫´` „ÄÇ\n  - ‰ªé MySQL 5.7.20 ÂºÄÂßãÔºå‰∏çÊé®Ëçê‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÔºåÂπ∂Âú® `MySQL 8.0‰∏≠Âà†Èô§` „ÄÇ\n\n  ```tex\n  Â∞èÊïÖ‰∫ãÔºö\n  Â¶ÇÊûúÊàëÈóÆ‰Ω†9+8√ó16-3√ó2√ó17ÁöÑÂÄºÊòØÂ§öÂ∞ëÔºå‰Ω†ÂèØËÉΩ‰ºöÁî®ËÆ°ÁÆóÂô®ÂéªÁÆó‰∏Ä‰∏ãÔºåÊúÄÁªàÁªìÊûú35„ÄÇÂ¶ÇÊûúÂÜçÈóÆ‰Ω†‰∏ÄÈÅç9+8√ó16-\n  3√ó2√ó17ÁöÑÂÄºÊòØÂ§öÂ∞ëÔºå‰Ω†ËøòÁî®ÂÜçÂÇªÂëµÂëµÁöÑÂÜçÁÆó‰∏ÄÈÅçÂêóÔºüÊàë‰ª¨ÂàöÂàöÂ∑≤ÁªèÁÆóËøá‰∫ÜÔºåÁõ¥Êé•ËØ¥Á≠îÊ°àÂ∞±Â•Ω‰∫Ü„ÄÇ\n  ```\n\n## 1.5 Á¨¨ 3 Â±ÇÔºöÂºïÊìéÂ±Ç\n\nÂíåÂÖ∂ÂÆÉÊï∞ÊçÆÂ∫ìÁõ∏ÊØîÔºåMySQLÊúâÁÇπ‰∏é‰ºó‰∏çÂêåÔºåÂÆÉÁöÑÊû∂ÊûÑÂèØ‰ª•Âú®Â§öÁßç‰∏çÂêåÂú∫ÊôØ‰∏≠Â∫îÁî®Âπ∂ÂèëÊå•ËâØÂ•Ω‰ΩúÁî®Ôºå‰∏ªË¶Å‰ΩìÁé∞Âú®Â≠òÂÇ®ÂºïÊìéÁöÑÊû∂ÊûÑ‰∏äÔºåÊèí‰ª∂ÂºèÁöÑÂ≠òÂÇ®ÂºïÊìéÊû∂ÊûÑÂ∞ÜÊü•ËØ¢Â§ÑÁêÜÂíåÂÖ∂ÂÆÉÁöÑÁ≥ªÁªü‰ªªÂä°‰ª•ÂèäÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÊèêÂèñÁõ∏ÂàÜÁ¶ª„ÄÇËøôÁßçÊû∂ÊûÑÂèØ‰ª•Ê†πÊçÆ‰∏öÂä°ÁöÑÈúÄÊ±ÇÂíåÂÆûÈôÖÈúÄË¶ÅÈÄâÊã©ÂêàÈÄÇÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇÂêåÊó∂ÂºÄÊ∫êÁöÑ MySQLËøò**ÂÖÅËÆ∏ÂºÄÂèë‰∫∫ÂëòËÆæÁΩÆËá™Â∑±ÁöÑÂ≠òÂÇ®ÂºïÊìé**„ÄÇ\n\nËøôÁßçÈ´òÊïàÁöÑÊ®°ÂùóÂåñÊû∂ÊûÑ‰∏∫ÈÇ£‰∫õÂ∏åÊúõ‰∏ìÈó®ÈíàÂØπÁâπÂÆöÂ∫îÁî®Á®ãÂ∫èÈúÄÊ±Ç(‰æãÂ¶ÇÊï∞ÊçÆ‰ªìÂ∫ì„ÄÅ‰∫ãÂä°Â§ÑÁêÜÊàñÈ´òÂèØÁî®ÊÄßÊÉÖÂÜµ)ÁöÑ‰∫∫Êèê‰æõ‰∫ÜÂ∑®Â§ßÁöÑÂ•ΩÂ§ÑÔºåÂêåÊó∂‰∫´Âèó‰ΩøÁî®‰∏ÄÁªÑÁã¨Á´ã‰∫é‰ªª‰ΩïÊé•Âè£ÂíåÊúçÂä°ÁöÑ‰ºòÂäøÂ≠òÂÇ®ÂºïÊìé„ÄÇ\n\nÊèí‰ª∂ÂºèÂ≠òÂÇ®ÂºïÊìéÂ±ÇÔºàStorage EnginesÔºâÔºå==ÁúüÊ≠£ÁöÑË¥üË¥£‰∫ÜMySQL‰∏≠Êï∞ÊçÆÁöÑÂ≠òÂÇ®ÂíåÊèêÂèñÔºåÂØπÁâ©ÁêÜÊúçÂä°Âô®Á∫ßÂà´Áª¥Êä§ÁöÑÂ∫ïÂ±ÇÊï∞ÊçÆÊâßË°åÊìç‰Ωú== ÔºåÊúçÂä°Âô®ÈÄöËøá API ‰∏éÂ≠òÂÇ®ÂºïÊìéËøõË°åÈÄö‰ø°„ÄÇ‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìéÂÖ∑ÊúâÁöÑÂäüËÉΩ‰∏çÂêåÔºåËøôÊ†∑Êàë‰ª¨ÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÂÆûÈôÖÈúÄË¶ÅËøõË°åÈÄâÂèñ„ÄÇ\n\nMySQL 8.0.25 ÈªòËÆ§ÊîØÊåÅÁöÑÂ≠òÂÇ®ÂºïÊìéÂ¶Ç‰∏ã:\n\n![image-20220115171937681](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116558.png)\n\n## 1.6 Â≠òÂÇ®Â±Ç\n\nÊâÄÊúâÁöÑÊï∞ÊçÆÔºåÊï∞ÊçÆÂ∫ì„ÄÅË°®ÁöÑÂÆö‰πâÔºåË°®ÁöÑÊØè‰∏ÄË°åÁöÑÂÜÖÂÆπÔºåÁ¥¢ÂºïÔºåÈÉΩÊòØÂ≠òÂú® `Êñá‰ª∂Á≥ªÁªü` ‰∏äÔºå‰ª• `Êñá‰ª∂` ÁöÑÊñπÂºèÂ≠ò Âú®ÁöÑÔºåÂπ∂ÂÆåÊàê‰∏éÂ≠òÂÇ®ÂºïÊìéÁöÑ‰∫§‰∫í„ÄÇÂΩìÁÑ∂Êúâ‰∫õÂ≠òÂÇ®ÂºïÊìéÊØîÂ¶ÇInnoDBÔºå‰πüÊîØÊåÅ‰∏ç‰ΩøÁî®Êñá‰ª∂Á≥ªÁªüÁõ¥Êé•ÁÆ°ÁêÜË£∏ËÆæÂ§áÔºå‰ΩÜÁé∞‰ª£Êñá‰ª∂Á≥ªÁªüÁöÑÂÆûÁé∞‰ΩøÂæóËøôÊ†∑ÂÅöÊ≤°ÊúâÂøÖË¶Å‰∫Ü„ÄÇÂú®Êñá‰ª∂Á≥ªÁªü‰πã‰∏ãÔºåÂèØ‰ª•‰ΩøÁî®Êú¨Âú∞Á£ÅÁõòÔºåÂèØ‰ª•‰ΩøÁî® DAS„ÄÅNAS„ÄÅSANÁ≠âÂêÑÁßçÂ≠òÂÇ®Á≥ªÁªü„ÄÇ\n\n## 1.7 Â∞èÁªì\n\nMySQL Êû∂ÊûÑÂõæÊú¨ËäÇÂºÄÁØáÊâÄÁ§∫„ÄÇ‰∏ãÈù¢‰∏∫‰∫ÜÁÜüÊÇâ SQL ÊâßË°åÊµÅÁ®ãÊñπ‰æøÔºåÊàë‰ª¨ÂèØ‰ª•ÁÆÄÂåñÂ¶Ç‰∏ã:\n\n![image-20220115172118991](https://blog-images-1309598269.cos.ap-beijing.myqcloud.com/blogImgs/202206300055402.png)\n\n\n\nÁÆÄÂåñ‰∏∫‰∏âÂ±ÇÁªìÊûÑÔºö\n\n1. ËøûÊé•Â±ÇÔºöÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®Á´ØÂª∫Á´ãËøûÊé•ÔºåÂÆ¢Êà∑Á´ØÂèëÈÄÅ SQL Ëá≥ÊúçÂä°Âô®Á´Ø;\n2. SQL Â±ÇÔºàÊúçÂä°Â±ÇÔºâÔºöÂØπ SQL ËØ≠Âè•ËøõË°åÊü•ËØ¢Â§ÑÁêÜÔºõ‰∏éÊï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÂÇ®ÊñπÂºèÊó†ÂÖ≥;\n3. Â≠òÂÇ®ÂºïÊìéÂ±ÇÔºö‰∏éÊï∞ÊçÆÂ∫ìÊñá‰ª∂Êâì‰∫§ÈÅìÔºåË¥üË¥£Êï∞ÊçÆÁöÑÂ≠òÂÇ®ÂíåËØªÂèñ„ÄÇ\n\n# 2. SQL ÊâßË°åÊµÅÁ®ã\n\n## 2.1 MySQL ‰∏≠ÁöÑ SQLÊâßË°åÊµÅÁ®ã\n\n==MySQLÁöÑÊü•ËØ¢ÊµÅÁ®ã:==\n\n![image-20220115172223043](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116406.png)\n\n\n\n### 2.1.1 **Êü•ËØ¢ÁºìÂ≠ò**\n\nServer Â¶ÇÊûúÂú®Êü•ËØ¢ÁºìÂ≠ò‰∏≠ÂèëÁé∞‰∫ÜËøôÊù° SQL ËØ≠Âè•ÔºåÂ∞±‰ºöÁõ¥Êé•Â∞ÜÁªìÊûúËøîÂõûÁªôÂÆ¢Êà∑Á´Ø;Â¶ÇÊûúÊ≤° ÊúâÔºåÂ∞±ËøõÂÖ•Âà∞Ëß£ÊûêÂô®Èò∂ÊÆµ„ÄÇÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂõ†‰∏∫Êü•ËØ¢ÁºìÂ≠òÂæÄÂæÄÊïàÁéá‰∏çÈ´òÔºåÊâÄ‰ª•Âú® MySQL 8.0 ‰πãÂêéÂ∞±ÊäõÂºÉ ‰∫ÜËøô‰∏™ÂäüËÉΩ„ÄÇ\n\n**Â§ßÂ§öÊï∞ÊÉÖÂÜµÊü•ËØ¢ÁºìÂ≠òÂ∞±ÊòØ‰∏™È∏°ËÇãÔºå‰∏∫‰ªÄ‰πàÂë¢?**\n\n```sql\nSELECT employee_id,last_name FROM employees WHERE employee_id = 101;\n```\n\nÊü•ËØ¢ÁºìÂ≠òÊòØÊèêÂâçÊääÊü•ËØ¢ÁªìÊûúÁºìÂ≠òËµ∑Êù•ÔºåËøôÊ†∑‰∏ãÊ¨°‰∏çÈúÄË¶ÅÊâßË°åÂ∞±ÂèØ‰ª•Áõ¥Êé•ÊãøÂà∞ÁªìÊûú„ÄÇÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂú® MySQL ‰∏≠ÁöÑÊü•ËØ¢ÁºìÂ≠òÔºå‰∏çÊòØÁºìÂ≠òÊü•ËØ¢ËÆ°ÂàíÔºåËÄåÊòØÊü•ËØ¢ÂØπÂ∫îÁöÑÁªìÊûú„ÄÇËøôÂ∞±ÊÑèÂë≥ÁùÄÊü•ËØ¢ÂåπÈÖçÁöÑ `È≤ÅÊ£íÊÄßÂ§ßÂ§ßÈôç‰Ωé`ÔºåÂè™Êúâ `Áõ∏ÂêåÁöÑÊü•ËØ¢Êìç‰ΩúÊâç‰ºöÂëΩ‰∏≠Êü•ËØ¢ÁºìÂ≠ò`„ÄÇ‰∏§‰∏™Êü•ËØ¢ËØ∑Ê±ÇÂú®‰ªª‰ΩïÂ≠óÁ¨¶‰∏äÁöÑ‰∏çÂêåÔºà‰æãÂ¶ÇÔºöÁ©∫Ê†º„ÄÅÊ≥®Èáä„ÄÅ Â§ßÂ∞èÂÜôÔºâÔºåÈÉΩ‰ºöÂØºËá¥ÁºìÂ≠ò‰∏ç‰ºöÂëΩ‰∏≠„ÄÇÂõ†Ê≠§ MySQL ÁöÑ `Êü•ËØ¢ÁºìÂ≠òÂëΩ‰∏≠Áéá‰∏çÈ´ò` „ÄÇ\n\nÂêåÊó∂ÔºåÂ¶ÇÊûúÊü•ËØ¢ËØ∑Ê±Ç‰∏≠ÂåÖÂê´Êüê‰∫õÁ≥ªÁªüÂáΩÊï∞„ÄÅÁî®Êà∑Ëá™ÂÆö‰πâÂèòÈáèÂíåÂáΩÊï∞„ÄÅ‰∏Ä‰∫õÁ≥ªÁªüË°®ÔºåÂ¶Ç mysql „ÄÅ information_schema„ÄÅ performance_schema Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°®ÔºåÈÇ£Ëøô‰∏™ËØ∑Ê±ÇÂ∞±‰∏ç‰ºöË¢´ÁºìÂ≠ò„ÄÇ‰ª•Êüê‰∫õÁ≥ªÁªüÂáΩÊï∞‰∏æ‰æãÔºåÂèØËÉΩÂêåÊ†∑ÁöÑÂáΩÊï∞ÁöÑ‰∏§Ê¨°Ë∞ÉÁî®‰ºö‰∫ßÁîü‰∏ç‰∏ÄÊ†∑ÁöÑÁªìÊûúÔºåÊØîÂ¶ÇÂáΩÊï∞ `NOW` ÔºåÊØèÊ¨°Ë∞ÉÁî®ÈÉΩ‰ºö‰∫ßÁîüÊúÄÊñ∞ÁöÑÂΩìÂâçÊó∂Èó¥ÔºåÂ¶ÇÊûúÂú®‰∏Ä‰∏™Êü•ËØ¢ËØ∑Ê±Ç‰∏≠Ë∞ÉÁî®‰∫ÜËøô‰∏™ÂáΩÊï∞ÔºåÈÇ£Âç≥‰ΩøÊü•ËØ¢ËØ∑Ê±ÇÁöÑÊñáÊú¨‰ø°ÊÅØÈÉΩ‰∏ÄÊ†∑ÔºåÈÇ£‰∏çÂêåÊó∂Èó¥ÁöÑ‰∏§Ê¨°Êü•ËØ¢‰πüÂ∫îËØ•ÂæóÂà∞‰∏çÂêåÁöÑÁªìÊûúÔºåÂ¶ÇÊûúÂú®Á¨¨‰∏ÄÊ¨°Êü•ËØ¢Êó∂Â∞±ÁºìÂ≠ò‰∫ÜÔºåÈÇ£Á¨¨‰∫åÊ¨°Êü•ËØ¢ÁöÑÊó∂ÂÄôÁõ¥Êé•‰ΩøÁî®Á¨¨‰∏ÄÊ¨°Êü•ËØ¢ÁöÑÁªìÊûúÂ∞±ÊòØÈîôËØØÁöÑ!\n\nÊ≠§Â§ñÔºåÊó¢ÁÑ∂ÊòØÁºìÂ≠òÔºåÈÇ£Â∞±ÊúâÂÆÉ `ÁºìÂ≠òÂ§±ÊïàÁöÑÊó∂ÂÄô`„ÄÇMySQL ÁöÑÁºìÂ≠òÁ≥ªÁªü‰ºöÁõëÊµãÊ∂âÂèäÂà∞ÁöÑÊØèÂº†Ë°®ÔºåÂè™Ë¶ÅËØ•Ë°®ÁöÑÁªìÊûÑÊàñËÄÖÊï∞ÊçÆË¢´‰øÆÊîπÔºåÂ¶ÇÂØπËØ•Ë°®‰ΩøÁî®‰∫Ü `INSERT`„ÄÅ`UPDATE`„ÄÅ`DELETE`„ÄÅ`TRUNCATE TABLE`„ÄÅ`ALTER TABLE`„ÄÅ`DROP TABLE`Êàñ `DROP DATABASE` ËØ≠Âè•ÔºåÈÇ£‰ΩøÁî®ËØ•Ë°®ÁöÑÊâÄÊúâÈ´òÈÄüÁºìÂ≠òÊü•ËØ¢ÈÉΩÂ∞ÜÂèò‰∏∫Êó†ÊïàÂπ∂‰ªéÈ´òÈÄüÁºìÂ≠ò‰∏≠Âà†Èô§ÔºÅÂØπ‰∫é `Êõ¥Êñ∞ÂéãÂäõÂ§ßÁöÑÊï∞ÊçÆÂ∫ì`Êù•ËØ¥ÔºåÊü•ËØ¢ÁºìÂ≠òÁöÑÂëΩ‰∏≠Áéá‰ºöÈùûÂ∏∏‰Ωé„ÄÇ\n\n**<font color=red>ÊÄª‰πãÔºåÂõ†‰∏∫Êü•ËØ¢ÁºìÂ≠òÂæÄÂæÄÂºäÂ§ß‰∫éÂà©ÔºåÊü•ËØ¢ÁºìÂ≠òÁöÑÂ§±ÊïàÈùûÂ∏∏È¢ëÁπÅ„ÄÇ</font>**\n\n‰∏ÄËà¨Âª∫ËÆÆÂ§ßÂÆ∂Âú®ÈùôÊÄÅË°®Èáå‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÔºå‰ªÄ‰πàÂè´`ÈùôÊÄÅË°®`Âë¢?Â∞±ÊòØ‰∏ÄËà¨Êàë‰ª¨ÊûÅÂ∞ëÊõ¥Êñ∞ÁöÑË°®„ÄÇÊØîÂ¶ÇÔºå‰∏Ä‰∏™Á≥ªÁªüÈÖçÁΩÆË°®„ÄÅÂ≠óÂÖ∏Ë°®ÔºåËøôÂº†Ë°®‰∏äÁöÑÊü•ËØ¢ÊâçÈÄÇÂêà‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠ò„ÄÇÂ•ΩÂú®MySQL‰πüÊèê‰æõ‰∫ÜËøôÁßç‚Äú`ÊåâÈúÄ‰ΩøÁî®`‚ÄùÁöÑÊñπÂºè„ÄÇ‰Ω†ÂèØ‰ª•Â∞Ümy.cnfÂèÇÊï∞ query_ _cache_ type  ËÆæÁΩÆÊàêDEMANDÔºå‰ª£Ë°®ÂΩìsqlËØ≠Âè•‰∏≠ÊúâSQL_ CACHEÂÖ≥ÈîÆËØçÊó∂ÊâçÁºìÂ≠ò„ÄÇÊØîÂ¶ÇÔºö\n\n```shell\n#query_ cache_ typeÊúâ3‰∏™ÂÄº0‰ª£Ë°®ÂÖ≥Èó≠Êü•ËØ¢ÁºìÂ≠ò0FFÔºå1‰ª£Ë°®ÂºÄÂêØONÔºå2 (DEMAND)\nquery_cache_ type=2\n```\n\nËøôÊ†∑ÂØπ‰∫éÈªòËÆ§ÁöÑSQLËØ≠Âè•ÈÉΩ‰∏ç‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠ò„ÄÇËÄåÂØπ‰∫é‰Ω†Á°ÆÂÆöË¶Å‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÁöÑËØ≠Âè•ÔºåÂèØ‰ª•Áî®SQL_CACHEÊòæÂºèÊåáÂÆöÔºåÂÉè‰∏ãÈù¢Ëøô‰∏™ËØ≠Âè•‰∏ÄÊ†∑Ôºö\n\n```sql\nselect SQL. CACHE * from test where ID=5 ;|\n```\n\nÊü•ÁúãÂΩìÂâçmysq|ÂÆû‰æãÊòØÂê¶ÂºÄÂêØÁºìÂ≠òÊú∫Âà∂\n\n```mysql\n# MySQL5.7 ‰∏≠Ôºö\nmysql> show global variables like \"%query_cache_type%\";\n+------------------+-------+\n| Variable_name    | Value |\n+------------------+-------+\n| query_cache_type | OFF   |\n+------------------+-------+\n1 row in set (0.00 sec)\n\n# MySQL8.0 ‰∏≠Ôºö\nmysql> show global variables like \"%query_cache_type%\";\nEmpty set (0.00 sec)\n```\n\nÁõëÊéßÊü•ËØ¢ÁºìÂ≠òÁöÑÂëΩ‰∏≠Áéá\n\n```sql\nshow status like '%Qcache%';\n```\n\n![image-20220712222507959](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116898.png)\n\n- `Qcache_free_blocks` ÔºöË°®Á§∫Êü•ËØ¢ÁºìÂ≠ò‰∏≠ËøòÊúâÂ§öÂ∞ëÂâ©‰ΩôÁöÑblocks,Â¶ÇÊûúËØ•ÂÄºÊòæÁ§∫ËæÉÂ§ß,ÂàôËØ¥ÊòéÊü•ËØ¢ÁºìÂ≠ò‰∏≠ÁöÑ`ÂÜÖÂ≠òÁ¢éÁâá`ËøáÂ§ö‰∫ÜÔºåÂèØËÉΩÂú®‰∏ÄÂÆöÁöÑÊó∂Èó¥ËøõË°åÊï¥ÁêÜ„ÄÇ\n- `Qcache_free_memory` ÔºöÊü•ËØ¢ÁºìÂ≠òÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÔºåÈÄöËøáËøô‰∏™ÂèÇÊï∞ÂèØ‰ª•ÂæàÊ∏ÖÊô∞ÁöÑÁü•ÈÅìÂΩìÂâçÁ≥ªÁªüÁöÑÊü•ËØ¢ÂÜÖÂ≠òÊòØÂê¶Â§üÁî®ÔºåÊòØÂ§ö‰∫ÜÔºåËøòÊòØ‰∏çÂ§üÁî®ÔºåDBAÂèØ‰ª•Ê†πÊçÆÂÆûÈôÖÊÉÖÂÜµÂÅöÂá∫Ë∞ÉÊï¥„ÄÇ\n- `Qcache_hits` ÔºöË°®Á§∫ÊúâÂ§öÂ∞ëÊ¨°ÂëΩ‰∏≠ÁºìÂ≠ò„ÄÇÊàë‰ª¨‰∏ªË¶ÅÂèØ‰ª•ÈÄöËøáËØ•ÂÄºÊù•È™åËØÅÊàë‰ª¨ÁöÑÊü•ËØ¢ÁºìÂ≠òÁöÑÊïàÊûú„ÄÇÊï∞Â≠óË∂äÂ§ßÔºåÁºìÂ≠òÊïàÊûúË∂äÁêÜÊÉ≥„ÄÇ\n- `Qcache_inserts` ÔºöË°®Á§∫Â§öÂ∞ëÊ¨°Êú™ÂëΩ‰∏≠ÁÑ∂ÂêéÊèíÂÖ•ÔºåÊÑèÊÄùÊòØÊñ∞Êù•ÁöÑSQLËØ∑Ê±ÇÂú®ÁºìÂ≠ò‰∏≠Êú™ÊâæÂà∞Ôºå‰∏çÂæó‰∏çÊâßË°åÊü•ËØ¢Â§ÑÁêÜ,ÊâßË°åÊü•ËØ¢Â§ÑÁêÜÂêéÊääÁªìÊûúinsertÂà∞Êü•ËØ¢ÁºìÂ≠ò‰∏≠„ÄÇËøôÊ†∑ÁöÑÊÉÖÂÜµÁöÑÊ¨°Êï∞Ë∂äÂ§öÔºåË°®Á§∫Êü•ËØ¢ÁºìÂ≠òÂ∫îÁî®Âà∞ÁöÑÊØîËæÉÂ∞ëÔºåÊïàÊûú‰πüÂ∞±‰∏çÁêÜÊÉ≥„ÄÇÂΩìÁÑ∂Á≥ªÁªüÂàöÂêØÂä®ÂêéÔºåÊü•ËØ¢ÁºìÂ≠òÊòØÁ©∫ÁöÑÔºåËøôÂæàÊ≠£Â∏∏„ÄÇ\n- `Qcache_lowmem_prunes` ÔºöËØ•ÂèÇÊï∞ËÆ∞ÂΩïÊúâÂ§öÂ∞ëÊù°Êü•ËØ¢Âõ†‰∏∫ÂÜÖÂ≠ò‰∏çË∂≥ËÄåË¢´ÁßªÈô§Âá∫Êü•ËØ¢ÁºìÂ≠ò„ÄÇÈÄöËøáËøô‰∏™ÂÄºÔºåÁî®Êà∑ÂèØ‰ª•ÈÄÇÂΩìÁöÑË∞ÉÊï¥ÁºìÂ≠òÂ§ßÂ∞è„ÄÇ\n- `Qcache_not_cached` ÔºöË°®Á§∫Âõ†‰∏∫query_cache_typeÁöÑËÆæÁΩÆËÄåÊ≤°ÊúâË¢´ÁºìÂ≠òÁöÑÊü•ËØ¢Êï∞Èáè„ÄÇ\n- `Qcache_queries_in_cache`ÔºöÂΩìÂâçÁºìÂ≠ò‰∏≠`ÁºìÂ≠òÁöÑÊü•ËØ¢Êï∞Èáè`„ÄÇ\n- `Qcache_total_blocks` ÔºöÂΩìÂâçÁºìÂ≠òÁöÑblockÊï∞Èáè„ÄÇ\n\n### 2.1.2 **Ëß£ÊûêÂô®**\n\nÂú®Ëß£ÊûêÂô®‰∏≠ÂØπ SQL ËØ≠Âè•ËøõË°åËØ≠Ê≥ïÂàÜÊûê„ÄÅËØ≠‰πâÂàÜÊûê„ÄÇ\n\n![image-20220115172951498](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116982.png)\n\nÂ¶ÇÊûúÊ≤°ÊúâÂëΩ‰∏≠Êü•ËØ¢ÁºìÂ≠òÔºåÂ∞±Ë¶ÅÂºÄÂßãÁúüÊ≠£ÊâßË°åËØ≠Âè•‰∫Ü„ÄÇÈ¶ñÂÖàÔºåMySQL ÈúÄË¶ÅÁü•ÈÅì‰Ω†Ë¶ÅÂÅö‰ªÄ‰πàÔºåÂõ†Ê≠§ÈúÄË¶ÅÂØπSQLËØ≠Âè•ÂÅöËß£Êûê„ÄÇSQLËØ≠Âè•ÁöÑÂàÜÊûêÂàÜ‰∏∫ËØçÊ≥ïÂàÜÊûê‰∏éËØ≠Ê≥ïÂàÜÊûê„ÄÇ\n\nÂàÜÊûêÂô®ÂÖàÂÅö‚Äú`ËØçÊ≥ïÂàÜÊûê` ‚Äù„ÄÇ‰Ω†ËæìÂÖ•ÁöÑÊòØÁî±Â§ö‰∏™Â≠óÁ¨¶‰∏≤ÂíåÁ©∫Ê†ºÁªÑÊàêÁöÑ‰∏ÄÊù° SQL ËØ≠Âè•ÔºåMySQL ÈúÄË¶ÅËØÜÂà´Âá∫ÈáåÈù¢ ÁöÑÂ≠óÁ¨¶‰∏≤ÂàÜÂà´ÊòØ‰ªÄ‰πàÔºå‰ª£Ë°®‰ªÄ‰πà„ÄÇ\n\n MySQL ‰ªé‰Ω†ËæìÂÖ•ÁöÑ\"select\"Ëøô‰∏™ÂÖ≥ÈîÆÂ≠óËØÜÂà´Âá∫Êù•ÔºåËøôÊòØ‰∏Ä‰∏™Êü•ËØ¢ËØ≠Âè•„ÄÇÂÆÉ‰πüË¶ÅÊääÂ≠óÁ¨¶‰∏≤‚ÄúT‚ÄùËØÜÂà´Êàê‚ÄúË°®Âêç T‚ÄùÔºåÊääÂ≠óÁ¨¶‰∏≤‚ÄúID‚ÄùËØÜÂà´Êàê‚ÄúÂàó ID‚Äù„ÄÇ\n\nÊé•ÁùÄÔºåË¶ÅÂÅö‚Äú`ËØçÊ≥ïÂàÜÊûê` ‚Äù„ÄÇÊ†πÊçÆËØçÊ≥ïÂàÜÊûêÁöÑÁªìÊûúÔºåËØ≠Ê≥ïÂàÜÊûêÂô®ÔºàÊØîÂ¶ÇÔºöBisonÔºâ‰ºöÊ†πÊçÆËØ≠Ê≥ïËßÑÂàôÔºåÂà§Êñ≠‰Ω†Ëæì ÂÖ•ÁöÑËøô‰∏™ SQL ËØ≠Âè•ÊòØÂê¶ `Êª°Ë∂≥ MySQL ËØ≠Ê≥ï`„ÄÇ\n\n```sql\nselect department_id,job_id,avg(salary) from employees group by department_id; \n```\n\nÂ¶ÇÊûú‰Ω†ÁöÑËØ≠Âè•‰∏çÂØπÔºåÂ∞±‰ºöÊî∂Âà∞‚Äú‚ÄùÁöÑÈîôËØØÊèêÈÜíÔºåÊØîÂ¶ÇËøô‰∏™ËØ≠Âè•fromÂÜôÊàê‰∫Ürom„ÄÇ\n\n```mysql\nmysql> select * fro user;\nERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'fro user' at line 1\n```\n\nÂ¶ÇÊûúSQLËØ≠Âè•Ê≠£Á°ÆÔºåÂàô‰ºöÁîüÊàê‰∏Ä‰∏™ËøôÊ†∑ÁöÑËØ≠Ê≥ïÊ†ë:\n\n![image-20220115173057415](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117140.png)\n\n‰∏ãÂõæÊòØSQLËØçÊ≥ïÂàÜÊûêÁöÑËøáÁ®ãÊ≠•È™§Ôºö\n\n![image-20220712223741324](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117605.png)\n\nËá≥Ê≠§Êàë‰ª¨Ëß£ÊûêÂô®ÁöÑÂ∑•‰Ωú‰ªªÂä°‰πüÂü∫Êú¨ÂúÜÊª°‰∫Ü„ÄÇÊé•‰∏ãÊù•ËøõÂÖ•Âà∞‰ºòÂåñÂô®„ÄÇ\n\n### 2.1.3 ‰ºòÂåñÂô®\n\nÂú®‰ºòÂåñÂô®‰∏≠‰ºöÁ°ÆÂÆö SQL ËØ≠Âè•ÁöÑÊâßË°åË∑ØÂæÑÔºåÊØîÂ¶ÇÊòØÊ†πÊçÆ `ÂÖ®Ë°®Ê£ÄÁ¥¢` ÔºåËøòÊòØÊ†πÊçÆ `Á¥¢ÂºïÊ£ÄÁ¥¢` Á≠â„ÄÇ\n\nÁªèËøá‰∫ÜËß£ÊûêÂô®ÔºåMySQL Â∞±Áü•ÈÅì‰Ω†Ë¶ÅÂÅö‰ªÄ‰πà‰∫Ü„ÄÇÂú®ÂºÄÂßãÊâßË°å‰πãÂâçÔºåËøòË¶ÅÂÖàÁªèËøá‰ºòÂåñÂô®ÁöÑÂ§ÑÁêÜ„ÄÇ**‰∏ÄÊù°Êü•ËØ¢ÂèØ‰ª•ÊúâÂæàÂ§öÁßçÊâßË°åÊñπÂºèÔºåÊúÄÂêéÈÉΩËøîÂõûÁõ∏ÂêåÁöÑÁªìÊûú„ÄÇ‰ºòÂåñÂô®ÁöÑ‰ΩúÁî®Â∞±ÊòØÊâæÂà∞ËøôÂÖ∂‰∏≠ÊúÄÂ•ΩÁöÑÊâßË°åËÆ°Âàí**„ÄÇ\n\n‰∏æ‰æãÔºöÂ¶Ç‰∏ãËØ≠Âè•ÊòØÊâßË°å‰∏§‰∏™Ë°®ÁöÑ join:\n\n```sql\nselect * from test1 join test2 using(ID)\nwhere test1.name='zhangwei' and test2.name='mysqlÈ´òÁ∫ßËØæÁ®ã';\n```\n\n```\nÊñπÊ°à1:ÂèØ‰ª•ÂÖà‰ªéË°® test1 ÈáåÈù¢ÂèñÂá∫ name='zhangwei'ÁöÑËÆ∞ÂΩïÁöÑ ID ÂÄºÔºåÂÜçÊ†πÊçÆ ID ÂÄºÂÖ≥ËÅîÂà∞Ë°® test2ÔºåÂÜçÂà§Êñ≠ test2 ÈáåÈù¢ name ÁöÑÂÄºÊòØÂê¶Á≠â‰∫é 'mysqlÈ´òÁ∫ßËØæÁ®ã'„ÄÇ\n\nÊñπÊ°à2:ÂèØ‰ª•ÂÖà‰ªéË°® test2 ÈáåÈù¢ÂèñÂá∫ name='mysqlÈ´òÁ∫ßËØæÁ®ã' ÁöÑËÆ∞ÂΩïÁöÑ ID ÂÄºÔºåÂÜçÊ†πÊçÆ ID ÂÄºÂÖ≥ËÅîÂà∞ test1Ôºå ÂÜçÂà§Êñ≠ test1 ÈáåÈù¢ nameÁöÑÂÄºÊòØÂê¶Á≠â‰∫é zhangwei„ÄÇ\n\nËøô‰∏§ÁßçÊâßË°åÊñπÊ≥ïÁöÑÈÄªËæëÁªìÊûúÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰ΩÜÊòØÊâßË°åÁöÑÊïàÁéá‰ºöÊúâ‰∏çÂêåÔºåËÄå‰ºòÂåñÂô®ÁöÑ‰ΩúÁî®Â∞±ÊòØÂÜ≥ÂÆöÈÄâÊã©‰ΩøÁî®Âì™‰∏Ä‰∏™ÊñπÊ°à„ÄÇ‰ºòÂåñ\nÂô®Èò∂ÊÆµÂÆåÊàêÂêéÔºåËøô‰∏™ËØ≠Âè•ÁöÑÊâßË°åÊñπÊ°àÂ∞±Á°ÆÂÆö‰∏ãÊù•‰∫ÜÔºåÁÑ∂ÂêéËøõÂÖ•ÊâßË°åÂô®Èò∂ÊÆµ„ÄÇ\n\nÂ¶ÇÊûú‰Ω†ËøòÊúâ‰∏Ä‰∫õÁñëÈóÆÔºåÊØîÂ¶Ç‰ºòÂåñÂô®ÊòØÊÄé‰πàÈÄâÊã©Á¥¢ÂºïÁöÑÔºåÊúâÊ≤°ÊúâÂèØËÉΩÈÄâÊã©ÈîôÁ≠â„ÄÇÂêéÈù¢ËÆ≤Âà∞Á¥¢ÂºïÊàë‰ª¨ÂÜçË∞à„ÄÇ\n```\n\nÂú®Êü•ËØ¢‰ºòÂåñÂô®‰∏≠ÔºåÂèØ‰ª•ÂàÜ‰∏∫ `ÈÄªËæëÊü•ËØ¢` ‰ºòÂåñÈò∂ÊÆµÂíå `Áâ©ÁêÜÊü•ËØ¢` ‰ºòÂåñÈò∂ÊÆµ„ÄÇ\n\nÈÄªËæëÊü•ËØ¢‰ºòÂåñÂ∞±ÊòØÈÄöËøáÊîπÂèòSQLËØ≠Âè•ÁöÑÂÜÖÂÆπÊù•‰ΩøÂæóSQLÊü•ËØ¢Êõ¥È´òÊïàÔºåÂêåÊó∂‰∏∫Áâ©ÁêÜÊü•ËØ¢‰ºòÂåñÊèê‰æõÊõ¥Â§öÁöÑÂÄôÈÄâÊâßË°åËÆ°Âàí„ÄÇÈÄöÂ∏∏ÈááÁî®ÁöÑÊñπÂºèÊòØÂØπSQLËØ≠Âè•ËøõË°å`Á≠â‰ª∑ÂèòÊç¢`ÔºåÂØπÊü•ËØ¢ËøõË°åÈáçÂÜôÔºåËÄåÊü•ËØ¢ÈáçÂÜôÁöÑÊï∞Â≠¶Âü∫Á°ÄÂ∞±ÊòØÂÖ≥Á≥ª‰ª£Êï∞„ÄÇÂØπÊù°‰ª∂Ë°®ËææÂºèËøõË°åÁ≠â‰ª∑Ë∞ìËØçÈáçÂÜô„ÄÅÊù°‰ª∂ÁÆÄÂåñÔºåÂØπËßÜÂõæËøõË°åÈáçÂÜôÔºåÂØπÂ≠êÊü•ËØ¢ËøõË°å‰ºòÂåñÔºåÂØπËøûÊé•ËØ≠‰πâËøõË°å‰∫ÜÂ§ñËøûÊé•Ê∂àÈô§„ÄÅÂµåÂ•óËøûÊé•Ê∂àÈô§Á≠â„ÄÇ\n\nÁâ©ÁêÜÊü•ËØ¢‰ºòÂåñÊòØÂü∫‰∫éÂÖ≥Á≥ª‰ª£Êï∞ËøõË°åÁöÑÊü•ËØ¢ÈáçÂÜô,ËÄåÂÖ≥Á≥ª‰ª£Êï∞ÁöÑÊØè‰∏ÄÊ≠•ÈÉΩÂØπÂ∫îÁùÄÁâ©ÁêÜËÆ°ÁÆó, Ëøô‰∫õÁâ©ÁêÜËÆ°ÁÆóÂæÄÂæÄÂ≠òÂú®Â§öÁßçÁÆóÊ≥ïÔºåÂõ†Ê≠§ÈúÄË¶ÅËÆ°ÁÆóÂêÑÁßçÁâ©ÁêÜË∑ØÂæÑÁöÑ‰ª£‰ª∑Ôºå‰ªé‰∏≠ÈÄâÊã©‰ª£‰ª∑ÊúÄÂ∞èÁöÑ‰Ωú‰∏∫ÊâßË°åËÆ°Âàí„ÄÇÂú®Ëøô‰∏™Èò∂ÊÆµÈáåÔºåÂØπ‰∫éÂçïË°®ÂíåÂ§öË°®ËøûÊé•ÁöÑÊìç‰ΩúÔºåÈúÄË¶ÅÈ´òÊïàÂú∞`‰ΩøÁî®Á¥¢Âºï`ÔºåÊèêÂçáÊü•ËØ¢ÊïàÁéá„ÄÇ\n\n### 2.1.4 ÊâßË°åÂô®\n\nÊà™Ê≠¢Âà∞Áé∞Âú®ÔºåËøòÊ≤°ÊúâÁúüÊ≠£ÂéªËØªÂÜôÁúüÂÆûÁöÑË°®Ôºå‰ªÖ‰ªÖÂè™ÊòØ‰∫ßÂá∫‰∫Ü‰∏Ä‰∏™ÊâßË°åËÆ°Âàí„ÄÇ‰∫éÊòØÂ∞±ËøõÂÖ•‰∫Ü `ÊâßË°åÂô®Èò∂ÊÆµ` „ÄÇ\n\n![image-20220115173252824](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117552.png)\n\n\n\nÂú®ÊâßË°å‰πãÂâçÈúÄË¶ÅÂà§Êñ≠ËØ•Áî®Êà∑ÊòØÂê¶ÂÖ∑Â§áÊùÉÈôê „ÄÇÂ¶ÇÊûúÊ≤°ÊúâÔºåÂ∞±‰ºöËøîÂõûÊùÉÈôêÈîôËØØ„ÄÇÂ¶ÇÊûúÂÖ∑Â§áÊùÉÈôêÔºåÂ∞±ÊâßË°å SQL Êü•ËØ¢Âπ∂ËøîÂõûÁªìÊûú„ÄÇÂú® MySQL 8.0 ‰ª•‰∏ãÁöÑÁâàÊú¨ÔºåÂ¶ÇÊûúËÆæÁΩÆ‰∫ÜÊü•ËØ¢ÁºìÂ≠òÔºåËøôÊó∂‰ºöÂ∞ÜÊü•ËØ¢ÁªìÊûúËøõË°åÁºìÂ≠ò„ÄÇ\n\n```sql\nselect * from test where id=1;\n```\n\nÂ¶ÇÊûúÊúâÊùÉÈôêÔºåÂ∞±ÊâìÂºÄË°®ÁªßÁª≠ÊâßË°å„ÄÇÊâìÂºÄË°®ÁöÑÊó∂ÂÄôÔºåÊâßË°åÂô®Â∞±‰ºöÊ†πÊçÆË°®ÁöÑÂºïÊìéÂÆö‰πâÔºåË∞ÉÁî®Â≠òÂÇ®ÂºïÊìéAPIÂØπË°®ËøõË°åÁöÑËØªÂÜô„ÄÇÂ≠òÂÇ®ÂºïÊìéAPIÂè™ÊòØÊäΩË±°Êé•Âè£Ôºå‰∏ãÈù¢ËøòÊúâ‰∏™**Â≠òÂÇ®ÂºïÊìéÂ±Ç**ÔºåÂÖ∑‰ΩìÂÆûÁé∞ËøòÊòØË¶ÅÁúãË°®ÈÄâÊã©ÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇ\n\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117221.png)\n\nÊØîÂ¶ÇÔºöË°® test ‰∏≠ÔºåID Â≠óÊÆµÊ≤°ÊúâÁ¥¢ÂºïÔºåÈÇ£‰πàÊâßË°åÂô®ÁöÑÊâßË°åÊµÅÁ®ãÊòØËøôÊ†∑ÁöÑÔºö\n\n- Ë∞ÉÁî® InnoDB ÂºïÊìéÊé•Âè£ÂèñËøô‰∏™Ë°®ÁöÑÁ¨¨‰∏ÄË°åÔºåÂà§Êñ≠ ID ÂÄºÊòØ‰∏çÊòØ1ÔºåÂ¶ÇÊûú‰∏çÊòØÂàôË∑≥ËøáÔºåÂ¶ÇÊûúÊòØÂàôÂ∞ÜËøôË°åÂ≠òÂú®ÁªìÊûúÈõÜ‰∏≠; Ë∞ÉÁî®ÂºïÊìéÊé•Âè£Âèñ‚Äú‰∏ã‰∏ÄË°å‚ÄùÔºåÈáçÂ§çÁõ∏ÂêåÁöÑÂà§Êñ≠ÈÄªËæëÔºåÁõ¥Âà∞ÂèñÂà∞Ëøô‰∏™Ë°®ÁöÑÊúÄÂêé‰∏ÄË°å„ÄÇ\n- ÊâßË°åÂô®Â∞Ü‰∏äËø∞ÈÅçÂéÜËøáÁ®ã‰∏≠ÊâÄÊúâÊª°Ë∂≥Êù°‰ª∂ÁöÑË°åÁªÑÊàêÁöÑËÆ∞ÂΩïÈõÜ‰Ωú‰∏∫ÁªìÊûúÈõÜËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇ\n\nËá≥Ê≠§ÔºåËøô‰∏™ËØ≠Âè•Â∞±ÊâßË°åÂÆåÊàê‰∫Ü„ÄÇÂØπ‰∫éÊúâÁ¥¢ÂºïÁöÑË°®ÔºåÊâßË°åÁöÑÈÄªËæë‰πüÂ∑Æ‰∏çÂ§ö„ÄÇ\n\n==SQL ËØ≠Âè•Âú® MySQL ‰∏≠ÁöÑÊµÅÁ®ãÊòØ==Ôºö`SQL ËØ≠Âè• ‚Üí Êü•ËØ¢ÁºìÂ≠ò ‚Üí Ëß£ÊûêÂô® ‚Üí ‰ºòÂåñÂô® ‚Üí ÊâßË°åÂô®`„ÄÇ\n\n![image-20220115173423050](https://blog-images-1309598269.cos.ap-beijing.myqcloud.com/blogImgs/202206231430741.png)\n\n## 2.2 MySQL8‰∏≠SQLÊâßË°åÂéüÁêÜ\n\nÂâçÈù¢ÁöÑÁªìÊûÑÂõæÂæàÂ§çÊùÇÔºåÊàë‰ª¨ÈúÄË¶ÅÊäìÂèñÊúÄÊ†∏ÂøÉÁöÑÈÉ®ÂàÜ: SQLÁöÑÊâßË°åÂéüÁêÜ„ÄÇ‰∏çÂêåÁöÑDBMSÁöÑSQLÁöÑÊâßË°åÂéüÁêÜÊòØÁõ∏ÈÄöÁöÑÔºåÂè™ÊòØÂú®‰∏çÂêåÁöÑËΩØ‰ª∂‰∏≠ÔºåÂêÑÊúâÂêÑÁöÑÂÆûÁé∞Ë∑ØÂæÑ„ÄÇ\n\nÊó¢ÁÑ∂‰∏ÄÊù°SQLËØ≠Âè•‰ºöÁªèÂéÜ‰∏çÂêåÁöÑÊ®°Âùó,ÈÇ£Êàë‰ª¨Â∞±Êù•Áúã‰∏ãÔºåÂú®‰∏çÂêåÁöÑÊ®°Âùó‰∏≠ÔºåSQL ÊâßË°åÊâÄ‰ΩøÁî®ÁöÑËµÑÊ∫ê(Êó∂Èó¥)ÊòØÊÄéÊ†∑ÁöÑ„ÄÇÂ¶Ç‰ΩïÂú®MySQL‰∏≠ÂØπ‰∏ÄÊù°SQLËØ≠Âè•ÁöÑÊâßË°åÊó∂Èó¥ËøõË°åÂàÜÊûê„ÄÇ\n\n### 2.2.1. Á°ÆËÆ§profilingÊòØÂê¶ÂºÄÂêØ\n\n‰∫ÜËß£Êü•ËØ¢ËØ≠Âè•Â∫ïÂ±ÇÊâßË°åÁöÑËøáÁ®ãÔºö`select @@profiling;` ÊàñËÄÖ`show variables like '%profiling%' `Êü•ÁúãÊòØÂê¶ÂºÄÂêØËÆ°Âàí„ÄÇÂºÄÂêØÂÆÉÂèØ‰ª•ËÆ©MySQLÊî∂ÈõÜÂú®SQLÊâßË°åÊó∂ÊâÄ‰ΩøÁî®ÁöÑËµÑÊ∫êÊÉÖÂÜµÔºåÂëΩ‰ª§Â¶Ç‰∏ãÔºö\n\n```mysql\nmysql> select @@profiling;\nmysq1> show variables like 'profiling';\n```\n\n![image-20220712230716818](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117783.png)\n\nprofiling = 0‰ª£Ë°®ÂÖ≥Èó≠ÔºåÊàë‰ª¨ÈúÄË¶ÅÊääprofilingÊâìÂºÄÔºåÂç≥ËÆæÁΩÆ‰∏∫1Ôºõ\n\n```mysql\nmysql> set profiling = 1;\n```\n\nProfilingÂäüËÉΩÁî±MySQL‰ºöËØùÂèòÈáèÔºöprofilingÊéßÂà∂„ÄÇÈªòËÆ§ÊòØOFFÔºàÂÖ≥Èó≠Áä∂ÊÄÅÔºâ„ÄÇ\n\n### 2.2.2.Â§öÊ¨°ÊâßË°åÁõ∏ÂêåSQLÊü•ËØ¢\n\n```sql\nmysql> select * from employees;\n\nmysql> select * from employees;\n```\n\n### 2.2.3.Êü•Áúãprofiles\n\n```mysql\nmysql> show profiles #Êü•ËØ¢ÊâÄÊúâsqlËØ≠Âè•ÁöÑÂàÜÊûêÊ¶ÇËßà\n```\n\n![image-20220713001646187](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117582.png)\n\n### 2.2.4.Êü•Áúãprofile\n\n```mysql\nmysql> show profie;\n```\n\n![image-20220713001733244](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117949.png)\n\n```mysql\n mysql> show profie for query Query_ID;# Êü•ÁúãÊüê‰∏ÄÊ¨°sqlÊâßË°åÁöÑÂàÜÊûêËøáÁ®ã\n```\n\n![image-20220713001825251](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117654.png)\n\n![image-20220713001556760](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117926.png)\n\n## 2.3 MySQL5.7‰∏≠SQLÊâßË°åÂéüÁêÜ\n\nËøôÈáåÊàë‰ª¨ÈúÄË¶Å`ÊòæÁ§∫ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠òÊ®°Âºè`„ÄÇÂú®MySQL5.7‰∏≠Â¶Ç‰∏ãËÆæÁΩÆÔºö\n\n### 2.3.1.ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠ò\n\n```shell\nquery_cache_type=1\n```\n\n### 2.3.2.ÈáçÂêØMysqlÊúçÂä°\n\n```shell\nsystemctl restart mysqld\n```\n\n### 2.3.3.ÂºÄÂêØÊü•ËØ¢ËÆ°Âàí\n\n```mysql\nmysql> set profiling = 1;\n```\n\n### 2.3.4.ÊâßË°åËØ≠Âè•‰∏§Ê¨°\n\n```mysql\nselect * from departments;\n\nselect * from departments;\n```\n\n### 2.3.5.Êü•Áúãprofiles\n\n![image-20220713000901627](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117455.png)\n\n### 2.3.6.Êü•Áúãprofile\n\n![image-20220713000946556](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117965.png)\n\n![image-20220713001014156](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117166.png)\n\nÁªìËÆ∫‰∏çË®ÄËÄåÂñª.ÊâßË°åÁºñÂè∑10Êó∂,ÊØîÊâßË°åÁºñÂè∑9Êó∂Â∞ë‰∫ÜÂæàÂ§ö‰ø°ÊÅØ,‰ªéÊà™Âõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫Êü•ËØ¢ËØ≠Âè•Áõ¥Êé•‰ªéÁºìÂ≠ò‰∏≠Ëé∑ÂèñÊï∞ÊçÆ .\n\n- **Ê≥®ÊÑè1Ôºö**==SQLÂøÖÈ°ªÊó∂‰∏ÄËá¥ÁöÑ,Âê¶Âàô,‰∏çËÉΩÂëΩ‰∏≠ÁºìÂ≠ò.==\n\n‰æãÂ¶ÇÔºö\n\n```mysql\n#ËôΩÁÑ∂Êü•ËØ¢ÁªìÊûú‰∏ÄËá¥Ôºå ‰ΩÜÂπ∂Ê≤°ÊúâÂëΩ‰∏≠ÁºìÂ≠ò„ÄÇ\nselect * from mydb . mytbl where id=2\nselect * from mydb . mytbl where id>1 and id<3\n```\n\n- **Ê≥®ÊÑè2Ôºö**ÂêåÊ†∑ÁöÑÂºÄÂêØÁºìÂ≠òÁöÑÈÖçÁΩÆ‰ø°ÊÅØÂ¶ÇÊûúÂú®MySQL8‰∏≠Ê∑ªÂä†„ÄÇÈáçÂêØÊúçÂä°Êó∂‰ºöÊä•Èîô:\n\n```shell\n[ root@atguigu01 ~]# vim /etc/my.cnf\n[root@atguigu01 ~]# systemctl restart mysqld;\nJob for mysqld.service failed because the control process exited with error code. See\n\"systemctl status mysqld. service\" and \"journalctl -xe\" for details.\n```\n\nÂàÜÂà´Âú®MySQL5.7ÂíåMySQL8‰∏≠ÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§Ôºö\n\n```mysql\nmysql> show variables like '%query_ cache%';\n```\n\nMySQL5.7‰∏≠ÊòæÁ§∫Ôºö\n\n![image-20220713002324616](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117439.png)\n\nMySQL8.0‰∏≠ÊòæÁ§∫Ôºö\n\n![image-20220713002427047](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117438.png)\n\n## 2.4 SQLËØ≠Ê≥ïÈ°∫Â∫è\n\nÈöèÁùÄ MySQL ÁâàÊú¨ÁöÑÊõ¥Êñ∞Êç¢‰ª£ÔºåÂÖ∂‰ºòÂåñÂô®‰πüÂú®‰∏çÊñ≠ÁöÑÂçáÁ∫ßÔºå‰ºòÂåñÂô®‰ºöÂàÜÊûê‰∏çÂêåÊâßË°åÈ°∫Â∫è‰∫ßÁîüÁöÑÊÄßËÉΩÊ∂àËÄó‰∏çÂêåËÄåÂä®ÊÄÅË∞ÉÊï¥ÊâßË°åÈ°∫Â∫è„ÄÇ\n\nÈúÄÊ±ÇÔºöÊü•ËØ¢ÊØè‰∏™ÈÉ®Èó®Âπ¥ÈæÑÈ´ò‰∫é 20 Â≤ÅÁöÑ‰∫∫Êï∞‰∏îÈ´ò‰∫é 20 Â≤Å‰∫∫Êï∞‰∏çËÉΩÂ∞ë‰∫é 2 ‰∫∫ÔºåÊòæÁ§∫‰∫∫Êï∞ÊúÄÂ§öÁöÑÁ¨¨‰∏ÄÂêçÈÉ®Èó®‰ø°ÊÅØ„ÄÇ\n\n‰∏ãÈù¢ÊòØÁªèÂ∏∏Âá∫Áé∞ÁöÑÊü•ËØ¢È°∫Â∫è:\n\n![image-20220115174625139](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118286.png)]\n\n## 2.5 Oracle‰∏≠ÁöÑSQLÊâßË°åÊµÅÁ®ã(‰∫ÜËß£)\n\nOracle‰∏≠ÈááÁî®‰∫Ü==ÂÖ±‰∫´Ê±†==Êù•Âà§Êñ≠SQLËØ≠Âè•ÊòØÂê¶Â≠òÂú®ÁºìÂ≠òÂíåÊâßË°åËÆ°ÂàíÔºåÈÄöËøáËøô‰∏ÄÊ≠•È™§Êàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÂ∫îËØ•ÈááÁî®Á°¨Ëß£ÊûêËøòÊòØËΩØËß£Êûê„ÄÇ\n\nÊàë‰ª¨ÂÖàÊù•Áúã‰∏ãSQLÂú®Oracle‰∏≠ÁöÑÊâßË°åËøáÁ®ã:\n\n![image-20220713003902294](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118798.png)‰ªé‰∏äÈù¢ËøôÂº†Âõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫, SQLËØ≠Âè•Âú®Oracle‰∏≠ÁªèÂéÜ‰∫Ü‰ª•‰∏ãÁöÑÂá†‰∏™Ê≠•È™§„ÄÇ\n\n1. **ËØ≠Ê≥ïÊ£ÄÊü•**ÔºöÊ£ÄÊü•SQLÊãºÂÜôÊòØÂê¶Ê≠£Á°ÆÔºåÂ¶ÇÊûú‰∏çÊ≠£Á°ÆÔºåOracle ‰ºöÊä•ËØ≠Ê≥ïÈîôËØØ„ÄÇ\n2. **ËØ≠‰πâÊ£ÄÊü•**ÔºöÊ£ÄÊü•SQL‰∏≠ÁöÑËÆøÈóÆÂØπË±°ÊòØÂê¶Â≠òÂú®„ÄÇÊØîÂ¶ÇÊàë‰ª¨Âú®ÂÜôSELECTËØ≠Âè•ÁöÑÊó∂ÂÄôÔºåÂàóÂêçÂÜôÈîô‰∫ÜÔºåÁ≥ªÁªüÂ∞±‰ºöÊèêÁ§∫ÈîôËØØ„ÄÇËØ≠Ê≥ïÊ£ÄÊü•ÂíåËØ≠‰πâÊ£ÄÊü•ÁöÑ‰ΩúÁî®ÊòØ‰øùËØÅSQLËØ≠Âè•Ê≤°ÊúâÈîôËØØ„ÄÇ\n3. **ÊùÉÈôêÊ£ÄÊü•**ÔºöÁúãÁî®Êà∑ÊòØÂê¶ÂÖ∑Â§áËÆøÈóÆËØ•Êï∞ÊçÆÁöÑÊùÉÈôê„ÄÇ\n\nOracleÈÄöËøáÊ£ÄÊü•ÂÖ±‰∫´Ê±†ÊòØÂê¶Â≠òÂú®SQLËØ≠Âè•ÁöÑÊâßË°åËÆ°ÂàíÔºåÊù•Âà§Êñ≠ËøõË°åËΩØËß£Êûê,ËøòÊòØÁ°¨Ëß£Êûê„ÄÇÈÇ£ËΩØËß£ÊûêÂíåÁ°¨Ëß£ÊûêÂèàËØ•ÊÄé‰πàÁêÜËß£Âë¢?\n\nÂú®ÂÖ±‰∫´Ê±†‰∏≠ÔºåOracle È¶ñÂÖàÂØπSQLËØ≠Âè•ËøõË°å`HashËøêÁÆó`ÔºåÁÑ∂ÂêéÊ†πÊçÆHashÂÄºÂú®Â∫ìÁºìÂ≠ò(Library Cache)‰∏≠Êü•ÊâæÔºåÂ¶ÇÊûú`Â≠òÂú®SQLËØ≠Âè•ÁöÑÊâßË°åËÆ°Âàí`ÔºåÂ∞±Áõ¥Êé•ÊãøÊù•ÊâßË°åÔºåÁõ¥Êé•ËøõÂÖ•‚ÄúÊâßË°åÂô®‚ÄùÁöÑÁéØËäÇ,ËøôÂ∞±ÊòØ`ËΩØËß£Êûê`„ÄÇ\n\nÂ¶ÇÊûúÊ≤°ÊúâÊâæÂà∞SQLËØ≠Âè•ÂíåÊâßË°åËÆ°ÂàíÔºåOracle Â∞±ÈúÄË¶ÅÂàõÂª∫Ëß£ÊûêÊ†ëËøõË°åËß£ÊûêÔºåÁîüÊàêÊâßË°åËÆ°ÂàíÔºåËøõÂÖ•‚Äú‰ºòÂåñÂô®‚ÄùËøô‰∏™Ê≠•È™§,ËøôÂ∞±ÊòØ`Á°¨Ëß£Êûê`„ÄÇ\n\n5. **‰ºòÂåñÂô®**:‰ºòÂåñÂô®‰∏≠Â∞±ÊòØË¶ÅËøõË°åÁ°¨Ëß£ÊûêÔºå‰πüÂ∞±ÊòØÂÜ≥ÂÆöÊÄé‰πàÂÅöÔºåÊØîÂ¶ÇÂàõÂª∫Ëß£ÊûêÊ†ëÔºåÁîüÊàêÊâßË°åËÆ°Âàí„ÄÇ\n6. **ÊâßË°åÂô®**:ÂΩìÊúâ‰∫ÜËß£ÊûêÊ†ëÂíåÊâßË°åËÆ°Âàí‰πãÂêé,Â∞±Áü•ÈÅì‰∫ÜSQLËØ•ÊÄé‰πàË¢´ÊâßË°åÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Âú®ÊâßË°åÂô®‰∏≠ÊâßË°åËØ≠Âè•‰∫Ü„ÄÇ\n\nÂÖ±‰∫´Ê±†ÊòØOracle‰∏≠ÁöÑÊúØËØ≠ÔºåÂåÖÊã¨‰∫ÜÂ∫ìÁºìÂ≠ò,Êï∞ÊçÆÂ≠óÂÖ∏ÁºìÂÜ≤Âå∫Á≠â„ÄÇÊàë‰ª¨_‰∏äÈù¢Â∑≤ÁªèËÆ≤Âà∞‰∫ÜÂ∫ìÁºìÂ≠òÂå∫ÔºåÂÆÉ‰∏ªË¶ÅÁºìÂ≠òSQLËØ≠Âè•ÂíåÊâßË°åËÆ°Âàí„ÄÇËÄå`Êï∞ÊçÆÂ≠óÂÖ∏ÁºìÂÜ≤Âå∫`Â≠òÂÇ®ÁöÑÊòØOracle‰∏≠ÁöÑÂØπË±°ÂÆö‰πâ,ÊØîÂ¶ÇË°®„ÄÅËßÜÂõæ„ÄÅÁ¥¢ÂºïÁ≠âÂØπË±°„ÄÇÂΩìÂØπSQLËØ≠Âè•ËøõË°åËß£ÊûêÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÈúÄË¶ÅÁõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÔºå‰ºö‰ªéÊï∞ÊçÆÂ≠óÂÖ∏ÁºìÂÜ≤Âå∫‰∏≠ÊèêÂèñ„ÄÇ\n\n`Â∫ìÁºìÂ≠ò`Ëøô‰∏Ä‰∏™Ê≠•È™§ÔºåÂÜ≥ÂÆö‰∫ÜSQLËØ≠Âè•ÊòØÂê¶ÈúÄË¶ÅËøõË°åÁ°¨Ëß£Êûê„ÄÇ‰∏∫‰∫ÜÊèêÂçáSQLÁöÑÊâßË°åÊïàÁéá,Êàë‰ª¨Â∫îËØ•Â∞ΩÈáèÈÅøÂÖçÁ°¨Ëß£ÊûêÔºåÂõ†‰∏∫Âú®SQLÁöÑÊâßË°åËøáÁ®ã‰∏≠ÔºåÂàõÂª∫Ëß£ÊûêÊ†ëÔºåÁîüÊàêÊâßË°åËÆ°ÂàíÊòØÂæàÊ∂àËÄóËµÑÊ∫êÁöÑ„ÄÇ\n\n‰Ω†ÂèØËÉΩ‰ºöÈóÆÔºåÂ¶Ç‰ΩïÈÅøÂÖçÁ°¨Ëß£ÊûêÔºåÂ∞ΩÈáè‰ΩøÁî®ËΩØËß£ÊûêÂë¢?Âú®Oracle‰∏≠Ôºå`ÁªëÂÆöÂèòÈáè`ÊòØÂÆÉÁöÑ‰∏ÄÂ§ßÁâπËâ≤„ÄÇÁªëÂÆöÂèòÈáèÂ∞±ÊòØÂú®SQLËØ≠Âè•‰∏≠‰ΩøÁî®ÂèòÈáèÔºåÈÄöËøá‰∏çÂêåÁöÑÂèòÈáèÂèñÂÄºÊù•ÊîπÂèòSQLÁöÑÊâßË°åÁªìÊûú„ÄÇËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØËÉΩ`ÊèêÂçáËΩØËß£ÊûêÁöÑÂèØËÉΩÊÄß`Ôºå‰∏çË∂≥‰πãÂ§ÑÂú®‰∫éÂèØËÉΩ‰ºöÂØºËá¥ÁîüÊàêÁöÑÊâßË°åËÆ°Âàí‰∏çÂ§ü‰ºòÂåñÔºåÂõ†Ê≠§ÊòØÂê¶ÈúÄË¶ÅÁªëÂÆöÂèòÈáèËøòÈúÄË¶ÅËßÜÊÉÖÂÜµËÄåÂÆö„ÄÇ\n\n‰∏æ‰∏™‰æãÂ≠êÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑÊü•ËØ¢ËØ≠Âè•Ôºö\n\n```mysql\nSQL> select * from player where player_id = 10001;\n```\n\n‰Ω†‰πüÂèØ‰ª•‰ΩøÁî®ÁªëÂÆöÂèòÈáèÔºåÂ¶Ç:\n\n```mysql\nSOL> select * from plaver where plaver id = :plaver_id:\n```\n\nËøô‰∏§‰∏™Êü•ËØ¢ËØ≠Âè•ÁöÑÊïàÁéáÂú®Oracle‰∏≠ÊòØÂÆåÂÖ®‰∏çÂêåÁöÑ„ÄÇÂ¶ÇÊûú‰Ω†Âú®Êü•ËØ¢player. _id= 10001‰πãÂêé,Ëøò‰ºöÊü•ËØ¢10002„ÄÅ10003‰πãÁ±ªÁöÑÊï∞ÊçÆ,ÈÇ£‰πàÊØè- -Ê¨°Êü•ËØ¢ÈÉΩ‰ºöÂàõÂª∫‰∏Ä ‰∏™Êñ∞ÁöÑÊü•ËØ¢Ëß£Êûê„ÄÇ ËÄåÁ¨¨‰∫åÁßçÊñπÂºè‰ΩøÁî®‰∫ÜÁªëÂÆöÂèòÈáèÔºåÈÇ£‰πàÂú®Á¨¨‰∏Ä-Ê¨°Êü•ËØ¢‰πãÂêéÔºåÂú®ÂÖ±‰∫´Ê±†‰∏≠Â∞±‰ºöÂ≠òÂú®ËøôÁ±ªÊü•ËØ¢ÁöÑÊâßË°åËÆ°ÂàíÔºå‰πüÂ∞±ÊòØËΩØËß£Êûê„ÄÇ\n\nÂõ†Ê≠§ÔºåÊàë**‰ª¨ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁªëÂÆöÂèòÈáèÊù•ÂáèÂ∞ëÁ°¨Ëß£ÊûêÔºåÂáèÂ∞ëOracleÁöÑËß£ÊûêÂ∑•‰ΩúÈáè**„ÄÇ‰ΩÜÊòØËøôÁßçÊñπÂºè‰πüÊúâÁº∫ÁÇπÔºå‰ΩøÁî®Âä®ÊÄÅSQLÁöÑÊñπÂºèÔºåÂõ†‰∏∫ÂèÇÊï∞‰∏çÂêåÔºå‰ºöÂØºËá¥SQLÁöÑÊâßË°åÊïàÁéá‰∏çÂêåÔºåÂêåÊó∂SQL‰ºòÂåñ‰πü‰ºöÊØîËæÉÂõ∞Èöæ„ÄÇ\n\n==OracleÁöÑÊû∂ÊûÑÂõæÔºö==\n\n![image-20220713004228345](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118351.png)\n\n![](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118783.png)\n\n# 3. Êï∞ÊçÆÂ∫ìÁºìÂÜ≤Ê±†Ôºàbuffer poolÔºâ\n\n`InnoDB`Â≠òÂÇ®ÂºïÊìéÊòØ‰ª•È°µ‰∏∫Âçï‰ΩçÊù•ÁÆ°ÁêÜÂ≠òÂÇ®Á©∫Èó¥ÁöÑÔºåÊàë‰ª¨ËøõË°åÁöÑÂ¢ûÂà†ÊîπÊü•Êìç‰ΩúÂÖ∂ÂÆûÊú¨Ë¥®‰∏äÈÉΩÊòØÂú®ËÆøÈóÆÈ°µ Èù¢(ÂåÖÊã¨ËØªÈ°µÈù¢„ÄÅÂÜôÈ°µÈù¢„ÄÅÂàõÂª∫Êñ∞È°µÈù¢Á≠âÊìç‰Ωú)„ÄÇËÄåÁ£ÅÁõò I/O ÈúÄË¶ÅÊ∂àËÄóÁöÑÊó∂Èó¥ÂæàÂ§öÔºåËÄåÂú®ÂÜÖÂ≠ò‰∏≠ËøõË°åÊìç ‰ΩúÔºåÊïàÁéáÂàô‰ºöÈ´òÂæàÂ§öÔºå‰∏∫‰∫ÜËÉΩËÆ©Êï∞ÊçÆË°®ÊàñËÄÖÁ¥¢Âºï‰∏≠ÁöÑÊï∞ÊçÆÈöèÊó∂Ë¢´Êàë‰ª¨ÊâÄÁî®ÔºåDBMS ‰ºöÁî≥ËØ∑`Âç†Áî®ÂÜÖÂ≠òÊù•‰Ωú‰∏∫Êï∞ÊçÆÁºìÂÜ≤Ê±†`ÔºåÂú®ÁúüÊ≠£ËÆøÈóÆÈ°µÈù¢‰πãÂâçÔºåÈúÄË¶ÅÊääÂú®Á£ÅÁõò‰∏äÁöÑÈ°µÁºìÂ≠òÂà∞ÂÜÖÂ≠ò‰∏≠ÁöÑ`Buffer Pool`‰πãÂêéÊâçÂèØ‰ª•ËÆø ÈóÆ„ÄÇ\n\nËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØÂèØ‰ª•ËÆ©Á£ÅÁõòÊ¥ªÂä®ÊúÄÂ∞èÂåñÔºå‰ªéËÄå`ÂáèÂ∞ë‰∏éÁ£ÅÁõòÁõ¥Êé•ËøõË°å I/O ÁöÑÊó∂Èó¥` „ÄÇË¶ÅÁü•ÈÅìÔºåËøôÁßçÁ≠ñÁï•ÂØπÊèê Âçá SQL ËØ≠Âè•ÁöÑÊü•ËØ¢ÊÄßËÉΩÊù•ËØ¥Ëá≥ÂÖ≥ÈáçË¶Å„ÄÇÂ¶ÇÊûúÁ¥¢ÂºïÁöÑÊï∞ÊçÆÂú®ÁºìÂÜ≤Ê±†ÈáåÔºåÈÇ£‰πàËÆøÈóÆÁöÑÊàêÊú¨Â∞±‰ºöÈôç‰ΩéÂæàÂ§ö„ÄÇ\n\n## 3.1 ÁºìÂÜ≤Ê±† vs Êü•ËØ¢ÁºìÂ≠ò\n\n**ÁºìÂÜ≤Ê±†ÂíåÊü•ËØ¢ÁºìÂ≠òÊòØ‰∏Ä‰∏™‰∏úË•øÂêóÔºü‰∏çÊòØ„ÄÇ**\n\n### 3.1.1 ÁºìÂÜ≤Ê±†ÔºàBuffer PoolÔºâ\n\nÈ¶ñÂÖàÊàë‰ª¨ÈúÄË¶Å‰∫ÜËß£Âú® InnoDB Â≠òÂÇ®ÂºïÊìé‰∏≠ÔºåÁºìÂÜ≤Ê±†ÈÉΩÂåÖÊã¨‰∫ÜÂì™‰∫õ„ÄÇ\n\nÂú® InnoDB Â≠òÂÇ®ÂºïÊìé‰∏≠Êúâ‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆ‰ºöÊîæÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÁºìÂÜ≤Ê±†ÂàôÂç†‰∫ÜËøôÈÉ®ÂàÜÂÜÖÂ≠òÁöÑÂ§ßÈÉ®ÂàÜÔºåÂÆÉÁî®Êù•Â≠òÂÇ®ÂêÑÁßçÊï∞ÊçÆÁöÑÁºìÂ≠òÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫:\n\n![image-20220115175644920](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118698.png)\n\n‰ªéÂõæ‰∏≠Ôºå‰Ω†ËÉΩÁúãÂà∞InnoDBÁºìÂÜ≤Ê±†ÂåÖÊã¨‰∫ÜÊï∞ÊçÆÈ°µ„ÄÅÁ¥¢ÂºïÈ°µ„ÄÅÊèíÂÖ•ÁºìÂÜ≤„ÄÅÈîÅ‰ø°ÊÅØ„ÄÅËá™ÈÄÇÂ∫îHashÂíåÊï∞ÊçÆÂ≠óÂÖ∏‰ø°ÊÅØÁ≠â„ÄÇ\n\n**ÁºìÂ≠òÊ±†ÁöÑÈáçË¶ÅÊÄß:**\n\nÂØπ‰∫é‰ΩøÁî®`InnoDB`‰Ωú‰∏∫Â≠òÂÇ®ÂºïÊìéÁöÑË°®Êù•ËØ¥,‰∏çÁÆ°ÊòØÁî®‰∫éÂ≠òÂÇ®Áî®Êà∑Êï∞ÊçÆÁöÑÁ¥¢Âºï(ÂåÖÊã¨ËÅöÁ∞áÁ¥¢ÂºïÂíå‰∫åÁ∫ßÁ¥¢Âºï)ÔºåËøòÊòØÂêÑÁßçÁ≥ªÁªüÊï∞ÊçÆÔºåÈÉΩÊòØ‰ª•`È°µ`ÁöÑÂΩ¢ÂºèÂ≠òÊîæÂú®`Ë°®Á©∫Èó¥`‰∏≠ÁöÑ,ËÄåÊâÄË∞ìÁöÑË°®Á©∫Èó¥Âè™‰∏çËøáÊòØInnoDBÂØπÊñá‰ª∂Á≥ªÁªü‰∏ä‰∏Ä‰∏™ÊàñÂá†‰∏™ÂÆûÈôÖÊñá‰ª∂ÁöÑÊäΩË±°Ôºå‰πüÂ∞±ÊòØËØ¥Êàë‰ª¨ÁöÑÊï∞ÊçÆËØ¥Âà∞Â∫ïËøòÊòØÂ≠òÂÇ®Âú®Á£ÅÁõò‰∏äÁöÑ„ÄÇ‰ΩÜÊòØÂêÑ‰Ωç‰πüÈÉΩÁü•ÈÅìÔºåÁ£ÅÁõòÁöÑÈÄüÂ∫¶ÊÖ¢ÁöÑË∑ü‰πåÈæü‰∏ÄÊ†∑,ÊÄé‰πàËÉΩÈÖçÂæó‰∏ä‚Äú`Âø´Â¶ÇÈ£éÔºåÁñæÂ¶ÇÁîµ‚ÄùÁöÑCPU`Âë¢?ËøôÈáåÔºåÁºìÂÜ≤Ê±†ÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨Ê∂àÈô§CPUÂíåÁ£ÅÁõò‰πãÈó¥ÁöÑÈ∏øÊ≤ü„ÄÇÊâÄ‰ª•InnoDBÂ≠òÂÇ®Âºì|ÊìéÂú®Â§ÑÁêÜÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÊó∂ÔºåÂΩìÈúÄË¶ÅËÆøÈóÆÊüê‰∏™È°µÁöÑÊï∞ÊçÆÊó∂ÔºåÂ∞±‰ºöÊää`ÂÆåÊï¥ÁöÑÈ°µÁöÑÊï∞ÊçÆÂÖ®ÈÉ®Âä†ËΩΩÂà∞ÂÜÖÂ≠ò`‰∏≠Ôºå‰πüÂ∞±ÊòØËØ¥Âç≥‰ΩøÊàë‰ª¨Âè™ÈúÄË¶ÅËÆøÈóÆ‰∏Ä‰∏™È°µÁöÑ‰∏ÄÊù°ËÆ∞ÂΩïÔºåÈÇ£‰πüÈúÄË¶ÅÂÖàÊääÊï¥‰∏™È°µÁöÑÊï∞ÊçÆÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠„ÄÇÂ∞ÜÊï¥‰∏™È°µÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠ÂêéÂ∞±ÂèØ‰ª•ËøõË°åËØªÂÜôËÆøÈóÆ‰∫ÜÔºåÂú®ËøõË°åÂÆåËØªÂÜôËÆøÈóÆ‰πãÂêéÂπ∂‰∏çÁùÄÊÄ•ÊääËØ•È°µÂØπÂ∫îÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÈáäÊîæÊéâ,ËÄåÊòØÂ∞ÜÂÖ∂`ÁºìÂ≠ò`Ëµ∑Êù•,ËøôÊ†∑Â∞ÜÊù•ÊúâËØ∑Ê±ÇÂÜçÊ¨°ËÆøÈóÆËØ•È°µÈù¢Êó∂ÔºåÂ∞±ÂèØ‰ª•`ÁúÅÂéªÁ£ÅÁõòI0`ÁöÑÂºÄÈîÄ‰∫Ü„ÄÇ\n\n**ÁºìÂ≠òÂéüÂàôÔºö**\n\n‚Äú`‰ΩçÁΩÆ * È¢ëÊ¨°` ‚ÄùËøô‰∏™ÂéüÂàôÔºåÂèØ‰ª•Â∏ÆÊàë‰ª¨ÂØπ I/O ËÆøÈóÆÊïàÁéáËøõË°å‰ºòÂåñ„ÄÇ È¶ñÂÖàÔºå‰ΩçÁΩÆÂÜ≥ÂÆöÊïàÁéáÔºåÊèê‰æõÁºìÂÜ≤Ê±†Â∞±ÊòØ‰∏∫‰∫ÜÂú®ÂÜÖÂ≠ò‰∏≠ÂèØ‰ª•Áõ¥Êé•ËÆøÈóÆÊï∞ÊçÆ„ÄÇ\n\nÂÖ∂Ê¨°ÔºåÈ¢ëÊ¨°ÂÜ≥ÂÆö‰ºòÂÖàÁ∫ßÈ°∫Â∫è„ÄÇÂõ†‰∏∫ÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞èÊòØÊúâÈôêÁöÑÔºåÊØîÂ¶ÇÁ£ÅÁõòÊúâ 200GÔºå‰ΩÜÊòØÂÜÖÂ≠òÂè™Êúâ 16GÔºåÁºìÂÜ≤Ê±†Â§ßÂ∞èÂè™Êúâ 1GÔºåÂ∞±Êó†Ê≥ïÂ∞ÜÊâÄÊúâÊï∞ÊçÆÈÉΩÂä†ËΩΩÂà∞ÁºìÂÜ≤Ê±†ÈáåÔºåËøôÊó∂Â∞±Ê∂âÂèäÂà∞‰ºòÂÖàÁ∫ßÈ°∫Â∫èÔºå‰ºö `‰ºòÂÖàÂØπ‰ΩøÁî®È¢ëÊ¨°È´òÁöÑÁÉ≠Êï∞ÊçÆËøõË°åÂä†ËΩΩ`„ÄÇ\n\n**ÁºìÂÜ≤Ê±†ÁöÑÈ¢ÑËØªÁâπÊÄß:**\n\n‰∏Ä‰∏™ÁºìÂ≠ò‰∫ÜËß£‰∫ÜÁºìÂÜ≤Ê±†ÁöÑ‰ΩúÁî®‰πãÂêéÔºåÊàë‰ª¨ËøòÈúÄË¶Å‰∫ÜËß£ÁºìÂÜ≤Ê±†ÁöÑÂè¶‰∏Ä‰∏™ÁâπÊÄß: `È¢ÑËØª`„ÄÇ\n\nÁºìÂÜ≤Ê±†ÁöÑ‰ΩúÁî®Â∞±ÊòØÊèêÂçáI/0ÊïàÁéáÔºåËÄåÊàë‰ª¨ËøõË°åËØªÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÂ≠òÂú®‰∏Ä‰∏™‚ÄúÂ±ÄÈÉ®ÊÄßÂéüÁêÜ‚ÄùÔºå ‰πüÂ∞±ÊòØËØ¥Êàë‰ΩøÁî®‰∫Ü‰∏Ä‰∫õÊï∞ÊçÆÔºå`Â§ßÊ¶ÇÁéáËøò‰ºö‰ΩøÁî®ÂÆÉÂë®Âõ¥ÁöÑ‰∏Ä‰∫õÊï∞ÊçÆ`ÔºåÂõ†Ê≠§ÈááÁî®‚ÄúÈ¢ÑËØª‚ÄùÁöÑÊú∫Âà∂ÊèêÂâçÂä†ËΩΩÔºåÂèØ‰ª•ÂáèÂ∞ëÊú™Êù•ÂèØËÉΩÁöÑÁ£ÅÁõò1/OÊìç‰Ωú„ÄÇ\n\n### 3.1.2 Êü•ËØ¢ÁºìÂ≠ò\n\nÈÇ£‰πà‰ªÄ‰πàÊòØÊü•ËØ¢ÁºìÂ≠òÂë¢?\n\nÊü•ËØ¢ÁºìÂ≠òÊòØÊèêÂâçÊää `Êü•ËØ¢ÁªìÊûúÁºìÂ≠ò` Ëµ∑Êù•ÔºåËøôÊ†∑‰∏ãÊ¨°‰∏çÈúÄË¶ÅÊâßË°åÂ∞±ÂèØ‰ª•Áõ¥Êé•ÊãøÂà∞ÁªìÊûú„ÄÇÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂú® MySQL ‰∏≠ÁöÑÊü•ËØ¢ÁºìÂ≠òÔºå‰∏çÊòØÁºìÂ≠òÊü•ËØ¢ËÆ°ÂàíÔºåËÄåÊòØÊü•ËØ¢ÂØπÂ∫îÁöÑÁªìÊûú„ÄÇÂõ†‰∏∫ÂëΩ‰∏≠Êù°‰ª∂ËãõÂàªÔºåËÄå‰∏îÂè™Ë¶ÅÊï∞ÊçÆË°®ÂèëÁîüÂèòÂåñÔºåÊü•ËØ¢ÁºìÂ≠òÂ∞±‰ºöÂ§±ÊïàÔºåÂõ†Ê≠§ÂëΩ‰∏≠Áéá‰Ωé„ÄÇ\n\n## 3.2 ÁºìÂÜ≤Ê±†Â¶Ç‰ΩïËØªÂèñÊï∞ÊçÆ\n\nÁºìÂÜ≤Ê±†ÁÆ°ÁêÜÂô®‰ºöÂ∞ΩÈáèÂ∞ÜÁªèÂ∏∏‰ΩøÁî®ÁöÑÊï∞ÊçÆ‰øùÂ≠òËµ∑Êù•ÔºåÂú®Êï∞ÊçÆÂ∫ìËøõË°åÈ°µÈù¢ËØªÊìç‰ΩúÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖà‰ºöÂà§Êñ≠ËØ•È°µÈù¢ÊòØÂê¶Âú®ÁºìÂÜ≤Ê±†‰∏≠ÔºåÂ¶ÇÊûúÂ≠òÂú®Â∞±Áõ¥Êé•ËØªÂèñÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®ÔºåÂ∞±‰ºöÈÄöËøáÂÜÖÂ≠òÊàñÁ£ÅÁõòÂ∞ÜÈ°µÈù¢Â≠òÊîæÂà∞ÁºìÂÜ≤Ê±†‰∏≠ÂÜçËøõË°åËØªÂèñ„ÄÇ\nÁºìÂ≠òÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÁªìÊûÑÂíå‰ΩúÁî®Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö\n\n![image-20220115175859026](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118451.png)\n\n\n\n**==Â¶ÇÊûúÊàë‰ª¨ÊâßË°åSQLËØ≠Âè•ÁöÑÊó∂ÂÄôÊõ¥Êñ∞‰∫ÜÁºìÂ≠òÊ±†‰∏≠ÁöÑÊï∞ÊçÆÔºåÈÇ£‰πàËøô‰∫õÊï∞ÊçÆ‰ºöÈ©¨‰∏äÂêåÊ≠•Âà∞Á£ÅÁõò‰∏äÂêó?==** \n\nÂÆûÈôÖ‰∏äÔºåÂΩìÊàë‰ª¨ÂØπÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑËÆ∞ÂΩïËøõË°å‰øÆÊîπÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖà‰ºö‰øÆÊîπÁºìÂÜ≤Ê±†‰∏≠È°µÈáåÈù¢ÁöÑËÆ∞ÂΩï‰ø°ÊÅØ,ÁÑ∂ÂêéÊï∞ÊçÆÂ∫ì‰ºö`‰ª•‰∏ÄÂÆöÁöÑÈ¢ëÁéáÂà∑Êñ∞`Âà∞Á£ÅÁõò‰∏ä„ÄÇÊ≥®ÊÑèÂπ∂‰∏çÊòØÊØèÊ¨°ÂèëÁîüÊõ¥Êñ∞Êìç‰ΩúÔºåÈÉΩ‰ºöÁ´ãÂàªËøõË°åÁ£ÅÁõòÂõûÂÜô„ÄÇÁºìÂÜ≤Ê±†‰ºöÈááÁî®‰∏ÄÁßçÂè´ÂÅö`checkpointÁöÑÊú∫Âà∂`Â∞ÜÊï∞ÊçÆÂõûÂÜôÂà∞Á£ÅÁõò‰∏ä,ËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØÊèêÂçá‰∫ÜÊï∞ÊçÆÂ∫ìÁöÑÊï¥‰ΩìÊÄßËÉΩ„ÄÇ\n\nÊØîÂ¶ÇÔºåÂΩì`ÁºìÂÜ≤Ê±†‰∏çÂ§üÁî®`Êó∂ÔºåÈúÄË¶ÅÈáäÊîæÊéâ‰∏Ä‰∫õ‰∏çÂ∏∏Áî®ÁöÑÈ°µÔºåÊ≠§Êó∂Â∞±ÂèØ‰ª•Âº∫Ë°åÈááÁî®checkpointÁöÑÊñπÂºèÔºåÂ∞Ü‰∏çÂ∏∏Áî®ÁöÑËÑèÈ°µÂõûÂÜôÂà∞Á£ÅÁõò‰∏ä,ÁÑ∂ÂêéÂÜç‰ªéÁºìÂÜ≤Ê±†‰∏≠Â∞ÜËøô‰∫õÈ°µÈáäÊîæÊéâ„ÄÇËøôÈáåËÑèÈ°µ(dirty page)ÊåáÁöÑÊòØÁºìÂÜ≤Ê±†‰∏≠Ë¢´‰øÆÊîπËøáÁöÑÈ°µÔºå‰∏éÁ£ÅÁõò‰∏äÁöÑÊï∞ÊçÆÈ°µ‰∏ç‰∏ÄËá¥„ÄÇ\n\n## 3.3 Êü•Áúã/ËÆæÁΩÆÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞è\n\nÂ¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑÊòØMySQL MyISAMÂ≠òÂÇ®ÂºïÊìé,ÂÆÉÂè™ÁºìÂ≠òÁ¥¢ÂºïÔºå ‰∏çÁºìÂ≠òÊï∞ÊçÆÔºåÂØπÂ∫îÁöÑÈîÆÁºìÂ≠òÂèÇÊï∞\n`key_buffer_size`Ôºå‰Ω†ÂèØ‰ª•Áî®ÂÆÉËøõË°åÊü•Áúã„ÄÇ\n\nÂ¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑÊòØInnoDBÂ≠òÂÇ®ÂºïÊìéÔºåÂèØ‰ª•ÈÄöËøáÊü•Áúã `innodb_buffer_pool_size` ÂèòÈáèÊù•Êü•ÁúãÁºìÂÜ≤Ê±†ÁöÑÂ§ß Â∞è„ÄÇÂëΩ‰ª§Â¶Ç‰∏ã:\n\n```sql\nshow variables like 'innodb_buffer_pool_size';\n```\n\n![image-20220115175953098](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118317.png)\n\n‰Ω†ËÉΩÁúãÂà∞Ê≠§Êó∂ InnoDB ÁöÑÁºìÂÜ≤Ê±†Â§ßÂ∞èÂè™Êúâ 134217728/1024/1024=128MB„ÄÇÊàë‰ª¨ÂèØ‰ª•‰øÆÊîπÁºìÂÜ≤Ê±†Â§ßÂ∞èÔºåÊØîÂ¶Ç Êîπ‰∏∫256MBÔºåÊñπÊ≥ïÂ¶Ç‰∏ã:\n\n```sql\nset global innodb_buffer_pool_size = 268435456;\n```\n\n\n\n![image-20220115180020887](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118511.png)\n\nÊàñËÄÖ:\n\n```sql\n[server]\ninnodb_buffer_pool_size = 268435456\n```\n\nÁÑ∂ÂêéÂÜçÊù•Áúã‰∏ã‰øÆÊîπÂêéÁöÑÁºìÂÜ≤Ê±†Â§ßÂ∞èÔºåÊ≠§Êó∂Â∑≤ÊàêÂäü‰øÆÊîπÊàê‰∫Ü 256 MB:\n\n![image-20220115180055102](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118502.png)\n\n\n\n\n\n## 3.4 Â§ö‰∏™Buffer PoolÂÆû‰æã\n\nBuffer PoolÊú¨Ë¥®ÊòØInnoDBÂêëÊìç‰ΩúÁ≥ªÁªüÁî≥ËØ∑ÁöÑ‰∏ÄÂùó`ËøûÁª≠ÁöÑÂÜÖÂ≠òÁ©∫Èó¥`ÔºåÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÔºåËÆøÈóÆBuffer Pool‰∏≠ÁöÑÊï∞ÊçÆÈÉΩÈúÄË¶Å`Âä†ÈîÅ`Â§ÑÁêÜ„ÄÇÂú®Buffer PoolÁâπÂà´Â§ßËÄå‰∏îÂ§öÁ∫øÁ®ãÂπ∂ÂèëËÆøÈóÆÁâπÂà´È´òÁöÑÊÉÖÂÜµ‰∏ãÔºåÂçï‰∏ÄÁöÑBuffer PoolÂèØËÉΩ‰ºöÂΩ±ÂìçËØ∑Ê±ÇÁöÑÂ§ÑÁêÜÈÄüÂ∫¶„ÄÇÊâÄ‰ª•Âú®Buffer PoolÁâπÂà´Â§ßÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÂèØ‰ª•ÊääÂÆÉ‰ª¨`ÊãÜÂàÜÊàêËã•Âπ≤‰∏™Â∞èÁöÑBuffer Pool` ÔºåÊØè‰∏™Buffer PoolÈÉΩÁß∞‰∏∫‰∏Ä‰∏™`ÂÆû‰æã`ÔºåÂÆÉ‰ª¨ÈÉΩÊòØÁã¨Á´ãÁöÑÔºåÁã¨Á´ãÁöÑÂéªÁî≥ËØ∑ÂÜÖÂ≠òÁ©∫Èó¥ÔºåÁã¨Á´ãÁöÑÁÆ°ÁêÜÂêÑÁßçÈìæË°®„ÄÇÊâÄ‰ª•Âú®Â§öÁ∫øÁ®ãÂπ∂ÂèëËÆøÈóÆÊó∂Âπ∂‰∏ç‰ºöÁõ∏‰∫íÂΩ±ÂìçÔºå‰ªéËÄåÊèêÈ´òÂπ∂ÂèëÂ§ÑÁêÜËÉΩÂäõ„ÄÇ\n\nÊàë‰ª¨ÂèØ‰ª•Âú®ÊúçÂä°Âô®ÂêØÂä®ÁöÑÊó∂ÂÄôÈÄöËøáËÆæÁΩÆ`innodb_buffer_pool_instances` ÁöÑÂÄºÊù•‰øÆÊîπBuffer PoolÂÆû‰æãÁöÑ‰∏™Êï∞,\n\nÊØîÊñπËØ¥ËøôÊ†∑:\n\n```sql\n[server]\ninnodb_buffer_pool_instances = 2\n```\n\nËøôÊ†∑Â∞±Ë°®ÊòéÊàë‰ª¨Ë¶ÅÂàõÂª∫2‰∏™ `Buffer Pool` ÂÆû‰æã„ÄÇ\n\nÊàë‰ª¨Áúã‰∏ãÂ¶Ç‰ΩïÊü•ÁúãÁºìÂÜ≤Ê±†ÁöÑ‰∏™Êï∞Ôºå‰ΩøÁî®ÂëΩ‰ª§:\n\n```sql\nshow variables like 'innodb_buffer_pool_instances';\n```\n\n![image-20220115180223458](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118918.png)\n\nÈÇ£ÊØè‰∏™ `Buffer Pool` ÂÆû‰æãÂÆûÈôÖÂç†Â§öÂ∞ëÂÜÖÂ≠òÁ©∫Èó¥Âë¢?ÂÖ∂ÂÆû‰ΩøÁî®Ëøô‰∏™ÂÖ¨ÂºèÁÆóÂá∫Êù•ÁöÑÔºö`innodb_buffer_pool_size/innodb_buffer_pool_instances`\n\n‰πüÂ∞±ÊòØÊÄªÂÖ±ÁöÑÂ§ßÂ∞èÈô§‰ª•ÂÆû‰æãÁöÑ‰∏™Êï∞ÔºåÁªìÊûúÂ∞±ÊòØÊØè‰∏™`Buffer Pool` ÂÆû‰æãÂç†Áî®ÁöÑÂ§ßÂ∞è„ÄÇ\n\n‰∏çËøá‰πü‰∏çÊòØËØ¥Buffer PoolÂÆû‰æãÂàõÂª∫ÁöÑË∂äÂ§öË∂äÂ•ΩÔºåÂàÜÂà´`ÁÆ°ÁêÜÂêÑ‰∏™Buffer Pool‰πüÊòØÈúÄË¶ÅÊÄßËÉΩÂºÄÈîÄ`ÁöÑÔºåInnoDBËßÑÂÆö:ÂΩìinnodb_buffer_pool_sizeÁöÑÂÄºÂ∞è‰∫é1GÁöÑÊó∂ÂÄôËÆæÁΩÆÂ§ö‰∏™ÂÆû‰æãÊòØÊó†ÊïàÁöÑÔºåInnoDB‰ºöÈªòËÆ§Êääinnodb_ buffe _pool_instances ÁöÑÂÄº‰øÆÊîπ‰∏∫1„ÄÇËÄåÊàë‰ª¨ÈºìÂä±Âú®Buffer PpolÂ§ß‰∫éÊàñÁ≠â‰∫é1GÁöÑÊó∂ÂÄôËÆæÁΩÆÂ§ö‰∏™Buffer PoolÂÆû‰æã„ÄÇ\n\n## 3.5 ÂºïÁî≥ÈóÆÈ¢ò\n\nBuffer Pool ÊòØ MySQL ÂÜÖÂ≠òÁªìÊûÑ‰∏≠ÂçÅÂàÜÊ†∏ÂøÉÁöÑ‰∏Ä‰∏™ÁªÑÊàêÔºå‰Ω†ÂèØ‰ª•ÂÖàÊääÂÆÉÊÉ≥Ë±°Êàê‰∏Ä‰∏™ÈªëÁõíÂ≠ê„ÄÇ\n\n**ÈªëÁõí‰∏ãÁöÑÊõ¥Êñ∞Êï∞ÊçÆÊµÅÁ®ã**\n\nÂΩìÊàë‰ª¨Êü•ËØ¢Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºå‰ºöÂÖàÂéªBuffer Pool‰∏≠Êü•ËØ¢„ÄÇÂ¶ÇÊûúBuffer Pool‰∏≠‰∏çÂ≠òÂú®,Â≠òÂÇ®Âºì|Êìé‰ºöÂÖàÂ∞ÜÊï∞ÊçÆ‰ªéÁ£ÅÁõòÂä†ËΩΩÂà∞Buffer Pool‰∏≠ÔºåÁÑ∂ÂêéÂ∞ÜÊï∞ÊçÆËøîÂõûÁªôÂÆ¢Êà∑Á´Ø;ÂêåÁêÜÔºåÂΩìÊàë‰ª¨Êõ¥Êñ∞Êüê‰∏™Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúËøô‰∏™Êï∞ÊçÆ‰∏çÂ≠òÂú®‰∫éBuffer Pool,ÂêåÊ†∑‰ºöÂÖàÊï∞ÊçÆÂä†ËΩΩËøõÊù•ÔºåÁÑ∂Âêé‰øÆÊîπ‰øÆÊîπÂÜÖÂ≠òÁöÑÊï∞ÊçÆ„ÄÇË¢´‰øÆÊîπËøáÁöÑÊï∞ÊçÆ‰ºöÂú®‰πãÂêéÁªü‰∏ÄÂà∑ÂÖ•Á£ÅÁõò„ÄÇ\n\n![image-20220115180314323](https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118256.png)\n\nËøô‰∏™ËøáÁ®ãÁúã‰ººÊ≤°Âï•ÈóÆÈ¢òÔºåÂÆûÂàôÊòØÊúâÈóÆÈ¢òÁöÑ„ÄÇÂÅáËÆæÊàë‰ª¨‰øÆÊîπBuffer Pool‰∏≠ÁöÑÊï∞ÊçÆÊàêÂäüÔºå‰ΩÜÊòØËøòÊ≤°Êù•ÂæóÂèäÂ∞ÜÊï∞ÊçÆÂà∑ÂÖ•Á£ÅÁõòMySQLÂ∞±ÊåÇ‰∫ÜÊÄé‰πàÂäû?ÊåâÁÖß‰∏äÂõæÁöÑÈÄªËæëÔºåÊ≠§Êó∂Êõ¥Êñ∞‰πãÂêéÁöÑÊï∞ÊçÆÂè™Â≠òÂú®‰∫éBuffer Pool‰∏≠,Â¶ÇÊûúÊ≠§Êó∂MySQLÂÆïÊú∫‰∫ÜÔºåËøôÈÉ®ÂàÜÊï∞ÊçÆÂ∞Ü‰ºöÊ∞∏‰πÖÂú∞‰∏¢Â§±;\n\nÊàëÊõ¥Êñ∞Âà∞‰∏ÄÂçäÁ™ÅÁÑ∂ÂèëÁîüÈîôËØØ‰∫ÜÔºåÊÉ≥Ë¶ÅÂõûÊªöÂà∞Êõ¥Êñ∞‰πãÂâçÁöÑÁâàÊú¨ÔºåËØ•ÊÄé‰πàÂäûÔºüËøûÊï∞ÊçÆÊåÅ‰πÖÂåñÁöÑ‰øùËØÅ„ÄÅ‰∫ãÂä°ÂõûÊªöÈÉΩÂÅö‰∏çÂà∞ËøòË∞à‰ªÄ‰πàÂ¥©Ê∫ÉÊÅ¢Â§ç?\n\nÁ≠îÊ°àÔºö**Redo Log & Undo Log**\n\n","slug":"ÈÄªËæëÊû∂ÊûÑÂàÜÊûê","published":1,"updated":"2024-04-01T15:42:22.340Z","comments":1,"layout":"post","photos":[],"_id":"cluh5pive000ags2v0bgqbii0","content":"<h1 id=\"1-ÈÄªËæëÊû∂ÊûÑÂâñÊûê\"><a href=\"#1-ÈÄªËæëÊû∂ÊûÑÂâñÊûê\" class=\"headerlink\" title=\"1. ÈÄªËæëÊû∂ÊûÑÂâñÊûê\"></a>1. ÈÄªËæëÊû∂ÊûÑÂâñÊûê</h1><h2 id=\"1-1-ÊúçÂä°Âô®Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±Ç\"><a href=\"#1-1-ÊúçÂä°Âô®Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±Ç\" class=\"headerlink\" title=\"1.1 ÊúçÂä°Âô®Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±Ç\"></a>1.1 ÊúçÂä°Âô®Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±Ç</h2><p>È¶ñÂÖàMySQLÊòØÂÖ∏ÂûãÁöÑC&#x2F;SÊû∂ÊûÑÔºåÂç≥<code>Client/Server</code> Êû∂ÊûÑ‚Äò Ôºå ÊúçÂä°Âô®Á´ØÁ®ãÂ∫è‰ΩøÁî®ÁöÑmysqld„ÄÇ</p>\n<p>‰∏çËÆ∫ÂÆ¢Êà∑Á´ØËøõÁ®ãÂíåÊúçÂä°Âô®ËøõÁ®ãÊòØÈááÁî®Âì™ÁßçÊñπÂºèËøõË°åÈÄö‰ø°ÔºåÊúÄÂêéÂÆûÁé∞ÁöÑÊïàÊûúÈÉΩÊòØ:<strong>ÂÆ¢Êà∑Á´ØËøõÁ®ãÂêëÊúçÂä°Âô®ËøõÁ®ãÂèëÈÄÅ‰∏ÄÊÆµÊñáÊú¨(SQLËØ≠Âè•) ,ÊúçÂä°Âô®ËøõÁ®ãÂ§ÑÁêÜÂêéÂÜçÂêëÂÆ¢Êà∑Á´ØËøõÁ®ãÂèëÈÄÅ‰∏ÄÊÆµÊñáÊú¨(Â§ÑÁêÜÁªìÊûú)</strong></p>\n<p>ÈÇ£ÊúçÂä°Âô®ËøõÁ®ãÂØπÂÆ¢Êà∑Á´ØËøõÁ®ãÂèëÈÄÅÁöÑËØ∑Ê±ÇÂÅö‰∫Ü‰ªÄ‰πàÂ§ÑÁêÜÔºåÊâçËÉΩ‰∫ßÁîüÊúÄÂêéÁöÑÂ§ÑÁêÜÁªìÊûúÂë¢?ËøôÈáå‰ª•Êü•ËØ¢ËØ∑Ê±Ç‰∏∫‰æãÂ±ïÁ§∫Ôºö</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116081.png\" alt=\"image-20220709175522383\"></p>\n<p>‰∏ãÈù¢ÂÖ∑‰ΩìÂ±ïÂºÄÁúã‰∏Ä‰∏ã:(ÈíàÂØπMySQL5.7)</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116304.png\" alt=\"image-20220115171412362\"></p>\n<p><strong>ÂàÜÊûê</strong></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116078.png\"></p>\n<h2 id=\"1-2-Connectors\"><a href=\"#1-2-Connectors\" class=\"headerlink\" title=\"1.2 Connectors\"></a>1.2 Connectors</h2><p>ConnectorsÊåáÁöÑÊòØ‰∏çÂêåËØ≠Ë®Ä‰∏≠‰∏éSQLÁöÑ‰∫§‰∫í„ÄÇMySQLÈ¶ñÂÖàÊòØ‰∏Ä ‰∏™ÁΩëÁªúÁ®ãÂ∫èÔºåÂú®TCP‰πã‰∏äÂÆö‰πâ‰∫ÜËá™Â∑±ÁöÑÂ∫îÁî®Â±ÇÂçèËÆÆ„ÄÇÊâÄ‰ª•Ë¶Å‰ΩøÁî®MySQL,Êàë‰ª¨ÂèØ‰ª•ÁºñÂÜô‰ª£Á†ÅÔºåË∑üMySQL Server<code>Âª∫Á´ãTCPËøûÊé•</code>Ôºå‰πãÂêéÊåâÁÖßÂÖ∂ÂÆö‰πâÂ•ΩÁöÑÂçèËÆÆËøõË°å‰∫§‰∫í„ÄÇÊàñËÄÖÊØîËæÉÊñπ‰æøÁöÑÂäûÊ≥ïÊòØË∞ÉÁî®SDKÔºåÊØîÂ¶ÇNative C API„ÄÅJDBC„ÄÅ PHPÁ≠âÂêÑËØ≠ Ë®ÄMySQL Connector,ÊàñËÄÖÈÄöËøáODBC„ÄÇ ‰ΩÜ&#x3D;&#x3D;ÈÄöËøáSDKÊù•ËÆøÈóÆMySQLÔºåÊú¨Ë¥®‰∏äËøòÊòØÂú®TCPËøûÊé•‰∏äÈÄöËøáMySQLÂçèËÆÆË∑üMySQLËøõË°å‰∫§‰∫í&#x3D;&#x3D;„ÄÇ</p>\n<p>Êé•‰∏ãÊù•ÁöÑMySQL ServerÁªìÊûÑÂèØ‰ª•ÂàÜ‰∏∫Â¶Ç‰∏ãÁöÑ‰∏âÂ±ÇÔºö</p>\n<h2 id=\"1-3-Á¨¨-1-Â±ÇÔºöËøûÊé•Â±Ç\"><a href=\"#1-3-Á¨¨-1-Â±ÇÔºöËøûÊé•Â±Ç\" class=\"headerlink\" title=\"1.3 Á¨¨ 1 Â±ÇÔºöËøûÊé•Â±Ç\"></a>1.3 Á¨¨ 1 Â±ÇÔºöËøûÊé•Â±Ç</h2><p>Á≥ªÁªü(ÂÆ¢Êà∑Á´Ø)ËÆøÈóÆ MySQL ÊúçÂä°Âô®ÂâçÔºåÂÅöÁöÑÁ¨¨‰∏Ä‰ª∂‰∫ãÂ∞±ÊòØÂª∫Á´ã <code>TCP</code> ËøûÊé•„ÄÇ ÁªèËøá‰∏âÊ¨°Êè°ÊâãÂª∫Á´ãËøûÊé•ÊàêÂäüÂêéÔºåMySQL ÊúçÂä°Âô®ÂØπ <code>TCP</code> ‰º†ËæìËøáÊù•ÁöÑË¥¶Âè∑ÂØÜÁ†ÅÂÅöË∫´‰ªΩËÆ§ËØÅ„ÄÅÊùÉÈôêËé∑Âèñ„ÄÇ</p>\n<ul>\n<li>Áî®Êà∑ÂêçÊàñÂØÜÁ†Å‰∏çÂØπÔºå‰ºöÊî∂Âà∞‰∏Ä‰∏™ Access denied for user ÈîôËØØÔºåÂÆ¢Êà∑Á´ØÁ®ãÂ∫èÁªìÊùüÊâßË°å</li>\n<li>Áî®Êà∑ÂêçÂØÜÁ†ÅËÆ§ËØÅÈÄöËøáÔºå‰ºö‰ªéÊùÉÈôêË°®Êü•Âá∫Ë¥¶Âè∑Êã•ÊúâÁöÑÊùÉÈôê‰∏éËøûÊé•ÂÖ≥ËÅîÔºå‰πãÂêéÁöÑÊùÉÈôêÂà§Êñ≠ÈÄªËæëÔºåÈÉΩÂ∞Ü‰æùËµñ‰∫éÊ≠§Êó∂ËØªÂà∞ÁöÑÊùÉÈôê</li>\n</ul>\n<p><code>TCP</code> ËøûÊé•Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÂøÖÈ°ªË¶ÅÂàÜÈÖçÁªô‰∏Ä‰∏™Á∫øÁ®ã‰∏ìÈó®‰∏éËøô‰∏™ÂÆ¢Êà∑Á´ØÁöÑ‰∫§‰∫í„ÄÇÊâÄ‰ª•Ëøò‰ºöÊúâ‰∏™Á∫øÁ®ãÊ±†ÔºåÂéªËµ∞ÂêéÈù¢ÁöÑÊµÅÁ®ã„ÄÇÊØè‰∏Ä‰∏™ËøûÊé•‰ªéÁ∫øÁ®ãÊ±†‰∏≠Ëé∑ÂèñÁ∫øÁ®ãÔºåÁúÅÂéª‰∫ÜÂàõÂª∫ÂíåÈîÄÊØÅÁ∫øÁ®ãÁöÑÂºÄÈîÄ„ÄÇ</p>\n<p><strong>Êé•ÁùÄÊàë‰ª¨Êù•ÊÄùËÄÉ‰∏Ä‰∏™ÈóÆÈ¢ò</strong></p>\n<p>&#x3D;&#x3D;‰∏Ä‰∏™Á≥ªÁªüÂè™‰ºöÂíåMySQLÊúçÂä°Âô®Âª∫Á´ã‰∏Ä‰∏™ËøûÊé•ÂêóÔºüÂè™ËÉΩÊúâ‰∏Ä‰∏™Á≥ªÁªüÂíåMySQLÊúçÂä° Âô®Âª∫Á´ãËøûÊé•ÂêóÔºü&#x3D;&#x3D;<br>ÂΩìÁÑ∂‰∏çÊòØÔºåÂ§ö‰∏™Á≥ªÁªüÈÉΩÂèØ‰ª•ÂíåMySQLÊúçÂä°Âô®Âª∫Á´ãËøûÊé•ÔºåÊØè‰∏™Á≥ªÁªüÂª∫Á´ãÁöÑËøûÊé•ËÇØÂÆö‰∏çÊ≠¢‰∏Ä‰∏™„ÄÇÊâÄ‰ª•Ôºå‰∏∫‰∫ÜËß£ÂÜ≥TCPÊó†ÈôêÂàõÂª∫‰∏éTCPÈ¢ëÁπÅÂàõÂª∫ÈîÄÊØÅÂ∏¶Êù•ÁöÑËµÑÊ∫êËÄóÂ∞Ω„ÄÅÊÄßËÉΩ‰∏ãÈôçÈóÆÈ¢ò„ÄÇMySQLÊúçÂä°Âô®ÈáåÊúâ‰∏ìÈó®ÁöÑ<code>TCPËøûÊé•Ê±†</code>ÈôêÂà∂ËøûÊé•Êï∞ÔºåÈááÁî®<code>ÈïøËøûÊé•Ê®°Âºè</code>Â§çÁî®TCPËøûÊé•,Êù•Ëß£ÂÜ≥‰∏äËø∞ÈóÆÈ¢ò„ÄÇ</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116686.png\" alt=\"image-20220709192708094\"></p>\n<p><code>TCP</code>ËøûÊé•Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÂøÖÈ°ªË¶ÅÂàÜÈÖçÁªô‰∏Ä‰∏™Á∫øÁ®ã‰∏ìÈó®‰∏éËøô‰∏™ÂÆ¢Êà∑Á´ØÁöÑ‰∫§‰∫í„ÄÇÊâÄ‰ª•Ëøò‰ºöÊúâ‰∏™Á∫øÁ®ãÊ±†ÔºåÂéªËµ∞ÂêéÈù¢ÁöÑÊµÅÁ®ã„ÄÇÊØè‰∏Ä‰∏™ËøûÊé•‰ªéÁ∫øÁ®ãÊ±†‰∏≠Ëé∑ÂèñÁ∫øÁ®ãÔºåÁúÅÂéª‰∫ÜÂàõÂª∫ÂíåÈîÄÊØÅÁ∫øÁ®ãÁöÑÂºÄÈîÄ„ÄÇ</p>\n<p>Ëøô‰∫õÂÜÖÂÆπÊàë‰ª¨ÈÉΩÂΩíÁ∫≥Âà∞<code>MySQL</code>ÁöÑËøûÊé•ÁÆ°ÁêÜÁªÑ‰ª∂‰∏≠„ÄÇ</p>\n<p>ÊâÄ‰ª•&#x3D;&#x3D;ËøûÊé•ÁÆ°ÁêÜÁöÑËÅåË¥£ÊòØË¥üË¥£ËÆ§ËØÅ„ÄÅÁÆ°ÁêÜËøûÊé•„ÄÅËé∑ÂèñÊùÉÈôê‰ø°ÊÅØ&#x3D;&#x3D;„ÄÇ</p>\n<h2 id=\"1-4-Á¨¨-2-Â±ÇÔºöÊúçÂä°Â±Ç\"><a href=\"#1-4-Á¨¨-2-Â±ÇÔºöÊúçÂä°Â±Ç\" class=\"headerlink\" title=\"1.4 Á¨¨ 2 Â±ÇÔºöÊúçÂä°Â±Ç\"></a>1.4 Á¨¨ 2 Â±ÇÔºöÊúçÂä°Â±Ç</h2><p>Á¨¨‰∫åÂ±ÇÊû∂ÊûÑ‰∏ªË¶ÅÂÆåÊàêÂ§ßÂ§öÊï∞ÁöÑÊ†∏ÂøÉÊúçÂä°ÂäüËÉΩÔºåÂ¶ÇSQLÊé•Âè£Ôºå Âπ∂ÂÆåÊàêÁºìÂ≠òÁöÑÊü•ËØ¢ÔºåSQLÁöÑÂàÜÊûêÂíå‰ºòÂåñÂèäÈÉ®ÂàÜÂÜÖÁΩÆÂáΩÊï∞ÁöÑÊâßË°å„ÄÇÊâÄÊúâË∑®Â≠òÂÇ®ÂºïÊìéÁöÑÂäüËÉΩ‰πüÂú®Ëøô‰∏ÄÂ±ÇÂÆûÁé∞ÔºåÂ¶ÇËøáÁ®ã„ÄÅÂáΩÊï∞Á≠â„ÄÇ</p>\n<p>Âú®ËØ•Â±ÇÔºåÊúçÂä°Âô®‰ºö<strong>Ëß£ÊûêÊü•ËØ¢</strong>Âπ∂ÂàõÂª∫Áõ∏Â∫îÁöÑÂÜÖÈÉ®<strong>Ëß£ÊûêÊ†ë</strong>ÔºåÂπ∂ÂØπÂÖ∂ÂÆåÊàêÁõ∏Â∫îÁöÑ<strong>‰ºòÂåñ</strong>ÔºöÂ¶ÇÁ°ÆÂÆöÊü•ËØ¢Ë°®ÁöÑÈ°∫Â∫èÔºåÊòØÂê¶Âà©Áî®Á¥¢ÂºïÁ≠âÔºåÊúÄÂêéÁîüÊàêÁõ∏Â∫îÁöÑÊâßË°åÊìç‰Ωú„ÄÇ</p>\n<p>&#x3D;&#x3D;Â¶ÇÊûúÊòØSELECTËØ≠Âè•ÔºåÊúçÂä°Âô®Ëøò‰ºöÊü•ËØ¢ÂÜÖÈÉ®ÁöÑÁºìÂ≠ò&#x3D;&#x3D;„ÄÇÂ¶ÇÊûúÁºìÂ≠òÁ©∫Èó¥Ë∂≥Â§üÂ§ßÔºåËøôÊ†∑Âú®Ëß£ÂÜ≥Â§ßÈáèËØªÊìç‰ΩúÁöÑÁéØÂ¢É‰∏≠ËÉΩÂ§üÂæàÂ•ΩÁöÑÊèêÂçáÁ≥ªÁªüÁöÑÊÄßËÉΩ„ÄÇ</p>\n<ul>\n<li><p><strong>SQL InterfaceÔºöSQLÊé•Âè£</strong></p>\n<ul>\n<li>Êé•Êî∂Áî®Êà∑ÁöÑ SQL ÂëΩ‰ª§ÔºåÂπ∂‰∏îËøîÂõûÁî®Êà∑ÈúÄË¶ÅÊü•ËØ¢ÁöÑÁªìÊûú„ÄÇÊØîÂ¶Ç <code>SELECT ... FROM</code> Â∞±ÊòØË∞ÉÁî® SQL Interface</li>\n<li>MySQL ÊîØÊåÅ DMLÔºàÊï∞ÊçÆÊìç‰ΩúËØ≠Ë®ÄÔºâ„ÄÅDDLÔºàÊï∞ÊçÆÂÆö‰πâËØ≠Ë®ÄÔºâ„ÄÅÂ≠òÂÇ®ËøáÁ®ã„ÄÅËßÜÂõæ„ÄÅËß¶ÂèëÂô®„ÄÅËá™ÂÆö‰πâÂáΩÊï∞Á≠âÂ§öÁßç SQL ËØ≠Ë®ÄÊé•Âè£</li>\n</ul>\n</li>\n<li><p><strong>ParserÔºöËß£ÊûêÂô®</strong></p>\n<ul>\n<li>Âú®Ëß£ÊûêÂô®‰∏≠ÂØπ SQL ËØ≠Âè•ËøõË°åËØ≠Ê≥ïÂàÜÊûê„ÄÅËØ≠‰πâÂàÜÊûê„ÄÇÂ∞Ü SQL ËØ≠Âè•ÂàÜËß£ÊàêÊï∞ÊçÆÁªìÊûÑÔºåÂπ∂Â∞ÜËøô‰∏™ÁªìÊûÑ‰º†ÈÄíÂà∞ÂêéÁª≠Ê≠•È™§Ôºå‰ª•Âêé SQL ËØ≠Âè•ÁöÑ‰º†ÈÄíÂíåÂ§ÑÁêÜÂ∞±ÊòØÂü∫‰∫éËøô‰∏™ÁªìÊûÑÁöÑ„ÄÇÂ¶ÇÊûúÂú®ÂàÜËß£ÊûÑÊàê‰∏≠ÈÅáÂà∞ÈîôËØØÔºåÈÇ£‰πàÂ∞±ËØ¥ÊòéËøô‰∏™ SQL ËØ≠Âè•ÊòØ‰∏çÂêàÁêÜÁöÑ„ÄÇ</li>\n<li>Âú® SQL ÂëΩ‰ª§‰º†ÈÄíÂà∞Ëß£ÊûêÂô®ÁöÑÊó∂ÂÄô‰ºöË¢´Ëß£ÊûêÂô®È™åËØÅÂíåËß£ÊûêÔºåÂπ∂‰∏∫ÂÖ∂ÂàõÂª∫ <code>ËØ≠Ê≥ïÊ†ë</code>ÔºåÂπ∂Ê†πÊçÆÊï∞ÊçÆÂ≠óÂÖ∏‰∏∞ÂØåÊü•ËØ¢ËØ≠Ê≥ïÊ†ëÔºå‰ºö <code>È™åËØÅËØ•ÂÆ¢Êà∑Á´ØÊòØÂê¶ÂÖ∑ÊúâÊâßË°åËØ•Êü•ËØ¢ÁöÑÊùÉÈôê</code> „ÄÇÂàõÂª∫Â•ΩËØ≠Ê≥ïÊ†ëÂêéÔºåMySQL Ëøò‰ºöÂØπ SQL Êü•ËØ¢ËøõË°åËØ≠Ê≥ï‰∏äÁöÑ‰ºòÂåñÔºåËøõË°åÊü•ËØ¢ÈáçÂÜô„ÄÇ</li>\n</ul>\n</li>\n<li><p><strong>OptimizerÔºöÊü•ËØ¢‰ºòÂåñÂô®</strong></p>\n<ul>\n<li><p>SQL ËØ≠Âè•Âú®ËØ≠Ê≥ïËß£Êûê‰πãÂêé„ÄÅÊü•ËØ¢‰πãÂâç‰ºö‰ΩøÁî®Êü•ËØ¢‰ºòÂåñÂô®Á°ÆÂÆö SQL ËØ≠Âè•ÁöÑÊâßË°åË∑ØÂæÑÔºåÁîüÊàê‰∏Ä‰∏™ <code>ÊâßË°åËÆ°Âàí</code> „ÄÇ</p>\n</li>\n<li><p>Ëøô‰∏™ÊâßË°åËÆ°ÂàíË°®ÊòéÂ∫îËØ• <code>‰ΩøÁî®Âì™‰∫õÁ¥¢Âºï</code> ËøõË°åÊü•ËØ¢ÔºàÂÖ®Ë°®Ê£ÄÁ¥¢ËøòÊòØ‰ΩøÁî®Á¥¢ÂºïÊ£ÄÁ¥¢ÔºâÔºåË°®‰πãÈó¥ÁöÑËøûÊé•È°∫Â∫èÂ¶Ç‰ΩïÔºåÊúÄÂêé‰ºöÊåâÁÖßÊâßË°åËÆ°Âàí‰∏≠ÁöÑÊ≠•È™§Ë∞ÉÁî®Â≠òÂÇ®ÂºïÊìéÊèê‰æõÁöÑÊñπÊ≥ïÊù•ÁúüÊ≠£ÁöÑÊâßË°åÊü•ËØ¢ÔºåÂπ∂Â∞ÜÊü•ËØ¢ÁªìÊûúËøîÂõûÁªôÁî®Êà∑„ÄÇ</p>\n</li>\n<li><p>ÂÆÉ‰ΩøÁî®‚Äú <code>ÈÄâÂèñ-ÊäïÂΩ±-ËøûÊé•</code> ‚ÄùÁ≠ñÁï•ËøõË°åÊü•ËØ¢„ÄÇ‰æãÂ¶Ç:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> id,name <span class=\"keyword\">FROM</span> student <span class=\"keyword\">WHERE</span> gender <span class=\"operator\">=</span> <span class=\"string\">&#x27;Â•≥&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>Ëøô‰∏™ SELECT Êü•ËØ¢ÂÖàÊ†πÊçÆ WHERE ËØ≠Âè•ËøõË°åÈÄâÂèñ ÔºåËÄå‰∏çÊòØÂ∞ÜË°®ÂÖ®ÈÉ®Êü•ËØ¢Âá∫Êù•‰ª•ÂêéÂÜçËøõË°å gender ËøáÊª§„ÄÇ Ëøô‰∏™ SELECT Êü•ËØ¢ÂÖàÊ†πÊçÆ id Âíå name ËøõË°åÂ±ûÊÄßÊäïÂΩ± ÔºåËÄå‰∏çÊòØÂ∞ÜÂ±ûÊÄßÂÖ®ÈÉ®ÂèñÂá∫‰ª•ÂêéÂÜçËøõË°åËøáÊª§ÔºåÂ∞ÜËøô‰∏§‰∏™Êü•ËØ¢Êù°‰ª∂ ËøûÊé•Ëµ∑Êù•ÁîüÊàêÊúÄÁªàÊü•ËØ¢ÁªìÊûú„ÄÇ</p>\n</li>\n</ul>\n</li>\n<li><p><strong>Caches &amp; Buffers: Êü•ËØ¢ÁºìÂ≠òÁªÑ‰ª∂</strong></p>\n<ul>\n<li>MySQLÂÜÖÈÉ®Áª¥ÊåÅÁùÄ‰∏Ä‰∫õ Cache Âíå BufferÔºåÊØîÂ¶Ç Query Cache Áî®Êù•ÁºìÂ≠ò‰∏ÄÊù° SELECT ËØ≠Âè•ÁöÑÊâßË°åÁªìÊûúÔºåÂ¶ÇÊûúËÉΩÂ§üÂú®ÂÖ∂‰∏≠ÊâæÂà∞ÂØπÂ∫îÁöÑÊü•ËØ¢ÁªìÊûúÔºåÈÇ£‰πàÂ∞±‰∏çÂøÖÂÜçËøõË°åÊü•ËØ¢Ëß£Êûê„ÄÅ‰ºòÂåñÂíåÊâßË°åÁöÑÊï¥‰∏™ËøáÁ®ã‰∫ÜÔºåÁõ¥Êé•Â∞ÜÁªìÊûúÂèçÈ¶àÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</li>\n<li>Ëøô‰∏™ÁºìÂ≠òÊú∫Âà∂ÊòØÁî±‰∏ÄÁ≥ªÂàóÂ∞èÁºìÂ≠òÁªÑÊàêÁöÑ„ÄÇÊØîÂ¶ÇË°®ÁºìÂ≠òÔºåËÆ∞ÂΩïÁºìÂ≠òÔºåkeyÁºìÂ≠òÔºåÊùÉÈôêÁºìÂ≠òÁ≠â „ÄÇ</li>\n<li>Ëøô‰∏™Êü•ËØ¢ÁºìÂ≠òÂèØ‰ª•Âú® <code>‰∏çÂêåÂÆ¢Êà∑Á´Ø‰πãÈó¥ÂÖ±‰∫´</code> „ÄÇ</li>\n<li>‰ªé MySQL 5.7.20 ÂºÄÂßãÔºå‰∏çÊé®Ëçê‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÔºåÂπ∂Âú® <code>MySQL 8.0‰∏≠Âà†Èô§</code> „ÄÇ</li>\n</ul>\n<figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Â∞èÊïÖ‰∫ãÔºö</span><br><span class=\"line\">Â¶ÇÊûúÊàëÈóÆ‰Ω†9+8√ó16-3√ó2√ó17ÁöÑÂÄºÊòØÂ§öÂ∞ëÔºå‰Ω†ÂèØËÉΩ‰ºöÁî®ËÆ°ÁÆóÂô®ÂéªÁÆó‰∏Ä‰∏ãÔºåÊúÄÁªàÁªìÊûú35„ÄÇÂ¶ÇÊûúÂÜçÈóÆ‰Ω†‰∏ÄÈÅç9+8√ó16-</span><br><span class=\"line\">3√ó2√ó17ÁöÑÂÄºÊòØÂ§öÂ∞ëÔºå‰Ω†ËøòÁî®ÂÜçÂÇªÂëµÂëµÁöÑÂÜçÁÆó‰∏ÄÈÅçÂêóÔºüÊàë‰ª¨ÂàöÂàöÂ∑≤ÁªèÁÆóËøá‰∫ÜÔºåÁõ¥Êé•ËØ¥Á≠îÊ°àÂ∞±Â•Ω‰∫Ü„ÄÇ</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"1-5-Á¨¨-3-Â±ÇÔºöÂºïÊìéÂ±Ç\"><a href=\"#1-5-Á¨¨-3-Â±ÇÔºöÂºïÊìéÂ±Ç\" class=\"headerlink\" title=\"1.5 Á¨¨ 3 Â±ÇÔºöÂºïÊìéÂ±Ç\"></a>1.5 Á¨¨ 3 Â±ÇÔºöÂºïÊìéÂ±Ç</h2><p>ÂíåÂÖ∂ÂÆÉÊï∞ÊçÆÂ∫ìÁõ∏ÊØîÔºåMySQLÊúâÁÇπ‰∏é‰ºó‰∏çÂêåÔºåÂÆÉÁöÑÊû∂ÊûÑÂèØ‰ª•Âú®Â§öÁßç‰∏çÂêåÂú∫ÊôØ‰∏≠Â∫îÁî®Âπ∂ÂèëÊå•ËâØÂ•Ω‰ΩúÁî®Ôºå‰∏ªË¶Å‰ΩìÁé∞Âú®Â≠òÂÇ®ÂºïÊìéÁöÑÊû∂ÊûÑ‰∏äÔºåÊèí‰ª∂ÂºèÁöÑÂ≠òÂÇ®ÂºïÊìéÊû∂ÊûÑÂ∞ÜÊü•ËØ¢Â§ÑÁêÜÂíåÂÖ∂ÂÆÉÁöÑÁ≥ªÁªü‰ªªÂä°‰ª•ÂèäÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÊèêÂèñÁõ∏ÂàÜÁ¶ª„ÄÇËøôÁßçÊû∂ÊûÑÂèØ‰ª•Ê†πÊçÆ‰∏öÂä°ÁöÑÈúÄÊ±ÇÂíåÂÆûÈôÖÈúÄË¶ÅÈÄâÊã©ÂêàÈÄÇÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇÂêåÊó∂ÂºÄÊ∫êÁöÑ MySQLËøò<strong>ÂÖÅËÆ∏ÂºÄÂèë‰∫∫ÂëòËÆæÁΩÆËá™Â∑±ÁöÑÂ≠òÂÇ®ÂºïÊìé</strong>„ÄÇ</p>\n<p>ËøôÁßçÈ´òÊïàÁöÑÊ®°ÂùóÂåñÊû∂ÊûÑ‰∏∫ÈÇ£‰∫õÂ∏åÊúõ‰∏ìÈó®ÈíàÂØπÁâπÂÆöÂ∫îÁî®Á®ãÂ∫èÈúÄÊ±Ç(‰æãÂ¶ÇÊï∞ÊçÆ‰ªìÂ∫ì„ÄÅ‰∫ãÂä°Â§ÑÁêÜÊàñÈ´òÂèØÁî®ÊÄßÊÉÖÂÜµ)ÁöÑ‰∫∫Êèê‰æõ‰∫ÜÂ∑®Â§ßÁöÑÂ•ΩÂ§ÑÔºåÂêåÊó∂‰∫´Âèó‰ΩøÁî®‰∏ÄÁªÑÁã¨Á´ã‰∫é‰ªª‰ΩïÊé•Âè£ÂíåÊúçÂä°ÁöÑ‰ºòÂäøÂ≠òÂÇ®ÂºïÊìé„ÄÇ</p>\n<p>Êèí‰ª∂ÂºèÂ≠òÂÇ®ÂºïÊìéÂ±ÇÔºàStorage EnginesÔºâÔºå&#x3D;&#x3D;ÁúüÊ≠£ÁöÑË¥üË¥£‰∫ÜMySQL‰∏≠Êï∞ÊçÆÁöÑÂ≠òÂÇ®ÂíåÊèêÂèñÔºåÂØπÁâ©ÁêÜÊúçÂä°Âô®Á∫ßÂà´Áª¥Êä§ÁöÑÂ∫ïÂ±ÇÊï∞ÊçÆÊâßË°åÊìç‰Ωú&#x3D;&#x3D; ÔºåÊúçÂä°Âô®ÈÄöËøá API ‰∏éÂ≠òÂÇ®ÂºïÊìéËøõË°åÈÄö‰ø°„ÄÇ‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìéÂÖ∑ÊúâÁöÑÂäüËÉΩ‰∏çÂêåÔºåËøôÊ†∑Êàë‰ª¨ÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÂÆûÈôÖÈúÄË¶ÅËøõË°åÈÄâÂèñ„ÄÇ</p>\n<p>MySQL 8.0.25 ÈªòËÆ§ÊîØÊåÅÁöÑÂ≠òÂÇ®ÂºïÊìéÂ¶Ç‰∏ã:</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116558.png\" alt=\"image-20220115171937681\"></p>\n<h2 id=\"1-6-Â≠òÂÇ®Â±Ç\"><a href=\"#1-6-Â≠òÂÇ®Â±Ç\" class=\"headerlink\" title=\"1.6 Â≠òÂÇ®Â±Ç\"></a>1.6 Â≠òÂÇ®Â±Ç</h2><p>ÊâÄÊúâÁöÑÊï∞ÊçÆÔºåÊï∞ÊçÆÂ∫ì„ÄÅË°®ÁöÑÂÆö‰πâÔºåË°®ÁöÑÊØè‰∏ÄË°åÁöÑÂÜÖÂÆπÔºåÁ¥¢ÂºïÔºåÈÉΩÊòØÂ≠òÂú® <code>Êñá‰ª∂Á≥ªÁªü</code> ‰∏äÔºå‰ª• <code>Êñá‰ª∂</code> ÁöÑÊñπÂºèÂ≠ò Âú®ÁöÑÔºåÂπ∂ÂÆåÊàê‰∏éÂ≠òÂÇ®ÂºïÊìéÁöÑ‰∫§‰∫í„ÄÇÂΩìÁÑ∂Êúâ‰∫õÂ≠òÂÇ®ÂºïÊìéÊØîÂ¶ÇInnoDBÔºå‰πüÊîØÊåÅ‰∏ç‰ΩøÁî®Êñá‰ª∂Á≥ªÁªüÁõ¥Êé•ÁÆ°ÁêÜË£∏ËÆæÂ§áÔºå‰ΩÜÁé∞‰ª£Êñá‰ª∂Á≥ªÁªüÁöÑÂÆûÁé∞‰ΩøÂæóËøôÊ†∑ÂÅöÊ≤°ÊúâÂøÖË¶Å‰∫Ü„ÄÇÂú®Êñá‰ª∂Á≥ªÁªü‰πã‰∏ãÔºåÂèØ‰ª•‰ΩøÁî®Êú¨Âú∞Á£ÅÁõòÔºåÂèØ‰ª•‰ΩøÁî® DAS„ÄÅNAS„ÄÅSANÁ≠âÂêÑÁßçÂ≠òÂÇ®Á≥ªÁªü„ÄÇ</p>\n<h2 id=\"1-7-Â∞èÁªì\"><a href=\"#1-7-Â∞èÁªì\" class=\"headerlink\" title=\"1.7 Â∞èÁªì\"></a>1.7 Â∞èÁªì</h2><p>MySQL Êû∂ÊûÑÂõæÊú¨ËäÇÂºÄÁØáÊâÄÁ§∫„ÄÇ‰∏ãÈù¢‰∏∫‰∫ÜÁÜüÊÇâ SQL ÊâßË°åÊµÅÁ®ãÊñπ‰æøÔºåÊàë‰ª¨ÂèØ‰ª•ÁÆÄÂåñÂ¶Ç‰∏ã:</p>\n<p><img src=\"https://blog-images-1309598269.cos.ap-beijing.myqcloud.com/blogImgs/202206300055402.png\" alt=\"image-20220115172118991\"></p>\n<p>ÁÆÄÂåñ‰∏∫‰∏âÂ±ÇÁªìÊûÑÔºö</p>\n<ol>\n<li>ËøûÊé•Â±ÇÔºöÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®Á´ØÂª∫Á´ãËøûÊé•ÔºåÂÆ¢Êà∑Á´ØÂèëÈÄÅ SQL Ëá≥ÊúçÂä°Âô®Á´Ø;</li>\n<li>SQL Â±ÇÔºàÊúçÂä°Â±ÇÔºâÔºöÂØπ SQL ËØ≠Âè•ËøõË°åÊü•ËØ¢Â§ÑÁêÜÔºõ‰∏éÊï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÂÇ®ÊñπÂºèÊó†ÂÖ≥;</li>\n<li>Â≠òÂÇ®ÂºïÊìéÂ±ÇÔºö‰∏éÊï∞ÊçÆÂ∫ìÊñá‰ª∂Êâì‰∫§ÈÅìÔºåË¥üË¥£Êï∞ÊçÆÁöÑÂ≠òÂÇ®ÂíåËØªÂèñ„ÄÇ</li>\n</ol>\n<h1 id=\"2-SQL-ÊâßË°åÊµÅÁ®ã\"><a href=\"#2-SQL-ÊâßË°åÊµÅÁ®ã\" class=\"headerlink\" title=\"2. SQL ÊâßË°åÊµÅÁ®ã\"></a>2. SQL ÊâßË°åÊµÅÁ®ã</h1><h2 id=\"2-1-MySQL-‰∏≠ÁöÑ-SQLÊâßË°åÊµÅÁ®ã\"><a href=\"#2-1-MySQL-‰∏≠ÁöÑ-SQLÊâßË°åÊµÅÁ®ã\" class=\"headerlink\" title=\"2.1 MySQL ‰∏≠ÁöÑ SQLÊâßË°åÊµÅÁ®ã\"></a>2.1 MySQL ‰∏≠ÁöÑ SQLÊâßË°åÊµÅÁ®ã</h2><p>&#x3D;&#x3D;MySQLÁöÑÊü•ËØ¢ÊµÅÁ®ã:&#x3D;&#x3D;</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116406.png\" alt=\"image-20220115172223043\"></p>\n<h3 id=\"2-1-1-Êü•ËØ¢ÁºìÂ≠ò\"><a href=\"#2-1-1-Êü•ËØ¢ÁºìÂ≠ò\" class=\"headerlink\" title=\"2.1.1 Êü•ËØ¢ÁºìÂ≠ò\"></a>2.1.1 <strong>Êü•ËØ¢ÁºìÂ≠ò</strong></h3><p>Server Â¶ÇÊûúÂú®Êü•ËØ¢ÁºìÂ≠ò‰∏≠ÂèëÁé∞‰∫ÜËøôÊù° SQL ËØ≠Âè•ÔºåÂ∞±‰ºöÁõ¥Êé•Â∞ÜÁªìÊûúËøîÂõûÁªôÂÆ¢Êà∑Á´Ø;Â¶ÇÊûúÊ≤° ÊúâÔºåÂ∞±ËøõÂÖ•Âà∞Ëß£ÊûêÂô®Èò∂ÊÆµ„ÄÇÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂõ†‰∏∫Êü•ËØ¢ÁºìÂ≠òÂæÄÂæÄÊïàÁéá‰∏çÈ´òÔºåÊâÄ‰ª•Âú® MySQL 8.0 ‰πãÂêéÂ∞±ÊäõÂºÉ ‰∫ÜËøô‰∏™ÂäüËÉΩ„ÄÇ</p>\n<p><strong>Â§ßÂ§öÊï∞ÊÉÖÂÜµÊü•ËØ¢ÁºìÂ≠òÂ∞±ÊòØ‰∏™È∏°ËÇãÔºå‰∏∫‰ªÄ‰πàÂë¢?</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> employee_id,last_name <span class=\"keyword\">FROM</span> employees <span class=\"keyword\">WHERE</span> employee_id <span class=\"operator\">=</span> <span class=\"number\">101</span>;</span><br></pre></td></tr></table></figure>\n\n<p>Êü•ËØ¢ÁºìÂ≠òÊòØÊèêÂâçÊääÊü•ËØ¢ÁªìÊûúÁºìÂ≠òËµ∑Êù•ÔºåËøôÊ†∑‰∏ãÊ¨°‰∏çÈúÄË¶ÅÊâßË°åÂ∞±ÂèØ‰ª•Áõ¥Êé•ÊãøÂà∞ÁªìÊûú„ÄÇÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂú® MySQL ‰∏≠ÁöÑÊü•ËØ¢ÁºìÂ≠òÔºå‰∏çÊòØÁºìÂ≠òÊü•ËØ¢ËÆ°ÂàíÔºåËÄåÊòØÊü•ËØ¢ÂØπÂ∫îÁöÑÁªìÊûú„ÄÇËøôÂ∞±ÊÑèÂë≥ÁùÄÊü•ËØ¢ÂåπÈÖçÁöÑ <code>È≤ÅÊ£íÊÄßÂ§ßÂ§ßÈôç‰Ωé</code>ÔºåÂè™Êúâ <code>Áõ∏ÂêåÁöÑÊü•ËØ¢Êìç‰ΩúÊâç‰ºöÂëΩ‰∏≠Êü•ËØ¢ÁºìÂ≠ò</code>„ÄÇ‰∏§‰∏™Êü•ËØ¢ËØ∑Ê±ÇÂú®‰ªª‰ΩïÂ≠óÁ¨¶‰∏äÁöÑ‰∏çÂêåÔºà‰æãÂ¶ÇÔºöÁ©∫Ê†º„ÄÅÊ≥®Èáä„ÄÅ Â§ßÂ∞èÂÜôÔºâÔºåÈÉΩ‰ºöÂØºËá¥ÁºìÂ≠ò‰∏ç‰ºöÂëΩ‰∏≠„ÄÇÂõ†Ê≠§ MySQL ÁöÑ <code>Êü•ËØ¢ÁºìÂ≠òÂëΩ‰∏≠Áéá‰∏çÈ´ò</code> „ÄÇ</p>\n<p>ÂêåÊó∂ÔºåÂ¶ÇÊûúÊü•ËØ¢ËØ∑Ê±Ç‰∏≠ÂåÖÂê´Êüê‰∫õÁ≥ªÁªüÂáΩÊï∞„ÄÅÁî®Êà∑Ëá™ÂÆö‰πâÂèòÈáèÂíåÂáΩÊï∞„ÄÅ‰∏Ä‰∫õÁ≥ªÁªüË°®ÔºåÂ¶Ç mysql „ÄÅ information_schema„ÄÅ performance_schema Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°®ÔºåÈÇ£Ëøô‰∏™ËØ∑Ê±ÇÂ∞±‰∏ç‰ºöË¢´ÁºìÂ≠ò„ÄÇ‰ª•Êüê‰∫õÁ≥ªÁªüÂáΩÊï∞‰∏æ‰æãÔºåÂèØËÉΩÂêåÊ†∑ÁöÑÂáΩÊï∞ÁöÑ‰∏§Ê¨°Ë∞ÉÁî®‰ºö‰∫ßÁîü‰∏ç‰∏ÄÊ†∑ÁöÑÁªìÊûúÔºåÊØîÂ¶ÇÂáΩÊï∞ <code>NOW</code> ÔºåÊØèÊ¨°Ë∞ÉÁî®ÈÉΩ‰ºö‰∫ßÁîüÊúÄÊñ∞ÁöÑÂΩìÂâçÊó∂Èó¥ÔºåÂ¶ÇÊûúÂú®‰∏Ä‰∏™Êü•ËØ¢ËØ∑Ê±Ç‰∏≠Ë∞ÉÁî®‰∫ÜËøô‰∏™ÂáΩÊï∞ÔºåÈÇ£Âç≥‰ΩøÊü•ËØ¢ËØ∑Ê±ÇÁöÑÊñáÊú¨‰ø°ÊÅØÈÉΩ‰∏ÄÊ†∑ÔºåÈÇ£‰∏çÂêåÊó∂Èó¥ÁöÑ‰∏§Ê¨°Êü•ËØ¢‰πüÂ∫îËØ•ÂæóÂà∞‰∏çÂêåÁöÑÁªìÊûúÔºåÂ¶ÇÊûúÂú®Á¨¨‰∏ÄÊ¨°Êü•ËØ¢Êó∂Â∞±ÁºìÂ≠ò‰∫ÜÔºåÈÇ£Á¨¨‰∫åÊ¨°Êü•ËØ¢ÁöÑÊó∂ÂÄôÁõ¥Êé•‰ΩøÁî®Á¨¨‰∏ÄÊ¨°Êü•ËØ¢ÁöÑÁªìÊûúÂ∞±ÊòØÈîôËØØÁöÑ!</p>\n<p>Ê≠§Â§ñÔºåÊó¢ÁÑ∂ÊòØÁºìÂ≠òÔºåÈÇ£Â∞±ÊúâÂÆÉ <code>ÁºìÂ≠òÂ§±ÊïàÁöÑÊó∂ÂÄô</code>„ÄÇMySQL ÁöÑÁºìÂ≠òÁ≥ªÁªü‰ºöÁõëÊµãÊ∂âÂèäÂà∞ÁöÑÊØèÂº†Ë°®ÔºåÂè™Ë¶ÅËØ•Ë°®ÁöÑÁªìÊûÑÊàñËÄÖÊï∞ÊçÆË¢´‰øÆÊîπÔºåÂ¶ÇÂØπËØ•Ë°®‰ΩøÁî®‰∫Ü <code>INSERT</code>„ÄÅ<code>UPDATE</code>„ÄÅ<code>DELETE</code>„ÄÅ<code>TRUNCATE TABLE</code>„ÄÅ<code>ALTER TABLE</code>„ÄÅ<code>DROP TABLE</code>Êàñ <code>DROP DATABASE</code> ËØ≠Âè•ÔºåÈÇ£‰ΩøÁî®ËØ•Ë°®ÁöÑÊâÄÊúâÈ´òÈÄüÁºìÂ≠òÊü•ËØ¢ÈÉΩÂ∞ÜÂèò‰∏∫Êó†ÊïàÂπ∂‰ªéÈ´òÈÄüÁºìÂ≠ò‰∏≠Âà†Èô§ÔºÅÂØπ‰∫é <code>Êõ¥Êñ∞ÂéãÂäõÂ§ßÁöÑÊï∞ÊçÆÂ∫ì</code>Êù•ËØ¥ÔºåÊü•ËØ¢ÁºìÂ≠òÁöÑÂëΩ‰∏≠Áéá‰ºöÈùûÂ∏∏‰Ωé„ÄÇ</p>\n<p><strong><font color=red>ÊÄª‰πãÔºåÂõ†‰∏∫Êü•ËØ¢ÁºìÂ≠òÂæÄÂæÄÂºäÂ§ß‰∫éÂà©ÔºåÊü•ËØ¢ÁºìÂ≠òÁöÑÂ§±ÊïàÈùûÂ∏∏È¢ëÁπÅ„ÄÇ</font></strong></p>\n<p>‰∏ÄËà¨Âª∫ËÆÆÂ§ßÂÆ∂Âú®ÈùôÊÄÅË°®Èáå‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÔºå‰ªÄ‰πàÂè´<code>ÈùôÊÄÅË°®</code>Âë¢?Â∞±ÊòØ‰∏ÄËà¨Êàë‰ª¨ÊûÅÂ∞ëÊõ¥Êñ∞ÁöÑË°®„ÄÇÊØîÂ¶ÇÔºå‰∏Ä‰∏™Á≥ªÁªüÈÖçÁΩÆË°®„ÄÅÂ≠óÂÖ∏Ë°®ÔºåËøôÂº†Ë°®‰∏äÁöÑÊü•ËØ¢ÊâçÈÄÇÂêà‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠ò„ÄÇÂ•ΩÂú®MySQL‰πüÊèê‰æõ‰∫ÜËøôÁßç‚Äú<code>ÊåâÈúÄ‰ΩøÁî®</code>‚ÄùÁöÑÊñπÂºè„ÄÇ‰Ω†ÂèØ‰ª•Â∞Ümy.cnfÂèÇÊï∞ query_ <em>cache</em> type  ËÆæÁΩÆÊàêDEMANDÔºå‰ª£Ë°®ÂΩìsqlËØ≠Âè•‰∏≠ÊúâSQL_ CACHEÂÖ≥ÈîÆËØçÊó∂ÊâçÁºìÂ≠ò„ÄÇÊØîÂ¶ÇÔºö</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">query_ cache_ <span class=\"built_in\">type</span>Êúâ3‰∏™ÂÄº0‰ª£Ë°®ÂÖ≥Èó≠Êü•ËØ¢ÁºìÂ≠ò0FFÔºå1‰ª£Ë°®ÂºÄÂêØONÔºå2 (DEMAND)</span></span><br><span class=\"line\">query_cache_ type=2</span><br></pre></td></tr></table></figure>\n\n<p>ËøôÊ†∑ÂØπ‰∫éÈªòËÆ§ÁöÑSQLËØ≠Âè•ÈÉΩ‰∏ç‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠ò„ÄÇËÄåÂØπ‰∫é‰Ω†Á°ÆÂÆöË¶Å‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÁöÑËØ≠Âè•ÔºåÂèØ‰ª•Áî®SQL_CACHEÊòæÂºèÊåáÂÆöÔºåÂÉè‰∏ãÈù¢Ëøô‰∏™ËØ≠Âè•‰∏ÄÊ†∑Ôºö</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> SQL. CACHE <span class=\"operator\">*</span> <span class=\"keyword\">from</span> test <span class=\"keyword\">where</span> ID<span class=\"operator\">=</span><span class=\"number\">5</span> ;<span class=\"operator\">|</span></span><br></pre></td></tr></table></figure>\n\n<p>Êü•ÁúãÂΩìÂâçmysq|ÂÆû‰æãÊòØÂê¶ÂºÄÂêØÁºìÂ≠òÊú∫Âà∂</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># MySQL5.7 ‰∏≠Ôºö</span><br><span class=\"line\">mysql&gt; show global variables like &quot;%query_cache_type%&quot;;</span><br><span class=\"line\">+------------------+-------+</span><br><span class=\"line\">| Variable_name    | Value |</span><br><span class=\"line\">+------------------+-------+</span><br><span class=\"line\">| query_cache_type | OFF   |</span><br><span class=\"line\">+------------------+-------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># MySQL8.0 ‰∏≠Ôºö</span><br><span class=\"line\">mysql&gt; show global variables like &quot;%query_cache_type%&quot;;</span><br><span class=\"line\">Empty set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>ÁõëÊéßÊü•ËØ¢ÁºìÂ≠òÁöÑÂëΩ‰∏≠Áéá</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> status <span class=\"keyword\">like</span> <span class=\"string\">&#x27;%Qcache%&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116898.png\" alt=\"image-20220712222507959\"></p>\n<ul>\n<li><code>Qcache_free_blocks</code> ÔºöË°®Á§∫Êü•ËØ¢ÁºìÂ≠ò‰∏≠ËøòÊúâÂ§öÂ∞ëÂâ©‰ΩôÁöÑblocks,Â¶ÇÊûúËØ•ÂÄºÊòæÁ§∫ËæÉÂ§ß,ÂàôËØ¥ÊòéÊü•ËØ¢ÁºìÂ≠ò‰∏≠ÁöÑ<code>ÂÜÖÂ≠òÁ¢éÁâá</code>ËøáÂ§ö‰∫ÜÔºåÂèØËÉΩÂú®‰∏ÄÂÆöÁöÑÊó∂Èó¥ËøõË°åÊï¥ÁêÜ„ÄÇ</li>\n<li><code>Qcache_free_memory</code> ÔºöÊü•ËØ¢ÁºìÂ≠òÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÔºåÈÄöËøáËøô‰∏™ÂèÇÊï∞ÂèØ‰ª•ÂæàÊ∏ÖÊô∞ÁöÑÁü•ÈÅìÂΩìÂâçÁ≥ªÁªüÁöÑÊü•ËØ¢ÂÜÖÂ≠òÊòØÂê¶Â§üÁî®ÔºåÊòØÂ§ö‰∫ÜÔºåËøòÊòØ‰∏çÂ§üÁî®ÔºåDBAÂèØ‰ª•Ê†πÊçÆÂÆûÈôÖÊÉÖÂÜµÂÅöÂá∫Ë∞ÉÊï¥„ÄÇ</li>\n<li><code>Qcache_hits</code> ÔºöË°®Á§∫ÊúâÂ§öÂ∞ëÊ¨°ÂëΩ‰∏≠ÁºìÂ≠ò„ÄÇÊàë‰ª¨‰∏ªË¶ÅÂèØ‰ª•ÈÄöËøáËØ•ÂÄºÊù•È™åËØÅÊàë‰ª¨ÁöÑÊü•ËØ¢ÁºìÂ≠òÁöÑÊïàÊûú„ÄÇÊï∞Â≠óË∂äÂ§ßÔºåÁºìÂ≠òÊïàÊûúË∂äÁêÜÊÉ≥„ÄÇ</li>\n<li><code>Qcache_inserts</code> ÔºöË°®Á§∫Â§öÂ∞ëÊ¨°Êú™ÂëΩ‰∏≠ÁÑ∂ÂêéÊèíÂÖ•ÔºåÊÑèÊÄùÊòØÊñ∞Êù•ÁöÑSQLËØ∑Ê±ÇÂú®ÁºìÂ≠ò‰∏≠Êú™ÊâæÂà∞Ôºå‰∏çÂæó‰∏çÊâßË°åÊü•ËØ¢Â§ÑÁêÜ,ÊâßË°åÊü•ËØ¢Â§ÑÁêÜÂêéÊääÁªìÊûúinsertÂà∞Êü•ËØ¢ÁºìÂ≠ò‰∏≠„ÄÇËøôÊ†∑ÁöÑÊÉÖÂÜµÁöÑÊ¨°Êï∞Ë∂äÂ§öÔºåË°®Á§∫Êü•ËØ¢ÁºìÂ≠òÂ∫îÁî®Âà∞ÁöÑÊØîËæÉÂ∞ëÔºåÊïàÊûú‰πüÂ∞±‰∏çÁêÜÊÉ≥„ÄÇÂΩìÁÑ∂Á≥ªÁªüÂàöÂêØÂä®ÂêéÔºåÊü•ËØ¢ÁºìÂ≠òÊòØÁ©∫ÁöÑÔºåËøôÂæàÊ≠£Â∏∏„ÄÇ</li>\n<li><code>Qcache_lowmem_prunes</code> ÔºöËØ•ÂèÇÊï∞ËÆ∞ÂΩïÊúâÂ§öÂ∞ëÊù°Êü•ËØ¢Âõ†‰∏∫ÂÜÖÂ≠ò‰∏çË∂≥ËÄåË¢´ÁßªÈô§Âá∫Êü•ËØ¢ÁºìÂ≠ò„ÄÇÈÄöËøáËøô‰∏™ÂÄºÔºåÁî®Êà∑ÂèØ‰ª•ÈÄÇÂΩìÁöÑË∞ÉÊï¥ÁºìÂ≠òÂ§ßÂ∞è„ÄÇ</li>\n<li><code>Qcache_not_cached</code> ÔºöË°®Á§∫Âõ†‰∏∫query_cache_typeÁöÑËÆæÁΩÆËÄåÊ≤°ÊúâË¢´ÁºìÂ≠òÁöÑÊü•ËØ¢Êï∞Èáè„ÄÇ</li>\n<li><code>Qcache_queries_in_cache</code>ÔºöÂΩìÂâçÁºìÂ≠ò‰∏≠<code>ÁºìÂ≠òÁöÑÊü•ËØ¢Êï∞Èáè</code>„ÄÇ</li>\n<li><code>Qcache_total_blocks</code> ÔºöÂΩìÂâçÁºìÂ≠òÁöÑblockÊï∞Èáè„ÄÇ</li>\n</ul>\n<h3 id=\"2-1-2-Ëß£ÊûêÂô®\"><a href=\"#2-1-2-Ëß£ÊûêÂô®\" class=\"headerlink\" title=\"2.1.2 Ëß£ÊûêÂô®\"></a>2.1.2 <strong>Ëß£ÊûêÂô®</strong></h3><p>Âú®Ëß£ÊûêÂô®‰∏≠ÂØπ SQL ËØ≠Âè•ËøõË°åËØ≠Ê≥ïÂàÜÊûê„ÄÅËØ≠‰πâÂàÜÊûê„ÄÇ</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116982.png\" alt=\"image-20220115172951498\"></p>\n<p>Â¶ÇÊûúÊ≤°ÊúâÂëΩ‰∏≠Êü•ËØ¢ÁºìÂ≠òÔºåÂ∞±Ë¶ÅÂºÄÂßãÁúüÊ≠£ÊâßË°åËØ≠Âè•‰∫Ü„ÄÇÈ¶ñÂÖàÔºåMySQL ÈúÄË¶ÅÁü•ÈÅì‰Ω†Ë¶ÅÂÅö‰ªÄ‰πàÔºåÂõ†Ê≠§ÈúÄË¶ÅÂØπSQLËØ≠Âè•ÂÅöËß£Êûê„ÄÇSQLËØ≠Âè•ÁöÑÂàÜÊûêÂàÜ‰∏∫ËØçÊ≥ïÂàÜÊûê‰∏éËØ≠Ê≥ïÂàÜÊûê„ÄÇ</p>\n<p>ÂàÜÊûêÂô®ÂÖàÂÅö‚Äú<code>ËØçÊ≥ïÂàÜÊûê</code> ‚Äù„ÄÇ‰Ω†ËæìÂÖ•ÁöÑÊòØÁî±Â§ö‰∏™Â≠óÁ¨¶‰∏≤ÂíåÁ©∫Ê†ºÁªÑÊàêÁöÑ‰∏ÄÊù° SQL ËØ≠Âè•ÔºåMySQL ÈúÄË¶ÅËØÜÂà´Âá∫ÈáåÈù¢ ÁöÑÂ≠óÁ¨¶‰∏≤ÂàÜÂà´ÊòØ‰ªÄ‰πàÔºå‰ª£Ë°®‰ªÄ‰πà„ÄÇ</p>\n<p> MySQL ‰ªé‰Ω†ËæìÂÖ•ÁöÑ‚Äùselect‚ÄùËøô‰∏™ÂÖ≥ÈîÆÂ≠óËØÜÂà´Âá∫Êù•ÔºåËøôÊòØ‰∏Ä‰∏™Êü•ËØ¢ËØ≠Âè•„ÄÇÂÆÉ‰πüË¶ÅÊääÂ≠óÁ¨¶‰∏≤‚ÄúT‚ÄùËØÜÂà´Êàê‚ÄúË°®Âêç T‚ÄùÔºåÊääÂ≠óÁ¨¶‰∏≤‚ÄúID‚ÄùËØÜÂà´Êàê‚ÄúÂàó ID‚Äù„ÄÇ</p>\n<p>Êé•ÁùÄÔºåË¶ÅÂÅö‚Äú<code>ËØçÊ≥ïÂàÜÊûê</code> ‚Äù„ÄÇÊ†πÊçÆËØçÊ≥ïÂàÜÊûêÁöÑÁªìÊûúÔºåËØ≠Ê≥ïÂàÜÊûêÂô®ÔºàÊØîÂ¶ÇÔºöBisonÔºâ‰ºöÊ†πÊçÆËØ≠Ê≥ïËßÑÂàôÔºåÂà§Êñ≠‰Ω†Ëæì ÂÖ•ÁöÑËøô‰∏™ SQL ËØ≠Âè•ÊòØÂê¶ <code>Êª°Ë∂≥ MySQL ËØ≠Ê≥ï</code>„ÄÇ</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> department_id,job_id,<span class=\"built_in\">avg</span>(salary) <span class=\"keyword\">from</span> employees <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> department_id; </span><br></pre></td></tr></table></figure>\n\n<p>Â¶ÇÊûú‰Ω†ÁöÑËØ≠Âè•‰∏çÂØπÔºåÂ∞±‰ºöÊî∂Âà∞‚Äú‚ÄùÁöÑÈîôËØØÊèêÈÜíÔºåÊØîÂ¶ÇËøô‰∏™ËØ≠Âè•fromÂÜôÊàê‰∫Ürom„ÄÇ</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; select * fro user;</span><br><span class=\"line\">ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;fro user&#x27; at line 1</span><br></pre></td></tr></table></figure>\n\n<p>Â¶ÇÊûúSQLËØ≠Âè•Ê≠£Á°ÆÔºåÂàô‰ºöÁîüÊàê‰∏Ä‰∏™ËøôÊ†∑ÁöÑËØ≠Ê≥ïÊ†ë:</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117140.png\" alt=\"image-20220115173057415\"></p>\n<p>‰∏ãÂõæÊòØSQLËØçÊ≥ïÂàÜÊûêÁöÑËøáÁ®ãÊ≠•È™§Ôºö</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117605.png\" alt=\"image-20220712223741324\"></p>\n<p>Ëá≥Ê≠§Êàë‰ª¨Ëß£ÊûêÂô®ÁöÑÂ∑•‰Ωú‰ªªÂä°‰πüÂü∫Êú¨ÂúÜÊª°‰∫Ü„ÄÇÊé•‰∏ãÊù•ËøõÂÖ•Âà∞‰ºòÂåñÂô®„ÄÇ</p>\n<h3 id=\"2-1-3-‰ºòÂåñÂô®\"><a href=\"#2-1-3-‰ºòÂåñÂô®\" class=\"headerlink\" title=\"2.1.3 ‰ºòÂåñÂô®\"></a>2.1.3 ‰ºòÂåñÂô®</h3><p>Âú®‰ºòÂåñÂô®‰∏≠‰ºöÁ°ÆÂÆö SQL ËØ≠Âè•ÁöÑÊâßË°åË∑ØÂæÑÔºåÊØîÂ¶ÇÊòØÊ†πÊçÆ <code>ÂÖ®Ë°®Ê£ÄÁ¥¢</code> ÔºåËøòÊòØÊ†πÊçÆ <code>Á¥¢ÂºïÊ£ÄÁ¥¢</code> Á≠â„ÄÇ</p>\n<p>ÁªèËøá‰∫ÜËß£ÊûêÂô®ÔºåMySQL Â∞±Áü•ÈÅì‰Ω†Ë¶ÅÂÅö‰ªÄ‰πà‰∫Ü„ÄÇÂú®ÂºÄÂßãÊâßË°å‰πãÂâçÔºåËøòË¶ÅÂÖàÁªèËøá‰ºòÂåñÂô®ÁöÑÂ§ÑÁêÜ„ÄÇ<strong>‰∏ÄÊù°Êü•ËØ¢ÂèØ‰ª•ÊúâÂæàÂ§öÁßçÊâßË°åÊñπÂºèÔºåÊúÄÂêéÈÉΩËøîÂõûÁõ∏ÂêåÁöÑÁªìÊûú„ÄÇ‰ºòÂåñÂô®ÁöÑ‰ΩúÁî®Â∞±ÊòØÊâæÂà∞ËøôÂÖ∂‰∏≠ÊúÄÂ•ΩÁöÑÊâßË°åËÆ°Âàí</strong>„ÄÇ</p>\n<p>‰∏æ‰æãÔºöÂ¶Ç‰∏ãËØ≠Âè•ÊòØÊâßË°å‰∏§‰∏™Ë°®ÁöÑ join:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> test1 <span class=\"keyword\">join</span> test2 <span class=\"keyword\">using</span>(ID)</span><br><span class=\"line\"><span class=\"keyword\">where</span> test1.name<span class=\"operator\">=</span><span class=\"string\">&#x27;zhangwei&#x27;</span> <span class=\"keyword\">and</span> test2.name<span class=\"operator\">=</span><span class=\"string\">&#x27;mysqlÈ´òÁ∫ßËØæÁ®ã&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ÊñπÊ°à1:ÂèØ‰ª•ÂÖà‰ªéË°® test1 ÈáåÈù¢ÂèñÂá∫ name=&#x27;zhangwei&#x27;ÁöÑËÆ∞ÂΩïÁöÑ ID ÂÄºÔºåÂÜçÊ†πÊçÆ ID ÂÄºÂÖ≥ËÅîÂà∞Ë°® test2ÔºåÂÜçÂà§Êñ≠ test2 ÈáåÈù¢ name ÁöÑÂÄºÊòØÂê¶Á≠â‰∫é &#x27;mysqlÈ´òÁ∫ßËØæÁ®ã&#x27;„ÄÇ</span><br><span class=\"line\"></span><br><span class=\"line\">ÊñπÊ°à2:ÂèØ‰ª•ÂÖà‰ªéË°® test2 ÈáåÈù¢ÂèñÂá∫ name=&#x27;mysqlÈ´òÁ∫ßËØæÁ®ã&#x27; ÁöÑËÆ∞ÂΩïÁöÑ ID ÂÄºÔºåÂÜçÊ†πÊçÆ ID ÂÄºÂÖ≥ËÅîÂà∞ test1Ôºå ÂÜçÂà§Êñ≠ test1 ÈáåÈù¢ nameÁöÑÂÄºÊòØÂê¶Á≠â‰∫é zhangwei„ÄÇ</span><br><span class=\"line\"></span><br><span class=\"line\">Ëøô‰∏§ÁßçÊâßË°åÊñπÊ≥ïÁöÑÈÄªËæëÁªìÊûúÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰ΩÜÊòØÊâßË°åÁöÑÊïàÁéá‰ºöÊúâ‰∏çÂêåÔºåËÄå‰ºòÂåñÂô®ÁöÑ‰ΩúÁî®Â∞±ÊòØÂÜ≥ÂÆöÈÄâÊã©‰ΩøÁî®Âì™‰∏Ä‰∏™ÊñπÊ°à„ÄÇ‰ºòÂåñ</span><br><span class=\"line\">Âô®Èò∂ÊÆµÂÆåÊàêÂêéÔºåËøô‰∏™ËØ≠Âè•ÁöÑÊâßË°åÊñπÊ°àÂ∞±Á°ÆÂÆö‰∏ãÊù•‰∫ÜÔºåÁÑ∂ÂêéËøõÂÖ•ÊâßË°åÂô®Èò∂ÊÆµ„ÄÇ</span><br><span class=\"line\"></span><br><span class=\"line\">Â¶ÇÊûú‰Ω†ËøòÊúâ‰∏Ä‰∫õÁñëÈóÆÔºåÊØîÂ¶Ç‰ºòÂåñÂô®ÊòØÊÄé‰πàÈÄâÊã©Á¥¢ÂºïÁöÑÔºåÊúâÊ≤°ÊúâÂèØËÉΩÈÄâÊã©ÈîôÁ≠â„ÄÇÂêéÈù¢ËÆ≤Âà∞Á¥¢ÂºïÊàë‰ª¨ÂÜçË∞à„ÄÇ</span><br></pre></td></tr></table></figure>\n\n<p>Âú®Êü•ËØ¢‰ºòÂåñÂô®‰∏≠ÔºåÂèØ‰ª•ÂàÜ‰∏∫ <code>ÈÄªËæëÊü•ËØ¢</code> ‰ºòÂåñÈò∂ÊÆµÂíå <code>Áâ©ÁêÜÊü•ËØ¢</code> ‰ºòÂåñÈò∂ÊÆµ„ÄÇ</p>\n<p>ÈÄªËæëÊü•ËØ¢‰ºòÂåñÂ∞±ÊòØÈÄöËøáÊîπÂèòSQLËØ≠Âè•ÁöÑÂÜÖÂÆπÊù•‰ΩøÂæóSQLÊü•ËØ¢Êõ¥È´òÊïàÔºåÂêåÊó∂‰∏∫Áâ©ÁêÜÊü•ËØ¢‰ºòÂåñÊèê‰æõÊõ¥Â§öÁöÑÂÄôÈÄâÊâßË°åËÆ°Âàí„ÄÇÈÄöÂ∏∏ÈááÁî®ÁöÑÊñπÂºèÊòØÂØπSQLËØ≠Âè•ËøõË°å<code>Á≠â‰ª∑ÂèòÊç¢</code>ÔºåÂØπÊü•ËØ¢ËøõË°åÈáçÂÜôÔºåËÄåÊü•ËØ¢ÈáçÂÜôÁöÑÊï∞Â≠¶Âü∫Á°ÄÂ∞±ÊòØÂÖ≥Á≥ª‰ª£Êï∞„ÄÇÂØπÊù°‰ª∂Ë°®ËææÂºèËøõË°åÁ≠â‰ª∑Ë∞ìËØçÈáçÂÜô„ÄÅÊù°‰ª∂ÁÆÄÂåñÔºåÂØπËßÜÂõæËøõË°åÈáçÂÜôÔºåÂØπÂ≠êÊü•ËØ¢ËøõË°å‰ºòÂåñÔºåÂØπËøûÊé•ËØ≠‰πâËøõË°å‰∫ÜÂ§ñËøûÊé•Ê∂àÈô§„ÄÅÂµåÂ•óËøûÊé•Ê∂àÈô§Á≠â„ÄÇ</p>\n<p>Áâ©ÁêÜÊü•ËØ¢‰ºòÂåñÊòØÂü∫‰∫éÂÖ≥Á≥ª‰ª£Êï∞ËøõË°åÁöÑÊü•ËØ¢ÈáçÂÜô,ËÄåÂÖ≥Á≥ª‰ª£Êï∞ÁöÑÊØè‰∏ÄÊ≠•ÈÉΩÂØπÂ∫îÁùÄÁâ©ÁêÜËÆ°ÁÆó, Ëøô‰∫õÁâ©ÁêÜËÆ°ÁÆóÂæÄÂæÄÂ≠òÂú®Â§öÁßçÁÆóÊ≥ïÔºåÂõ†Ê≠§ÈúÄË¶ÅËÆ°ÁÆóÂêÑÁßçÁâ©ÁêÜË∑ØÂæÑÁöÑ‰ª£‰ª∑Ôºå‰ªé‰∏≠ÈÄâÊã©‰ª£‰ª∑ÊúÄÂ∞èÁöÑ‰Ωú‰∏∫ÊâßË°åËÆ°Âàí„ÄÇÂú®Ëøô‰∏™Èò∂ÊÆµÈáåÔºåÂØπ‰∫éÂçïË°®ÂíåÂ§öË°®ËøûÊé•ÁöÑÊìç‰ΩúÔºåÈúÄË¶ÅÈ´òÊïàÂú∞<code>‰ΩøÁî®Á¥¢Âºï</code>ÔºåÊèêÂçáÊü•ËØ¢ÊïàÁéá„ÄÇ</p>\n<h3 id=\"2-1-4-ÊâßË°åÂô®\"><a href=\"#2-1-4-ÊâßË°åÂô®\" class=\"headerlink\" title=\"2.1.4 ÊâßË°åÂô®\"></a>2.1.4 ÊâßË°åÂô®</h3><p>Êà™Ê≠¢Âà∞Áé∞Âú®ÔºåËøòÊ≤°ÊúâÁúüÊ≠£ÂéªËØªÂÜôÁúüÂÆûÁöÑË°®Ôºå‰ªÖ‰ªÖÂè™ÊòØ‰∫ßÂá∫‰∫Ü‰∏Ä‰∏™ÊâßË°åËÆ°Âàí„ÄÇ‰∫éÊòØÂ∞±ËøõÂÖ•‰∫Ü <code>ÊâßË°åÂô®Èò∂ÊÆµ</code> „ÄÇ</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117552.png\" alt=\"image-20220115173252824\"></p>\n<p>Âú®ÊâßË°å‰πãÂâçÈúÄË¶ÅÂà§Êñ≠ËØ•Áî®Êà∑ÊòØÂê¶ÂÖ∑Â§áÊùÉÈôê „ÄÇÂ¶ÇÊûúÊ≤°ÊúâÔºåÂ∞±‰ºöËøîÂõûÊùÉÈôêÈîôËØØ„ÄÇÂ¶ÇÊûúÂÖ∑Â§áÊùÉÈôêÔºåÂ∞±ÊâßË°å SQL Êü•ËØ¢Âπ∂ËøîÂõûÁªìÊûú„ÄÇÂú® MySQL 8.0 ‰ª•‰∏ãÁöÑÁâàÊú¨ÔºåÂ¶ÇÊûúËÆæÁΩÆ‰∫ÜÊü•ËØ¢ÁºìÂ≠òÔºåËøôÊó∂‰ºöÂ∞ÜÊü•ËØ¢ÁªìÊûúËøõË°åÁºìÂ≠ò„ÄÇ</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> test <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<p>Â¶ÇÊûúÊúâÊùÉÈôêÔºåÂ∞±ÊâìÂºÄË°®ÁªßÁª≠ÊâßË°å„ÄÇÊâìÂºÄË°®ÁöÑÊó∂ÂÄôÔºåÊâßË°åÂô®Â∞±‰ºöÊ†πÊçÆË°®ÁöÑÂºïÊìéÂÆö‰πâÔºåË∞ÉÁî®Â≠òÂÇ®ÂºïÊìéAPIÂØπË°®ËøõË°åÁöÑËØªÂÜô„ÄÇÂ≠òÂÇ®ÂºïÊìéAPIÂè™ÊòØÊäΩË±°Êé•Âè£Ôºå‰∏ãÈù¢ËøòÊúâ‰∏™<strong>Â≠òÂÇ®ÂºïÊìéÂ±Ç</strong>ÔºåÂÖ∑‰ΩìÂÆûÁé∞ËøòÊòØË¶ÅÁúãË°®ÈÄâÊã©ÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇ</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117221.png\"></p>\n<p>ÊØîÂ¶ÇÔºöË°® test ‰∏≠ÔºåID Â≠óÊÆµÊ≤°ÊúâÁ¥¢ÂºïÔºåÈÇ£‰πàÊâßË°åÂô®ÁöÑÊâßË°åÊµÅÁ®ãÊòØËøôÊ†∑ÁöÑÔºö</p>\n<ul>\n<li>Ë∞ÉÁî® InnoDB ÂºïÊìéÊé•Âè£ÂèñËøô‰∏™Ë°®ÁöÑÁ¨¨‰∏ÄË°åÔºåÂà§Êñ≠ ID ÂÄºÊòØ‰∏çÊòØ1ÔºåÂ¶ÇÊûú‰∏çÊòØÂàôË∑≥ËøáÔºåÂ¶ÇÊûúÊòØÂàôÂ∞ÜËøôË°åÂ≠òÂú®ÁªìÊûúÈõÜ‰∏≠; Ë∞ÉÁî®ÂºïÊìéÊé•Âè£Âèñ‚Äú‰∏ã‰∏ÄË°å‚ÄùÔºåÈáçÂ§çÁõ∏ÂêåÁöÑÂà§Êñ≠ÈÄªËæëÔºåÁõ¥Âà∞ÂèñÂà∞Ëøô‰∏™Ë°®ÁöÑÊúÄÂêé‰∏ÄË°å„ÄÇ</li>\n<li>ÊâßË°åÂô®Â∞Ü‰∏äËø∞ÈÅçÂéÜËøáÁ®ã‰∏≠ÊâÄÊúâÊª°Ë∂≥Êù°‰ª∂ÁöÑË°åÁªÑÊàêÁöÑËÆ∞ÂΩïÈõÜ‰Ωú‰∏∫ÁªìÊûúÈõÜËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</li>\n</ul>\n<p>Ëá≥Ê≠§ÔºåËøô‰∏™ËØ≠Âè•Â∞±ÊâßË°åÂÆåÊàê‰∫Ü„ÄÇÂØπ‰∫éÊúâÁ¥¢ÂºïÁöÑË°®ÔºåÊâßË°åÁöÑÈÄªËæë‰πüÂ∑Æ‰∏çÂ§ö„ÄÇ</p>\n<p>&#x3D;&#x3D;SQL ËØ≠Âè•Âú® MySQL ‰∏≠ÁöÑÊµÅÁ®ãÊòØ&#x3D;&#x3D;Ôºö<code>SQL ËØ≠Âè• ‚Üí Êü•ËØ¢ÁºìÂ≠ò ‚Üí Ëß£ÊûêÂô® ‚Üí ‰ºòÂåñÂô® ‚Üí ÊâßË°åÂô®</code>„ÄÇ</p>\n<p><img src=\"https://blog-images-1309598269.cos.ap-beijing.myqcloud.com/blogImgs/202206231430741.png\" alt=\"image-20220115173423050\"></p>\n<h2 id=\"2-2-MySQL8‰∏≠SQLÊâßË°åÂéüÁêÜ\"><a href=\"#2-2-MySQL8‰∏≠SQLÊâßË°åÂéüÁêÜ\" class=\"headerlink\" title=\"2.2 MySQL8‰∏≠SQLÊâßË°åÂéüÁêÜ\"></a>2.2 MySQL8‰∏≠SQLÊâßË°åÂéüÁêÜ</h2><p>ÂâçÈù¢ÁöÑÁªìÊûÑÂõæÂæàÂ§çÊùÇÔºåÊàë‰ª¨ÈúÄË¶ÅÊäìÂèñÊúÄÊ†∏ÂøÉÁöÑÈÉ®ÂàÜ: SQLÁöÑÊâßË°åÂéüÁêÜ„ÄÇ‰∏çÂêåÁöÑDBMSÁöÑSQLÁöÑÊâßË°åÂéüÁêÜÊòØÁõ∏ÈÄöÁöÑÔºåÂè™ÊòØÂú®‰∏çÂêåÁöÑËΩØ‰ª∂‰∏≠ÔºåÂêÑÊúâÂêÑÁöÑÂÆûÁé∞Ë∑ØÂæÑ„ÄÇ</p>\n<p>Êó¢ÁÑ∂‰∏ÄÊù°SQLËØ≠Âè•‰ºöÁªèÂéÜ‰∏çÂêåÁöÑÊ®°Âùó,ÈÇ£Êàë‰ª¨Â∞±Êù•Áúã‰∏ãÔºåÂú®‰∏çÂêåÁöÑÊ®°Âùó‰∏≠ÔºåSQL ÊâßË°åÊâÄ‰ΩøÁî®ÁöÑËµÑÊ∫ê(Êó∂Èó¥)ÊòØÊÄéÊ†∑ÁöÑ„ÄÇÂ¶Ç‰ΩïÂú®MySQL‰∏≠ÂØπ‰∏ÄÊù°SQLËØ≠Âè•ÁöÑÊâßË°åÊó∂Èó¥ËøõË°åÂàÜÊûê„ÄÇ</p>\n<h3 id=\"2-2-1-Á°ÆËÆ§profilingÊòØÂê¶ÂºÄÂêØ\"><a href=\"#2-2-1-Á°ÆËÆ§profilingÊòØÂê¶ÂºÄÂêØ\" class=\"headerlink\" title=\"2.2.1. Á°ÆËÆ§profilingÊòØÂê¶ÂºÄÂêØ\"></a>2.2.1. Á°ÆËÆ§profilingÊòØÂê¶ÂºÄÂêØ</h3><p>‰∫ÜËß£Êü•ËØ¢ËØ≠Âè•Â∫ïÂ±ÇÊâßË°åÁöÑËøáÁ®ãÔºö<code>select @@profiling;</code> ÊàñËÄÖ<code>show variables like &#39;%profiling%&#39; </code>Êü•ÁúãÊòØÂê¶ÂºÄÂêØËÆ°Âàí„ÄÇÂºÄÂêØÂÆÉÂèØ‰ª•ËÆ©MySQLÊî∂ÈõÜÂú®SQLÊâßË°åÊó∂ÊâÄ‰ΩøÁî®ÁöÑËµÑÊ∫êÊÉÖÂÜµÔºåÂëΩ‰ª§Â¶Ç‰∏ãÔºö</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; select @@profiling;</span><br><span class=\"line\">mysq1&gt; show variables like &#x27;profiling&#x27;;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117783.png\" alt=\"image-20220712230716818\"></p>\n<p>profiling &#x3D; 0‰ª£Ë°®ÂÖ≥Èó≠ÔºåÊàë‰ª¨ÈúÄË¶ÅÊääprofilingÊâìÂºÄÔºåÂç≥ËÆæÁΩÆ‰∏∫1Ôºõ</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; set profiling = 1;</span><br></pre></td></tr></table></figure>\n\n<p>ProfilingÂäüËÉΩÁî±MySQL‰ºöËØùÂèòÈáèÔºöprofilingÊéßÂà∂„ÄÇÈªòËÆ§ÊòØOFFÔºàÂÖ≥Èó≠Áä∂ÊÄÅÔºâ„ÄÇ</p>\n<h3 id=\"2-2-2-Â§öÊ¨°ÊâßË°åÁõ∏ÂêåSQLÊü•ËØ¢\"><a href=\"#2-2-2-Â§öÊ¨°ÊâßË°åÁõ∏ÂêåSQLÊü•ËØ¢\" class=\"headerlink\" title=\"2.2.2.Â§öÊ¨°ÊâßË°åÁõ∏ÂêåSQLÊü•ËØ¢\"></a>2.2.2.Â§öÊ¨°ÊâßË°åÁõ∏ÂêåSQLÊü•ËØ¢</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> employees;</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> employees;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-3-Êü•Áúãprofiles\"><a href=\"#2-2-3-Êü•Áúãprofiles\" class=\"headerlink\" title=\"2.2.3.Êü•Áúãprofiles\"></a>2.2.3.Êü•Áúãprofiles</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show profiles #Êü•ËØ¢ÊâÄÊúâsqlËØ≠Âè•ÁöÑÂàÜÊûêÊ¶ÇËßà</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117582.png\" alt=\"image-20220713001646187\"></p>\n<h3 id=\"2-2-4-Êü•Áúãprofile\"><a href=\"#2-2-4-Êü•Áúãprofile\" class=\"headerlink\" title=\"2.2.4.Êü•Áúãprofile\"></a>2.2.4.Êü•Áúãprofile</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show profie;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117949.png\" alt=\"image-20220713001733244\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show profie for query Query_ID;# Êü•ÁúãÊüê‰∏ÄÊ¨°sqlÊâßË°åÁöÑÂàÜÊûêËøáÁ®ã</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117654.png\" alt=\"image-20220713001825251\"></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117926.png\" alt=\"image-20220713001556760\"></p>\n<h2 id=\"2-3-MySQL5-7‰∏≠SQLÊâßË°åÂéüÁêÜ\"><a href=\"#2-3-MySQL5-7‰∏≠SQLÊâßË°åÂéüÁêÜ\" class=\"headerlink\" title=\"2.3 MySQL5.7‰∏≠SQLÊâßË°åÂéüÁêÜ\"></a>2.3 MySQL5.7‰∏≠SQLÊâßË°åÂéüÁêÜ</h2><p>ËøôÈáåÊàë‰ª¨ÈúÄË¶Å<code>ÊòæÁ§∫ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠òÊ®°Âºè</code>„ÄÇÂú®MySQL5.7‰∏≠Â¶Ç‰∏ãËÆæÁΩÆÔºö</p>\n<h3 id=\"2-3-1-ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠ò\"><a href=\"#2-3-1-ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠ò\" class=\"headerlink\" title=\"2.3.1.ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠ò\"></a>2.3.1.ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠ò</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">query_cache_type=1</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-2-ÈáçÂêØMysqlÊúçÂä°\"><a href=\"#2-3-2-ÈáçÂêØMysqlÊúçÂä°\" class=\"headerlink\" title=\"2.3.2.ÈáçÂêØMysqlÊúçÂä°\"></a>2.3.2.ÈáçÂêØMysqlÊúçÂä°</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart mysqld</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-3-ÂºÄÂêØÊü•ËØ¢ËÆ°Âàí\"><a href=\"#2-3-3-ÂºÄÂêØÊü•ËØ¢ËÆ°Âàí\" class=\"headerlink\" title=\"2.3.3.ÂºÄÂêØÊü•ËØ¢ËÆ°Âàí\"></a>2.3.3.ÂºÄÂêØÊü•ËØ¢ËÆ°Âàí</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; set profiling = 1;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-4-ÊâßË°åËØ≠Âè•‰∏§Ê¨°\"><a href=\"#2-3-4-ÊâßË°åËØ≠Âè•‰∏§Ê¨°\" class=\"headerlink\" title=\"2.3.4.ÊâßË°åËØ≠Âè•‰∏§Ê¨°\"></a>2.3.4.ÊâßË°åËØ≠Âè•‰∏§Ê¨°</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from departments;</span><br><span class=\"line\"></span><br><span class=\"line\">select * from departments;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-5-Êü•Áúãprofiles\"><a href=\"#2-3-5-Êü•Áúãprofiles\" class=\"headerlink\" title=\"2.3.5.Êü•Áúãprofiles\"></a>2.3.5.Êü•Áúãprofiles</h3><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117455.png\" alt=\"image-20220713000901627\"></p>\n<h3 id=\"2-3-6-Êü•Áúãprofile\"><a href=\"#2-3-6-Êü•Áúãprofile\" class=\"headerlink\" title=\"2.3.6.Êü•Áúãprofile\"></a>2.3.6.Êü•Áúãprofile</h3><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117965.png\" alt=\"image-20220713000946556\"></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117166.png\" alt=\"image-20220713001014156\"></p>\n<p>ÁªìËÆ∫‰∏çË®ÄËÄåÂñª.ÊâßË°åÁºñÂè∑10Êó∂,ÊØîÊâßË°åÁºñÂè∑9Êó∂Â∞ë‰∫ÜÂæàÂ§ö‰ø°ÊÅØ,‰ªéÊà™Âõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫Êü•ËØ¢ËØ≠Âè•Áõ¥Êé•‰ªéÁºìÂ≠ò‰∏≠Ëé∑ÂèñÊï∞ÊçÆ .</p>\n<ul>\n<li><strong>Ê≥®ÊÑè1Ôºö</strong>&#x3D;&#x3D;SQLÂøÖÈ°ªÊó∂‰∏ÄËá¥ÁöÑ,Âê¶Âàô,‰∏çËÉΩÂëΩ‰∏≠ÁºìÂ≠ò.&#x3D;&#x3D;</li>\n</ul>\n<p>‰æãÂ¶ÇÔºö</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#ËôΩÁÑ∂Êü•ËØ¢ÁªìÊûú‰∏ÄËá¥Ôºå ‰ΩÜÂπ∂Ê≤°ÊúâÂëΩ‰∏≠ÁºìÂ≠ò„ÄÇ</span><br><span class=\"line\">select * from mydb . mytbl where id=2</span><br><span class=\"line\">select * from mydb . mytbl where id&gt;1 and id&lt;3</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>Ê≥®ÊÑè2Ôºö</strong>ÂêåÊ†∑ÁöÑÂºÄÂêØÁºìÂ≠òÁöÑÈÖçÁΩÆ‰ø°ÊÅØÂ¶ÇÊûúÂú®MySQL8‰∏≠Ê∑ªÂä†„ÄÇÈáçÂêØÊúçÂä°Êó∂‰ºöÊä•Èîô:</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[ root@atguigu01 ~]# vim /etc/my.cnf</span><br><span class=\"line\">[root@atguigu01 ~]# systemctl restart mysqld;</span><br><span class=\"line\">Job for mysqld.service failed because the control process exited with error code. See</span><br><span class=\"line\">&quot;systemctl status mysqld. service&quot; and &quot;journalctl -xe&quot; for details.</span><br></pre></td></tr></table></figure>\n\n<p>ÂàÜÂà´Âú®MySQL5.7ÂíåMySQL8‰∏≠ÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§Ôºö</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show variables like &#x27;%query_ cache%&#x27;;</span><br></pre></td></tr></table></figure>\n\n<p>MySQL5.7‰∏≠ÊòæÁ§∫Ôºö</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117439.png\" alt=\"image-20220713002324616\"></p>\n<p>MySQL8.0‰∏≠ÊòæÁ§∫Ôºö</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117438.png\" alt=\"image-20220713002427047\"></p>\n<h2 id=\"2-4-SQLËØ≠Ê≥ïÈ°∫Â∫è\"><a href=\"#2-4-SQLËØ≠Ê≥ïÈ°∫Â∫è\" class=\"headerlink\" title=\"2.4 SQLËØ≠Ê≥ïÈ°∫Â∫è\"></a>2.4 SQLËØ≠Ê≥ïÈ°∫Â∫è</h2><p>ÈöèÁùÄ MySQL ÁâàÊú¨ÁöÑÊõ¥Êñ∞Êç¢‰ª£ÔºåÂÖ∂‰ºòÂåñÂô®‰πüÂú®‰∏çÊñ≠ÁöÑÂçáÁ∫ßÔºå‰ºòÂåñÂô®‰ºöÂàÜÊûê‰∏çÂêåÊâßË°åÈ°∫Â∫è‰∫ßÁîüÁöÑÊÄßËÉΩÊ∂àËÄó‰∏çÂêåËÄåÂä®ÊÄÅË∞ÉÊï¥ÊâßË°åÈ°∫Â∫è„ÄÇ</p>\n<p>ÈúÄÊ±ÇÔºöÊü•ËØ¢ÊØè‰∏™ÈÉ®Èó®Âπ¥ÈæÑÈ´ò‰∫é 20 Â≤ÅÁöÑ‰∫∫Êï∞‰∏îÈ´ò‰∫é 20 Â≤Å‰∫∫Êï∞‰∏çËÉΩÂ∞ë‰∫é 2 ‰∫∫ÔºåÊòæÁ§∫‰∫∫Êï∞ÊúÄÂ§öÁöÑÁ¨¨‰∏ÄÂêçÈÉ®Èó®‰ø°ÊÅØ„ÄÇ</p>\n<p>‰∏ãÈù¢ÊòØÁªèÂ∏∏Âá∫Áé∞ÁöÑÊü•ËØ¢È°∫Â∫è:</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118286.png\" alt=\"image-20220115174625139\">]</p>\n<h2 id=\"2-5-Oracle‰∏≠ÁöÑSQLÊâßË°åÊµÅÁ®ã-‰∫ÜËß£\"><a href=\"#2-5-Oracle‰∏≠ÁöÑSQLÊâßË°åÊµÅÁ®ã-‰∫ÜËß£\" class=\"headerlink\" title=\"2.5 Oracle‰∏≠ÁöÑSQLÊâßË°åÊµÅÁ®ã(‰∫ÜËß£)\"></a>2.5 Oracle‰∏≠ÁöÑSQLÊâßË°åÊµÅÁ®ã(‰∫ÜËß£)</h2><p>Oracle‰∏≠ÈááÁî®‰∫Ü&#x3D;&#x3D;ÂÖ±‰∫´Ê±†&#x3D;&#x3D;Êù•Âà§Êñ≠SQLËØ≠Âè•ÊòØÂê¶Â≠òÂú®ÁºìÂ≠òÂíåÊâßË°åËÆ°ÂàíÔºåÈÄöËøáËøô‰∏ÄÊ≠•È™§Êàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÂ∫îËØ•ÈááÁî®Á°¨Ëß£ÊûêËøòÊòØËΩØËß£Êûê„ÄÇ</p>\n<p>Êàë‰ª¨ÂÖàÊù•Áúã‰∏ãSQLÂú®Oracle‰∏≠ÁöÑÊâßË°åËøáÁ®ã:</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118798.png\" alt=\"image-20220713003902294\">‰ªé‰∏äÈù¢ËøôÂº†Âõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫, SQLËØ≠Âè•Âú®Oracle‰∏≠ÁªèÂéÜ‰∫Ü‰ª•‰∏ãÁöÑÂá†‰∏™Ê≠•È™§„ÄÇ</p>\n<ol>\n<li><strong>ËØ≠Ê≥ïÊ£ÄÊü•</strong>ÔºöÊ£ÄÊü•SQLÊãºÂÜôÊòØÂê¶Ê≠£Á°ÆÔºåÂ¶ÇÊûú‰∏çÊ≠£Á°ÆÔºåOracle ‰ºöÊä•ËØ≠Ê≥ïÈîôËØØ„ÄÇ</li>\n<li><strong>ËØ≠‰πâÊ£ÄÊü•</strong>ÔºöÊ£ÄÊü•SQL‰∏≠ÁöÑËÆøÈóÆÂØπË±°ÊòØÂê¶Â≠òÂú®„ÄÇÊØîÂ¶ÇÊàë‰ª¨Âú®ÂÜôSELECTËØ≠Âè•ÁöÑÊó∂ÂÄôÔºåÂàóÂêçÂÜôÈîô‰∫ÜÔºåÁ≥ªÁªüÂ∞±‰ºöÊèêÁ§∫ÈîôËØØ„ÄÇËØ≠Ê≥ïÊ£ÄÊü•ÂíåËØ≠‰πâÊ£ÄÊü•ÁöÑ‰ΩúÁî®ÊòØ‰øùËØÅSQLËØ≠Âè•Ê≤°ÊúâÈîôËØØ„ÄÇ</li>\n<li><strong>ÊùÉÈôêÊ£ÄÊü•</strong>ÔºöÁúãÁî®Êà∑ÊòØÂê¶ÂÖ∑Â§áËÆøÈóÆËØ•Êï∞ÊçÆÁöÑÊùÉÈôê„ÄÇ</li>\n</ol>\n<p>OracleÈÄöËøáÊ£ÄÊü•ÂÖ±‰∫´Ê±†ÊòØÂê¶Â≠òÂú®SQLËØ≠Âè•ÁöÑÊâßË°åËÆ°ÂàíÔºåÊù•Âà§Êñ≠ËøõË°åËΩØËß£Êûê,ËøòÊòØÁ°¨Ëß£Êûê„ÄÇÈÇ£ËΩØËß£ÊûêÂíåÁ°¨Ëß£ÊûêÂèàËØ•ÊÄé‰πàÁêÜËß£Âë¢?</p>\n<p>Âú®ÂÖ±‰∫´Ê±†‰∏≠ÔºåOracle È¶ñÂÖàÂØπSQLËØ≠Âè•ËøõË°å<code>HashËøêÁÆó</code>ÔºåÁÑ∂ÂêéÊ†πÊçÆHashÂÄºÂú®Â∫ìÁºìÂ≠ò(Library Cache)‰∏≠Êü•ÊâæÔºåÂ¶ÇÊûú<code>Â≠òÂú®SQLËØ≠Âè•ÁöÑÊâßË°åËÆ°Âàí</code>ÔºåÂ∞±Áõ¥Êé•ÊãøÊù•ÊâßË°åÔºåÁõ¥Êé•ËøõÂÖ•‚ÄúÊâßË°åÂô®‚ÄùÁöÑÁéØËäÇ,ËøôÂ∞±ÊòØ<code>ËΩØËß£Êûê</code>„ÄÇ</p>\n<p>Â¶ÇÊûúÊ≤°ÊúâÊâæÂà∞SQLËØ≠Âè•ÂíåÊâßË°åËÆ°ÂàíÔºåOracle Â∞±ÈúÄË¶ÅÂàõÂª∫Ëß£ÊûêÊ†ëËøõË°åËß£ÊûêÔºåÁîüÊàêÊâßË°åËÆ°ÂàíÔºåËøõÂÖ•‚Äú‰ºòÂåñÂô®‚ÄùËøô‰∏™Ê≠•È™§,ËøôÂ∞±ÊòØ<code>Á°¨Ëß£Êûê</code>„ÄÇ</p>\n<ol start=\"5\">\n<li><strong>‰ºòÂåñÂô®</strong>:‰ºòÂåñÂô®‰∏≠Â∞±ÊòØË¶ÅËøõË°åÁ°¨Ëß£ÊûêÔºå‰πüÂ∞±ÊòØÂÜ≥ÂÆöÊÄé‰πàÂÅöÔºåÊØîÂ¶ÇÂàõÂª∫Ëß£ÊûêÊ†ëÔºåÁîüÊàêÊâßË°åËÆ°Âàí„ÄÇ</li>\n<li><strong>ÊâßË°åÂô®</strong>:ÂΩìÊúâ‰∫ÜËß£ÊûêÊ†ëÂíåÊâßË°åËÆ°Âàí‰πãÂêé,Â∞±Áü•ÈÅì‰∫ÜSQLËØ•ÊÄé‰πàË¢´ÊâßË°åÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Âú®ÊâßË°åÂô®‰∏≠ÊâßË°åËØ≠Âè•‰∫Ü„ÄÇ</li>\n</ol>\n<p>ÂÖ±‰∫´Ê±†ÊòØOracle‰∏≠ÁöÑÊúØËØ≠ÔºåÂåÖÊã¨‰∫ÜÂ∫ìÁºìÂ≠ò,Êï∞ÊçÆÂ≠óÂÖ∏ÁºìÂÜ≤Âå∫Á≠â„ÄÇÊàë‰ª¨_‰∏äÈù¢Â∑≤ÁªèËÆ≤Âà∞‰∫ÜÂ∫ìÁºìÂ≠òÂå∫ÔºåÂÆÉ‰∏ªË¶ÅÁºìÂ≠òSQLËØ≠Âè•ÂíåÊâßË°åËÆ°Âàí„ÄÇËÄå<code>Êï∞ÊçÆÂ≠óÂÖ∏ÁºìÂÜ≤Âå∫</code>Â≠òÂÇ®ÁöÑÊòØOracle‰∏≠ÁöÑÂØπË±°ÂÆö‰πâ,ÊØîÂ¶ÇË°®„ÄÅËßÜÂõæ„ÄÅÁ¥¢ÂºïÁ≠âÂØπË±°„ÄÇÂΩìÂØπSQLËØ≠Âè•ËøõË°åËß£ÊûêÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÈúÄË¶ÅÁõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÔºå‰ºö‰ªéÊï∞ÊçÆÂ≠óÂÖ∏ÁºìÂÜ≤Âå∫‰∏≠ÊèêÂèñ„ÄÇ</p>\n<p><code>Â∫ìÁºìÂ≠ò</code>Ëøô‰∏Ä‰∏™Ê≠•È™§ÔºåÂÜ≥ÂÆö‰∫ÜSQLËØ≠Âè•ÊòØÂê¶ÈúÄË¶ÅËøõË°åÁ°¨Ëß£Êûê„ÄÇ‰∏∫‰∫ÜÊèêÂçáSQLÁöÑÊâßË°åÊïàÁéá,Êàë‰ª¨Â∫îËØ•Â∞ΩÈáèÈÅøÂÖçÁ°¨Ëß£ÊûêÔºåÂõ†‰∏∫Âú®SQLÁöÑÊâßË°åËøáÁ®ã‰∏≠ÔºåÂàõÂª∫Ëß£ÊûêÊ†ëÔºåÁîüÊàêÊâßË°åËÆ°ÂàíÊòØÂæàÊ∂àËÄóËµÑÊ∫êÁöÑ„ÄÇ</p>\n<p>‰Ω†ÂèØËÉΩ‰ºöÈóÆÔºåÂ¶Ç‰ΩïÈÅøÂÖçÁ°¨Ëß£ÊûêÔºåÂ∞ΩÈáè‰ΩøÁî®ËΩØËß£ÊûêÂë¢?Âú®Oracle‰∏≠Ôºå<code>ÁªëÂÆöÂèòÈáè</code>ÊòØÂÆÉÁöÑ‰∏ÄÂ§ßÁâπËâ≤„ÄÇÁªëÂÆöÂèòÈáèÂ∞±ÊòØÂú®SQLËØ≠Âè•‰∏≠‰ΩøÁî®ÂèòÈáèÔºåÈÄöËøá‰∏çÂêåÁöÑÂèòÈáèÂèñÂÄºÊù•ÊîπÂèòSQLÁöÑÊâßË°åÁªìÊûú„ÄÇËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØËÉΩ<code>ÊèêÂçáËΩØËß£ÊûêÁöÑÂèØËÉΩÊÄß</code>Ôºå‰∏çË∂≥‰πãÂ§ÑÂú®‰∫éÂèØËÉΩ‰ºöÂØºËá¥ÁîüÊàêÁöÑÊâßË°åËÆ°Âàí‰∏çÂ§ü‰ºòÂåñÔºåÂõ†Ê≠§ÊòØÂê¶ÈúÄË¶ÅÁªëÂÆöÂèòÈáèËøòÈúÄË¶ÅËßÜÊÉÖÂÜµËÄåÂÆö„ÄÇ</p>\n<p>‰∏æ‰∏™‰æãÂ≠êÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑÊü•ËØ¢ËØ≠Âè•Ôºö</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt; select * from player where player_id = 10001;</span><br></pre></td></tr></table></figure>\n\n<p>‰Ω†‰πüÂèØ‰ª•‰ΩøÁî®ÁªëÂÆöÂèòÈáèÔºåÂ¶Ç:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SOL&gt; select * from plaver where plaver id = :plaver_id:</span><br></pre></td></tr></table></figure>\n\n<p>Ëøô‰∏§‰∏™Êü•ËØ¢ËØ≠Âè•ÁöÑÊïàÁéáÂú®Oracle‰∏≠ÊòØÂÆåÂÖ®‰∏çÂêåÁöÑ„ÄÇÂ¶ÇÊûú‰Ω†Âú®Êü•ËØ¢player. _id&#x3D; 10001‰πãÂêé,Ëøò‰ºöÊü•ËØ¢10002„ÄÅ10003‰πãÁ±ªÁöÑÊï∞ÊçÆ,ÈÇ£‰πàÊØè- -Ê¨°Êü•ËØ¢ÈÉΩ‰ºöÂàõÂª∫‰∏Ä ‰∏™Êñ∞ÁöÑÊü•ËØ¢Ëß£Êûê„ÄÇ ËÄåÁ¨¨‰∫åÁßçÊñπÂºè‰ΩøÁî®‰∫ÜÁªëÂÆöÂèòÈáèÔºåÈÇ£‰πàÂú®Á¨¨‰∏Ä-Ê¨°Êü•ËØ¢‰πãÂêéÔºåÂú®ÂÖ±‰∫´Ê±†‰∏≠Â∞±‰ºöÂ≠òÂú®ËøôÁ±ªÊü•ËØ¢ÁöÑÊâßË°åËÆ°ÂàíÔºå‰πüÂ∞±ÊòØËΩØËß£Êûê„ÄÇ</p>\n<p>Âõ†Ê≠§ÔºåÊàë<strong>‰ª¨ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁªëÂÆöÂèòÈáèÊù•ÂáèÂ∞ëÁ°¨Ëß£ÊûêÔºåÂáèÂ∞ëOracleÁöÑËß£ÊûêÂ∑•‰ΩúÈáè</strong>„ÄÇ‰ΩÜÊòØËøôÁßçÊñπÂºè‰πüÊúâÁº∫ÁÇπÔºå‰ΩøÁî®Âä®ÊÄÅSQLÁöÑÊñπÂºèÔºåÂõ†‰∏∫ÂèÇÊï∞‰∏çÂêåÔºå‰ºöÂØºËá¥SQLÁöÑÊâßË°åÊïàÁéá‰∏çÂêåÔºåÂêåÊó∂SQL‰ºòÂåñ‰πü‰ºöÊØîËæÉÂõ∞Èöæ„ÄÇ</p>\n<p>&#x3D;&#x3D;OracleÁöÑÊû∂ÊûÑÂõæÔºö&#x3D;&#x3D;</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118351.png\" alt=\"image-20220713004228345\"></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118783.png\"></p>\n<h1 id=\"3-Êï∞ÊçÆÂ∫ìÁºìÂÜ≤Ê±†Ôºàbuffer-poolÔºâ\"><a href=\"#3-Êï∞ÊçÆÂ∫ìÁºìÂÜ≤Ê±†Ôºàbuffer-poolÔºâ\" class=\"headerlink\" title=\"3. Êï∞ÊçÆÂ∫ìÁºìÂÜ≤Ê±†Ôºàbuffer poolÔºâ\"></a>3. Êï∞ÊçÆÂ∫ìÁºìÂÜ≤Ê±†Ôºàbuffer poolÔºâ</h1><p><code>InnoDB</code>Â≠òÂÇ®ÂºïÊìéÊòØ‰ª•È°µ‰∏∫Âçï‰ΩçÊù•ÁÆ°ÁêÜÂ≠òÂÇ®Á©∫Èó¥ÁöÑÔºåÊàë‰ª¨ËøõË°åÁöÑÂ¢ûÂà†ÊîπÊü•Êìç‰ΩúÂÖ∂ÂÆûÊú¨Ë¥®‰∏äÈÉΩÊòØÂú®ËÆøÈóÆÈ°µ Èù¢(ÂåÖÊã¨ËØªÈ°µÈù¢„ÄÅÂÜôÈ°µÈù¢„ÄÅÂàõÂª∫Êñ∞È°µÈù¢Á≠âÊìç‰Ωú)„ÄÇËÄåÁ£ÅÁõò I&#x2F;O ÈúÄË¶ÅÊ∂àËÄóÁöÑÊó∂Èó¥ÂæàÂ§öÔºåËÄåÂú®ÂÜÖÂ≠ò‰∏≠ËøõË°åÊìç ‰ΩúÔºåÊïàÁéáÂàô‰ºöÈ´òÂæàÂ§öÔºå‰∏∫‰∫ÜËÉΩËÆ©Êï∞ÊçÆË°®ÊàñËÄÖÁ¥¢Âºï‰∏≠ÁöÑÊï∞ÊçÆÈöèÊó∂Ë¢´Êàë‰ª¨ÊâÄÁî®ÔºåDBMS ‰ºöÁî≥ËØ∑<code>Âç†Áî®ÂÜÖÂ≠òÊù•‰Ωú‰∏∫Êï∞ÊçÆÁºìÂÜ≤Ê±†</code>ÔºåÂú®ÁúüÊ≠£ËÆøÈóÆÈ°µÈù¢‰πãÂâçÔºåÈúÄË¶ÅÊääÂú®Á£ÅÁõò‰∏äÁöÑÈ°µÁºìÂ≠òÂà∞ÂÜÖÂ≠ò‰∏≠ÁöÑ<code>Buffer Pool</code>‰πãÂêéÊâçÂèØ‰ª•ËÆø ÈóÆ„ÄÇ</p>\n<p>ËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØÂèØ‰ª•ËÆ©Á£ÅÁõòÊ¥ªÂä®ÊúÄÂ∞èÂåñÔºå‰ªéËÄå<code>ÂáèÂ∞ë‰∏éÁ£ÅÁõòÁõ¥Êé•ËøõË°å I/O ÁöÑÊó∂Èó¥</code> „ÄÇË¶ÅÁü•ÈÅìÔºåËøôÁßçÁ≠ñÁï•ÂØπÊèê Âçá SQL ËØ≠Âè•ÁöÑÊü•ËØ¢ÊÄßËÉΩÊù•ËØ¥Ëá≥ÂÖ≥ÈáçË¶Å„ÄÇÂ¶ÇÊûúÁ¥¢ÂºïÁöÑÊï∞ÊçÆÂú®ÁºìÂÜ≤Ê±†ÈáåÔºåÈÇ£‰πàËÆøÈóÆÁöÑÊàêÊú¨Â∞±‰ºöÈôç‰ΩéÂæàÂ§ö„ÄÇ</p>\n<h2 id=\"3-1-ÁºìÂÜ≤Ê±†-vs-Êü•ËØ¢ÁºìÂ≠ò\"><a href=\"#3-1-ÁºìÂÜ≤Ê±†-vs-Êü•ËØ¢ÁºìÂ≠ò\" class=\"headerlink\" title=\"3.1 ÁºìÂÜ≤Ê±† vs Êü•ËØ¢ÁºìÂ≠ò\"></a>3.1 ÁºìÂÜ≤Ê±† vs Êü•ËØ¢ÁºìÂ≠ò</h2><p><strong>ÁºìÂÜ≤Ê±†ÂíåÊü•ËØ¢ÁºìÂ≠òÊòØ‰∏Ä‰∏™‰∏úË•øÂêóÔºü‰∏çÊòØ„ÄÇ</strong></p>\n<h3 id=\"3-1-1-ÁºìÂÜ≤Ê±†ÔºàBuffer-PoolÔºâ\"><a href=\"#3-1-1-ÁºìÂÜ≤Ê±†ÔºàBuffer-PoolÔºâ\" class=\"headerlink\" title=\"3.1.1 ÁºìÂÜ≤Ê±†ÔºàBuffer PoolÔºâ\"></a>3.1.1 ÁºìÂÜ≤Ê±†ÔºàBuffer PoolÔºâ</h3><p>È¶ñÂÖàÊàë‰ª¨ÈúÄË¶Å‰∫ÜËß£Âú® InnoDB Â≠òÂÇ®ÂºïÊìé‰∏≠ÔºåÁºìÂÜ≤Ê±†ÈÉΩÂåÖÊã¨‰∫ÜÂì™‰∫õ„ÄÇ</p>\n<p>Âú® InnoDB Â≠òÂÇ®ÂºïÊìé‰∏≠Êúâ‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆ‰ºöÊîæÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÁºìÂÜ≤Ê±†ÂàôÂç†‰∫ÜËøôÈÉ®ÂàÜÂÜÖÂ≠òÁöÑÂ§ßÈÉ®ÂàÜÔºåÂÆÉÁî®Êù•Â≠òÂÇ®ÂêÑÁßçÊï∞ÊçÆÁöÑÁºìÂ≠òÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫:</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118698.png\" alt=\"image-20220115175644920\"></p>\n<p>‰ªéÂõæ‰∏≠Ôºå‰Ω†ËÉΩÁúãÂà∞InnoDBÁºìÂÜ≤Ê±†ÂåÖÊã¨‰∫ÜÊï∞ÊçÆÈ°µ„ÄÅÁ¥¢ÂºïÈ°µ„ÄÅÊèíÂÖ•ÁºìÂÜ≤„ÄÅÈîÅ‰ø°ÊÅØ„ÄÅËá™ÈÄÇÂ∫îHashÂíåÊï∞ÊçÆÂ≠óÂÖ∏‰ø°ÊÅØÁ≠â„ÄÇ</p>\n<p><strong>ÁºìÂ≠òÊ±†ÁöÑÈáçË¶ÅÊÄß:</strong></p>\n<p>ÂØπ‰∫é‰ΩøÁî®<code>InnoDB</code>‰Ωú‰∏∫Â≠òÂÇ®ÂºïÊìéÁöÑË°®Êù•ËØ¥,‰∏çÁÆ°ÊòØÁî®‰∫éÂ≠òÂÇ®Áî®Êà∑Êï∞ÊçÆÁöÑÁ¥¢Âºï(ÂåÖÊã¨ËÅöÁ∞áÁ¥¢ÂºïÂíå‰∫åÁ∫ßÁ¥¢Âºï)ÔºåËøòÊòØÂêÑÁßçÁ≥ªÁªüÊï∞ÊçÆÔºåÈÉΩÊòØ‰ª•<code>È°µ</code>ÁöÑÂΩ¢ÂºèÂ≠òÊîæÂú®<code>Ë°®Á©∫Èó¥</code>‰∏≠ÁöÑ,ËÄåÊâÄË∞ìÁöÑË°®Á©∫Èó¥Âè™‰∏çËøáÊòØInnoDBÂØπÊñá‰ª∂Á≥ªÁªü‰∏ä‰∏Ä‰∏™ÊàñÂá†‰∏™ÂÆûÈôÖÊñá‰ª∂ÁöÑÊäΩË±°Ôºå‰πüÂ∞±ÊòØËØ¥Êàë‰ª¨ÁöÑÊï∞ÊçÆËØ¥Âà∞Â∫ïËøòÊòØÂ≠òÂÇ®Âú®Á£ÅÁõò‰∏äÁöÑ„ÄÇ‰ΩÜÊòØÂêÑ‰Ωç‰πüÈÉΩÁü•ÈÅìÔºåÁ£ÅÁõòÁöÑÈÄüÂ∫¶ÊÖ¢ÁöÑË∑ü‰πåÈæü‰∏ÄÊ†∑,ÊÄé‰πàËÉΩÈÖçÂæó‰∏ä‚Äú<code>Âø´Â¶ÇÈ£éÔºåÁñæÂ¶ÇÁîµ‚ÄùÁöÑCPU</code>Âë¢?ËøôÈáåÔºåÁºìÂÜ≤Ê±†ÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨Ê∂àÈô§CPUÂíåÁ£ÅÁõò‰πãÈó¥ÁöÑÈ∏øÊ≤ü„ÄÇÊâÄ‰ª•InnoDBÂ≠òÂÇ®Âºì|ÊìéÂú®Â§ÑÁêÜÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÊó∂ÔºåÂΩìÈúÄË¶ÅËÆøÈóÆÊüê‰∏™È°µÁöÑÊï∞ÊçÆÊó∂ÔºåÂ∞±‰ºöÊää<code>ÂÆåÊï¥ÁöÑÈ°µÁöÑÊï∞ÊçÆÂÖ®ÈÉ®Âä†ËΩΩÂà∞ÂÜÖÂ≠ò</code>‰∏≠Ôºå‰πüÂ∞±ÊòØËØ¥Âç≥‰ΩøÊàë‰ª¨Âè™ÈúÄË¶ÅËÆøÈóÆ‰∏Ä‰∏™È°µÁöÑ‰∏ÄÊù°ËÆ∞ÂΩïÔºåÈÇ£‰πüÈúÄË¶ÅÂÖàÊääÊï¥‰∏™È°µÁöÑÊï∞ÊçÆÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠„ÄÇÂ∞ÜÊï¥‰∏™È°µÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠ÂêéÂ∞±ÂèØ‰ª•ËøõË°åËØªÂÜôËÆøÈóÆ‰∫ÜÔºåÂú®ËøõË°åÂÆåËØªÂÜôËÆøÈóÆ‰πãÂêéÂπ∂‰∏çÁùÄÊÄ•ÊääËØ•È°µÂØπÂ∫îÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÈáäÊîæÊéâ,ËÄåÊòØÂ∞ÜÂÖ∂<code>ÁºìÂ≠ò</code>Ëµ∑Êù•,ËøôÊ†∑Â∞ÜÊù•ÊúâËØ∑Ê±ÇÂÜçÊ¨°ËÆøÈóÆËØ•È°µÈù¢Êó∂ÔºåÂ∞±ÂèØ‰ª•<code>ÁúÅÂéªÁ£ÅÁõòI0</code>ÁöÑÂºÄÈîÄ‰∫Ü„ÄÇ</p>\n<p><strong>ÁºìÂ≠òÂéüÂàôÔºö</strong></p>\n<p>‚Äú<code>‰ΩçÁΩÆ * È¢ëÊ¨°</code> ‚ÄùËøô‰∏™ÂéüÂàôÔºåÂèØ‰ª•Â∏ÆÊàë‰ª¨ÂØπ I&#x2F;O ËÆøÈóÆÊïàÁéáËøõË°å‰ºòÂåñ„ÄÇ È¶ñÂÖàÔºå‰ΩçÁΩÆÂÜ≥ÂÆöÊïàÁéáÔºåÊèê‰æõÁºìÂÜ≤Ê±†Â∞±ÊòØ‰∏∫‰∫ÜÂú®ÂÜÖÂ≠ò‰∏≠ÂèØ‰ª•Áõ¥Êé•ËÆøÈóÆÊï∞ÊçÆ„ÄÇ</p>\n<p>ÂÖ∂Ê¨°ÔºåÈ¢ëÊ¨°ÂÜ≥ÂÆö‰ºòÂÖàÁ∫ßÈ°∫Â∫è„ÄÇÂõ†‰∏∫ÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞èÊòØÊúâÈôêÁöÑÔºåÊØîÂ¶ÇÁ£ÅÁõòÊúâ 200GÔºå‰ΩÜÊòØÂÜÖÂ≠òÂè™Êúâ 16GÔºåÁºìÂÜ≤Ê±†Â§ßÂ∞èÂè™Êúâ 1GÔºåÂ∞±Êó†Ê≥ïÂ∞ÜÊâÄÊúâÊï∞ÊçÆÈÉΩÂä†ËΩΩÂà∞ÁºìÂÜ≤Ê±†ÈáåÔºåËøôÊó∂Â∞±Ê∂âÂèäÂà∞‰ºòÂÖàÁ∫ßÈ°∫Â∫èÔºå‰ºö <code>‰ºòÂÖàÂØπ‰ΩøÁî®È¢ëÊ¨°È´òÁöÑÁÉ≠Êï∞ÊçÆËøõË°åÂä†ËΩΩ</code>„ÄÇ</p>\n<p><strong>ÁºìÂÜ≤Ê±†ÁöÑÈ¢ÑËØªÁâπÊÄß:</strong></p>\n<p>‰∏Ä‰∏™ÁºìÂ≠ò‰∫ÜËß£‰∫ÜÁºìÂÜ≤Ê±†ÁöÑ‰ΩúÁî®‰πãÂêéÔºåÊàë‰ª¨ËøòÈúÄË¶Å‰∫ÜËß£ÁºìÂÜ≤Ê±†ÁöÑÂè¶‰∏Ä‰∏™ÁâπÊÄß: <code>È¢ÑËØª</code>„ÄÇ</p>\n<p>ÁºìÂÜ≤Ê±†ÁöÑ‰ΩúÁî®Â∞±ÊòØÊèêÂçáI&#x2F;0ÊïàÁéáÔºåËÄåÊàë‰ª¨ËøõË°åËØªÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÂ≠òÂú®‰∏Ä‰∏™‚ÄúÂ±ÄÈÉ®ÊÄßÂéüÁêÜ‚ÄùÔºå ‰πüÂ∞±ÊòØËØ¥Êàë‰ΩøÁî®‰∫Ü‰∏Ä‰∫õÊï∞ÊçÆÔºå<code>Â§ßÊ¶ÇÁéáËøò‰ºö‰ΩøÁî®ÂÆÉÂë®Âõ¥ÁöÑ‰∏Ä‰∫õÊï∞ÊçÆ</code>ÔºåÂõ†Ê≠§ÈááÁî®‚ÄúÈ¢ÑËØª‚ÄùÁöÑÊú∫Âà∂ÊèêÂâçÂä†ËΩΩÔºåÂèØ‰ª•ÂáèÂ∞ëÊú™Êù•ÂèØËÉΩÁöÑÁ£ÅÁõò1&#x2F;OÊìç‰Ωú„ÄÇ</p>\n<h3 id=\"3-1-2-Êü•ËØ¢ÁºìÂ≠ò\"><a href=\"#3-1-2-Êü•ËØ¢ÁºìÂ≠ò\" class=\"headerlink\" title=\"3.1.2 Êü•ËØ¢ÁºìÂ≠ò\"></a>3.1.2 Êü•ËØ¢ÁºìÂ≠ò</h3><p>ÈÇ£‰πà‰ªÄ‰πàÊòØÊü•ËØ¢ÁºìÂ≠òÂë¢?</p>\n<p>Êü•ËØ¢ÁºìÂ≠òÊòØÊèêÂâçÊää <code>Êü•ËØ¢ÁªìÊûúÁºìÂ≠ò</code> Ëµ∑Êù•ÔºåËøôÊ†∑‰∏ãÊ¨°‰∏çÈúÄË¶ÅÊâßË°åÂ∞±ÂèØ‰ª•Áõ¥Êé•ÊãøÂà∞ÁªìÊûú„ÄÇÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂú® MySQL ‰∏≠ÁöÑÊü•ËØ¢ÁºìÂ≠òÔºå‰∏çÊòØÁºìÂ≠òÊü•ËØ¢ËÆ°ÂàíÔºåËÄåÊòØÊü•ËØ¢ÂØπÂ∫îÁöÑÁªìÊûú„ÄÇÂõ†‰∏∫ÂëΩ‰∏≠Êù°‰ª∂ËãõÂàªÔºåËÄå‰∏îÂè™Ë¶ÅÊï∞ÊçÆË°®ÂèëÁîüÂèòÂåñÔºåÊü•ËØ¢ÁºìÂ≠òÂ∞±‰ºöÂ§±ÊïàÔºåÂõ†Ê≠§ÂëΩ‰∏≠Áéá‰Ωé„ÄÇ</p>\n<h2 id=\"3-2-ÁºìÂÜ≤Ê±†Â¶Ç‰ΩïËØªÂèñÊï∞ÊçÆ\"><a href=\"#3-2-ÁºìÂÜ≤Ê±†Â¶Ç‰ΩïËØªÂèñÊï∞ÊçÆ\" class=\"headerlink\" title=\"3.2 ÁºìÂÜ≤Ê±†Â¶Ç‰ΩïËØªÂèñÊï∞ÊçÆ\"></a>3.2 ÁºìÂÜ≤Ê±†Â¶Ç‰ΩïËØªÂèñÊï∞ÊçÆ</h2><p>ÁºìÂÜ≤Ê±†ÁÆ°ÁêÜÂô®‰ºöÂ∞ΩÈáèÂ∞ÜÁªèÂ∏∏‰ΩøÁî®ÁöÑÊï∞ÊçÆ‰øùÂ≠òËµ∑Êù•ÔºåÂú®Êï∞ÊçÆÂ∫ìËøõË°åÈ°µÈù¢ËØªÊìç‰ΩúÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖà‰ºöÂà§Êñ≠ËØ•È°µÈù¢ÊòØÂê¶Âú®ÁºìÂÜ≤Ê±†‰∏≠ÔºåÂ¶ÇÊûúÂ≠òÂú®Â∞±Áõ¥Êé•ËØªÂèñÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®ÔºåÂ∞±‰ºöÈÄöËøáÂÜÖÂ≠òÊàñÁ£ÅÁõòÂ∞ÜÈ°µÈù¢Â≠òÊîæÂà∞ÁºìÂÜ≤Ê±†‰∏≠ÂÜçËøõË°åËØªÂèñ„ÄÇ<br>ÁºìÂ≠òÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÁªìÊûÑÂíå‰ΩúÁî®Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118451.png\" alt=\"image-20220115175859026\"></p>\n<p><strong>&#x3D;&#x3D;Â¶ÇÊûúÊàë‰ª¨ÊâßË°åSQLËØ≠Âè•ÁöÑÊó∂ÂÄôÊõ¥Êñ∞‰∫ÜÁºìÂ≠òÊ±†‰∏≠ÁöÑÊï∞ÊçÆÔºåÈÇ£‰πàËøô‰∫õÊï∞ÊçÆ‰ºöÈ©¨‰∏äÂêåÊ≠•Âà∞Á£ÅÁõò‰∏äÂêó?&#x3D;&#x3D;</strong> </p>\n<p>ÂÆûÈôÖ‰∏äÔºåÂΩìÊàë‰ª¨ÂØπÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑËÆ∞ÂΩïËøõË°å‰øÆÊîπÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖà‰ºö‰øÆÊîπÁºìÂÜ≤Ê±†‰∏≠È°µÈáåÈù¢ÁöÑËÆ∞ÂΩï‰ø°ÊÅØ,ÁÑ∂ÂêéÊï∞ÊçÆÂ∫ì‰ºö<code>‰ª•‰∏ÄÂÆöÁöÑÈ¢ëÁéáÂà∑Êñ∞</code>Âà∞Á£ÅÁõò‰∏ä„ÄÇÊ≥®ÊÑèÂπ∂‰∏çÊòØÊØèÊ¨°ÂèëÁîüÊõ¥Êñ∞Êìç‰ΩúÔºåÈÉΩ‰ºöÁ´ãÂàªËøõË°åÁ£ÅÁõòÂõûÂÜô„ÄÇÁºìÂÜ≤Ê±†‰ºöÈááÁî®‰∏ÄÁßçÂè´ÂÅö<code>checkpointÁöÑÊú∫Âà∂</code>Â∞ÜÊï∞ÊçÆÂõûÂÜôÂà∞Á£ÅÁõò‰∏ä,ËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØÊèêÂçá‰∫ÜÊï∞ÊçÆÂ∫ìÁöÑÊï¥‰ΩìÊÄßËÉΩ„ÄÇ</p>\n<p>ÊØîÂ¶ÇÔºåÂΩì<code>ÁºìÂÜ≤Ê±†‰∏çÂ§üÁî®</code>Êó∂ÔºåÈúÄË¶ÅÈáäÊîæÊéâ‰∏Ä‰∫õ‰∏çÂ∏∏Áî®ÁöÑÈ°µÔºåÊ≠§Êó∂Â∞±ÂèØ‰ª•Âº∫Ë°åÈááÁî®checkpointÁöÑÊñπÂºèÔºåÂ∞Ü‰∏çÂ∏∏Áî®ÁöÑËÑèÈ°µÂõûÂÜôÂà∞Á£ÅÁõò‰∏ä,ÁÑ∂ÂêéÂÜç‰ªéÁºìÂÜ≤Ê±†‰∏≠Â∞ÜËøô‰∫õÈ°µÈáäÊîæÊéâ„ÄÇËøôÈáåËÑèÈ°µ(dirty page)ÊåáÁöÑÊòØÁºìÂÜ≤Ê±†‰∏≠Ë¢´‰øÆÊîπËøáÁöÑÈ°µÔºå‰∏éÁ£ÅÁõò‰∏äÁöÑÊï∞ÊçÆÈ°µ‰∏ç‰∏ÄËá¥„ÄÇ</p>\n<h2 id=\"3-3-Êü•Áúã-ËÆæÁΩÆÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞è\"><a href=\"#3-3-Êü•Áúã-ËÆæÁΩÆÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞è\" class=\"headerlink\" title=\"3.3 Êü•Áúã&#x2F;ËÆæÁΩÆÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞è\"></a>3.3 Êü•Áúã&#x2F;ËÆæÁΩÆÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞è</h2><p>Â¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑÊòØMySQL MyISAMÂ≠òÂÇ®ÂºïÊìé,ÂÆÉÂè™ÁºìÂ≠òÁ¥¢ÂºïÔºå ‰∏çÁºìÂ≠òÊï∞ÊçÆÔºåÂØπÂ∫îÁöÑÈîÆÁºìÂ≠òÂèÇÊï∞<br><code>key_buffer_size</code>Ôºå‰Ω†ÂèØ‰ª•Áî®ÂÆÉËøõË°åÊü•Áúã„ÄÇ</p>\n<p>Â¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑÊòØInnoDBÂ≠òÂÇ®ÂºïÊìéÔºåÂèØ‰ª•ÈÄöËøáÊü•Áúã <code>innodb_buffer_pool_size</code> ÂèòÈáèÊù•Êü•ÁúãÁºìÂÜ≤Ê±†ÁöÑÂ§ß Â∞è„ÄÇÂëΩ‰ª§Â¶Ç‰∏ã:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> variables <span class=\"keyword\">like</span> <span class=\"string\">&#x27;innodb_buffer_pool_size&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118317.png\" alt=\"image-20220115175953098\"></p>\n<p>‰Ω†ËÉΩÁúãÂà∞Ê≠§Êó∂ InnoDB ÁöÑÁºìÂÜ≤Ê±†Â§ßÂ∞èÂè™Êúâ 134217728&#x2F;1024&#x2F;1024&#x3D;128MB„ÄÇÊàë‰ª¨ÂèØ‰ª•‰øÆÊîπÁºìÂÜ≤Ê±†Â§ßÂ∞èÔºåÊØîÂ¶Ç Êîπ‰∏∫256MBÔºåÊñπÊ≥ïÂ¶Ç‰∏ã:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"keyword\">global</span> innodb_buffer_pool_size <span class=\"operator\">=</span> <span class=\"number\">268435456</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118511.png\" alt=\"image-20220115180020887\"></p>\n<p>ÊàñËÄÖ:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[server]</span><br><span class=\"line\">innodb_buffer_pool_size <span class=\"operator\">=</span> <span class=\"number\">268435456</span></span><br></pre></td></tr></table></figure>\n\n<p>ÁÑ∂ÂêéÂÜçÊù•Áúã‰∏ã‰øÆÊîπÂêéÁöÑÁºìÂÜ≤Ê±†Â§ßÂ∞èÔºåÊ≠§Êó∂Â∑≤ÊàêÂäü‰øÆÊîπÊàê‰∫Ü 256 MB:</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118502.png\" alt=\"image-20220115180055102\"></p>\n<h2 id=\"3-4-Â§ö‰∏™Buffer-PoolÂÆû‰æã\"><a href=\"#3-4-Â§ö‰∏™Buffer-PoolÂÆû‰æã\" class=\"headerlink\" title=\"3.4 Â§ö‰∏™Buffer PoolÂÆû‰æã\"></a>3.4 Â§ö‰∏™Buffer PoolÂÆû‰æã</h2><p>Buffer PoolÊú¨Ë¥®ÊòØInnoDBÂêëÊìç‰ΩúÁ≥ªÁªüÁî≥ËØ∑ÁöÑ‰∏ÄÂùó<code>ËøûÁª≠ÁöÑÂÜÖÂ≠òÁ©∫Èó¥</code>ÔºåÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÔºåËÆøÈóÆBuffer Pool‰∏≠ÁöÑÊï∞ÊçÆÈÉΩÈúÄË¶Å<code>Âä†ÈîÅ</code>Â§ÑÁêÜ„ÄÇÂú®Buffer PoolÁâπÂà´Â§ßËÄå‰∏îÂ§öÁ∫øÁ®ãÂπ∂ÂèëËÆøÈóÆÁâπÂà´È´òÁöÑÊÉÖÂÜµ‰∏ãÔºåÂçï‰∏ÄÁöÑBuffer PoolÂèØËÉΩ‰ºöÂΩ±ÂìçËØ∑Ê±ÇÁöÑÂ§ÑÁêÜÈÄüÂ∫¶„ÄÇÊâÄ‰ª•Âú®Buffer PoolÁâπÂà´Â§ßÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÂèØ‰ª•ÊääÂÆÉ‰ª¨<code>ÊãÜÂàÜÊàêËã•Âπ≤‰∏™Â∞èÁöÑBuffer Pool</code> ÔºåÊØè‰∏™Buffer PoolÈÉΩÁß∞‰∏∫‰∏Ä‰∏™<code>ÂÆû‰æã</code>ÔºåÂÆÉ‰ª¨ÈÉΩÊòØÁã¨Á´ãÁöÑÔºåÁã¨Á´ãÁöÑÂéªÁî≥ËØ∑ÂÜÖÂ≠òÁ©∫Èó¥ÔºåÁã¨Á´ãÁöÑÁÆ°ÁêÜÂêÑÁßçÈìæË°®„ÄÇÊâÄ‰ª•Âú®Â§öÁ∫øÁ®ãÂπ∂ÂèëËÆøÈóÆÊó∂Âπ∂‰∏ç‰ºöÁõ∏‰∫íÂΩ±ÂìçÔºå‰ªéËÄåÊèêÈ´òÂπ∂ÂèëÂ§ÑÁêÜËÉΩÂäõ„ÄÇ</p>\n<p>Êàë‰ª¨ÂèØ‰ª•Âú®ÊúçÂä°Âô®ÂêØÂä®ÁöÑÊó∂ÂÄôÈÄöËøáËÆæÁΩÆ<code>innodb_buffer_pool_instances</code> ÁöÑÂÄºÊù•‰øÆÊîπBuffer PoolÂÆû‰æãÁöÑ‰∏™Êï∞,</p>\n<p>ÊØîÊñπËØ¥ËøôÊ†∑:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[server]</span><br><span class=\"line\">innodb_buffer_pool_instances <span class=\"operator\">=</span> <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n\n<p>ËøôÊ†∑Â∞±Ë°®ÊòéÊàë‰ª¨Ë¶ÅÂàõÂª∫2‰∏™ <code>Buffer Pool</code> ÂÆû‰æã„ÄÇ</p>\n<p>Êàë‰ª¨Áúã‰∏ãÂ¶Ç‰ΩïÊü•ÁúãÁºìÂÜ≤Ê±†ÁöÑ‰∏™Êï∞Ôºå‰ΩøÁî®ÂëΩ‰ª§:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> variables <span class=\"keyword\">like</span> <span class=\"string\">&#x27;innodb_buffer_pool_instances&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118918.png\" alt=\"image-20220115180223458\"></p>\n<p>ÈÇ£ÊØè‰∏™ <code>Buffer Pool</code> ÂÆû‰æãÂÆûÈôÖÂç†Â§öÂ∞ëÂÜÖÂ≠òÁ©∫Èó¥Âë¢?ÂÖ∂ÂÆû‰ΩøÁî®Ëøô‰∏™ÂÖ¨ÂºèÁÆóÂá∫Êù•ÁöÑÔºö<code>innodb_buffer_pool_size/innodb_buffer_pool_instances</code></p>\n<p>‰πüÂ∞±ÊòØÊÄªÂÖ±ÁöÑÂ§ßÂ∞èÈô§‰ª•ÂÆû‰æãÁöÑ‰∏™Êï∞ÔºåÁªìÊûúÂ∞±ÊòØÊØè‰∏™<code>Buffer Pool</code> ÂÆû‰æãÂç†Áî®ÁöÑÂ§ßÂ∞è„ÄÇ</p>\n<p>‰∏çËøá‰πü‰∏çÊòØËØ¥Buffer PoolÂÆû‰æãÂàõÂª∫ÁöÑË∂äÂ§öË∂äÂ•ΩÔºåÂàÜÂà´<code>ÁÆ°ÁêÜÂêÑ‰∏™Buffer Pool‰πüÊòØÈúÄË¶ÅÊÄßËÉΩÂºÄÈîÄ</code>ÁöÑÔºåInnoDBËßÑÂÆö:ÂΩìinnodb_buffer_pool_sizeÁöÑÂÄºÂ∞è‰∫é1GÁöÑÊó∂ÂÄôËÆæÁΩÆÂ§ö‰∏™ÂÆû‰æãÊòØÊó†ÊïàÁöÑÔºåInnoDB‰ºöÈªòËÆ§Êääinnodb_ buffe _pool_instances ÁöÑÂÄº‰øÆÊîπ‰∏∫1„ÄÇËÄåÊàë‰ª¨ÈºìÂä±Âú®Buffer PpolÂ§ß‰∫éÊàñÁ≠â‰∫é1GÁöÑÊó∂ÂÄôËÆæÁΩÆÂ§ö‰∏™Buffer PoolÂÆû‰æã„ÄÇ</p>\n<h2 id=\"3-5-ÂºïÁî≥ÈóÆÈ¢ò\"><a href=\"#3-5-ÂºïÁî≥ÈóÆÈ¢ò\" class=\"headerlink\" title=\"3.5 ÂºïÁî≥ÈóÆÈ¢ò\"></a>3.5 ÂºïÁî≥ÈóÆÈ¢ò</h2><p>Buffer Pool ÊòØ MySQL ÂÜÖÂ≠òÁªìÊûÑ‰∏≠ÂçÅÂàÜÊ†∏ÂøÉÁöÑ‰∏Ä‰∏™ÁªÑÊàêÔºå‰Ω†ÂèØ‰ª•ÂÖàÊääÂÆÉÊÉ≥Ë±°Êàê‰∏Ä‰∏™ÈªëÁõíÂ≠ê„ÄÇ</p>\n<p><strong>ÈªëÁõí‰∏ãÁöÑÊõ¥Êñ∞Êï∞ÊçÆÊµÅÁ®ã</strong></p>\n<p>ÂΩìÊàë‰ª¨Êü•ËØ¢Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºå‰ºöÂÖàÂéªBuffer Pool‰∏≠Êü•ËØ¢„ÄÇÂ¶ÇÊûúBuffer Pool‰∏≠‰∏çÂ≠òÂú®,Â≠òÂÇ®Âºì|Êìé‰ºöÂÖàÂ∞ÜÊï∞ÊçÆ‰ªéÁ£ÅÁõòÂä†ËΩΩÂà∞Buffer Pool‰∏≠ÔºåÁÑ∂ÂêéÂ∞ÜÊï∞ÊçÆËøîÂõûÁªôÂÆ¢Êà∑Á´Ø;ÂêåÁêÜÔºåÂΩìÊàë‰ª¨Êõ¥Êñ∞Êüê‰∏™Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúËøô‰∏™Êï∞ÊçÆ‰∏çÂ≠òÂú®‰∫éBuffer Pool,ÂêåÊ†∑‰ºöÂÖàÊï∞ÊçÆÂä†ËΩΩËøõÊù•ÔºåÁÑ∂Âêé‰øÆÊîπ‰øÆÊîπÂÜÖÂ≠òÁöÑÊï∞ÊçÆ„ÄÇË¢´‰øÆÊîπËøáÁöÑÊï∞ÊçÆ‰ºöÂú®‰πãÂêéÁªü‰∏ÄÂà∑ÂÖ•Á£ÅÁõò„ÄÇ</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118256.png\" alt=\"image-20220115180314323\"></p>\n<p>Ëøô‰∏™ËøáÁ®ãÁúã‰ººÊ≤°Âï•ÈóÆÈ¢òÔºåÂÆûÂàôÊòØÊúâÈóÆÈ¢òÁöÑ„ÄÇÂÅáËÆæÊàë‰ª¨‰øÆÊîπBuffer Pool‰∏≠ÁöÑÊï∞ÊçÆÊàêÂäüÔºå‰ΩÜÊòØËøòÊ≤°Êù•ÂæóÂèäÂ∞ÜÊï∞ÊçÆÂà∑ÂÖ•Á£ÅÁõòMySQLÂ∞±ÊåÇ‰∫ÜÊÄé‰πàÂäû?ÊåâÁÖß‰∏äÂõæÁöÑÈÄªËæëÔºåÊ≠§Êó∂Êõ¥Êñ∞‰πãÂêéÁöÑÊï∞ÊçÆÂè™Â≠òÂú®‰∫éBuffer Pool‰∏≠,Â¶ÇÊûúÊ≠§Êó∂MySQLÂÆïÊú∫‰∫ÜÔºåËøôÈÉ®ÂàÜÊï∞ÊçÆÂ∞Ü‰ºöÊ∞∏‰πÖÂú∞‰∏¢Â§±;</p>\n<p>ÊàëÊõ¥Êñ∞Âà∞‰∏ÄÂçäÁ™ÅÁÑ∂ÂèëÁîüÈîôËØØ‰∫ÜÔºåÊÉ≥Ë¶ÅÂõûÊªöÂà∞Êõ¥Êñ∞‰πãÂâçÁöÑÁâàÊú¨ÔºåËØ•ÊÄé‰πàÂäûÔºüËøûÊï∞ÊçÆÊåÅ‰πÖÂåñÁöÑ‰øùËØÅ„ÄÅ‰∫ãÂä°ÂõûÊªöÈÉΩÂÅö‰∏çÂà∞ËøòË∞à‰ªÄ‰πàÂ¥©Ê∫ÉÊÅ¢Â§ç?</p>\n<p>Á≠îÊ°àÔºö<strong>Redo Log &amp; Undo Log</strong></p>\n","cover_type":"img","excerpt":"","more":"<h1 id=\"1-ÈÄªËæëÊû∂ÊûÑÂâñÊûê\"><a href=\"#1-ÈÄªËæëÊû∂ÊûÑÂâñÊûê\" class=\"headerlink\" title=\"1. ÈÄªËæëÊû∂ÊûÑÂâñÊûê\"></a>1. ÈÄªËæëÊû∂ÊûÑÂâñÊûê</h1><h2 id=\"1-1-ÊúçÂä°Âô®Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±Ç\"><a href=\"#1-1-ÊúçÂä°Âô®Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±Ç\" class=\"headerlink\" title=\"1.1 ÊúçÂä°Âô®Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±Ç\"></a>1.1 ÊúçÂä°Âô®Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±Ç</h2><p>È¶ñÂÖàMySQLÊòØÂÖ∏ÂûãÁöÑC&#x2F;SÊû∂ÊûÑÔºåÂç≥<code>Client/Server</code> Êû∂ÊûÑ‚Äò Ôºå ÊúçÂä°Âô®Á´ØÁ®ãÂ∫è‰ΩøÁî®ÁöÑmysqld„ÄÇ</p>\n<p>‰∏çËÆ∫ÂÆ¢Êà∑Á´ØËøõÁ®ãÂíåÊúçÂä°Âô®ËøõÁ®ãÊòØÈááÁî®Âì™ÁßçÊñπÂºèËøõË°åÈÄö‰ø°ÔºåÊúÄÂêéÂÆûÁé∞ÁöÑÊïàÊûúÈÉΩÊòØ:<strong>ÂÆ¢Êà∑Á´ØËøõÁ®ãÂêëÊúçÂä°Âô®ËøõÁ®ãÂèëÈÄÅ‰∏ÄÊÆµÊñáÊú¨(SQLËØ≠Âè•) ,ÊúçÂä°Âô®ËøõÁ®ãÂ§ÑÁêÜÂêéÂÜçÂêëÂÆ¢Êà∑Á´ØËøõÁ®ãÂèëÈÄÅ‰∏ÄÊÆµÊñáÊú¨(Â§ÑÁêÜÁªìÊûú)</strong></p>\n<p>ÈÇ£ÊúçÂä°Âô®ËøõÁ®ãÂØπÂÆ¢Êà∑Á´ØËøõÁ®ãÂèëÈÄÅÁöÑËØ∑Ê±ÇÂÅö‰∫Ü‰ªÄ‰πàÂ§ÑÁêÜÔºåÊâçËÉΩ‰∫ßÁîüÊúÄÂêéÁöÑÂ§ÑÁêÜÁªìÊûúÂë¢?ËøôÈáå‰ª•Êü•ËØ¢ËØ∑Ê±Ç‰∏∫‰æãÂ±ïÁ§∫Ôºö</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116081.png\" alt=\"image-20220709175522383\"></p>\n<p>‰∏ãÈù¢ÂÖ∑‰ΩìÂ±ïÂºÄÁúã‰∏Ä‰∏ã:(ÈíàÂØπMySQL5.7)</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116304.png\" alt=\"image-20220115171412362\"></p>\n<p><strong>ÂàÜÊûê</strong></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116078.png\"></p>\n<h2 id=\"1-2-Connectors\"><a href=\"#1-2-Connectors\" class=\"headerlink\" title=\"1.2 Connectors\"></a>1.2 Connectors</h2><p>ConnectorsÊåáÁöÑÊòØ‰∏çÂêåËØ≠Ë®Ä‰∏≠‰∏éSQLÁöÑ‰∫§‰∫í„ÄÇMySQLÈ¶ñÂÖàÊòØ‰∏Ä ‰∏™ÁΩëÁªúÁ®ãÂ∫èÔºåÂú®TCP‰πã‰∏äÂÆö‰πâ‰∫ÜËá™Â∑±ÁöÑÂ∫îÁî®Â±ÇÂçèËÆÆ„ÄÇÊâÄ‰ª•Ë¶Å‰ΩøÁî®MySQL,Êàë‰ª¨ÂèØ‰ª•ÁºñÂÜô‰ª£Á†ÅÔºåË∑üMySQL Server<code>Âª∫Á´ãTCPËøûÊé•</code>Ôºå‰πãÂêéÊåâÁÖßÂÖ∂ÂÆö‰πâÂ•ΩÁöÑÂçèËÆÆËøõË°å‰∫§‰∫í„ÄÇÊàñËÄÖÊØîËæÉÊñπ‰æøÁöÑÂäûÊ≥ïÊòØË∞ÉÁî®SDKÔºåÊØîÂ¶ÇNative C API„ÄÅJDBC„ÄÅ PHPÁ≠âÂêÑËØ≠ Ë®ÄMySQL Connector,ÊàñËÄÖÈÄöËøáODBC„ÄÇ ‰ΩÜ&#x3D;&#x3D;ÈÄöËøáSDKÊù•ËÆøÈóÆMySQLÔºåÊú¨Ë¥®‰∏äËøòÊòØÂú®TCPËøûÊé•‰∏äÈÄöËøáMySQLÂçèËÆÆË∑üMySQLËøõË°å‰∫§‰∫í&#x3D;&#x3D;„ÄÇ</p>\n<p>Êé•‰∏ãÊù•ÁöÑMySQL ServerÁªìÊûÑÂèØ‰ª•ÂàÜ‰∏∫Â¶Ç‰∏ãÁöÑ‰∏âÂ±ÇÔºö</p>\n<h2 id=\"1-3-Á¨¨-1-Â±ÇÔºöËøûÊé•Â±Ç\"><a href=\"#1-3-Á¨¨-1-Â±ÇÔºöËøûÊé•Â±Ç\" class=\"headerlink\" title=\"1.3 Á¨¨ 1 Â±ÇÔºöËøûÊé•Â±Ç\"></a>1.3 Á¨¨ 1 Â±ÇÔºöËøûÊé•Â±Ç</h2><p>Á≥ªÁªü(ÂÆ¢Êà∑Á´Ø)ËÆøÈóÆ MySQL ÊúçÂä°Âô®ÂâçÔºåÂÅöÁöÑÁ¨¨‰∏Ä‰ª∂‰∫ãÂ∞±ÊòØÂª∫Á´ã <code>TCP</code> ËøûÊé•„ÄÇ ÁªèËøá‰∏âÊ¨°Êè°ÊâãÂª∫Á´ãËøûÊé•ÊàêÂäüÂêéÔºåMySQL ÊúçÂä°Âô®ÂØπ <code>TCP</code> ‰º†ËæìËøáÊù•ÁöÑË¥¶Âè∑ÂØÜÁ†ÅÂÅöË∫´‰ªΩËÆ§ËØÅ„ÄÅÊùÉÈôêËé∑Âèñ„ÄÇ</p>\n<ul>\n<li>Áî®Êà∑ÂêçÊàñÂØÜÁ†Å‰∏çÂØπÔºå‰ºöÊî∂Âà∞‰∏Ä‰∏™ Access denied for user ÈîôËØØÔºåÂÆ¢Êà∑Á´ØÁ®ãÂ∫èÁªìÊùüÊâßË°å</li>\n<li>Áî®Êà∑ÂêçÂØÜÁ†ÅËÆ§ËØÅÈÄöËøáÔºå‰ºö‰ªéÊùÉÈôêË°®Êü•Âá∫Ë¥¶Âè∑Êã•ÊúâÁöÑÊùÉÈôê‰∏éËøûÊé•ÂÖ≥ËÅîÔºå‰πãÂêéÁöÑÊùÉÈôêÂà§Êñ≠ÈÄªËæëÔºåÈÉΩÂ∞Ü‰æùËµñ‰∫éÊ≠§Êó∂ËØªÂà∞ÁöÑÊùÉÈôê</li>\n</ul>\n<p><code>TCP</code> ËøûÊé•Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÂøÖÈ°ªË¶ÅÂàÜÈÖçÁªô‰∏Ä‰∏™Á∫øÁ®ã‰∏ìÈó®‰∏éËøô‰∏™ÂÆ¢Êà∑Á´ØÁöÑ‰∫§‰∫í„ÄÇÊâÄ‰ª•Ëøò‰ºöÊúâ‰∏™Á∫øÁ®ãÊ±†ÔºåÂéªËµ∞ÂêéÈù¢ÁöÑÊµÅÁ®ã„ÄÇÊØè‰∏Ä‰∏™ËøûÊé•‰ªéÁ∫øÁ®ãÊ±†‰∏≠Ëé∑ÂèñÁ∫øÁ®ãÔºåÁúÅÂéª‰∫ÜÂàõÂª∫ÂíåÈîÄÊØÅÁ∫øÁ®ãÁöÑÂºÄÈîÄ„ÄÇ</p>\n<p><strong>Êé•ÁùÄÊàë‰ª¨Êù•ÊÄùËÄÉ‰∏Ä‰∏™ÈóÆÈ¢ò</strong></p>\n<p>&#x3D;&#x3D;‰∏Ä‰∏™Á≥ªÁªüÂè™‰ºöÂíåMySQLÊúçÂä°Âô®Âª∫Á´ã‰∏Ä‰∏™ËøûÊé•ÂêóÔºüÂè™ËÉΩÊúâ‰∏Ä‰∏™Á≥ªÁªüÂíåMySQLÊúçÂä° Âô®Âª∫Á´ãËøûÊé•ÂêóÔºü&#x3D;&#x3D;<br>ÂΩìÁÑ∂‰∏çÊòØÔºåÂ§ö‰∏™Á≥ªÁªüÈÉΩÂèØ‰ª•ÂíåMySQLÊúçÂä°Âô®Âª∫Á´ãËøûÊé•ÔºåÊØè‰∏™Á≥ªÁªüÂª∫Á´ãÁöÑËøûÊé•ËÇØÂÆö‰∏çÊ≠¢‰∏Ä‰∏™„ÄÇÊâÄ‰ª•Ôºå‰∏∫‰∫ÜËß£ÂÜ≥TCPÊó†ÈôêÂàõÂª∫‰∏éTCPÈ¢ëÁπÅÂàõÂª∫ÈîÄÊØÅÂ∏¶Êù•ÁöÑËµÑÊ∫êËÄóÂ∞Ω„ÄÅÊÄßËÉΩ‰∏ãÈôçÈóÆÈ¢ò„ÄÇMySQLÊúçÂä°Âô®ÈáåÊúâ‰∏ìÈó®ÁöÑ<code>TCPËøûÊé•Ê±†</code>ÈôêÂà∂ËøûÊé•Êï∞ÔºåÈááÁî®<code>ÈïøËøûÊé•Ê®°Âºè</code>Â§çÁî®TCPËøûÊé•,Êù•Ëß£ÂÜ≥‰∏äËø∞ÈóÆÈ¢ò„ÄÇ</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116686.png\" alt=\"image-20220709192708094\"></p>\n<p><code>TCP</code>ËøûÊé•Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÂøÖÈ°ªË¶ÅÂàÜÈÖçÁªô‰∏Ä‰∏™Á∫øÁ®ã‰∏ìÈó®‰∏éËøô‰∏™ÂÆ¢Êà∑Á´ØÁöÑ‰∫§‰∫í„ÄÇÊâÄ‰ª•Ëøò‰ºöÊúâ‰∏™Á∫øÁ®ãÊ±†ÔºåÂéªËµ∞ÂêéÈù¢ÁöÑÊµÅÁ®ã„ÄÇÊØè‰∏Ä‰∏™ËøûÊé•‰ªéÁ∫øÁ®ãÊ±†‰∏≠Ëé∑ÂèñÁ∫øÁ®ãÔºåÁúÅÂéª‰∫ÜÂàõÂª∫ÂíåÈîÄÊØÅÁ∫øÁ®ãÁöÑÂºÄÈîÄ„ÄÇ</p>\n<p>Ëøô‰∫õÂÜÖÂÆπÊàë‰ª¨ÈÉΩÂΩíÁ∫≥Âà∞<code>MySQL</code>ÁöÑËøûÊé•ÁÆ°ÁêÜÁªÑ‰ª∂‰∏≠„ÄÇ</p>\n<p>ÊâÄ‰ª•&#x3D;&#x3D;ËøûÊé•ÁÆ°ÁêÜÁöÑËÅåË¥£ÊòØË¥üË¥£ËÆ§ËØÅ„ÄÅÁÆ°ÁêÜËøûÊé•„ÄÅËé∑ÂèñÊùÉÈôê‰ø°ÊÅØ&#x3D;&#x3D;„ÄÇ</p>\n<h2 id=\"1-4-Á¨¨-2-Â±ÇÔºöÊúçÂä°Â±Ç\"><a href=\"#1-4-Á¨¨-2-Â±ÇÔºöÊúçÂä°Â±Ç\" class=\"headerlink\" title=\"1.4 Á¨¨ 2 Â±ÇÔºöÊúçÂä°Â±Ç\"></a>1.4 Á¨¨ 2 Â±ÇÔºöÊúçÂä°Â±Ç</h2><p>Á¨¨‰∫åÂ±ÇÊû∂ÊûÑ‰∏ªË¶ÅÂÆåÊàêÂ§ßÂ§öÊï∞ÁöÑÊ†∏ÂøÉÊúçÂä°ÂäüËÉΩÔºåÂ¶ÇSQLÊé•Âè£Ôºå Âπ∂ÂÆåÊàêÁºìÂ≠òÁöÑÊü•ËØ¢ÔºåSQLÁöÑÂàÜÊûêÂíå‰ºòÂåñÂèäÈÉ®ÂàÜÂÜÖÁΩÆÂáΩÊï∞ÁöÑÊâßË°å„ÄÇÊâÄÊúâË∑®Â≠òÂÇ®ÂºïÊìéÁöÑÂäüËÉΩ‰πüÂú®Ëøô‰∏ÄÂ±ÇÂÆûÁé∞ÔºåÂ¶ÇËøáÁ®ã„ÄÅÂáΩÊï∞Á≠â„ÄÇ</p>\n<p>Âú®ËØ•Â±ÇÔºåÊúçÂä°Âô®‰ºö<strong>Ëß£ÊûêÊü•ËØ¢</strong>Âπ∂ÂàõÂª∫Áõ∏Â∫îÁöÑÂÜÖÈÉ®<strong>Ëß£ÊûêÊ†ë</strong>ÔºåÂπ∂ÂØπÂÖ∂ÂÆåÊàêÁõ∏Â∫îÁöÑ<strong>‰ºòÂåñ</strong>ÔºöÂ¶ÇÁ°ÆÂÆöÊü•ËØ¢Ë°®ÁöÑÈ°∫Â∫èÔºåÊòØÂê¶Âà©Áî®Á¥¢ÂºïÁ≠âÔºåÊúÄÂêéÁîüÊàêÁõ∏Â∫îÁöÑÊâßË°åÊìç‰Ωú„ÄÇ</p>\n<p>&#x3D;&#x3D;Â¶ÇÊûúÊòØSELECTËØ≠Âè•ÔºåÊúçÂä°Âô®Ëøò‰ºöÊü•ËØ¢ÂÜÖÈÉ®ÁöÑÁºìÂ≠ò&#x3D;&#x3D;„ÄÇÂ¶ÇÊûúÁºìÂ≠òÁ©∫Èó¥Ë∂≥Â§üÂ§ßÔºåËøôÊ†∑Âú®Ëß£ÂÜ≥Â§ßÈáèËØªÊìç‰ΩúÁöÑÁéØÂ¢É‰∏≠ËÉΩÂ§üÂæàÂ•ΩÁöÑÊèêÂçáÁ≥ªÁªüÁöÑÊÄßËÉΩ„ÄÇ</p>\n<ul>\n<li><p><strong>SQL InterfaceÔºöSQLÊé•Âè£</strong></p>\n<ul>\n<li>Êé•Êî∂Áî®Êà∑ÁöÑ SQL ÂëΩ‰ª§ÔºåÂπ∂‰∏îËøîÂõûÁî®Êà∑ÈúÄË¶ÅÊü•ËØ¢ÁöÑÁªìÊûú„ÄÇÊØîÂ¶Ç <code>SELECT ... FROM</code> Â∞±ÊòØË∞ÉÁî® SQL Interface</li>\n<li>MySQL ÊîØÊåÅ DMLÔºàÊï∞ÊçÆÊìç‰ΩúËØ≠Ë®ÄÔºâ„ÄÅDDLÔºàÊï∞ÊçÆÂÆö‰πâËØ≠Ë®ÄÔºâ„ÄÅÂ≠òÂÇ®ËøáÁ®ã„ÄÅËßÜÂõæ„ÄÅËß¶ÂèëÂô®„ÄÅËá™ÂÆö‰πâÂáΩÊï∞Á≠âÂ§öÁßç SQL ËØ≠Ë®ÄÊé•Âè£</li>\n</ul>\n</li>\n<li><p><strong>ParserÔºöËß£ÊûêÂô®</strong></p>\n<ul>\n<li>Âú®Ëß£ÊûêÂô®‰∏≠ÂØπ SQL ËØ≠Âè•ËøõË°åËØ≠Ê≥ïÂàÜÊûê„ÄÅËØ≠‰πâÂàÜÊûê„ÄÇÂ∞Ü SQL ËØ≠Âè•ÂàÜËß£ÊàêÊï∞ÊçÆÁªìÊûÑÔºåÂπ∂Â∞ÜËøô‰∏™ÁªìÊûÑ‰º†ÈÄíÂà∞ÂêéÁª≠Ê≠•È™§Ôºå‰ª•Âêé SQL ËØ≠Âè•ÁöÑ‰º†ÈÄíÂíåÂ§ÑÁêÜÂ∞±ÊòØÂü∫‰∫éËøô‰∏™ÁªìÊûÑÁöÑ„ÄÇÂ¶ÇÊûúÂú®ÂàÜËß£ÊûÑÊàê‰∏≠ÈÅáÂà∞ÈîôËØØÔºåÈÇ£‰πàÂ∞±ËØ¥ÊòéËøô‰∏™ SQL ËØ≠Âè•ÊòØ‰∏çÂêàÁêÜÁöÑ„ÄÇ</li>\n<li>Âú® SQL ÂëΩ‰ª§‰º†ÈÄíÂà∞Ëß£ÊûêÂô®ÁöÑÊó∂ÂÄô‰ºöË¢´Ëß£ÊûêÂô®È™åËØÅÂíåËß£ÊûêÔºåÂπ∂‰∏∫ÂÖ∂ÂàõÂª∫ <code>ËØ≠Ê≥ïÊ†ë</code>ÔºåÂπ∂Ê†πÊçÆÊï∞ÊçÆÂ≠óÂÖ∏‰∏∞ÂØåÊü•ËØ¢ËØ≠Ê≥ïÊ†ëÔºå‰ºö <code>È™åËØÅËØ•ÂÆ¢Êà∑Á´ØÊòØÂê¶ÂÖ∑ÊúâÊâßË°åËØ•Êü•ËØ¢ÁöÑÊùÉÈôê</code> „ÄÇÂàõÂª∫Â•ΩËØ≠Ê≥ïÊ†ëÂêéÔºåMySQL Ëøò‰ºöÂØπ SQL Êü•ËØ¢ËøõË°åËØ≠Ê≥ï‰∏äÁöÑ‰ºòÂåñÔºåËøõË°åÊü•ËØ¢ÈáçÂÜô„ÄÇ</li>\n</ul>\n</li>\n<li><p><strong>OptimizerÔºöÊü•ËØ¢‰ºòÂåñÂô®</strong></p>\n<ul>\n<li><p>SQL ËØ≠Âè•Âú®ËØ≠Ê≥ïËß£Êûê‰πãÂêé„ÄÅÊü•ËØ¢‰πãÂâç‰ºö‰ΩøÁî®Êü•ËØ¢‰ºòÂåñÂô®Á°ÆÂÆö SQL ËØ≠Âè•ÁöÑÊâßË°åË∑ØÂæÑÔºåÁîüÊàê‰∏Ä‰∏™ <code>ÊâßË°åËÆ°Âàí</code> „ÄÇ</p>\n</li>\n<li><p>Ëøô‰∏™ÊâßË°åËÆ°ÂàíË°®ÊòéÂ∫îËØ• <code>‰ΩøÁî®Âì™‰∫õÁ¥¢Âºï</code> ËøõË°åÊü•ËØ¢ÔºàÂÖ®Ë°®Ê£ÄÁ¥¢ËøòÊòØ‰ΩøÁî®Á¥¢ÂºïÊ£ÄÁ¥¢ÔºâÔºåË°®‰πãÈó¥ÁöÑËøûÊé•È°∫Â∫èÂ¶Ç‰ΩïÔºåÊúÄÂêé‰ºöÊåâÁÖßÊâßË°åËÆ°Âàí‰∏≠ÁöÑÊ≠•È™§Ë∞ÉÁî®Â≠òÂÇ®ÂºïÊìéÊèê‰æõÁöÑÊñπÊ≥ïÊù•ÁúüÊ≠£ÁöÑÊâßË°åÊü•ËØ¢ÔºåÂπ∂Â∞ÜÊü•ËØ¢ÁªìÊûúËøîÂõûÁªôÁî®Êà∑„ÄÇ</p>\n</li>\n<li><p>ÂÆÉ‰ΩøÁî®‚Äú <code>ÈÄâÂèñ-ÊäïÂΩ±-ËøûÊé•</code> ‚ÄùÁ≠ñÁï•ËøõË°åÊü•ËØ¢„ÄÇ‰æãÂ¶Ç:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> id,name <span class=\"keyword\">FROM</span> student <span class=\"keyword\">WHERE</span> gender <span class=\"operator\">=</span> <span class=\"string\">&#x27;Â•≥&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>Ëøô‰∏™ SELECT Êü•ËØ¢ÂÖàÊ†πÊçÆ WHERE ËØ≠Âè•ËøõË°åÈÄâÂèñ ÔºåËÄå‰∏çÊòØÂ∞ÜË°®ÂÖ®ÈÉ®Êü•ËØ¢Âá∫Êù•‰ª•ÂêéÂÜçËøõË°å gender ËøáÊª§„ÄÇ Ëøô‰∏™ SELECT Êü•ËØ¢ÂÖàÊ†πÊçÆ id Âíå name ËøõË°åÂ±ûÊÄßÊäïÂΩ± ÔºåËÄå‰∏çÊòØÂ∞ÜÂ±ûÊÄßÂÖ®ÈÉ®ÂèñÂá∫‰ª•ÂêéÂÜçËøõË°åËøáÊª§ÔºåÂ∞ÜËøô‰∏§‰∏™Êü•ËØ¢Êù°‰ª∂ ËøûÊé•Ëµ∑Êù•ÁîüÊàêÊúÄÁªàÊü•ËØ¢ÁªìÊûú„ÄÇ</p>\n</li>\n</ul>\n</li>\n<li><p><strong>Caches &amp; Buffers: Êü•ËØ¢ÁºìÂ≠òÁªÑ‰ª∂</strong></p>\n<ul>\n<li>MySQLÂÜÖÈÉ®Áª¥ÊåÅÁùÄ‰∏Ä‰∫õ Cache Âíå BufferÔºåÊØîÂ¶Ç Query Cache Áî®Êù•ÁºìÂ≠ò‰∏ÄÊù° SELECT ËØ≠Âè•ÁöÑÊâßË°åÁªìÊûúÔºåÂ¶ÇÊûúËÉΩÂ§üÂú®ÂÖ∂‰∏≠ÊâæÂà∞ÂØπÂ∫îÁöÑÊü•ËØ¢ÁªìÊûúÔºåÈÇ£‰πàÂ∞±‰∏çÂøÖÂÜçËøõË°åÊü•ËØ¢Ëß£Êûê„ÄÅ‰ºòÂåñÂíåÊâßË°åÁöÑÊï¥‰∏™ËøáÁ®ã‰∫ÜÔºåÁõ¥Êé•Â∞ÜÁªìÊûúÂèçÈ¶àÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</li>\n<li>Ëøô‰∏™ÁºìÂ≠òÊú∫Âà∂ÊòØÁî±‰∏ÄÁ≥ªÂàóÂ∞èÁºìÂ≠òÁªÑÊàêÁöÑ„ÄÇÊØîÂ¶ÇË°®ÁºìÂ≠òÔºåËÆ∞ÂΩïÁºìÂ≠òÔºåkeyÁºìÂ≠òÔºåÊùÉÈôêÁºìÂ≠òÁ≠â „ÄÇ</li>\n<li>Ëøô‰∏™Êü•ËØ¢ÁºìÂ≠òÂèØ‰ª•Âú® <code>‰∏çÂêåÂÆ¢Êà∑Á´Ø‰πãÈó¥ÂÖ±‰∫´</code> „ÄÇ</li>\n<li>‰ªé MySQL 5.7.20 ÂºÄÂßãÔºå‰∏çÊé®Ëçê‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÔºåÂπ∂Âú® <code>MySQL 8.0‰∏≠Âà†Èô§</code> „ÄÇ</li>\n</ul>\n<figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Â∞èÊïÖ‰∫ãÔºö</span><br><span class=\"line\">Â¶ÇÊûúÊàëÈóÆ‰Ω†9+8√ó16-3√ó2√ó17ÁöÑÂÄºÊòØÂ§öÂ∞ëÔºå‰Ω†ÂèØËÉΩ‰ºöÁî®ËÆ°ÁÆóÂô®ÂéªÁÆó‰∏Ä‰∏ãÔºåÊúÄÁªàÁªìÊûú35„ÄÇÂ¶ÇÊûúÂÜçÈóÆ‰Ω†‰∏ÄÈÅç9+8√ó16-</span><br><span class=\"line\">3√ó2√ó17ÁöÑÂÄºÊòØÂ§öÂ∞ëÔºå‰Ω†ËøòÁî®ÂÜçÂÇªÂëµÂëµÁöÑÂÜçÁÆó‰∏ÄÈÅçÂêóÔºüÊàë‰ª¨ÂàöÂàöÂ∑≤ÁªèÁÆóËøá‰∫ÜÔºåÁõ¥Êé•ËØ¥Á≠îÊ°àÂ∞±Â•Ω‰∫Ü„ÄÇ</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"1-5-Á¨¨-3-Â±ÇÔºöÂºïÊìéÂ±Ç\"><a href=\"#1-5-Á¨¨-3-Â±ÇÔºöÂºïÊìéÂ±Ç\" class=\"headerlink\" title=\"1.5 Á¨¨ 3 Â±ÇÔºöÂºïÊìéÂ±Ç\"></a>1.5 Á¨¨ 3 Â±ÇÔºöÂºïÊìéÂ±Ç</h2><p>ÂíåÂÖ∂ÂÆÉÊï∞ÊçÆÂ∫ìÁõ∏ÊØîÔºåMySQLÊúâÁÇπ‰∏é‰ºó‰∏çÂêåÔºåÂÆÉÁöÑÊû∂ÊûÑÂèØ‰ª•Âú®Â§öÁßç‰∏çÂêåÂú∫ÊôØ‰∏≠Â∫îÁî®Âπ∂ÂèëÊå•ËâØÂ•Ω‰ΩúÁî®Ôºå‰∏ªË¶Å‰ΩìÁé∞Âú®Â≠òÂÇ®ÂºïÊìéÁöÑÊû∂ÊûÑ‰∏äÔºåÊèí‰ª∂ÂºèÁöÑÂ≠òÂÇ®ÂºïÊìéÊû∂ÊûÑÂ∞ÜÊü•ËØ¢Â§ÑÁêÜÂíåÂÖ∂ÂÆÉÁöÑÁ≥ªÁªü‰ªªÂä°‰ª•ÂèäÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÊèêÂèñÁõ∏ÂàÜÁ¶ª„ÄÇËøôÁßçÊû∂ÊûÑÂèØ‰ª•Ê†πÊçÆ‰∏öÂä°ÁöÑÈúÄÊ±ÇÂíåÂÆûÈôÖÈúÄË¶ÅÈÄâÊã©ÂêàÈÄÇÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇÂêåÊó∂ÂºÄÊ∫êÁöÑ MySQLËøò<strong>ÂÖÅËÆ∏ÂºÄÂèë‰∫∫ÂëòËÆæÁΩÆËá™Â∑±ÁöÑÂ≠òÂÇ®ÂºïÊìé</strong>„ÄÇ</p>\n<p>ËøôÁßçÈ´òÊïàÁöÑÊ®°ÂùóÂåñÊû∂ÊûÑ‰∏∫ÈÇ£‰∫õÂ∏åÊúõ‰∏ìÈó®ÈíàÂØπÁâπÂÆöÂ∫îÁî®Á®ãÂ∫èÈúÄÊ±Ç(‰æãÂ¶ÇÊï∞ÊçÆ‰ªìÂ∫ì„ÄÅ‰∫ãÂä°Â§ÑÁêÜÊàñÈ´òÂèØÁî®ÊÄßÊÉÖÂÜµ)ÁöÑ‰∫∫Êèê‰æõ‰∫ÜÂ∑®Â§ßÁöÑÂ•ΩÂ§ÑÔºåÂêåÊó∂‰∫´Âèó‰ΩøÁî®‰∏ÄÁªÑÁã¨Á´ã‰∫é‰ªª‰ΩïÊé•Âè£ÂíåÊúçÂä°ÁöÑ‰ºòÂäøÂ≠òÂÇ®ÂºïÊìé„ÄÇ</p>\n<p>Êèí‰ª∂ÂºèÂ≠òÂÇ®ÂºïÊìéÂ±ÇÔºàStorage EnginesÔºâÔºå&#x3D;&#x3D;ÁúüÊ≠£ÁöÑË¥üË¥£‰∫ÜMySQL‰∏≠Êï∞ÊçÆÁöÑÂ≠òÂÇ®ÂíåÊèêÂèñÔºåÂØπÁâ©ÁêÜÊúçÂä°Âô®Á∫ßÂà´Áª¥Êä§ÁöÑÂ∫ïÂ±ÇÊï∞ÊçÆÊâßË°åÊìç‰Ωú&#x3D;&#x3D; ÔºåÊúçÂä°Âô®ÈÄöËøá API ‰∏éÂ≠òÂÇ®ÂºïÊìéËøõË°åÈÄö‰ø°„ÄÇ‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìéÂÖ∑ÊúâÁöÑÂäüËÉΩ‰∏çÂêåÔºåËøôÊ†∑Êàë‰ª¨ÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÂÆûÈôÖÈúÄË¶ÅËøõË°åÈÄâÂèñ„ÄÇ</p>\n<p>MySQL 8.0.25 ÈªòËÆ§ÊîØÊåÅÁöÑÂ≠òÂÇ®ÂºïÊìéÂ¶Ç‰∏ã:</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116558.png\" alt=\"image-20220115171937681\"></p>\n<h2 id=\"1-6-Â≠òÂÇ®Â±Ç\"><a href=\"#1-6-Â≠òÂÇ®Â±Ç\" class=\"headerlink\" title=\"1.6 Â≠òÂÇ®Â±Ç\"></a>1.6 Â≠òÂÇ®Â±Ç</h2><p>ÊâÄÊúâÁöÑÊï∞ÊçÆÔºåÊï∞ÊçÆÂ∫ì„ÄÅË°®ÁöÑÂÆö‰πâÔºåË°®ÁöÑÊØè‰∏ÄË°åÁöÑÂÜÖÂÆπÔºåÁ¥¢ÂºïÔºåÈÉΩÊòØÂ≠òÂú® <code>Êñá‰ª∂Á≥ªÁªü</code> ‰∏äÔºå‰ª• <code>Êñá‰ª∂</code> ÁöÑÊñπÂºèÂ≠ò Âú®ÁöÑÔºåÂπ∂ÂÆåÊàê‰∏éÂ≠òÂÇ®ÂºïÊìéÁöÑ‰∫§‰∫í„ÄÇÂΩìÁÑ∂Êúâ‰∫õÂ≠òÂÇ®ÂºïÊìéÊØîÂ¶ÇInnoDBÔºå‰πüÊîØÊåÅ‰∏ç‰ΩøÁî®Êñá‰ª∂Á≥ªÁªüÁõ¥Êé•ÁÆ°ÁêÜË£∏ËÆæÂ§áÔºå‰ΩÜÁé∞‰ª£Êñá‰ª∂Á≥ªÁªüÁöÑÂÆûÁé∞‰ΩøÂæóËøôÊ†∑ÂÅöÊ≤°ÊúâÂøÖË¶Å‰∫Ü„ÄÇÂú®Êñá‰ª∂Á≥ªÁªü‰πã‰∏ãÔºåÂèØ‰ª•‰ΩøÁî®Êú¨Âú∞Á£ÅÁõòÔºåÂèØ‰ª•‰ΩøÁî® DAS„ÄÅNAS„ÄÅSANÁ≠âÂêÑÁßçÂ≠òÂÇ®Á≥ªÁªü„ÄÇ</p>\n<h2 id=\"1-7-Â∞èÁªì\"><a href=\"#1-7-Â∞èÁªì\" class=\"headerlink\" title=\"1.7 Â∞èÁªì\"></a>1.7 Â∞èÁªì</h2><p>MySQL Êû∂ÊûÑÂõæÊú¨ËäÇÂºÄÁØáÊâÄÁ§∫„ÄÇ‰∏ãÈù¢‰∏∫‰∫ÜÁÜüÊÇâ SQL ÊâßË°åÊµÅÁ®ãÊñπ‰æøÔºåÊàë‰ª¨ÂèØ‰ª•ÁÆÄÂåñÂ¶Ç‰∏ã:</p>\n<p><img src=\"https://blog-images-1309598269.cos.ap-beijing.myqcloud.com/blogImgs/202206300055402.png\" alt=\"image-20220115172118991\"></p>\n<p>ÁÆÄÂåñ‰∏∫‰∏âÂ±ÇÁªìÊûÑÔºö</p>\n<ol>\n<li>ËøûÊé•Â±ÇÔºöÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®Á´ØÂª∫Á´ãËøûÊé•ÔºåÂÆ¢Êà∑Á´ØÂèëÈÄÅ SQL Ëá≥ÊúçÂä°Âô®Á´Ø;</li>\n<li>SQL Â±ÇÔºàÊúçÂä°Â±ÇÔºâÔºöÂØπ SQL ËØ≠Âè•ËøõË°åÊü•ËØ¢Â§ÑÁêÜÔºõ‰∏éÊï∞ÊçÆÂ∫ìÊñá‰ª∂ÁöÑÂ≠òÂÇ®ÊñπÂºèÊó†ÂÖ≥;</li>\n<li>Â≠òÂÇ®ÂºïÊìéÂ±ÇÔºö‰∏éÊï∞ÊçÆÂ∫ìÊñá‰ª∂Êâì‰∫§ÈÅìÔºåË¥üË¥£Êï∞ÊçÆÁöÑÂ≠òÂÇ®ÂíåËØªÂèñ„ÄÇ</li>\n</ol>\n<h1 id=\"2-SQL-ÊâßË°åÊµÅÁ®ã\"><a href=\"#2-SQL-ÊâßË°åÊµÅÁ®ã\" class=\"headerlink\" title=\"2. SQL ÊâßË°åÊµÅÁ®ã\"></a>2. SQL ÊâßË°åÊµÅÁ®ã</h1><h2 id=\"2-1-MySQL-‰∏≠ÁöÑ-SQLÊâßË°åÊµÅÁ®ã\"><a href=\"#2-1-MySQL-‰∏≠ÁöÑ-SQLÊâßË°åÊµÅÁ®ã\" class=\"headerlink\" title=\"2.1 MySQL ‰∏≠ÁöÑ SQLÊâßË°åÊµÅÁ®ã\"></a>2.1 MySQL ‰∏≠ÁöÑ SQLÊâßË°åÊµÅÁ®ã</h2><p>&#x3D;&#x3D;MySQLÁöÑÊü•ËØ¢ÊµÅÁ®ã:&#x3D;&#x3D;</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116406.png\" alt=\"image-20220115172223043\"></p>\n<h3 id=\"2-1-1-Êü•ËØ¢ÁºìÂ≠ò\"><a href=\"#2-1-1-Êü•ËØ¢ÁºìÂ≠ò\" class=\"headerlink\" title=\"2.1.1 Êü•ËØ¢ÁºìÂ≠ò\"></a>2.1.1 <strong>Êü•ËØ¢ÁºìÂ≠ò</strong></h3><p>Server Â¶ÇÊûúÂú®Êü•ËØ¢ÁºìÂ≠ò‰∏≠ÂèëÁé∞‰∫ÜËøôÊù° SQL ËØ≠Âè•ÔºåÂ∞±‰ºöÁõ¥Êé•Â∞ÜÁªìÊûúËøîÂõûÁªôÂÆ¢Êà∑Á´Ø;Â¶ÇÊûúÊ≤° ÊúâÔºåÂ∞±ËøõÂÖ•Âà∞Ëß£ÊûêÂô®Èò∂ÊÆµ„ÄÇÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂõ†‰∏∫Êü•ËØ¢ÁºìÂ≠òÂæÄÂæÄÊïàÁéá‰∏çÈ´òÔºåÊâÄ‰ª•Âú® MySQL 8.0 ‰πãÂêéÂ∞±ÊäõÂºÉ ‰∫ÜËøô‰∏™ÂäüËÉΩ„ÄÇ</p>\n<p><strong>Â§ßÂ§öÊï∞ÊÉÖÂÜµÊü•ËØ¢ÁºìÂ≠òÂ∞±ÊòØ‰∏™È∏°ËÇãÔºå‰∏∫‰ªÄ‰πàÂë¢?</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> employee_id,last_name <span class=\"keyword\">FROM</span> employees <span class=\"keyword\">WHERE</span> employee_id <span class=\"operator\">=</span> <span class=\"number\">101</span>;</span><br></pre></td></tr></table></figure>\n\n<p>Êü•ËØ¢ÁºìÂ≠òÊòØÊèêÂâçÊääÊü•ËØ¢ÁªìÊûúÁºìÂ≠òËµ∑Êù•ÔºåËøôÊ†∑‰∏ãÊ¨°‰∏çÈúÄË¶ÅÊâßË°åÂ∞±ÂèØ‰ª•Áõ¥Êé•ÊãøÂà∞ÁªìÊûú„ÄÇÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂú® MySQL ‰∏≠ÁöÑÊü•ËØ¢ÁºìÂ≠òÔºå‰∏çÊòØÁºìÂ≠òÊü•ËØ¢ËÆ°ÂàíÔºåËÄåÊòØÊü•ËØ¢ÂØπÂ∫îÁöÑÁªìÊûú„ÄÇËøôÂ∞±ÊÑèÂë≥ÁùÄÊü•ËØ¢ÂåπÈÖçÁöÑ <code>È≤ÅÊ£íÊÄßÂ§ßÂ§ßÈôç‰Ωé</code>ÔºåÂè™Êúâ <code>Áõ∏ÂêåÁöÑÊü•ËØ¢Êìç‰ΩúÊâç‰ºöÂëΩ‰∏≠Êü•ËØ¢ÁºìÂ≠ò</code>„ÄÇ‰∏§‰∏™Êü•ËØ¢ËØ∑Ê±ÇÂú®‰ªª‰ΩïÂ≠óÁ¨¶‰∏äÁöÑ‰∏çÂêåÔºà‰æãÂ¶ÇÔºöÁ©∫Ê†º„ÄÅÊ≥®Èáä„ÄÅ Â§ßÂ∞èÂÜôÔºâÔºåÈÉΩ‰ºöÂØºËá¥ÁºìÂ≠ò‰∏ç‰ºöÂëΩ‰∏≠„ÄÇÂõ†Ê≠§ MySQL ÁöÑ <code>Êü•ËØ¢ÁºìÂ≠òÂëΩ‰∏≠Áéá‰∏çÈ´ò</code> „ÄÇ</p>\n<p>ÂêåÊó∂ÔºåÂ¶ÇÊûúÊü•ËØ¢ËØ∑Ê±Ç‰∏≠ÂåÖÂê´Êüê‰∫õÁ≥ªÁªüÂáΩÊï∞„ÄÅÁî®Êà∑Ëá™ÂÆö‰πâÂèòÈáèÂíåÂáΩÊï∞„ÄÅ‰∏Ä‰∫õÁ≥ªÁªüË°®ÔºåÂ¶Ç mysql „ÄÅ information_schema„ÄÅ performance_schema Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°®ÔºåÈÇ£Ëøô‰∏™ËØ∑Ê±ÇÂ∞±‰∏ç‰ºöË¢´ÁºìÂ≠ò„ÄÇ‰ª•Êüê‰∫õÁ≥ªÁªüÂáΩÊï∞‰∏æ‰æãÔºåÂèØËÉΩÂêåÊ†∑ÁöÑÂáΩÊï∞ÁöÑ‰∏§Ê¨°Ë∞ÉÁî®‰ºö‰∫ßÁîü‰∏ç‰∏ÄÊ†∑ÁöÑÁªìÊûúÔºåÊØîÂ¶ÇÂáΩÊï∞ <code>NOW</code> ÔºåÊØèÊ¨°Ë∞ÉÁî®ÈÉΩ‰ºö‰∫ßÁîüÊúÄÊñ∞ÁöÑÂΩìÂâçÊó∂Èó¥ÔºåÂ¶ÇÊûúÂú®‰∏Ä‰∏™Êü•ËØ¢ËØ∑Ê±Ç‰∏≠Ë∞ÉÁî®‰∫ÜËøô‰∏™ÂáΩÊï∞ÔºåÈÇ£Âç≥‰ΩøÊü•ËØ¢ËØ∑Ê±ÇÁöÑÊñáÊú¨‰ø°ÊÅØÈÉΩ‰∏ÄÊ†∑ÔºåÈÇ£‰∏çÂêåÊó∂Èó¥ÁöÑ‰∏§Ê¨°Êü•ËØ¢‰πüÂ∫îËØ•ÂæóÂà∞‰∏çÂêåÁöÑÁªìÊûúÔºåÂ¶ÇÊûúÂú®Á¨¨‰∏ÄÊ¨°Êü•ËØ¢Êó∂Â∞±ÁºìÂ≠ò‰∫ÜÔºåÈÇ£Á¨¨‰∫åÊ¨°Êü•ËØ¢ÁöÑÊó∂ÂÄôÁõ¥Êé•‰ΩøÁî®Á¨¨‰∏ÄÊ¨°Êü•ËØ¢ÁöÑÁªìÊûúÂ∞±ÊòØÈîôËØØÁöÑ!</p>\n<p>Ê≠§Â§ñÔºåÊó¢ÁÑ∂ÊòØÁºìÂ≠òÔºåÈÇ£Â∞±ÊúâÂÆÉ <code>ÁºìÂ≠òÂ§±ÊïàÁöÑÊó∂ÂÄô</code>„ÄÇMySQL ÁöÑÁºìÂ≠òÁ≥ªÁªü‰ºöÁõëÊµãÊ∂âÂèäÂà∞ÁöÑÊØèÂº†Ë°®ÔºåÂè™Ë¶ÅËØ•Ë°®ÁöÑÁªìÊûÑÊàñËÄÖÊï∞ÊçÆË¢´‰øÆÊîπÔºåÂ¶ÇÂØπËØ•Ë°®‰ΩøÁî®‰∫Ü <code>INSERT</code>„ÄÅ<code>UPDATE</code>„ÄÅ<code>DELETE</code>„ÄÅ<code>TRUNCATE TABLE</code>„ÄÅ<code>ALTER TABLE</code>„ÄÅ<code>DROP TABLE</code>Êàñ <code>DROP DATABASE</code> ËØ≠Âè•ÔºåÈÇ£‰ΩøÁî®ËØ•Ë°®ÁöÑÊâÄÊúâÈ´òÈÄüÁºìÂ≠òÊü•ËØ¢ÈÉΩÂ∞ÜÂèò‰∏∫Êó†ÊïàÂπ∂‰ªéÈ´òÈÄüÁºìÂ≠ò‰∏≠Âà†Èô§ÔºÅÂØπ‰∫é <code>Êõ¥Êñ∞ÂéãÂäõÂ§ßÁöÑÊï∞ÊçÆÂ∫ì</code>Êù•ËØ¥ÔºåÊü•ËØ¢ÁºìÂ≠òÁöÑÂëΩ‰∏≠Áéá‰ºöÈùûÂ∏∏‰Ωé„ÄÇ</p>\n<p><strong><font color=red>ÊÄª‰πãÔºåÂõ†‰∏∫Êü•ËØ¢ÁºìÂ≠òÂæÄÂæÄÂºäÂ§ß‰∫éÂà©ÔºåÊü•ËØ¢ÁºìÂ≠òÁöÑÂ§±ÊïàÈùûÂ∏∏È¢ëÁπÅ„ÄÇ</font></strong></p>\n<p>‰∏ÄËà¨Âª∫ËÆÆÂ§ßÂÆ∂Âú®ÈùôÊÄÅË°®Èáå‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÔºå‰ªÄ‰πàÂè´<code>ÈùôÊÄÅË°®</code>Âë¢?Â∞±ÊòØ‰∏ÄËà¨Êàë‰ª¨ÊûÅÂ∞ëÊõ¥Êñ∞ÁöÑË°®„ÄÇÊØîÂ¶ÇÔºå‰∏Ä‰∏™Á≥ªÁªüÈÖçÁΩÆË°®„ÄÅÂ≠óÂÖ∏Ë°®ÔºåËøôÂº†Ë°®‰∏äÁöÑÊü•ËØ¢ÊâçÈÄÇÂêà‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠ò„ÄÇÂ•ΩÂú®MySQL‰πüÊèê‰æõ‰∫ÜËøôÁßç‚Äú<code>ÊåâÈúÄ‰ΩøÁî®</code>‚ÄùÁöÑÊñπÂºè„ÄÇ‰Ω†ÂèØ‰ª•Â∞Ümy.cnfÂèÇÊï∞ query_ <em>cache</em> type  ËÆæÁΩÆÊàêDEMANDÔºå‰ª£Ë°®ÂΩìsqlËØ≠Âè•‰∏≠ÊúâSQL_ CACHEÂÖ≥ÈîÆËØçÊó∂ÊâçÁºìÂ≠ò„ÄÇÊØîÂ¶ÇÔºö</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">query_ cache_ <span class=\"built_in\">type</span>Êúâ3‰∏™ÂÄº0‰ª£Ë°®ÂÖ≥Èó≠Êü•ËØ¢ÁºìÂ≠ò0FFÔºå1‰ª£Ë°®ÂºÄÂêØONÔºå2 (DEMAND)</span></span><br><span class=\"line\">query_cache_ type=2</span><br></pre></td></tr></table></figure>\n\n<p>ËøôÊ†∑ÂØπ‰∫éÈªòËÆ§ÁöÑSQLËØ≠Âè•ÈÉΩ‰∏ç‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠ò„ÄÇËÄåÂØπ‰∫é‰Ω†Á°ÆÂÆöË¶Å‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÁöÑËØ≠Âè•ÔºåÂèØ‰ª•Áî®SQL_CACHEÊòæÂºèÊåáÂÆöÔºåÂÉè‰∏ãÈù¢Ëøô‰∏™ËØ≠Âè•‰∏ÄÊ†∑Ôºö</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> SQL. CACHE <span class=\"operator\">*</span> <span class=\"keyword\">from</span> test <span class=\"keyword\">where</span> ID<span class=\"operator\">=</span><span class=\"number\">5</span> ;<span class=\"operator\">|</span></span><br></pre></td></tr></table></figure>\n\n<p>Êü•ÁúãÂΩìÂâçmysq|ÂÆû‰æãÊòØÂê¶ÂºÄÂêØÁºìÂ≠òÊú∫Âà∂</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># MySQL5.7 ‰∏≠Ôºö</span><br><span class=\"line\">mysql&gt; show global variables like &quot;%query_cache_type%&quot;;</span><br><span class=\"line\">+------------------+-------+</span><br><span class=\"line\">| Variable_name    | Value |</span><br><span class=\"line\">+------------------+-------+</span><br><span class=\"line\">| query_cache_type | OFF   |</span><br><span class=\"line\">+------------------+-------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># MySQL8.0 ‰∏≠Ôºö</span><br><span class=\"line\">mysql&gt; show global variables like &quot;%query_cache_type%&quot;;</span><br><span class=\"line\">Empty set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>ÁõëÊéßÊü•ËØ¢ÁºìÂ≠òÁöÑÂëΩ‰∏≠Áéá</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> status <span class=\"keyword\">like</span> <span class=\"string\">&#x27;%Qcache%&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116898.png\" alt=\"image-20220712222507959\"></p>\n<ul>\n<li><code>Qcache_free_blocks</code> ÔºöË°®Á§∫Êü•ËØ¢ÁºìÂ≠ò‰∏≠ËøòÊúâÂ§öÂ∞ëÂâ©‰ΩôÁöÑblocks,Â¶ÇÊûúËØ•ÂÄºÊòæÁ§∫ËæÉÂ§ß,ÂàôËØ¥ÊòéÊü•ËØ¢ÁºìÂ≠ò‰∏≠ÁöÑ<code>ÂÜÖÂ≠òÁ¢éÁâá</code>ËøáÂ§ö‰∫ÜÔºåÂèØËÉΩÂú®‰∏ÄÂÆöÁöÑÊó∂Èó¥ËøõË°åÊï¥ÁêÜ„ÄÇ</li>\n<li><code>Qcache_free_memory</code> ÔºöÊü•ËØ¢ÁºìÂ≠òÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÔºåÈÄöËøáËøô‰∏™ÂèÇÊï∞ÂèØ‰ª•ÂæàÊ∏ÖÊô∞ÁöÑÁü•ÈÅìÂΩìÂâçÁ≥ªÁªüÁöÑÊü•ËØ¢ÂÜÖÂ≠òÊòØÂê¶Â§üÁî®ÔºåÊòØÂ§ö‰∫ÜÔºåËøòÊòØ‰∏çÂ§üÁî®ÔºåDBAÂèØ‰ª•Ê†πÊçÆÂÆûÈôÖÊÉÖÂÜµÂÅöÂá∫Ë∞ÉÊï¥„ÄÇ</li>\n<li><code>Qcache_hits</code> ÔºöË°®Á§∫ÊúâÂ§öÂ∞ëÊ¨°ÂëΩ‰∏≠ÁºìÂ≠ò„ÄÇÊàë‰ª¨‰∏ªË¶ÅÂèØ‰ª•ÈÄöËøáËØ•ÂÄºÊù•È™åËØÅÊàë‰ª¨ÁöÑÊü•ËØ¢ÁºìÂ≠òÁöÑÊïàÊûú„ÄÇÊï∞Â≠óË∂äÂ§ßÔºåÁºìÂ≠òÊïàÊûúË∂äÁêÜÊÉ≥„ÄÇ</li>\n<li><code>Qcache_inserts</code> ÔºöË°®Á§∫Â§öÂ∞ëÊ¨°Êú™ÂëΩ‰∏≠ÁÑ∂ÂêéÊèíÂÖ•ÔºåÊÑèÊÄùÊòØÊñ∞Êù•ÁöÑSQLËØ∑Ê±ÇÂú®ÁºìÂ≠ò‰∏≠Êú™ÊâæÂà∞Ôºå‰∏çÂæó‰∏çÊâßË°åÊü•ËØ¢Â§ÑÁêÜ,ÊâßË°åÊü•ËØ¢Â§ÑÁêÜÂêéÊääÁªìÊûúinsertÂà∞Êü•ËØ¢ÁºìÂ≠ò‰∏≠„ÄÇËøôÊ†∑ÁöÑÊÉÖÂÜµÁöÑÊ¨°Êï∞Ë∂äÂ§öÔºåË°®Á§∫Êü•ËØ¢ÁºìÂ≠òÂ∫îÁî®Âà∞ÁöÑÊØîËæÉÂ∞ëÔºåÊïàÊûú‰πüÂ∞±‰∏çÁêÜÊÉ≥„ÄÇÂΩìÁÑ∂Á≥ªÁªüÂàöÂêØÂä®ÂêéÔºåÊü•ËØ¢ÁºìÂ≠òÊòØÁ©∫ÁöÑÔºåËøôÂæàÊ≠£Â∏∏„ÄÇ</li>\n<li><code>Qcache_lowmem_prunes</code> ÔºöËØ•ÂèÇÊï∞ËÆ∞ÂΩïÊúâÂ§öÂ∞ëÊù°Êü•ËØ¢Âõ†‰∏∫ÂÜÖÂ≠ò‰∏çË∂≥ËÄåË¢´ÁßªÈô§Âá∫Êü•ËØ¢ÁºìÂ≠ò„ÄÇÈÄöËøáËøô‰∏™ÂÄºÔºåÁî®Êà∑ÂèØ‰ª•ÈÄÇÂΩìÁöÑË∞ÉÊï¥ÁºìÂ≠òÂ§ßÂ∞è„ÄÇ</li>\n<li><code>Qcache_not_cached</code> ÔºöË°®Á§∫Âõ†‰∏∫query_cache_typeÁöÑËÆæÁΩÆËÄåÊ≤°ÊúâË¢´ÁºìÂ≠òÁöÑÊü•ËØ¢Êï∞Èáè„ÄÇ</li>\n<li><code>Qcache_queries_in_cache</code>ÔºöÂΩìÂâçÁºìÂ≠ò‰∏≠<code>ÁºìÂ≠òÁöÑÊü•ËØ¢Êï∞Èáè</code>„ÄÇ</li>\n<li><code>Qcache_total_blocks</code> ÔºöÂΩìÂâçÁºìÂ≠òÁöÑblockÊï∞Èáè„ÄÇ</li>\n</ul>\n<h3 id=\"2-1-2-Ëß£ÊûêÂô®\"><a href=\"#2-1-2-Ëß£ÊûêÂô®\" class=\"headerlink\" title=\"2.1.2 Ëß£ÊûêÂô®\"></a>2.1.2 <strong>Ëß£ÊûêÂô®</strong></h3><p>Âú®Ëß£ÊûêÂô®‰∏≠ÂØπ SQL ËØ≠Âè•ËøõË°åËØ≠Ê≥ïÂàÜÊûê„ÄÅËØ≠‰πâÂàÜÊûê„ÄÇ</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130116982.png\" alt=\"image-20220115172951498\"></p>\n<p>Â¶ÇÊûúÊ≤°ÊúâÂëΩ‰∏≠Êü•ËØ¢ÁºìÂ≠òÔºåÂ∞±Ë¶ÅÂºÄÂßãÁúüÊ≠£ÊâßË°åËØ≠Âè•‰∫Ü„ÄÇÈ¶ñÂÖàÔºåMySQL ÈúÄË¶ÅÁü•ÈÅì‰Ω†Ë¶ÅÂÅö‰ªÄ‰πàÔºåÂõ†Ê≠§ÈúÄË¶ÅÂØπSQLËØ≠Âè•ÂÅöËß£Êûê„ÄÇSQLËØ≠Âè•ÁöÑÂàÜÊûêÂàÜ‰∏∫ËØçÊ≥ïÂàÜÊûê‰∏éËØ≠Ê≥ïÂàÜÊûê„ÄÇ</p>\n<p>ÂàÜÊûêÂô®ÂÖàÂÅö‚Äú<code>ËØçÊ≥ïÂàÜÊûê</code> ‚Äù„ÄÇ‰Ω†ËæìÂÖ•ÁöÑÊòØÁî±Â§ö‰∏™Â≠óÁ¨¶‰∏≤ÂíåÁ©∫Ê†ºÁªÑÊàêÁöÑ‰∏ÄÊù° SQL ËØ≠Âè•ÔºåMySQL ÈúÄË¶ÅËØÜÂà´Âá∫ÈáåÈù¢ ÁöÑÂ≠óÁ¨¶‰∏≤ÂàÜÂà´ÊòØ‰ªÄ‰πàÔºå‰ª£Ë°®‰ªÄ‰πà„ÄÇ</p>\n<p> MySQL ‰ªé‰Ω†ËæìÂÖ•ÁöÑ‚Äùselect‚ÄùËøô‰∏™ÂÖ≥ÈîÆÂ≠óËØÜÂà´Âá∫Êù•ÔºåËøôÊòØ‰∏Ä‰∏™Êü•ËØ¢ËØ≠Âè•„ÄÇÂÆÉ‰πüË¶ÅÊääÂ≠óÁ¨¶‰∏≤‚ÄúT‚ÄùËØÜÂà´Êàê‚ÄúË°®Âêç T‚ÄùÔºåÊääÂ≠óÁ¨¶‰∏≤‚ÄúID‚ÄùËØÜÂà´Êàê‚ÄúÂàó ID‚Äù„ÄÇ</p>\n<p>Êé•ÁùÄÔºåË¶ÅÂÅö‚Äú<code>ËØçÊ≥ïÂàÜÊûê</code> ‚Äù„ÄÇÊ†πÊçÆËØçÊ≥ïÂàÜÊûêÁöÑÁªìÊûúÔºåËØ≠Ê≥ïÂàÜÊûêÂô®ÔºàÊØîÂ¶ÇÔºöBisonÔºâ‰ºöÊ†πÊçÆËØ≠Ê≥ïËßÑÂàôÔºåÂà§Êñ≠‰Ω†Ëæì ÂÖ•ÁöÑËøô‰∏™ SQL ËØ≠Âè•ÊòØÂê¶ <code>Êª°Ë∂≥ MySQL ËØ≠Ê≥ï</code>„ÄÇ</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> department_id,job_id,<span class=\"built_in\">avg</span>(salary) <span class=\"keyword\">from</span> employees <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> department_id; </span><br></pre></td></tr></table></figure>\n\n<p>Â¶ÇÊûú‰Ω†ÁöÑËØ≠Âè•‰∏çÂØπÔºåÂ∞±‰ºöÊî∂Âà∞‚Äú‚ÄùÁöÑÈîôËØØÊèêÈÜíÔºåÊØîÂ¶ÇËøô‰∏™ËØ≠Âè•fromÂÜôÊàê‰∫Ürom„ÄÇ</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; select * fro user;</span><br><span class=\"line\">ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;fro user&#x27; at line 1</span><br></pre></td></tr></table></figure>\n\n<p>Â¶ÇÊûúSQLËØ≠Âè•Ê≠£Á°ÆÔºåÂàô‰ºöÁîüÊàê‰∏Ä‰∏™ËøôÊ†∑ÁöÑËØ≠Ê≥ïÊ†ë:</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117140.png\" alt=\"image-20220115173057415\"></p>\n<p>‰∏ãÂõæÊòØSQLËØçÊ≥ïÂàÜÊûêÁöÑËøáÁ®ãÊ≠•È™§Ôºö</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117605.png\" alt=\"image-20220712223741324\"></p>\n<p>Ëá≥Ê≠§Êàë‰ª¨Ëß£ÊûêÂô®ÁöÑÂ∑•‰Ωú‰ªªÂä°‰πüÂü∫Êú¨ÂúÜÊª°‰∫Ü„ÄÇÊé•‰∏ãÊù•ËøõÂÖ•Âà∞‰ºòÂåñÂô®„ÄÇ</p>\n<h3 id=\"2-1-3-‰ºòÂåñÂô®\"><a href=\"#2-1-3-‰ºòÂåñÂô®\" class=\"headerlink\" title=\"2.1.3 ‰ºòÂåñÂô®\"></a>2.1.3 ‰ºòÂåñÂô®</h3><p>Âú®‰ºòÂåñÂô®‰∏≠‰ºöÁ°ÆÂÆö SQL ËØ≠Âè•ÁöÑÊâßË°åË∑ØÂæÑÔºåÊØîÂ¶ÇÊòØÊ†πÊçÆ <code>ÂÖ®Ë°®Ê£ÄÁ¥¢</code> ÔºåËøòÊòØÊ†πÊçÆ <code>Á¥¢ÂºïÊ£ÄÁ¥¢</code> Á≠â„ÄÇ</p>\n<p>ÁªèËøá‰∫ÜËß£ÊûêÂô®ÔºåMySQL Â∞±Áü•ÈÅì‰Ω†Ë¶ÅÂÅö‰ªÄ‰πà‰∫Ü„ÄÇÂú®ÂºÄÂßãÊâßË°å‰πãÂâçÔºåËøòË¶ÅÂÖàÁªèËøá‰ºòÂåñÂô®ÁöÑÂ§ÑÁêÜ„ÄÇ<strong>‰∏ÄÊù°Êü•ËØ¢ÂèØ‰ª•ÊúâÂæàÂ§öÁßçÊâßË°åÊñπÂºèÔºåÊúÄÂêéÈÉΩËøîÂõûÁõ∏ÂêåÁöÑÁªìÊûú„ÄÇ‰ºòÂåñÂô®ÁöÑ‰ΩúÁî®Â∞±ÊòØÊâæÂà∞ËøôÂÖ∂‰∏≠ÊúÄÂ•ΩÁöÑÊâßË°åËÆ°Âàí</strong>„ÄÇ</p>\n<p>‰∏æ‰æãÔºöÂ¶Ç‰∏ãËØ≠Âè•ÊòØÊâßË°å‰∏§‰∏™Ë°®ÁöÑ join:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> test1 <span class=\"keyword\">join</span> test2 <span class=\"keyword\">using</span>(ID)</span><br><span class=\"line\"><span class=\"keyword\">where</span> test1.name<span class=\"operator\">=</span><span class=\"string\">&#x27;zhangwei&#x27;</span> <span class=\"keyword\">and</span> test2.name<span class=\"operator\">=</span><span class=\"string\">&#x27;mysqlÈ´òÁ∫ßËØæÁ®ã&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ÊñπÊ°à1:ÂèØ‰ª•ÂÖà‰ªéË°® test1 ÈáåÈù¢ÂèñÂá∫ name=&#x27;zhangwei&#x27;ÁöÑËÆ∞ÂΩïÁöÑ ID ÂÄºÔºåÂÜçÊ†πÊçÆ ID ÂÄºÂÖ≥ËÅîÂà∞Ë°® test2ÔºåÂÜçÂà§Êñ≠ test2 ÈáåÈù¢ name ÁöÑÂÄºÊòØÂê¶Á≠â‰∫é &#x27;mysqlÈ´òÁ∫ßËØæÁ®ã&#x27;„ÄÇ</span><br><span class=\"line\"></span><br><span class=\"line\">ÊñπÊ°à2:ÂèØ‰ª•ÂÖà‰ªéË°® test2 ÈáåÈù¢ÂèñÂá∫ name=&#x27;mysqlÈ´òÁ∫ßËØæÁ®ã&#x27; ÁöÑËÆ∞ÂΩïÁöÑ ID ÂÄºÔºåÂÜçÊ†πÊçÆ ID ÂÄºÂÖ≥ËÅîÂà∞ test1Ôºå ÂÜçÂà§Êñ≠ test1 ÈáåÈù¢ nameÁöÑÂÄºÊòØÂê¶Á≠â‰∫é zhangwei„ÄÇ</span><br><span class=\"line\"></span><br><span class=\"line\">Ëøô‰∏§ÁßçÊâßË°åÊñπÊ≥ïÁöÑÈÄªËæëÁªìÊûúÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰ΩÜÊòØÊâßË°åÁöÑÊïàÁéá‰ºöÊúâ‰∏çÂêåÔºåËÄå‰ºòÂåñÂô®ÁöÑ‰ΩúÁî®Â∞±ÊòØÂÜ≥ÂÆöÈÄâÊã©‰ΩøÁî®Âì™‰∏Ä‰∏™ÊñπÊ°à„ÄÇ‰ºòÂåñ</span><br><span class=\"line\">Âô®Èò∂ÊÆµÂÆåÊàêÂêéÔºåËøô‰∏™ËØ≠Âè•ÁöÑÊâßË°åÊñπÊ°àÂ∞±Á°ÆÂÆö‰∏ãÊù•‰∫ÜÔºåÁÑ∂ÂêéËøõÂÖ•ÊâßË°åÂô®Èò∂ÊÆµ„ÄÇ</span><br><span class=\"line\"></span><br><span class=\"line\">Â¶ÇÊûú‰Ω†ËøòÊúâ‰∏Ä‰∫õÁñëÈóÆÔºåÊØîÂ¶Ç‰ºòÂåñÂô®ÊòØÊÄé‰πàÈÄâÊã©Á¥¢ÂºïÁöÑÔºåÊúâÊ≤°ÊúâÂèØËÉΩÈÄâÊã©ÈîôÁ≠â„ÄÇÂêéÈù¢ËÆ≤Âà∞Á¥¢ÂºïÊàë‰ª¨ÂÜçË∞à„ÄÇ</span><br></pre></td></tr></table></figure>\n\n<p>Âú®Êü•ËØ¢‰ºòÂåñÂô®‰∏≠ÔºåÂèØ‰ª•ÂàÜ‰∏∫ <code>ÈÄªËæëÊü•ËØ¢</code> ‰ºòÂåñÈò∂ÊÆµÂíå <code>Áâ©ÁêÜÊü•ËØ¢</code> ‰ºòÂåñÈò∂ÊÆµ„ÄÇ</p>\n<p>ÈÄªËæëÊü•ËØ¢‰ºòÂåñÂ∞±ÊòØÈÄöËøáÊîπÂèòSQLËØ≠Âè•ÁöÑÂÜÖÂÆπÊù•‰ΩøÂæóSQLÊü•ËØ¢Êõ¥È´òÊïàÔºåÂêåÊó∂‰∏∫Áâ©ÁêÜÊü•ËØ¢‰ºòÂåñÊèê‰æõÊõ¥Â§öÁöÑÂÄôÈÄâÊâßË°åËÆ°Âàí„ÄÇÈÄöÂ∏∏ÈááÁî®ÁöÑÊñπÂºèÊòØÂØπSQLËØ≠Âè•ËøõË°å<code>Á≠â‰ª∑ÂèòÊç¢</code>ÔºåÂØπÊü•ËØ¢ËøõË°åÈáçÂÜôÔºåËÄåÊü•ËØ¢ÈáçÂÜôÁöÑÊï∞Â≠¶Âü∫Á°ÄÂ∞±ÊòØÂÖ≥Á≥ª‰ª£Êï∞„ÄÇÂØπÊù°‰ª∂Ë°®ËææÂºèËøõË°åÁ≠â‰ª∑Ë∞ìËØçÈáçÂÜô„ÄÅÊù°‰ª∂ÁÆÄÂåñÔºåÂØπËßÜÂõæËøõË°åÈáçÂÜôÔºåÂØπÂ≠êÊü•ËØ¢ËøõË°å‰ºòÂåñÔºåÂØπËøûÊé•ËØ≠‰πâËøõË°å‰∫ÜÂ§ñËøûÊé•Ê∂àÈô§„ÄÅÂµåÂ•óËøûÊé•Ê∂àÈô§Á≠â„ÄÇ</p>\n<p>Áâ©ÁêÜÊü•ËØ¢‰ºòÂåñÊòØÂü∫‰∫éÂÖ≥Á≥ª‰ª£Êï∞ËøõË°åÁöÑÊü•ËØ¢ÈáçÂÜô,ËÄåÂÖ≥Á≥ª‰ª£Êï∞ÁöÑÊØè‰∏ÄÊ≠•ÈÉΩÂØπÂ∫îÁùÄÁâ©ÁêÜËÆ°ÁÆó, Ëøô‰∫õÁâ©ÁêÜËÆ°ÁÆóÂæÄÂæÄÂ≠òÂú®Â§öÁßçÁÆóÊ≥ïÔºåÂõ†Ê≠§ÈúÄË¶ÅËÆ°ÁÆóÂêÑÁßçÁâ©ÁêÜË∑ØÂæÑÁöÑ‰ª£‰ª∑Ôºå‰ªé‰∏≠ÈÄâÊã©‰ª£‰ª∑ÊúÄÂ∞èÁöÑ‰Ωú‰∏∫ÊâßË°åËÆ°Âàí„ÄÇÂú®Ëøô‰∏™Èò∂ÊÆµÈáåÔºåÂØπ‰∫éÂçïË°®ÂíåÂ§öË°®ËøûÊé•ÁöÑÊìç‰ΩúÔºåÈúÄË¶ÅÈ´òÊïàÂú∞<code>‰ΩøÁî®Á¥¢Âºï</code>ÔºåÊèêÂçáÊü•ËØ¢ÊïàÁéá„ÄÇ</p>\n<h3 id=\"2-1-4-ÊâßË°åÂô®\"><a href=\"#2-1-4-ÊâßË°åÂô®\" class=\"headerlink\" title=\"2.1.4 ÊâßË°åÂô®\"></a>2.1.4 ÊâßË°åÂô®</h3><p>Êà™Ê≠¢Âà∞Áé∞Âú®ÔºåËøòÊ≤°ÊúâÁúüÊ≠£ÂéªËØªÂÜôÁúüÂÆûÁöÑË°®Ôºå‰ªÖ‰ªÖÂè™ÊòØ‰∫ßÂá∫‰∫Ü‰∏Ä‰∏™ÊâßË°åËÆ°Âàí„ÄÇ‰∫éÊòØÂ∞±ËøõÂÖ•‰∫Ü <code>ÊâßË°åÂô®Èò∂ÊÆµ</code> „ÄÇ</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117552.png\" alt=\"image-20220115173252824\"></p>\n<p>Âú®ÊâßË°å‰πãÂâçÈúÄË¶ÅÂà§Êñ≠ËØ•Áî®Êà∑ÊòØÂê¶ÂÖ∑Â§áÊùÉÈôê „ÄÇÂ¶ÇÊûúÊ≤°ÊúâÔºåÂ∞±‰ºöËøîÂõûÊùÉÈôêÈîôËØØ„ÄÇÂ¶ÇÊûúÂÖ∑Â§áÊùÉÈôêÔºåÂ∞±ÊâßË°å SQL Êü•ËØ¢Âπ∂ËøîÂõûÁªìÊûú„ÄÇÂú® MySQL 8.0 ‰ª•‰∏ãÁöÑÁâàÊú¨ÔºåÂ¶ÇÊûúËÆæÁΩÆ‰∫ÜÊü•ËØ¢ÁºìÂ≠òÔºåËøôÊó∂‰ºöÂ∞ÜÊü•ËØ¢ÁªìÊûúËøõË°åÁºìÂ≠ò„ÄÇ</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> test <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<p>Â¶ÇÊûúÊúâÊùÉÈôêÔºåÂ∞±ÊâìÂºÄË°®ÁªßÁª≠ÊâßË°å„ÄÇÊâìÂºÄË°®ÁöÑÊó∂ÂÄôÔºåÊâßË°åÂô®Â∞±‰ºöÊ†πÊçÆË°®ÁöÑÂºïÊìéÂÆö‰πâÔºåË∞ÉÁî®Â≠òÂÇ®ÂºïÊìéAPIÂØπË°®ËøõË°åÁöÑËØªÂÜô„ÄÇÂ≠òÂÇ®ÂºïÊìéAPIÂè™ÊòØÊäΩË±°Êé•Âè£Ôºå‰∏ãÈù¢ËøòÊúâ‰∏™<strong>Â≠òÂÇ®ÂºïÊìéÂ±Ç</strong>ÔºåÂÖ∑‰ΩìÂÆûÁé∞ËøòÊòØË¶ÅÁúãË°®ÈÄâÊã©ÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇ</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117221.png\"></p>\n<p>ÊØîÂ¶ÇÔºöË°® test ‰∏≠ÔºåID Â≠óÊÆµÊ≤°ÊúâÁ¥¢ÂºïÔºåÈÇ£‰πàÊâßË°åÂô®ÁöÑÊâßË°åÊµÅÁ®ãÊòØËøôÊ†∑ÁöÑÔºö</p>\n<ul>\n<li>Ë∞ÉÁî® InnoDB ÂºïÊìéÊé•Âè£ÂèñËøô‰∏™Ë°®ÁöÑÁ¨¨‰∏ÄË°åÔºåÂà§Êñ≠ ID ÂÄºÊòØ‰∏çÊòØ1ÔºåÂ¶ÇÊûú‰∏çÊòØÂàôË∑≥ËøáÔºåÂ¶ÇÊûúÊòØÂàôÂ∞ÜËøôË°åÂ≠òÂú®ÁªìÊûúÈõÜ‰∏≠; Ë∞ÉÁî®ÂºïÊìéÊé•Âè£Âèñ‚Äú‰∏ã‰∏ÄË°å‚ÄùÔºåÈáçÂ§çÁõ∏ÂêåÁöÑÂà§Êñ≠ÈÄªËæëÔºåÁõ¥Âà∞ÂèñÂà∞Ëøô‰∏™Ë°®ÁöÑÊúÄÂêé‰∏ÄË°å„ÄÇ</li>\n<li>ÊâßË°åÂô®Â∞Ü‰∏äËø∞ÈÅçÂéÜËøáÁ®ã‰∏≠ÊâÄÊúâÊª°Ë∂≥Êù°‰ª∂ÁöÑË°åÁªÑÊàêÁöÑËÆ∞ÂΩïÈõÜ‰Ωú‰∏∫ÁªìÊûúÈõÜËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</li>\n</ul>\n<p>Ëá≥Ê≠§ÔºåËøô‰∏™ËØ≠Âè•Â∞±ÊâßË°åÂÆåÊàê‰∫Ü„ÄÇÂØπ‰∫éÊúâÁ¥¢ÂºïÁöÑË°®ÔºåÊâßË°åÁöÑÈÄªËæë‰πüÂ∑Æ‰∏çÂ§ö„ÄÇ</p>\n<p>&#x3D;&#x3D;SQL ËØ≠Âè•Âú® MySQL ‰∏≠ÁöÑÊµÅÁ®ãÊòØ&#x3D;&#x3D;Ôºö<code>SQL ËØ≠Âè• ‚Üí Êü•ËØ¢ÁºìÂ≠ò ‚Üí Ëß£ÊûêÂô® ‚Üí ‰ºòÂåñÂô® ‚Üí ÊâßË°åÂô®</code>„ÄÇ</p>\n<p><img src=\"https://blog-images-1309598269.cos.ap-beijing.myqcloud.com/blogImgs/202206231430741.png\" alt=\"image-20220115173423050\"></p>\n<h2 id=\"2-2-MySQL8‰∏≠SQLÊâßË°åÂéüÁêÜ\"><a href=\"#2-2-MySQL8‰∏≠SQLÊâßË°åÂéüÁêÜ\" class=\"headerlink\" title=\"2.2 MySQL8‰∏≠SQLÊâßË°åÂéüÁêÜ\"></a>2.2 MySQL8‰∏≠SQLÊâßË°åÂéüÁêÜ</h2><p>ÂâçÈù¢ÁöÑÁªìÊûÑÂõæÂæàÂ§çÊùÇÔºåÊàë‰ª¨ÈúÄË¶ÅÊäìÂèñÊúÄÊ†∏ÂøÉÁöÑÈÉ®ÂàÜ: SQLÁöÑÊâßË°åÂéüÁêÜ„ÄÇ‰∏çÂêåÁöÑDBMSÁöÑSQLÁöÑÊâßË°åÂéüÁêÜÊòØÁõ∏ÈÄöÁöÑÔºåÂè™ÊòØÂú®‰∏çÂêåÁöÑËΩØ‰ª∂‰∏≠ÔºåÂêÑÊúâÂêÑÁöÑÂÆûÁé∞Ë∑ØÂæÑ„ÄÇ</p>\n<p>Êó¢ÁÑ∂‰∏ÄÊù°SQLËØ≠Âè•‰ºöÁªèÂéÜ‰∏çÂêåÁöÑÊ®°Âùó,ÈÇ£Êàë‰ª¨Â∞±Êù•Áúã‰∏ãÔºåÂú®‰∏çÂêåÁöÑÊ®°Âùó‰∏≠ÔºåSQL ÊâßË°åÊâÄ‰ΩøÁî®ÁöÑËµÑÊ∫ê(Êó∂Èó¥)ÊòØÊÄéÊ†∑ÁöÑ„ÄÇÂ¶Ç‰ΩïÂú®MySQL‰∏≠ÂØπ‰∏ÄÊù°SQLËØ≠Âè•ÁöÑÊâßË°åÊó∂Èó¥ËøõË°åÂàÜÊûê„ÄÇ</p>\n<h3 id=\"2-2-1-Á°ÆËÆ§profilingÊòØÂê¶ÂºÄÂêØ\"><a href=\"#2-2-1-Á°ÆËÆ§profilingÊòØÂê¶ÂºÄÂêØ\" class=\"headerlink\" title=\"2.2.1. Á°ÆËÆ§profilingÊòØÂê¶ÂºÄÂêØ\"></a>2.2.1. Á°ÆËÆ§profilingÊòØÂê¶ÂºÄÂêØ</h3><p>‰∫ÜËß£Êü•ËØ¢ËØ≠Âè•Â∫ïÂ±ÇÊâßË°åÁöÑËøáÁ®ãÔºö<code>select @@profiling;</code> ÊàñËÄÖ<code>show variables like &#39;%profiling%&#39; </code>Êü•ÁúãÊòØÂê¶ÂºÄÂêØËÆ°Âàí„ÄÇÂºÄÂêØÂÆÉÂèØ‰ª•ËÆ©MySQLÊî∂ÈõÜÂú®SQLÊâßË°åÊó∂ÊâÄ‰ΩøÁî®ÁöÑËµÑÊ∫êÊÉÖÂÜµÔºåÂëΩ‰ª§Â¶Ç‰∏ãÔºö</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; select @@profiling;</span><br><span class=\"line\">mysq1&gt; show variables like &#x27;profiling&#x27;;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117783.png\" alt=\"image-20220712230716818\"></p>\n<p>profiling &#x3D; 0‰ª£Ë°®ÂÖ≥Èó≠ÔºåÊàë‰ª¨ÈúÄË¶ÅÊääprofilingÊâìÂºÄÔºåÂç≥ËÆæÁΩÆ‰∏∫1Ôºõ</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; set profiling = 1;</span><br></pre></td></tr></table></figure>\n\n<p>ProfilingÂäüËÉΩÁî±MySQL‰ºöËØùÂèòÈáèÔºöprofilingÊéßÂà∂„ÄÇÈªòËÆ§ÊòØOFFÔºàÂÖ≥Èó≠Áä∂ÊÄÅÔºâ„ÄÇ</p>\n<h3 id=\"2-2-2-Â§öÊ¨°ÊâßË°åÁõ∏ÂêåSQLÊü•ËØ¢\"><a href=\"#2-2-2-Â§öÊ¨°ÊâßË°åÁõ∏ÂêåSQLÊü•ËØ¢\" class=\"headerlink\" title=\"2.2.2.Â§öÊ¨°ÊâßË°åÁõ∏ÂêåSQLÊü•ËØ¢\"></a>2.2.2.Â§öÊ¨°ÊâßË°åÁõ∏ÂêåSQLÊü•ËØ¢</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> employees;</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> employees;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-3-Êü•Áúãprofiles\"><a href=\"#2-2-3-Êü•Áúãprofiles\" class=\"headerlink\" title=\"2.2.3.Êü•Áúãprofiles\"></a>2.2.3.Êü•Áúãprofiles</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show profiles #Êü•ËØ¢ÊâÄÊúâsqlËØ≠Âè•ÁöÑÂàÜÊûêÊ¶ÇËßà</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117582.png\" alt=\"image-20220713001646187\"></p>\n<h3 id=\"2-2-4-Êü•Áúãprofile\"><a href=\"#2-2-4-Êü•Áúãprofile\" class=\"headerlink\" title=\"2.2.4.Êü•Áúãprofile\"></a>2.2.4.Êü•Áúãprofile</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show profie;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117949.png\" alt=\"image-20220713001733244\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show profie for query Query_ID;# Êü•ÁúãÊüê‰∏ÄÊ¨°sqlÊâßË°åÁöÑÂàÜÊûêËøáÁ®ã</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117654.png\" alt=\"image-20220713001825251\"></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117926.png\" alt=\"image-20220713001556760\"></p>\n<h2 id=\"2-3-MySQL5-7‰∏≠SQLÊâßË°åÂéüÁêÜ\"><a href=\"#2-3-MySQL5-7‰∏≠SQLÊâßË°åÂéüÁêÜ\" class=\"headerlink\" title=\"2.3 MySQL5.7‰∏≠SQLÊâßË°åÂéüÁêÜ\"></a>2.3 MySQL5.7‰∏≠SQLÊâßË°åÂéüÁêÜ</h2><p>ËøôÈáåÊàë‰ª¨ÈúÄË¶Å<code>ÊòæÁ§∫ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠òÊ®°Âºè</code>„ÄÇÂú®MySQL5.7‰∏≠Â¶Ç‰∏ãËÆæÁΩÆÔºö</p>\n<h3 id=\"2-3-1-ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠ò\"><a href=\"#2-3-1-ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠ò\" class=\"headerlink\" title=\"2.3.1.ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠ò\"></a>2.3.1.ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºÄÂêØÊü•ËØ¢ÁºìÂ≠ò</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">query_cache_type=1</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-2-ÈáçÂêØMysqlÊúçÂä°\"><a href=\"#2-3-2-ÈáçÂêØMysqlÊúçÂä°\" class=\"headerlink\" title=\"2.3.2.ÈáçÂêØMysqlÊúçÂä°\"></a>2.3.2.ÈáçÂêØMysqlÊúçÂä°</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart mysqld</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-3-ÂºÄÂêØÊü•ËØ¢ËÆ°Âàí\"><a href=\"#2-3-3-ÂºÄÂêØÊü•ËØ¢ËÆ°Âàí\" class=\"headerlink\" title=\"2.3.3.ÂºÄÂêØÊü•ËØ¢ËÆ°Âàí\"></a>2.3.3.ÂºÄÂêØÊü•ËØ¢ËÆ°Âàí</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; set profiling = 1;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-4-ÊâßË°åËØ≠Âè•‰∏§Ê¨°\"><a href=\"#2-3-4-ÊâßË°åËØ≠Âè•‰∏§Ê¨°\" class=\"headerlink\" title=\"2.3.4.ÊâßË°åËØ≠Âè•‰∏§Ê¨°\"></a>2.3.4.ÊâßË°åËØ≠Âè•‰∏§Ê¨°</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from departments;</span><br><span class=\"line\"></span><br><span class=\"line\">select * from departments;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-5-Êü•Áúãprofiles\"><a href=\"#2-3-5-Êü•Áúãprofiles\" class=\"headerlink\" title=\"2.3.5.Êü•Áúãprofiles\"></a>2.3.5.Êü•Áúãprofiles</h3><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117455.png\" alt=\"image-20220713000901627\"></p>\n<h3 id=\"2-3-6-Êü•Áúãprofile\"><a href=\"#2-3-6-Êü•Áúãprofile\" class=\"headerlink\" title=\"2.3.6.Êü•Áúãprofile\"></a>2.3.6.Êü•Áúãprofile</h3><p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117965.png\" alt=\"image-20220713000946556\"></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117166.png\" alt=\"image-20220713001014156\"></p>\n<p>ÁªìËÆ∫‰∏çË®ÄËÄåÂñª.ÊâßË°åÁºñÂè∑10Êó∂,ÊØîÊâßË°åÁºñÂè∑9Êó∂Â∞ë‰∫ÜÂæàÂ§ö‰ø°ÊÅØ,‰ªéÊà™Âõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫Êü•ËØ¢ËØ≠Âè•Áõ¥Êé•‰ªéÁºìÂ≠ò‰∏≠Ëé∑ÂèñÊï∞ÊçÆ .</p>\n<ul>\n<li><strong>Ê≥®ÊÑè1Ôºö</strong>&#x3D;&#x3D;SQLÂøÖÈ°ªÊó∂‰∏ÄËá¥ÁöÑ,Âê¶Âàô,‰∏çËÉΩÂëΩ‰∏≠ÁºìÂ≠ò.&#x3D;&#x3D;</li>\n</ul>\n<p>‰æãÂ¶ÇÔºö</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#ËôΩÁÑ∂Êü•ËØ¢ÁªìÊûú‰∏ÄËá¥Ôºå ‰ΩÜÂπ∂Ê≤°ÊúâÂëΩ‰∏≠ÁºìÂ≠ò„ÄÇ</span><br><span class=\"line\">select * from mydb . mytbl where id=2</span><br><span class=\"line\">select * from mydb . mytbl where id&gt;1 and id&lt;3</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>Ê≥®ÊÑè2Ôºö</strong>ÂêåÊ†∑ÁöÑÂºÄÂêØÁºìÂ≠òÁöÑÈÖçÁΩÆ‰ø°ÊÅØÂ¶ÇÊûúÂú®MySQL8‰∏≠Ê∑ªÂä†„ÄÇÈáçÂêØÊúçÂä°Êó∂‰ºöÊä•Èîô:</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[ root@atguigu01 ~]# vim /etc/my.cnf</span><br><span class=\"line\">[root@atguigu01 ~]# systemctl restart mysqld;</span><br><span class=\"line\">Job for mysqld.service failed because the control process exited with error code. See</span><br><span class=\"line\">&quot;systemctl status mysqld. service&quot; and &quot;journalctl -xe&quot; for details.</span><br></pre></td></tr></table></figure>\n\n<p>ÂàÜÂà´Âú®MySQL5.7ÂíåMySQL8‰∏≠ÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§Ôºö</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show variables like &#x27;%query_ cache%&#x27;;</span><br></pre></td></tr></table></figure>\n\n<p>MySQL5.7‰∏≠ÊòæÁ§∫Ôºö</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117439.png\" alt=\"image-20220713002324616\"></p>\n<p>MySQL8.0‰∏≠ÊòæÁ§∫Ôºö</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130117438.png\" alt=\"image-20220713002427047\"></p>\n<h2 id=\"2-4-SQLËØ≠Ê≥ïÈ°∫Â∫è\"><a href=\"#2-4-SQLËØ≠Ê≥ïÈ°∫Â∫è\" class=\"headerlink\" title=\"2.4 SQLËØ≠Ê≥ïÈ°∫Â∫è\"></a>2.4 SQLËØ≠Ê≥ïÈ°∫Â∫è</h2><p>ÈöèÁùÄ MySQL ÁâàÊú¨ÁöÑÊõ¥Êñ∞Êç¢‰ª£ÔºåÂÖ∂‰ºòÂåñÂô®‰πüÂú®‰∏çÊñ≠ÁöÑÂçáÁ∫ßÔºå‰ºòÂåñÂô®‰ºöÂàÜÊûê‰∏çÂêåÊâßË°åÈ°∫Â∫è‰∫ßÁîüÁöÑÊÄßËÉΩÊ∂àËÄó‰∏çÂêåËÄåÂä®ÊÄÅË∞ÉÊï¥ÊâßË°åÈ°∫Â∫è„ÄÇ</p>\n<p>ÈúÄÊ±ÇÔºöÊü•ËØ¢ÊØè‰∏™ÈÉ®Èó®Âπ¥ÈæÑÈ´ò‰∫é 20 Â≤ÅÁöÑ‰∫∫Êï∞‰∏îÈ´ò‰∫é 20 Â≤Å‰∫∫Êï∞‰∏çËÉΩÂ∞ë‰∫é 2 ‰∫∫ÔºåÊòæÁ§∫‰∫∫Êï∞ÊúÄÂ§öÁöÑÁ¨¨‰∏ÄÂêçÈÉ®Èó®‰ø°ÊÅØ„ÄÇ</p>\n<p>‰∏ãÈù¢ÊòØÁªèÂ∏∏Âá∫Áé∞ÁöÑÊü•ËØ¢È°∫Â∫è:</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118286.png\" alt=\"image-20220115174625139\">]</p>\n<h2 id=\"2-5-Oracle‰∏≠ÁöÑSQLÊâßË°åÊµÅÁ®ã-‰∫ÜËß£\"><a href=\"#2-5-Oracle‰∏≠ÁöÑSQLÊâßË°åÊµÅÁ®ã-‰∫ÜËß£\" class=\"headerlink\" title=\"2.5 Oracle‰∏≠ÁöÑSQLÊâßË°åÊµÅÁ®ã(‰∫ÜËß£)\"></a>2.5 Oracle‰∏≠ÁöÑSQLÊâßË°åÊµÅÁ®ã(‰∫ÜËß£)</h2><p>Oracle‰∏≠ÈááÁî®‰∫Ü&#x3D;&#x3D;ÂÖ±‰∫´Ê±†&#x3D;&#x3D;Êù•Âà§Êñ≠SQLËØ≠Âè•ÊòØÂê¶Â≠òÂú®ÁºìÂ≠òÂíåÊâßË°åËÆ°ÂàíÔºåÈÄöËøáËøô‰∏ÄÊ≠•È™§Êàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÂ∫îËØ•ÈááÁî®Á°¨Ëß£ÊûêËøòÊòØËΩØËß£Êûê„ÄÇ</p>\n<p>Êàë‰ª¨ÂÖàÊù•Áúã‰∏ãSQLÂú®Oracle‰∏≠ÁöÑÊâßË°åËøáÁ®ã:</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118798.png\" alt=\"image-20220713003902294\">‰ªé‰∏äÈù¢ËøôÂº†Âõæ‰∏≠ÂèØ‰ª•ÁúãÂá∫, SQLËØ≠Âè•Âú®Oracle‰∏≠ÁªèÂéÜ‰∫Ü‰ª•‰∏ãÁöÑÂá†‰∏™Ê≠•È™§„ÄÇ</p>\n<ol>\n<li><strong>ËØ≠Ê≥ïÊ£ÄÊü•</strong>ÔºöÊ£ÄÊü•SQLÊãºÂÜôÊòØÂê¶Ê≠£Á°ÆÔºåÂ¶ÇÊûú‰∏çÊ≠£Á°ÆÔºåOracle ‰ºöÊä•ËØ≠Ê≥ïÈîôËØØ„ÄÇ</li>\n<li><strong>ËØ≠‰πâÊ£ÄÊü•</strong>ÔºöÊ£ÄÊü•SQL‰∏≠ÁöÑËÆøÈóÆÂØπË±°ÊòØÂê¶Â≠òÂú®„ÄÇÊØîÂ¶ÇÊàë‰ª¨Âú®ÂÜôSELECTËØ≠Âè•ÁöÑÊó∂ÂÄôÔºåÂàóÂêçÂÜôÈîô‰∫ÜÔºåÁ≥ªÁªüÂ∞±‰ºöÊèêÁ§∫ÈîôËØØ„ÄÇËØ≠Ê≥ïÊ£ÄÊü•ÂíåËØ≠‰πâÊ£ÄÊü•ÁöÑ‰ΩúÁî®ÊòØ‰øùËØÅSQLËØ≠Âè•Ê≤°ÊúâÈîôËØØ„ÄÇ</li>\n<li><strong>ÊùÉÈôêÊ£ÄÊü•</strong>ÔºöÁúãÁî®Êà∑ÊòØÂê¶ÂÖ∑Â§áËÆøÈóÆËØ•Êï∞ÊçÆÁöÑÊùÉÈôê„ÄÇ</li>\n</ol>\n<p>OracleÈÄöËøáÊ£ÄÊü•ÂÖ±‰∫´Ê±†ÊòØÂê¶Â≠òÂú®SQLËØ≠Âè•ÁöÑÊâßË°åËÆ°ÂàíÔºåÊù•Âà§Êñ≠ËøõË°åËΩØËß£Êûê,ËøòÊòØÁ°¨Ëß£Êûê„ÄÇÈÇ£ËΩØËß£ÊûêÂíåÁ°¨Ëß£ÊûêÂèàËØ•ÊÄé‰πàÁêÜËß£Âë¢?</p>\n<p>Âú®ÂÖ±‰∫´Ê±†‰∏≠ÔºåOracle È¶ñÂÖàÂØπSQLËØ≠Âè•ËøõË°å<code>HashËøêÁÆó</code>ÔºåÁÑ∂ÂêéÊ†πÊçÆHashÂÄºÂú®Â∫ìÁºìÂ≠ò(Library Cache)‰∏≠Êü•ÊâæÔºåÂ¶ÇÊûú<code>Â≠òÂú®SQLËØ≠Âè•ÁöÑÊâßË°åËÆ°Âàí</code>ÔºåÂ∞±Áõ¥Êé•ÊãøÊù•ÊâßË°åÔºåÁõ¥Êé•ËøõÂÖ•‚ÄúÊâßË°åÂô®‚ÄùÁöÑÁéØËäÇ,ËøôÂ∞±ÊòØ<code>ËΩØËß£Êûê</code>„ÄÇ</p>\n<p>Â¶ÇÊûúÊ≤°ÊúâÊâæÂà∞SQLËØ≠Âè•ÂíåÊâßË°åËÆ°ÂàíÔºåOracle Â∞±ÈúÄË¶ÅÂàõÂª∫Ëß£ÊûêÊ†ëËøõË°åËß£ÊûêÔºåÁîüÊàêÊâßË°åËÆ°ÂàíÔºåËøõÂÖ•‚Äú‰ºòÂåñÂô®‚ÄùËøô‰∏™Ê≠•È™§,ËøôÂ∞±ÊòØ<code>Á°¨Ëß£Êûê</code>„ÄÇ</p>\n<ol start=\"5\">\n<li><strong>‰ºòÂåñÂô®</strong>:‰ºòÂåñÂô®‰∏≠Â∞±ÊòØË¶ÅËøõË°åÁ°¨Ëß£ÊûêÔºå‰πüÂ∞±ÊòØÂÜ≥ÂÆöÊÄé‰πàÂÅöÔºåÊØîÂ¶ÇÂàõÂª∫Ëß£ÊûêÊ†ëÔºåÁîüÊàêÊâßË°åËÆ°Âàí„ÄÇ</li>\n<li><strong>ÊâßË°åÂô®</strong>:ÂΩìÊúâ‰∫ÜËß£ÊûêÊ†ëÂíåÊâßË°åËÆ°Âàí‰πãÂêé,Â∞±Áü•ÈÅì‰∫ÜSQLËØ•ÊÄé‰πàË¢´ÊâßË°åÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Âú®ÊâßË°åÂô®‰∏≠ÊâßË°åËØ≠Âè•‰∫Ü„ÄÇ</li>\n</ol>\n<p>ÂÖ±‰∫´Ê±†ÊòØOracle‰∏≠ÁöÑÊúØËØ≠ÔºåÂåÖÊã¨‰∫ÜÂ∫ìÁºìÂ≠ò,Êï∞ÊçÆÂ≠óÂÖ∏ÁºìÂÜ≤Âå∫Á≠â„ÄÇÊàë‰ª¨_‰∏äÈù¢Â∑≤ÁªèËÆ≤Âà∞‰∫ÜÂ∫ìÁºìÂ≠òÂå∫ÔºåÂÆÉ‰∏ªË¶ÅÁºìÂ≠òSQLËØ≠Âè•ÂíåÊâßË°åËÆ°Âàí„ÄÇËÄå<code>Êï∞ÊçÆÂ≠óÂÖ∏ÁºìÂÜ≤Âå∫</code>Â≠òÂÇ®ÁöÑÊòØOracle‰∏≠ÁöÑÂØπË±°ÂÆö‰πâ,ÊØîÂ¶ÇË°®„ÄÅËßÜÂõæ„ÄÅÁ¥¢ÂºïÁ≠âÂØπË±°„ÄÇÂΩìÂØπSQLËØ≠Âè•ËøõË°åËß£ÊûêÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÈúÄË¶ÅÁõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÔºå‰ºö‰ªéÊï∞ÊçÆÂ≠óÂÖ∏ÁºìÂÜ≤Âå∫‰∏≠ÊèêÂèñ„ÄÇ</p>\n<p><code>Â∫ìÁºìÂ≠ò</code>Ëøô‰∏Ä‰∏™Ê≠•È™§ÔºåÂÜ≥ÂÆö‰∫ÜSQLËØ≠Âè•ÊòØÂê¶ÈúÄË¶ÅËøõË°åÁ°¨Ëß£Êûê„ÄÇ‰∏∫‰∫ÜÊèêÂçáSQLÁöÑÊâßË°åÊïàÁéá,Êàë‰ª¨Â∫îËØ•Â∞ΩÈáèÈÅøÂÖçÁ°¨Ëß£ÊûêÔºåÂõ†‰∏∫Âú®SQLÁöÑÊâßË°åËøáÁ®ã‰∏≠ÔºåÂàõÂª∫Ëß£ÊûêÊ†ëÔºåÁîüÊàêÊâßË°åËÆ°ÂàíÊòØÂæàÊ∂àËÄóËµÑÊ∫êÁöÑ„ÄÇ</p>\n<p>‰Ω†ÂèØËÉΩ‰ºöÈóÆÔºåÂ¶Ç‰ΩïÈÅøÂÖçÁ°¨Ëß£ÊûêÔºåÂ∞ΩÈáè‰ΩøÁî®ËΩØËß£ÊûêÂë¢?Âú®Oracle‰∏≠Ôºå<code>ÁªëÂÆöÂèòÈáè</code>ÊòØÂÆÉÁöÑ‰∏ÄÂ§ßÁâπËâ≤„ÄÇÁªëÂÆöÂèòÈáèÂ∞±ÊòØÂú®SQLËØ≠Âè•‰∏≠‰ΩøÁî®ÂèòÈáèÔºåÈÄöËøá‰∏çÂêåÁöÑÂèòÈáèÂèñÂÄºÊù•ÊîπÂèòSQLÁöÑÊâßË°åÁªìÊûú„ÄÇËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØËÉΩ<code>ÊèêÂçáËΩØËß£ÊûêÁöÑÂèØËÉΩÊÄß</code>Ôºå‰∏çË∂≥‰πãÂ§ÑÂú®‰∫éÂèØËÉΩ‰ºöÂØºËá¥ÁîüÊàêÁöÑÊâßË°åËÆ°Âàí‰∏çÂ§ü‰ºòÂåñÔºåÂõ†Ê≠§ÊòØÂê¶ÈúÄË¶ÅÁªëÂÆöÂèòÈáèËøòÈúÄË¶ÅËßÜÊÉÖÂÜµËÄåÂÆö„ÄÇ</p>\n<p>‰∏æ‰∏™‰æãÂ≠êÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑÊü•ËØ¢ËØ≠Âè•Ôºö</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt; select * from player where player_id = 10001;</span><br></pre></td></tr></table></figure>\n\n<p>‰Ω†‰πüÂèØ‰ª•‰ΩøÁî®ÁªëÂÆöÂèòÈáèÔºåÂ¶Ç:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SOL&gt; select * from plaver where plaver id = :plaver_id:</span><br></pre></td></tr></table></figure>\n\n<p>Ëøô‰∏§‰∏™Êü•ËØ¢ËØ≠Âè•ÁöÑÊïàÁéáÂú®Oracle‰∏≠ÊòØÂÆåÂÖ®‰∏çÂêåÁöÑ„ÄÇÂ¶ÇÊûú‰Ω†Âú®Êü•ËØ¢player. _id&#x3D; 10001‰πãÂêé,Ëøò‰ºöÊü•ËØ¢10002„ÄÅ10003‰πãÁ±ªÁöÑÊï∞ÊçÆ,ÈÇ£‰πàÊØè- -Ê¨°Êü•ËØ¢ÈÉΩ‰ºöÂàõÂª∫‰∏Ä ‰∏™Êñ∞ÁöÑÊü•ËØ¢Ëß£Êûê„ÄÇ ËÄåÁ¨¨‰∫åÁßçÊñπÂºè‰ΩøÁî®‰∫ÜÁªëÂÆöÂèòÈáèÔºåÈÇ£‰πàÂú®Á¨¨‰∏Ä-Ê¨°Êü•ËØ¢‰πãÂêéÔºåÂú®ÂÖ±‰∫´Ê±†‰∏≠Â∞±‰ºöÂ≠òÂú®ËøôÁ±ªÊü•ËØ¢ÁöÑÊâßË°åËÆ°ÂàíÔºå‰πüÂ∞±ÊòØËΩØËß£Êûê„ÄÇ</p>\n<p>Âõ†Ê≠§ÔºåÊàë<strong>‰ª¨ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁªëÂÆöÂèòÈáèÊù•ÂáèÂ∞ëÁ°¨Ëß£ÊûêÔºåÂáèÂ∞ëOracleÁöÑËß£ÊûêÂ∑•‰ΩúÈáè</strong>„ÄÇ‰ΩÜÊòØËøôÁßçÊñπÂºè‰πüÊúâÁº∫ÁÇπÔºå‰ΩøÁî®Âä®ÊÄÅSQLÁöÑÊñπÂºèÔºåÂõ†‰∏∫ÂèÇÊï∞‰∏çÂêåÔºå‰ºöÂØºËá¥SQLÁöÑÊâßË°åÊïàÁéá‰∏çÂêåÔºåÂêåÊó∂SQL‰ºòÂåñ‰πü‰ºöÊØîËæÉÂõ∞Èöæ„ÄÇ</p>\n<p>&#x3D;&#x3D;OracleÁöÑÊû∂ÊûÑÂõæÔºö&#x3D;&#x3D;</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118351.png\" alt=\"image-20220713004228345\"></p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118783.png\"></p>\n<h1 id=\"3-Êï∞ÊçÆÂ∫ìÁºìÂÜ≤Ê±†Ôºàbuffer-poolÔºâ\"><a href=\"#3-Êï∞ÊçÆÂ∫ìÁºìÂÜ≤Ê±†Ôºàbuffer-poolÔºâ\" class=\"headerlink\" title=\"3. Êï∞ÊçÆÂ∫ìÁºìÂÜ≤Ê±†Ôºàbuffer poolÔºâ\"></a>3. Êï∞ÊçÆÂ∫ìÁºìÂÜ≤Ê±†Ôºàbuffer poolÔºâ</h1><p><code>InnoDB</code>Â≠òÂÇ®ÂºïÊìéÊòØ‰ª•È°µ‰∏∫Âçï‰ΩçÊù•ÁÆ°ÁêÜÂ≠òÂÇ®Á©∫Èó¥ÁöÑÔºåÊàë‰ª¨ËøõË°åÁöÑÂ¢ûÂà†ÊîπÊü•Êìç‰ΩúÂÖ∂ÂÆûÊú¨Ë¥®‰∏äÈÉΩÊòØÂú®ËÆøÈóÆÈ°µ Èù¢(ÂåÖÊã¨ËØªÈ°µÈù¢„ÄÅÂÜôÈ°µÈù¢„ÄÅÂàõÂª∫Êñ∞È°µÈù¢Á≠âÊìç‰Ωú)„ÄÇËÄåÁ£ÅÁõò I&#x2F;O ÈúÄË¶ÅÊ∂àËÄóÁöÑÊó∂Èó¥ÂæàÂ§öÔºåËÄåÂú®ÂÜÖÂ≠ò‰∏≠ËøõË°åÊìç ‰ΩúÔºåÊïàÁéáÂàô‰ºöÈ´òÂæàÂ§öÔºå‰∏∫‰∫ÜËÉΩËÆ©Êï∞ÊçÆË°®ÊàñËÄÖÁ¥¢Âºï‰∏≠ÁöÑÊï∞ÊçÆÈöèÊó∂Ë¢´Êàë‰ª¨ÊâÄÁî®ÔºåDBMS ‰ºöÁî≥ËØ∑<code>Âç†Áî®ÂÜÖÂ≠òÊù•‰Ωú‰∏∫Êï∞ÊçÆÁºìÂÜ≤Ê±†</code>ÔºåÂú®ÁúüÊ≠£ËÆøÈóÆÈ°µÈù¢‰πãÂâçÔºåÈúÄË¶ÅÊääÂú®Á£ÅÁõò‰∏äÁöÑÈ°µÁºìÂ≠òÂà∞ÂÜÖÂ≠ò‰∏≠ÁöÑ<code>Buffer Pool</code>‰πãÂêéÊâçÂèØ‰ª•ËÆø ÈóÆ„ÄÇ</p>\n<p>ËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØÂèØ‰ª•ËÆ©Á£ÅÁõòÊ¥ªÂä®ÊúÄÂ∞èÂåñÔºå‰ªéËÄå<code>ÂáèÂ∞ë‰∏éÁ£ÅÁõòÁõ¥Êé•ËøõË°å I/O ÁöÑÊó∂Èó¥</code> „ÄÇË¶ÅÁü•ÈÅìÔºåËøôÁßçÁ≠ñÁï•ÂØπÊèê Âçá SQL ËØ≠Âè•ÁöÑÊü•ËØ¢ÊÄßËÉΩÊù•ËØ¥Ëá≥ÂÖ≥ÈáçË¶Å„ÄÇÂ¶ÇÊûúÁ¥¢ÂºïÁöÑÊï∞ÊçÆÂú®ÁºìÂÜ≤Ê±†ÈáåÔºåÈÇ£‰πàËÆøÈóÆÁöÑÊàêÊú¨Â∞±‰ºöÈôç‰ΩéÂæàÂ§ö„ÄÇ</p>\n<h2 id=\"3-1-ÁºìÂÜ≤Ê±†-vs-Êü•ËØ¢ÁºìÂ≠ò\"><a href=\"#3-1-ÁºìÂÜ≤Ê±†-vs-Êü•ËØ¢ÁºìÂ≠ò\" class=\"headerlink\" title=\"3.1 ÁºìÂÜ≤Ê±† vs Êü•ËØ¢ÁºìÂ≠ò\"></a>3.1 ÁºìÂÜ≤Ê±† vs Êü•ËØ¢ÁºìÂ≠ò</h2><p><strong>ÁºìÂÜ≤Ê±†ÂíåÊü•ËØ¢ÁºìÂ≠òÊòØ‰∏Ä‰∏™‰∏úË•øÂêóÔºü‰∏çÊòØ„ÄÇ</strong></p>\n<h3 id=\"3-1-1-ÁºìÂÜ≤Ê±†ÔºàBuffer-PoolÔºâ\"><a href=\"#3-1-1-ÁºìÂÜ≤Ê±†ÔºàBuffer-PoolÔºâ\" class=\"headerlink\" title=\"3.1.1 ÁºìÂÜ≤Ê±†ÔºàBuffer PoolÔºâ\"></a>3.1.1 ÁºìÂÜ≤Ê±†ÔºàBuffer PoolÔºâ</h3><p>È¶ñÂÖàÊàë‰ª¨ÈúÄË¶Å‰∫ÜËß£Âú® InnoDB Â≠òÂÇ®ÂºïÊìé‰∏≠ÔºåÁºìÂÜ≤Ê±†ÈÉΩÂåÖÊã¨‰∫ÜÂì™‰∫õ„ÄÇ</p>\n<p>Âú® InnoDB Â≠òÂÇ®ÂºïÊìé‰∏≠Êúâ‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆ‰ºöÊîæÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÁºìÂÜ≤Ê±†ÂàôÂç†‰∫ÜËøôÈÉ®ÂàÜÂÜÖÂ≠òÁöÑÂ§ßÈÉ®ÂàÜÔºåÂÆÉÁî®Êù•Â≠òÂÇ®ÂêÑÁßçÊï∞ÊçÆÁöÑÁºìÂ≠òÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫:</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118698.png\" alt=\"image-20220115175644920\"></p>\n<p>‰ªéÂõæ‰∏≠Ôºå‰Ω†ËÉΩÁúãÂà∞InnoDBÁºìÂÜ≤Ê±†ÂåÖÊã¨‰∫ÜÊï∞ÊçÆÈ°µ„ÄÅÁ¥¢ÂºïÈ°µ„ÄÅÊèíÂÖ•ÁºìÂÜ≤„ÄÅÈîÅ‰ø°ÊÅØ„ÄÅËá™ÈÄÇÂ∫îHashÂíåÊï∞ÊçÆÂ≠óÂÖ∏‰ø°ÊÅØÁ≠â„ÄÇ</p>\n<p><strong>ÁºìÂ≠òÊ±†ÁöÑÈáçË¶ÅÊÄß:</strong></p>\n<p>ÂØπ‰∫é‰ΩøÁî®<code>InnoDB</code>‰Ωú‰∏∫Â≠òÂÇ®ÂºïÊìéÁöÑË°®Êù•ËØ¥,‰∏çÁÆ°ÊòØÁî®‰∫éÂ≠òÂÇ®Áî®Êà∑Êï∞ÊçÆÁöÑÁ¥¢Âºï(ÂåÖÊã¨ËÅöÁ∞áÁ¥¢ÂºïÂíå‰∫åÁ∫ßÁ¥¢Âºï)ÔºåËøòÊòØÂêÑÁßçÁ≥ªÁªüÊï∞ÊçÆÔºåÈÉΩÊòØ‰ª•<code>È°µ</code>ÁöÑÂΩ¢ÂºèÂ≠òÊîæÂú®<code>Ë°®Á©∫Èó¥</code>‰∏≠ÁöÑ,ËÄåÊâÄË∞ìÁöÑË°®Á©∫Èó¥Âè™‰∏çËøáÊòØInnoDBÂØπÊñá‰ª∂Á≥ªÁªü‰∏ä‰∏Ä‰∏™ÊàñÂá†‰∏™ÂÆûÈôÖÊñá‰ª∂ÁöÑÊäΩË±°Ôºå‰πüÂ∞±ÊòØËØ¥Êàë‰ª¨ÁöÑÊï∞ÊçÆËØ¥Âà∞Â∫ïËøòÊòØÂ≠òÂÇ®Âú®Á£ÅÁõò‰∏äÁöÑ„ÄÇ‰ΩÜÊòØÂêÑ‰Ωç‰πüÈÉΩÁü•ÈÅìÔºåÁ£ÅÁõòÁöÑÈÄüÂ∫¶ÊÖ¢ÁöÑË∑ü‰πåÈæü‰∏ÄÊ†∑,ÊÄé‰πàËÉΩÈÖçÂæó‰∏ä‚Äú<code>Âø´Â¶ÇÈ£éÔºåÁñæÂ¶ÇÁîµ‚ÄùÁöÑCPU</code>Âë¢?ËøôÈáåÔºåÁºìÂÜ≤Ê±†ÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨Ê∂àÈô§CPUÂíåÁ£ÅÁõò‰πãÈó¥ÁöÑÈ∏øÊ≤ü„ÄÇÊâÄ‰ª•InnoDBÂ≠òÂÇ®Âºì|ÊìéÂú®Â§ÑÁêÜÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÊó∂ÔºåÂΩìÈúÄË¶ÅËÆøÈóÆÊüê‰∏™È°µÁöÑÊï∞ÊçÆÊó∂ÔºåÂ∞±‰ºöÊää<code>ÂÆåÊï¥ÁöÑÈ°µÁöÑÊï∞ÊçÆÂÖ®ÈÉ®Âä†ËΩΩÂà∞ÂÜÖÂ≠ò</code>‰∏≠Ôºå‰πüÂ∞±ÊòØËØ¥Âç≥‰ΩøÊàë‰ª¨Âè™ÈúÄË¶ÅËÆøÈóÆ‰∏Ä‰∏™È°µÁöÑ‰∏ÄÊù°ËÆ∞ÂΩïÔºåÈÇ£‰πüÈúÄË¶ÅÂÖàÊääÊï¥‰∏™È°µÁöÑÊï∞ÊçÆÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠„ÄÇÂ∞ÜÊï¥‰∏™È°µÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠ÂêéÂ∞±ÂèØ‰ª•ËøõË°åËØªÂÜôËÆøÈóÆ‰∫ÜÔºåÂú®ËøõË°åÂÆåËØªÂÜôËÆøÈóÆ‰πãÂêéÂπ∂‰∏çÁùÄÊÄ•ÊääËØ•È°µÂØπÂ∫îÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÈáäÊîæÊéâ,ËÄåÊòØÂ∞ÜÂÖ∂<code>ÁºìÂ≠ò</code>Ëµ∑Êù•,ËøôÊ†∑Â∞ÜÊù•ÊúâËØ∑Ê±ÇÂÜçÊ¨°ËÆøÈóÆËØ•È°µÈù¢Êó∂ÔºåÂ∞±ÂèØ‰ª•<code>ÁúÅÂéªÁ£ÅÁõòI0</code>ÁöÑÂºÄÈîÄ‰∫Ü„ÄÇ</p>\n<p><strong>ÁºìÂ≠òÂéüÂàôÔºö</strong></p>\n<p>‚Äú<code>‰ΩçÁΩÆ * È¢ëÊ¨°</code> ‚ÄùËøô‰∏™ÂéüÂàôÔºåÂèØ‰ª•Â∏ÆÊàë‰ª¨ÂØπ I&#x2F;O ËÆøÈóÆÊïàÁéáËøõË°å‰ºòÂåñ„ÄÇ È¶ñÂÖàÔºå‰ΩçÁΩÆÂÜ≥ÂÆöÊïàÁéáÔºåÊèê‰æõÁºìÂÜ≤Ê±†Â∞±ÊòØ‰∏∫‰∫ÜÂú®ÂÜÖÂ≠ò‰∏≠ÂèØ‰ª•Áõ¥Êé•ËÆøÈóÆÊï∞ÊçÆ„ÄÇ</p>\n<p>ÂÖ∂Ê¨°ÔºåÈ¢ëÊ¨°ÂÜ≥ÂÆö‰ºòÂÖàÁ∫ßÈ°∫Â∫è„ÄÇÂõ†‰∏∫ÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞èÊòØÊúâÈôêÁöÑÔºåÊØîÂ¶ÇÁ£ÅÁõòÊúâ 200GÔºå‰ΩÜÊòØÂÜÖÂ≠òÂè™Êúâ 16GÔºåÁºìÂÜ≤Ê±†Â§ßÂ∞èÂè™Êúâ 1GÔºåÂ∞±Êó†Ê≥ïÂ∞ÜÊâÄÊúâÊï∞ÊçÆÈÉΩÂä†ËΩΩÂà∞ÁºìÂÜ≤Ê±†ÈáåÔºåËøôÊó∂Â∞±Ê∂âÂèäÂà∞‰ºòÂÖàÁ∫ßÈ°∫Â∫èÔºå‰ºö <code>‰ºòÂÖàÂØπ‰ΩøÁî®È¢ëÊ¨°È´òÁöÑÁÉ≠Êï∞ÊçÆËøõË°åÂä†ËΩΩ</code>„ÄÇ</p>\n<p><strong>ÁºìÂÜ≤Ê±†ÁöÑÈ¢ÑËØªÁâπÊÄß:</strong></p>\n<p>‰∏Ä‰∏™ÁºìÂ≠ò‰∫ÜËß£‰∫ÜÁºìÂÜ≤Ê±†ÁöÑ‰ΩúÁî®‰πãÂêéÔºåÊàë‰ª¨ËøòÈúÄË¶Å‰∫ÜËß£ÁºìÂÜ≤Ê±†ÁöÑÂè¶‰∏Ä‰∏™ÁâπÊÄß: <code>È¢ÑËØª</code>„ÄÇ</p>\n<p>ÁºìÂÜ≤Ê±†ÁöÑ‰ΩúÁî®Â∞±ÊòØÊèêÂçáI&#x2F;0ÊïàÁéáÔºåËÄåÊàë‰ª¨ËøõË°åËØªÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÂ≠òÂú®‰∏Ä‰∏™‚ÄúÂ±ÄÈÉ®ÊÄßÂéüÁêÜ‚ÄùÔºå ‰πüÂ∞±ÊòØËØ¥Êàë‰ΩøÁî®‰∫Ü‰∏Ä‰∫õÊï∞ÊçÆÔºå<code>Â§ßÊ¶ÇÁéáËøò‰ºö‰ΩøÁî®ÂÆÉÂë®Âõ¥ÁöÑ‰∏Ä‰∫õÊï∞ÊçÆ</code>ÔºåÂõ†Ê≠§ÈááÁî®‚ÄúÈ¢ÑËØª‚ÄùÁöÑÊú∫Âà∂ÊèêÂâçÂä†ËΩΩÔºåÂèØ‰ª•ÂáèÂ∞ëÊú™Êù•ÂèØËÉΩÁöÑÁ£ÅÁõò1&#x2F;OÊìç‰Ωú„ÄÇ</p>\n<h3 id=\"3-1-2-Êü•ËØ¢ÁºìÂ≠ò\"><a href=\"#3-1-2-Êü•ËØ¢ÁºìÂ≠ò\" class=\"headerlink\" title=\"3.1.2 Êü•ËØ¢ÁºìÂ≠ò\"></a>3.1.2 Êü•ËØ¢ÁºìÂ≠ò</h3><p>ÈÇ£‰πà‰ªÄ‰πàÊòØÊü•ËØ¢ÁºìÂ≠òÂë¢?</p>\n<p>Êü•ËØ¢ÁºìÂ≠òÊòØÊèêÂâçÊää <code>Êü•ËØ¢ÁªìÊûúÁºìÂ≠ò</code> Ëµ∑Êù•ÔºåËøôÊ†∑‰∏ãÊ¨°‰∏çÈúÄË¶ÅÊâßË°åÂ∞±ÂèØ‰ª•Áõ¥Êé•ÊãøÂà∞ÁªìÊûú„ÄÇÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂú® MySQL ‰∏≠ÁöÑÊü•ËØ¢ÁºìÂ≠òÔºå‰∏çÊòØÁºìÂ≠òÊü•ËØ¢ËÆ°ÂàíÔºåËÄåÊòØÊü•ËØ¢ÂØπÂ∫îÁöÑÁªìÊûú„ÄÇÂõ†‰∏∫ÂëΩ‰∏≠Êù°‰ª∂ËãõÂàªÔºåËÄå‰∏îÂè™Ë¶ÅÊï∞ÊçÆË°®ÂèëÁîüÂèòÂåñÔºåÊü•ËØ¢ÁºìÂ≠òÂ∞±‰ºöÂ§±ÊïàÔºåÂõ†Ê≠§ÂëΩ‰∏≠Áéá‰Ωé„ÄÇ</p>\n<h2 id=\"3-2-ÁºìÂÜ≤Ê±†Â¶Ç‰ΩïËØªÂèñÊï∞ÊçÆ\"><a href=\"#3-2-ÁºìÂÜ≤Ê±†Â¶Ç‰ΩïËØªÂèñÊï∞ÊçÆ\" class=\"headerlink\" title=\"3.2 ÁºìÂÜ≤Ê±†Â¶Ç‰ΩïËØªÂèñÊï∞ÊçÆ\"></a>3.2 ÁºìÂÜ≤Ê±†Â¶Ç‰ΩïËØªÂèñÊï∞ÊçÆ</h2><p>ÁºìÂÜ≤Ê±†ÁÆ°ÁêÜÂô®‰ºöÂ∞ΩÈáèÂ∞ÜÁªèÂ∏∏‰ΩøÁî®ÁöÑÊï∞ÊçÆ‰øùÂ≠òËµ∑Êù•ÔºåÂú®Êï∞ÊçÆÂ∫ìËøõË°åÈ°µÈù¢ËØªÊìç‰ΩúÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖà‰ºöÂà§Êñ≠ËØ•È°µÈù¢ÊòØÂê¶Âú®ÁºìÂÜ≤Ê±†‰∏≠ÔºåÂ¶ÇÊûúÂ≠òÂú®Â∞±Áõ¥Êé•ËØªÂèñÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®ÔºåÂ∞±‰ºöÈÄöËøáÂÜÖÂ≠òÊàñÁ£ÅÁõòÂ∞ÜÈ°µÈù¢Â≠òÊîæÂà∞ÁºìÂÜ≤Ê±†‰∏≠ÂÜçËøõË°åËØªÂèñ„ÄÇ<br>ÁºìÂ≠òÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÁªìÊûÑÂíå‰ΩúÁî®Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118451.png\" alt=\"image-20220115175859026\"></p>\n<p><strong>&#x3D;&#x3D;Â¶ÇÊûúÊàë‰ª¨ÊâßË°åSQLËØ≠Âè•ÁöÑÊó∂ÂÄôÊõ¥Êñ∞‰∫ÜÁºìÂ≠òÊ±†‰∏≠ÁöÑÊï∞ÊçÆÔºåÈÇ£‰πàËøô‰∫õÊï∞ÊçÆ‰ºöÈ©¨‰∏äÂêåÊ≠•Âà∞Á£ÅÁõò‰∏äÂêó?&#x3D;&#x3D;</strong> </p>\n<p>ÂÆûÈôÖ‰∏äÔºåÂΩìÊàë‰ª¨ÂØπÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑËÆ∞ÂΩïËøõË°å‰øÆÊîπÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖà‰ºö‰øÆÊîπÁºìÂÜ≤Ê±†‰∏≠È°µÈáåÈù¢ÁöÑËÆ∞ÂΩï‰ø°ÊÅØ,ÁÑ∂ÂêéÊï∞ÊçÆÂ∫ì‰ºö<code>‰ª•‰∏ÄÂÆöÁöÑÈ¢ëÁéáÂà∑Êñ∞</code>Âà∞Á£ÅÁõò‰∏ä„ÄÇÊ≥®ÊÑèÂπ∂‰∏çÊòØÊØèÊ¨°ÂèëÁîüÊõ¥Êñ∞Êìç‰ΩúÔºåÈÉΩ‰ºöÁ´ãÂàªËøõË°åÁ£ÅÁõòÂõûÂÜô„ÄÇÁºìÂÜ≤Ê±†‰ºöÈááÁî®‰∏ÄÁßçÂè´ÂÅö<code>checkpointÁöÑÊú∫Âà∂</code>Â∞ÜÊï∞ÊçÆÂõûÂÜôÂà∞Á£ÅÁõò‰∏ä,ËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØÊèêÂçá‰∫ÜÊï∞ÊçÆÂ∫ìÁöÑÊï¥‰ΩìÊÄßËÉΩ„ÄÇ</p>\n<p>ÊØîÂ¶ÇÔºåÂΩì<code>ÁºìÂÜ≤Ê±†‰∏çÂ§üÁî®</code>Êó∂ÔºåÈúÄË¶ÅÈáäÊîæÊéâ‰∏Ä‰∫õ‰∏çÂ∏∏Áî®ÁöÑÈ°µÔºåÊ≠§Êó∂Â∞±ÂèØ‰ª•Âº∫Ë°åÈááÁî®checkpointÁöÑÊñπÂºèÔºåÂ∞Ü‰∏çÂ∏∏Áî®ÁöÑËÑèÈ°µÂõûÂÜôÂà∞Á£ÅÁõò‰∏ä,ÁÑ∂ÂêéÂÜç‰ªéÁºìÂÜ≤Ê±†‰∏≠Â∞ÜËøô‰∫õÈ°µÈáäÊîæÊéâ„ÄÇËøôÈáåËÑèÈ°µ(dirty page)ÊåáÁöÑÊòØÁºìÂÜ≤Ê±†‰∏≠Ë¢´‰øÆÊîπËøáÁöÑÈ°µÔºå‰∏éÁ£ÅÁõò‰∏äÁöÑÊï∞ÊçÆÈ°µ‰∏ç‰∏ÄËá¥„ÄÇ</p>\n<h2 id=\"3-3-Êü•Áúã-ËÆæÁΩÆÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞è\"><a href=\"#3-3-Êü•Áúã-ËÆæÁΩÆÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞è\" class=\"headerlink\" title=\"3.3 Êü•Áúã&#x2F;ËÆæÁΩÆÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞è\"></a>3.3 Êü•Áúã&#x2F;ËÆæÁΩÆÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞è</h2><p>Â¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑÊòØMySQL MyISAMÂ≠òÂÇ®ÂºïÊìé,ÂÆÉÂè™ÁºìÂ≠òÁ¥¢ÂºïÔºå ‰∏çÁºìÂ≠òÊï∞ÊçÆÔºåÂØπÂ∫îÁöÑÈîÆÁºìÂ≠òÂèÇÊï∞<br><code>key_buffer_size</code>Ôºå‰Ω†ÂèØ‰ª•Áî®ÂÆÉËøõË°åÊü•Áúã„ÄÇ</p>\n<p>Â¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑÊòØInnoDBÂ≠òÂÇ®ÂºïÊìéÔºåÂèØ‰ª•ÈÄöËøáÊü•Áúã <code>innodb_buffer_pool_size</code> ÂèòÈáèÊù•Êü•ÁúãÁºìÂÜ≤Ê±†ÁöÑÂ§ß Â∞è„ÄÇÂëΩ‰ª§Â¶Ç‰∏ã:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> variables <span class=\"keyword\">like</span> <span class=\"string\">&#x27;innodb_buffer_pool_size&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118317.png\" alt=\"image-20220115175953098\"></p>\n<p>‰Ω†ËÉΩÁúãÂà∞Ê≠§Êó∂ InnoDB ÁöÑÁºìÂÜ≤Ê±†Â§ßÂ∞èÂè™Êúâ 134217728&#x2F;1024&#x2F;1024&#x3D;128MB„ÄÇÊàë‰ª¨ÂèØ‰ª•‰øÆÊîπÁºìÂÜ≤Ê±†Â§ßÂ∞èÔºåÊØîÂ¶Ç Êîπ‰∏∫256MBÔºåÊñπÊ≥ïÂ¶Ç‰∏ã:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"keyword\">global</span> innodb_buffer_pool_size <span class=\"operator\">=</span> <span class=\"number\">268435456</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118511.png\" alt=\"image-20220115180020887\"></p>\n<p>ÊàñËÄÖ:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[server]</span><br><span class=\"line\">innodb_buffer_pool_size <span class=\"operator\">=</span> <span class=\"number\">268435456</span></span><br></pre></td></tr></table></figure>\n\n<p>ÁÑ∂ÂêéÂÜçÊù•Áúã‰∏ã‰øÆÊîπÂêéÁöÑÁºìÂÜ≤Ê±†Â§ßÂ∞èÔºåÊ≠§Êó∂Â∑≤ÊàêÂäü‰øÆÊîπÊàê‰∫Ü 256 MB:</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118502.png\" alt=\"image-20220115180055102\"></p>\n<h2 id=\"3-4-Â§ö‰∏™Buffer-PoolÂÆû‰æã\"><a href=\"#3-4-Â§ö‰∏™Buffer-PoolÂÆû‰æã\" class=\"headerlink\" title=\"3.4 Â§ö‰∏™Buffer PoolÂÆû‰æã\"></a>3.4 Â§ö‰∏™Buffer PoolÂÆû‰æã</h2><p>Buffer PoolÊú¨Ë¥®ÊòØInnoDBÂêëÊìç‰ΩúÁ≥ªÁªüÁî≥ËØ∑ÁöÑ‰∏ÄÂùó<code>ËøûÁª≠ÁöÑÂÜÖÂ≠òÁ©∫Èó¥</code>ÔºåÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÔºåËÆøÈóÆBuffer Pool‰∏≠ÁöÑÊï∞ÊçÆÈÉΩÈúÄË¶Å<code>Âä†ÈîÅ</code>Â§ÑÁêÜ„ÄÇÂú®Buffer PoolÁâπÂà´Â§ßËÄå‰∏îÂ§öÁ∫øÁ®ãÂπ∂ÂèëËÆøÈóÆÁâπÂà´È´òÁöÑÊÉÖÂÜµ‰∏ãÔºåÂçï‰∏ÄÁöÑBuffer PoolÂèØËÉΩ‰ºöÂΩ±ÂìçËØ∑Ê±ÇÁöÑÂ§ÑÁêÜÈÄüÂ∫¶„ÄÇÊâÄ‰ª•Âú®Buffer PoolÁâπÂà´Â§ßÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÂèØ‰ª•ÊääÂÆÉ‰ª¨<code>ÊãÜÂàÜÊàêËã•Âπ≤‰∏™Â∞èÁöÑBuffer Pool</code> ÔºåÊØè‰∏™Buffer PoolÈÉΩÁß∞‰∏∫‰∏Ä‰∏™<code>ÂÆû‰æã</code>ÔºåÂÆÉ‰ª¨ÈÉΩÊòØÁã¨Á´ãÁöÑÔºåÁã¨Á´ãÁöÑÂéªÁî≥ËØ∑ÂÜÖÂ≠òÁ©∫Èó¥ÔºåÁã¨Á´ãÁöÑÁÆ°ÁêÜÂêÑÁßçÈìæË°®„ÄÇÊâÄ‰ª•Âú®Â§öÁ∫øÁ®ãÂπ∂ÂèëËÆøÈóÆÊó∂Âπ∂‰∏ç‰ºöÁõ∏‰∫íÂΩ±ÂìçÔºå‰ªéËÄåÊèêÈ´òÂπ∂ÂèëÂ§ÑÁêÜËÉΩÂäõ„ÄÇ</p>\n<p>Êàë‰ª¨ÂèØ‰ª•Âú®ÊúçÂä°Âô®ÂêØÂä®ÁöÑÊó∂ÂÄôÈÄöËøáËÆæÁΩÆ<code>innodb_buffer_pool_instances</code> ÁöÑÂÄºÊù•‰øÆÊîπBuffer PoolÂÆû‰æãÁöÑ‰∏™Êï∞,</p>\n<p>ÊØîÊñπËØ¥ËøôÊ†∑:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[server]</span><br><span class=\"line\">innodb_buffer_pool_instances <span class=\"operator\">=</span> <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n\n<p>ËøôÊ†∑Â∞±Ë°®ÊòéÊàë‰ª¨Ë¶ÅÂàõÂª∫2‰∏™ <code>Buffer Pool</code> ÂÆû‰æã„ÄÇ</p>\n<p>Êàë‰ª¨Áúã‰∏ãÂ¶Ç‰ΩïÊü•ÁúãÁºìÂÜ≤Ê±†ÁöÑ‰∏™Êï∞Ôºå‰ΩøÁî®ÂëΩ‰ª§:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> variables <span class=\"keyword\">like</span> <span class=\"string\">&#x27;innodb_buffer_pool_instances&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118918.png\" alt=\"image-20220115180223458\"></p>\n<p>ÈÇ£ÊØè‰∏™ <code>Buffer Pool</code> ÂÆû‰æãÂÆûÈôÖÂç†Â§öÂ∞ëÂÜÖÂ≠òÁ©∫Èó¥Âë¢?ÂÖ∂ÂÆû‰ΩøÁî®Ëøô‰∏™ÂÖ¨ÂºèÁÆóÂá∫Êù•ÁöÑÔºö<code>innodb_buffer_pool_size/innodb_buffer_pool_instances</code></p>\n<p>‰πüÂ∞±ÊòØÊÄªÂÖ±ÁöÑÂ§ßÂ∞èÈô§‰ª•ÂÆû‰æãÁöÑ‰∏™Êï∞ÔºåÁªìÊûúÂ∞±ÊòØÊØè‰∏™<code>Buffer Pool</code> ÂÆû‰æãÂç†Áî®ÁöÑÂ§ßÂ∞è„ÄÇ</p>\n<p>‰∏çËøá‰πü‰∏çÊòØËØ¥Buffer PoolÂÆû‰æãÂàõÂª∫ÁöÑË∂äÂ§öË∂äÂ•ΩÔºåÂàÜÂà´<code>ÁÆ°ÁêÜÂêÑ‰∏™Buffer Pool‰πüÊòØÈúÄË¶ÅÊÄßËÉΩÂºÄÈîÄ</code>ÁöÑÔºåInnoDBËßÑÂÆö:ÂΩìinnodb_buffer_pool_sizeÁöÑÂÄºÂ∞è‰∫é1GÁöÑÊó∂ÂÄôËÆæÁΩÆÂ§ö‰∏™ÂÆû‰æãÊòØÊó†ÊïàÁöÑÔºåInnoDB‰ºöÈªòËÆ§Êääinnodb_ buffe _pool_instances ÁöÑÂÄº‰øÆÊîπ‰∏∫1„ÄÇËÄåÊàë‰ª¨ÈºìÂä±Âú®Buffer PpolÂ§ß‰∫éÊàñÁ≠â‰∫é1GÁöÑÊó∂ÂÄôËÆæÁΩÆÂ§ö‰∏™Buffer PoolÂÆû‰æã„ÄÇ</p>\n<h2 id=\"3-5-ÂºïÁî≥ÈóÆÈ¢ò\"><a href=\"#3-5-ÂºïÁî≥ÈóÆÈ¢ò\" class=\"headerlink\" title=\"3.5 ÂºïÁî≥ÈóÆÈ¢ò\"></a>3.5 ÂºïÁî≥ÈóÆÈ¢ò</h2><p>Buffer Pool ÊòØ MySQL ÂÜÖÂ≠òÁªìÊûÑ‰∏≠ÂçÅÂàÜÊ†∏ÂøÉÁöÑ‰∏Ä‰∏™ÁªÑÊàêÔºå‰Ω†ÂèØ‰ª•ÂÖàÊääÂÆÉÊÉ≥Ë±°Êàê‰∏Ä‰∏™ÈªëÁõíÂ≠ê„ÄÇ</p>\n<p><strong>ÈªëÁõí‰∏ãÁöÑÊõ¥Êñ∞Êï∞ÊçÆÊµÅÁ®ã</strong></p>\n<p>ÂΩìÊàë‰ª¨Êü•ËØ¢Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºå‰ºöÂÖàÂéªBuffer Pool‰∏≠Êü•ËØ¢„ÄÇÂ¶ÇÊûúBuffer Pool‰∏≠‰∏çÂ≠òÂú®,Â≠òÂÇ®Âºì|Êìé‰ºöÂÖàÂ∞ÜÊï∞ÊçÆ‰ªéÁ£ÅÁõòÂä†ËΩΩÂà∞Buffer Pool‰∏≠ÔºåÁÑ∂ÂêéÂ∞ÜÊï∞ÊçÆËøîÂõûÁªôÂÆ¢Êà∑Á´Ø;ÂêåÁêÜÔºåÂΩìÊàë‰ª¨Êõ¥Êñ∞Êüê‰∏™Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúËøô‰∏™Êï∞ÊçÆ‰∏çÂ≠òÂú®‰∫éBuffer Pool,ÂêåÊ†∑‰ºöÂÖàÊï∞ÊçÆÂä†ËΩΩËøõÊù•ÔºåÁÑ∂Âêé‰øÆÊîπ‰øÆÊîπÂÜÖÂ≠òÁöÑÊï∞ÊçÆ„ÄÇË¢´‰øÆÊîπËøáÁöÑÊï∞ÊçÆ‰ºöÂú®‰πãÂêéÁªü‰∏ÄÂà∑ÂÖ•Á£ÅÁõò„ÄÇ</p>\n<p><img src=\"https://blog-photos-lxy.oss-cn-hangzhou.aliyuncs.com/img/202207130118256.png\" alt=\"image-20220115180314323\"></p>\n<p>Ëøô‰∏™ËøáÁ®ãÁúã‰ººÊ≤°Âï•ÈóÆÈ¢òÔºåÂÆûÂàôÊòØÊúâÈóÆÈ¢òÁöÑ„ÄÇÂÅáËÆæÊàë‰ª¨‰øÆÊîπBuffer Pool‰∏≠ÁöÑÊï∞ÊçÆÊàêÂäüÔºå‰ΩÜÊòØËøòÊ≤°Êù•ÂæóÂèäÂ∞ÜÊï∞ÊçÆÂà∑ÂÖ•Á£ÅÁõòMySQLÂ∞±ÊåÇ‰∫ÜÊÄé‰πàÂäû?ÊåâÁÖß‰∏äÂõæÁöÑÈÄªËæëÔºåÊ≠§Êó∂Êõ¥Êñ∞‰πãÂêéÁöÑÊï∞ÊçÆÂè™Â≠òÂú®‰∫éBuffer Pool‰∏≠,Â¶ÇÊûúÊ≠§Êó∂MySQLÂÆïÊú∫‰∫ÜÔºåËøôÈÉ®ÂàÜÊï∞ÊçÆÂ∞Ü‰ºöÊ∞∏‰πÖÂú∞‰∏¢Â§±;</p>\n<p>ÊàëÊõ¥Êñ∞Âà∞‰∏ÄÂçäÁ™ÅÁÑ∂ÂèëÁîüÈîôËØØ‰∫ÜÔºåÊÉ≥Ë¶ÅÂõûÊªöÂà∞Êõ¥Êñ∞‰πãÂâçÁöÑÁâàÊú¨ÔºåËØ•ÊÄé‰πàÂäûÔºüËøûÊï∞ÊçÆÊåÅ‰πÖÂåñÁöÑ‰øùËØÅ„ÄÅ‰∫ãÂä°ÂõûÊªöÈÉΩÂÅö‰∏çÂà∞ËøòË∞à‰ªÄ‰πàÂ¥©Ê∫ÉÊÅ¢Â§ç?</p>\n<p>Á≠îÊ°àÔºö<strong>Redo Log &amp; Undo Log</strong></p>\n"},{"title":"ÈòøÈáå‰∫ëÊúçÂä°Âô®Êê≠Âª∫‰∏™‰∫∫ÁΩëÁ´ô","date":"2024-04-01T08:51:29.000Z","cover":"/img/cover_01.png","top_img":"https://bu.dusays.com/2021/03/06/f98061060da88.jpg","_content":"\n@[TOC]\n\n> Êú¨ÊñáÂèÇËÄÉËá™12.29Êó•Â∞öÁ°ÖË∞∑Èõ∑Á•ûÁöÑ [Â∑ßÂ¶ô‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ](https://gitee.com/leifengyang/java-design-pattern)\n\n## ‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\n\n- ÊÄª‰ΩìÂàÜÁ±ª\n\n![image-20230113210444492](https://img-blog.csdnimg.cn/img_convert/9e402b0c6ec2bc81a317c6b8774d2c7f.png)\n\n- ‰∏çÂêåÊó∂ÊúüÈÄâÊã©‰∏çÂêåÁöÑËÆæËÆ°Ê®°Âºè~\n\n![image-20230114113220058](https://img-blog.csdnimg.cn/img_convert/5ed1ffc8fb36192278f04e22eb606402.png)\n\n- ËÆæËÆ°Ê®°ÂºèÊú¨Ë¥®‰∏äÁé©ÁöÑÂ∞±ÊòØÔºö`Â∞ÅË£Ö`Ôºå`ÁªßÊâø`Ôºå`Â§öÊÄÅ`\n- ËÆæËÆ°Ê®°ÂºèÈÅµÂæ™ÁöÑÂÖ≠Â§ßÂéüÂàô\n\n![image-20230114113416409](https://img-blog.csdnimg.cn/img_convert/df85588b81d2d6631d201855a66ea948.png)\n\n## ‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\n\n**ÊèèËø∞Ôºö**Áà∂Á±ªÔºàÊé•Âè£„ÄÅÊäΩË±°Á±ªÔºâÊèê‰æõ‰∫Ü‰∏ÄÁßç`ÂÆö‰πâÁÆóÊ≥ïÁöÑÈ™®Êû∂`Ôºå==ÂÖÅËÆ∏Â≠êÁ±ª‰∏∫‰∏Ä‰∏™ÊàñÂ§ö‰∏™Ê≠•È™§Êèê‰æõÂÆûÁé∞==ÔºåÂú®‰∏çÊîπÂèòÁÆóÊ≥ïÁªìÊûÑÁöÑÊÉÖÂÜµ‰∏ãÔºåÈáçÊñ∞ÂÆö‰πâÁÆóÊ≥ïÁöÑÊüê‰∫õÊ≠•È™§„ÄÇ\n\n![](https://img-blog.csdnimg.cn/img_convert/65b0a3725926c195902515b16a6411d4.png)\n\n**Ê°à‰æãÔºöËÆ¢ÂçïÂ§ÑÁêÜ**\n\n<font color=orange>1„ÄÅÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø</font>\n\n```java\n/**\n * @author lfy\n * @Description ÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø\n * @create 2022-12-29 20:21\n */\npublic abstract class OrderProcessTemplate {\n\n    /**\n     * Â§ÑÁêÜËÆ¢ÂçïÔºö ÂÆö‰πâÂ•ΩÁÆóÊ≥ïÈ™®Êû∂\n     */\n    public final void processOrder(){\n        //1„ÄÅÈÄâÊã©ÂïÜÂìÅ\n        doSelect();\n        //2„ÄÅËøõË°åÊîØ‰ªò\n        doPayment();\n        //3„ÄÅÂºÄÂÖ∑ÂèëÁ•®\n        doReceipt();\n        //4„ÄÅÊ¥æÈÄÅÂïÜÂìÅ\n        doDelivery();\n\n    }\n\n\n    public abstract void doSelect();\n    public abstract void doPayment();\n    public abstract void doReceipt();\n    public abstract void doDelivery();\n\n\n}\n```\n\n<font color=orange>2„ÄÅÂÆö‰πâÂÆûÁé∞Á±ªÔºö`NetOrder` Âíå `StoreOrder`</font>\n\n```java\n/**\n * @author lfy\n * @Description ÁΩëÁªúËÆ¢ÂçïÔºöÁÆóÊ≥ïÁªÜËäÇÂÆûÁé∞\n * @create 2022-12-29 20:24\n */\npublic class NetOrder extends OrderProcessTemplate {\n    @Override\n    public void doSelect() {\n        System.out.println(\"Êää xiaomi11 Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶\");\n    }\n\n    @Override\n    public void doPayment() {\n        System.out.println(\"Âú®Á∫øÂæÆ‰ø°ÊîØ‰ªò 1999\");\n    }\n\n    @Override\n    public void doReceipt() {\n        System.out.println(\"ÂèëÁ•®Â∑≤ÁªèÂèëÈÄÅÁªôÁî®Êà∑ÈÇÆÁÆ±Ôºö aaaa@qq.com\");\n    }\n\n    @Override\n    public void doDelivery() {\n        System.out.println(\"È°∫‰∏∞Ê¨°Êó•ËææÔºöÊäïÈÄÅÂïÜÂìÅ\");\n    }\n}\n```\n\n```java\n/**\n * @author lfy\n * @Description Èó®Â∫óËÆ¢ÂçïÔºöÂ≠êÁ±ªÂÆûÁé∞ÂÖ∑‰ΩìÁÆóÊ≥ï\n * @create 2022-12-29 20:26\n */\npublic class StoreOrder extends OrderProcessTemplate {\n    @Override\n    public void doSelect() {\n        System.out.println(\"Áî®Êà∑ÈÄâÊã©‰∫ÜÔºö3Âè∑Ë¥ßÊû∂-xiaomi11 ÂïÜÂìÅ\");\n    }\n\n    @Override\n    public void doPayment() {\n        System.out.println(\"Âà∑Âç°Êú∫ÔºöÂà∑Âç°ÊîØ‰ªò 1999\");\n    }\n\n    @Override\n    public void doReceipt() {\n        System.out.println(\"ÊâìÂç∞ÂèëÁ•®ÔºåÂíåÁâ©ÂìÅ‰∏ÄËµ∑ÂåÖË£Ö\");\n    }\n\n    @Override\n    public void doDelivery() {\n        System.out.println(\"ÊääÂïÜÂìÅ‰∫§ÁªôÁî®Êà∑ÔºåÁî®ÊºÇ‰∫ÆÁöÑË¢ãÂ≠ê\");\n    }\n}\n```\n\n3„ÄÅËøõË°åÊµãËØï\n\n```java\n/**\n * ËÆæËÆ°Ê®°ÂºèÔºö  Â§öÂÆö‰πâÊé•Âè£„ÄÅÊäΩË±°Á±ª\n * 1Ôºâ„ÄÅ‰æùËµñÂÄíÁΩÆÔºõ ‰æùËµñÊäΩË±°\n * 2Ôºâ„ÄÅÂ§öÊÄÅÔºõ    Èöè‰æøÊõøÊç¢ÂÆûÁé∞\n * @author lfy\n * @Description Ê®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊµãËØï Ôºõ Ê†∏ÂøÉÔºö Áà∂Á±ªÂÆö‰πâÁÆóÊ≥ïÈ™®Êû∂ÔºåÂ≠êÁ±ªÂÆûÁé∞ÁÆóÊ≥ïÁªÜËäÇ\n * @create 2022-12-28 20:41\n */\npublic class TemplateMethodPatternTest {\n\n    public static void main(String[] args) {\n        //Ë°å‰∏∫ÂûãÊ®°ÂºèÁé©ÁöÑÂ∞±ÊòØ‰∏Ä‰∏™Â§öÊÄÅ\n        //1„ÄÅÂ§ñÁïåË∞ÉÁî®Ê®°ÊùøÁ±ª„ÄêÈÅµÂæ™‰æùËµñÂèçËΩ¨ÂéüÂàô„Äë„Äê‰æùËµñÊäΩË±°ËÄå‰∏çÊòØÁªÜËäÇ„Äë\n        OrderProcessTemplate processTemplate = new NetOrder();\n        System.out.println(\"ÁΩëÁªúËÆ¢ÂçïÔºö\");\n        //Â§ÑÁêÜËÆ¢Âçï\n        processTemplate.processOrder(); //ÂÆö‰πâ‰∫ÜÁÆóÊ≥ïÁöÑÊ®°Êùø\n\n\n        processTemplate = new StoreOrder();\n        System.out.println(\"Èó®Â∫óËÆ¢ÂçïÔºö\");\n        // Ê†πÊçÆÈúÄË¶ÅÔºåÈÄâÊã©‰∏çÂêåÁöÑÂÆûÁé∞Á±ªÔºå‰ªéËÄåËææÂà∞Êàë‰ª¨ÈúÄË¶ÅÁöÑÊïàÊûúÔºöÁΩëÁªúËÆ¢Âçï Êàñ Èó®Â∫óËÆ¢Âçï\n        processTemplate.processOrder();\n    }\n}\n```\n\nËøêË°åÁªìÊûúÔºö\n\n![image-20230113220611870](https://img-blog.csdnimg.cn/img_convert/039d094065690f2e4da8f73e94526786.png)\n\n## ‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\n\n**ÊèèËø∞Ôºö**ÂÆö‰πâ`ÁÆóÊ≥ïÂÆ∂ÊóèÔºåÂàÜÂà´Â∞ÅË£Ö`Ëµ∑Êù•ÔºåËÆ©ÂÆÉ‰ª¨‰πãÈó¥ÂèØ‰ª•`Áõ∏‰∫íÊõøÊç¢`ÔºåÊ≠§Ê®°ÂºèËÆ©ÁÆóÊ≥ïÁöÑÂèòÂåñÁã¨Á´ã‰∫é‰ΩøÁî®ÁÆóÊ≥ïÁöÑÂÆ¢Êà∑„ÄÇ\n\n![](https://img-blog.csdnimg.cn/img_convert/003b3cc3b5b54eee7bb255bde2e82ec5.png)\n\n**Ê°à‰æãÔºöÊéíÂ∫èÁÆóÊ≥ï**\n\n<font color=orange>1„ÄÅÂÆö‰πâÁÆóÊ≥ïÊé•Âè£</font>\n\n```java\n/**\n * @author lfy\n * @Description ÁÆóÊ≥ïÊé•Âè£ÔºöÊéíÂ∫èÁ≠ñÁï•\n * @create 2022-12-29 20:36\n */\npublic interface SortStrategy {\n\n    /**\n     * ÊéíÂ∫è\n     */\n    void sort(Integer[] arr);\n}\n```\n\n<font color=orange>2„ÄÅÂÆö‰πâÁ≠ñÁï•Á±ªÔºåÂÆûÁé∞ÁÆóÊ≥ïÊé•Âè£</font>\n\n```java\n/**\n * @author lfy\n * @Description Á≠ñÁï•1ÔºöÂÜíÊ≥°ÊéíÂ∫èÁ≠ñÁï•\n * @create 2022-12-29 20:38\n */\npublic class BubbleSortStrategy implements SortStrategy {\n    @Override\n    public void sort(Integer[] arr) {\n        System.out.println(\"ÂºÄÂßãÂÜíÊ≥°ÊéíÂ∫è....\");\n        for (int i=0;i< arr.length-1;i++){\n            for (int j = 0; j < arr.length- 1 - i  ; j++) {\n                if(arr[j] > arr[j+1]){\n                    Integer temp = arr[j];\n                    arr[j] = arr[j+1];\n                    arr[j+1] = temp;\n                }\n            }\n        }\n        System.out.println(\"ÊéíÂ∫èÁªìÊûúÔºö\"+ Arrays.asList(arr));\n\n    }\n}\n```\n\n```java\n/**\n * @author lfy\n * @Description\n * @create 2022-12-29 20:44\n */\npublic class QuickSortStrategy implements SortStrategy {\n    @Override\n    public void sort(Integer[] arr) {\n        System.out.println(\"Âø´ÈÄüÊéíÂ∫èÂºÄÂßã\");\n        Arrays.sort(arr);\n        System.out.println(\"ÊéíÂ∫èÁªìÊûúÔºö\"+Arrays.asList(arr));\n\n    }\n}\n```\n\n<font color=orange>3„ÄÅÂÆö‰πâ‰∏ä‰∏ãÊñáÂØπË±°(ÂÖ•Âè£Á±ª)ÔºöÊåÅÊúâÁ≠ñÁï•ÂØπË±°</font>\n\n```java\n/**\n * @author lfy\n * @Description ‰∏ä‰∏ãÊñáÔºöÂÖ•Âè£Á±ª\n * @create 2022-12-29 20:45\n */\npublic class SortService {\n    /**\n     * ÊãøÂà∞‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï\n     */\n    private SortStrategy strategy;\n\n    /**\n     * ‰∏∫‰∫ÜÂº∫Âà∂Ë¶ÅÊ±ÇÁî®Êà∑ÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï\n     * @param strategy\n     */\n    public SortService(SortStrategy strategy){\n        this.strategy  =strategy;\n    }\n\n    /**\n     * ÈöèÊó∂Âä®ÊÄÅÊõ¥Êñ∞ÊéíÂ∫èÁÆóÊ≥ï\n     * @param strategy\n     */\n    public void setStrategy(SortStrategy strategy) {\n        this.strategy = strategy;\n    }\n\n    /**\n     * ÊâçÊòØÂà´‰∫∫Ë∞ÉÁî®ÁöÑÊéíÂ∫èÊñπÊ≥ï\n     * @param arr\n     */\n    public void sort(Integer[] arr){\n        strategy.sort(arr);\n    }\n}\n```\n\n<font color=orange>4„ÄÅ‰ΩøÁî®Á≠ñÁï•ÂØπË±°ÊâßË°åÁÆóÊ≥ï</font>\n\n```java\n/**\n * @author lfy\n * @Description  Ê®°ÊùøÊ®°ÂºèÂÆö‰πâÂ§ßÊ°ÜÊû∂„ÄÅÁ≠ñÁï•ÈªòËÆ§ÂÆö‰πâÂ∞èÁªÜËäÇ\n * @create 2022-12-28 21:17\n */\npublic class StrategyPatternTest {\n\n    public static void main(String[] args) {\n        Integer[] arr = new Integer[]{2,4,6,3,1,7,9,8};\n\t\t// ‰º†ÂÖ•‰∏çÂêåÁöÑÁ≠ñÁï•ÔºåÂ∞±‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•\n        SortService sortService = new SortService(new BubbleSortStrategy());\n        sortService.sort(arr);\n\n        System.out.println(\"===============\");\n\n        //Êõ¥Êñ∞Á≠ñÁï•\n        sortService.setStrategy(new QuickSortStrategy());\n        sortService.sort(arr);\n\n    }\n}\n```\n\nÊµãËØïÁªìÊûúÔºö\n\n![image-20230113220248469](https://img-blog.csdnimg.cn/img_convert/879dd90a18e7a5bc986a4bca6627a4e7.png)\n\n## Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\n\n### 4.1 ÊÄùË∑ØÂàÜÊûê\n\n‰ΩøÁî®`Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè`ÔºöÂÆö‰πâ==ÊîØ‰ªòÁöÑÂÆåÊï¥ÊµÅÁ®ã==Ôºõ\n\n‰ΩøÁî®`Á≠ñÁï•Ê®°Âºè`ÔºöÂÆö‰πâ==ÊîØ‰ªòÁöÑ‰∏çÂêåÂÆûÁé∞==Ôºõ\n\n![](https://img-blog.csdnimg.cn/img_convert/2e0d3c18725c719c98d22d7b5aa1bc5a.png)\n\n### 4.2 ÂÆûÁé∞ÂõæËß£Ôºö\n\n![](https://img-blog.csdnimg.cn/img_convert/6628cf4dc83c070f9bbd822c3a45878f.png)\n\n> **ÂàÜÊûê**ÔºöPayStrategy‰ΩøÁî®ÁöÑÊòØÁ≠ñÁï•Ê®°Âºè~  PayService‰∏≠ÁöÑprocessNotifyÈáåÈù¢ÂåÖÂê´‰∫Ü ‰∏ÄÁ≥ªÂàóÊäΩË±°ÊñπÊ≥ïÁöÑË∞ÉÁî®,‰∏çÂêåÁöÑÊîØ‰ªòÊñπÂºè‰ºöÊúâ‰∏çÂêåÁöÑÂÆûÁé∞,ËøôÈáå‰ΩøÁî®‰∫ÜÊ®°ÊùøÊñπÊ≥ïÊ®°Âºè~\n\n### 4.3 ‰ª£Á†ÅÂÆûÁé∞Ôºö\n\n<font color=orange>1„ÄÅÊîØ‰ªòÁ≠ñÁï•Êé•Âè£Ôºö`PayStrategy`</font>\n\n```java\n/**\n * @author lfy\n * @Description ÊîØ‰ªòÁ≠ñÁï•\n * @create 2022-12-28 22:39\n */\npublic interface PayStrategy {\n\n    /**\n     * ÊîØÊåÅÂì™ÁßçÊîØ‰ªò\n     * @param type\n     * @return\n     */\n    boolean supports(String type);\n\n    /**\n     * ‰∏∫Êüê‰∏™ËÆ¢ÂçïÂ±ïÁ§∫Êî∂Èì∂Âè∞È°µÈù¢\n     * @return\n     */\n    String cashierPage(OrderInfo orderInfo);\n\n    /**\n     * È™åËØÅÁ≠æÂêç\n     * @param request  ÂéüÁîüËØ∑Ê±Ç\n     * @param body     ËØ∑Ê±Ç‰ΩìÊï∞ÊçÆ„ÄêËØ∑Ê±Ç‰ΩìÂè™ËÉΩËØªÂèñ‰∏ÄÊ¨°ÔºåÊâÄ‰ª•controllerÊãøÂà∞‰ª•ÂêéÈÉΩÂæÄ‰∏ã‰º†ÈÄíÂç≥ÂèØ„Äë\n     * @return\n     */\n    boolean checkSign(HttpServletRequest request,String body);\n\n\n    /**\n     * È™åÁ≠æÈîôËØØÂ§ÑÁêÜ\n     * @return\n     */\n    Object signError();\n\n\n    /**\n     * È™åÁ≠æÈÄöËøáËøîÂõû\n     * @return\n     */\n    Object signOk();\n\n    /**\n     * È™åÁ≠æÊàêÂäüÂêéÂ§ÑÁêÜÈÄöÁü•Êï∞ÊçÆÔºö ÊääÈÄöÁü•ÁöÑÊâÄÊúâÊï∞ÊçÆÂ∞ÅË£ÖÊåáÂÆöÂØπË±°\n     * @param request\n     * @return\n     */\n    Map<String,Object> process(HttpServletRequest request,String body);\n}\n```\n\n<font color=orange>2„ÄÅÊé•Âè£ÂÆûÁé∞Ôºö`AlipayStrategy` „ÄÅ`WeixinPayStrategy`</font>\n\n```java\n/**\n * @author lfy\n * @Description ÊîØ‰ªòÂÆù\n * @create 2022-12-28 22:40\n */\n@Slf4j\n@Component\npublic class AlipayStrategy implements PayStrategy {\n\n    @Autowired\n    AlipayProperties alipayProperties;\n\n    @Autowired\n    AlipayClient alipayClient;\n\n    @Override\n    public String cashierPage(OrderInfo orderInfo) {\n        //1„ÄÅÂàõÂª∫‰∏Ä‰∏™ AlipayClient\n\n        //2„ÄÅÂàõÂª∫‰∏Ä‰∏™ÊîØ‰ªòËØ∑Ê±Ç\n        AlipayTradePagePayRequest alipayRequest = new AlipayTradePagePayRequest();\n\n        //3„ÄÅËÆæÁΩÆÂèÇÊï∞\n        alipayRequest.setReturnUrl(alipayProperties.getReturn_url()); //ÂêåÊ≠•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊµèËßàÂô®Ë¶ÅË∑≥ËΩ¨Âà∞ÁöÑÈ°µÈù¢Âú∞ÂùÄ\n        alipayRequest.setNotifyUrl(alipayProperties.getNotify_url()); //ÈÄöÁü•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊîØ‰ªòÊ∂àÊÅØ‰ºöÈÄöÁü•ÁªôËøô‰∏™Âú∞ÂùÄ\n\n\n        //ÂïÜÊà∑ËÆ¢ÂçïÂè∑ÔºàÂØπÂ§ñ‰∫§ÊòìÂè∑Ôºâ\n        String outTradeNo = orderInfo.getId().toString();\n        //‰ªòÊ¨æÈáëÈ¢ù\n        BigDecimal totalAmount = orderInfo.getPrice();\n        //ËÆ¢ÂçïÂêçÁß∞\n        String orderName = \"Â∞öÂìÅÊ±á-ËÆ¢Âçï-\"+outTradeNo;\n        //ÂïÜÂìÅÊèèËø∞\n        String tradeBody = orderInfo.getDesc();\n\n        //ËØ¶ÁªÜÔºöhttps://opendocs.alipay.com/open/028r8t?scene=22\n        //‰∏öÂä°ÂèÇÊï∞\n        Map<String,Object> bizContent = new HashMap<>();\n        bizContent.put(\"out_trade_no\",outTradeNo);\n        bizContent.put(\"total_amount\",totalAmount);\n        bizContent.put(\"subject\",orderName);\n        bizContent.put(\"body\",tradeBody);\n        bizContent.put(\"product_code\",\"FAST_INSTANT_TRADE_PAY\");\n        //Ëá™Âä®ÂÖ≥Âçï\n        String date = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\").format(orderInfo.getExpireTime());\n        bizContent.put(\"time_expire\",date);\n        alipayRequest.setBizContent(JSON.toJSONString(bizContent));\n\n\n        //ÁîüÊàêÊîØ‰ªòÈ°µÈù¢\n        String page = null;\n        try {\n            page = alipayClient.pageExecute(alipayRequest).getBody();\n        } catch (AlipayApiException e) {\n            e.printStackTrace();\n        }\n\n        return page;\n    }\n\n    @Override\n    public boolean checkSign(HttpServletRequest request,String body) {\n        Map<String, String> params = HttpUtils.getParameterMap(request);\n        log.info(\"ÊîØ‰ªòÂÆùÈÄöÁü•È™åËØÅÁ≠æÂêç...\");\n        //È™åËØÅÁ≠æÂêç\n        try {\n            //Ë∞ÉÁî®SDKÈ™åËØÅÁ≠æÂêç\n            boolean signVerified = AlipaySignature.rsaCheckV1(params,\n                    alipayProperties.getAlipay_public_key(), alipayProperties.getCharset(),\n                    alipayProperties.getSign_type());\n            return signVerified;\n        } catch (AlipayApiException e) {\n            e.printStackTrace();\n        }\n        return false;\n    }\n\n    @Override\n    public Object signError() {\n        return \"error\";\n    }\n\n    @Override\n    public Map<String,Object> process(HttpServletRequest request,String body) {\n        Map<String, String> map = HttpUtils.getParameterMap(request);\n        String json = JSON.toJSONString(map);\n        Map<String, Object> data = JSON.parseObject(json, new TypeReference<Map<String, Object>>() {\n        });\n        return data;\n    }\n\n    @Override\n    public Object signOk() {\n        //ÊîØ‰ªòÂÆùË¶ÅÊ±ÇÊàêÂäüËøîÂõû success Â≠óÁ¨¶‰∏≤\n        return \"success\";\n    }\n\n\n    @Override  //ÂØπÊñ∞Â¢ûÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠\n    public boolean supports(String type) {\n        return \"alipay\".equalsIgnoreCase(type);\n    }\n}\n```\n\n```java\n/**\n * @author lfy\n * @Description ÂæÆ‰ø°ÊîØ‰ªò\n * @create 2022-12-28 22:40\n */\n@Slf4j\n@Component\npublic class WeixinPayStrategy implements PayStrategy {\n    // ÂÖ∑‰ΩìÂÆûÁé∞ÁúÅÁï•ÔºåÂèØ‰ª•Âà∞‰ª£Á†Å‰ªìÂ∫ìÊü•Áúã\n}\n```\n\n<font color=orange>3„ÄÅÊîØ‰ªòService‰ª£Á†ÅÁºñÂÜô</font>\n\n```java\n/**\n * @author lfy\n * @Description\n * @create 2022-12-28 22:36\n */\npublic interface PayService {\n\n    /**\n     * ÁîüÊàêÊîØ‰ªòÊî∂Èì∂Âè∞È°µ\n     * @param type\n     * @param orderId\n     * @return\n     */\n    String payPage(String type, Long orderId);\n\n\n    /**\n     * Â§ÑÁêÜÊîØ‰ªòÈÄöÁü•\n     * @param request\n     * @return\n     */\n    Object processNotify(HttpServletRequest request,String body);\n}\n```\n\n<font color=orange>4„ÄÅÊîØ‰ªòServiceÂÆûÁé∞</font>\n\n```java\n/**\n * @author lfy\n * @Description ÊîØ‰ªò‰∏ä‰∏ãÊñáÂºïÁî®ÊîØ‰ªòÁ≠ñÁï•Ôºõ Ëøô‰∏™‰∏ä‰∏ãÊñá‰πüÊòØÊ®°ÊùøÁ±ªÔºõÂÆö‰πâÂ•ΩÁÆóÊ≥ïÊ≠•È™§\n * @create 2022-12-28 22:46\n */\n@Service\n@Slf4j //Ê®°ÊùøÁ±ª\npublic class PayServiceImpl implements PayService {\n\n    @Autowired\n    List<PayStrategy> payStrategies; //Ê≥®ÂÖ•ÊîØ‰ªòÁ≠ñÁï•\n\n    /**\n     * ÁîüÊàêÊî∂Èì∂Âè∞È°µÈù¢\n     * @param type\n     * @param orderId\n     * @return\n     */\n    @Override\n    public String payPage(String type, Long orderId) {\n        //1„ÄÅÊü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢Âçï\n        OrderInfo orderInfo = getOrderInfo(orderId);\n\n        //2„ÄÅÁîüÊàêÊîØ‰ªòÈ°µ\n        for (PayStrategy strategy : payStrategies) {\n            if(strategy.supports(type)){\n                //Ëé∑ÂèñÊî∂Èì∂Âè∞È°µÈù¢\n                return strategy.cashierPage(orderInfo);\n            }\n        }\n        //3„ÄÅÂ¶ÇÊûú‰ª•‰∏äÈÉΩ‰∏çÊîØÊåÅÔºåÊâìÂç∞ÈîôËØØ\n        return \"‰∏çÊîØÊåÅËøôÁßçÊîØ‰ªòÊñπÂºè\";\n    }\n\n\n    /**\n     * ÂÆö‰πâÈÄöÁü•Â§ÑÁêÜÊ®°ÊùøÔºõ\n     * ÂæÆ‰ø°ÈÄöÁü•\n     * ÊîØ‰ªòÂÆùÈÄöÁü•\n     * 1Ôºâ„ÄÅÈ™åËØÅÁ≠æÂêç\n     * 2Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÊîπËÆ¢Âçï‰∏∫Â∑≤ÊîØ‰ªò\n     * 3Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÁªôÊîØ‰ªòÂÆù(success)ÂæÆ‰ø°(200Áä∂ÊÄÅÁ†Åjson)ËøîÂõûÊï∞ÊçÆ\n     * 4Ôºâ„ÄÅxxx\n     * @param request\n     * @param body\n     * @return\n     */\n    @Override\n    public Object processNotify(HttpServletRequest request,String body) {\n        Object result = \"‰∏çÊîØÊåÅÊ≠§ÊñπÂºè\";\n\n        //1„ÄÅÂà§Êñ≠ÊòØÈÇ£ÁßçÈÄöÁü•\n        String type = getNotifyType(request);\n        Map<String, Object> data = null;\n\n        //2„ÄÅÈ™åËØÅÁ≠æÂêç\n        for (PayStrategy strategy : payStrategies) {\n            if(strategy.supports(type)){\n                //Á≠æÂêçÊ†°È™å\n                boolean checkSign = strategy.checkSign(request,body);\n                if(!checkSign){\n                    log.error(\"Á≠æÂêçÈ™åËØÅÂ§±Ë¥•ÔºåÁñë‰ººÊîªÂáªËØ∑Ê±Ç\");\n                    //È™åÁ≠æÂ§±Ë¥•ËøîÂõû\n                   return strategy.signError();\n                }else {\n                    log.info(\"Á≠æÂêçÈ™åËØÅÊàêÂäüÔºåÊèêÂèñÈÄöÁü•Êï∞ÊçÆ\");\n                    //È™åÁ≠æÊàêÂäüÂ§ÑÁêÜÊï∞ÊçÆ\n                    data = strategy.process(request,body);\n                    //È™åÁ≠æÊàêÂäüËøîÂõû\n                    result = strategy.signOk();\n                }\n            }\n        }\n\n        //3„ÄÅÈÄöÁî®ÁöÑÂêéÁª≠Â§ÑÁêÜÁÆóÊ≥ïÔºõÂ§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ\n        processOrder(data);\n\n        return result;\n    }\n\n    /**\n     * Â§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ\n     * @param data\n     */\n    private void processOrder(Map<String, Object> data) {\n        //TODO ÊääÊîØ‰ªòÊàêÂäü‰ø°ÊÅØÁ≠â‰øùÂ≠òÊï∞ÊçÆÂ∫ìÔºåÂπ∂‰øÆÊîπËÆ¢ÂçïÁä∂ÊÄÅÔºåÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÁ≠â...\n        log.info(\"ËÆ¢ÂçïÊîØ‰ªòÊàêÂäüÔºåÁä∂ÊÄÅ‰øÆÊîπÂÆåÊàêÔºåÂ∑≤ÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÔºåËØ¶ÁªÜÊï∞ÊçÆÔºö{}\",data);\n    }\n\n    /**\n     * Âà§Êñ≠ÈÄöÁü•Á±ªÂûã\n     * @param request\n     * @return\n     */\n    private String getNotifyType(HttpServletRequest request) {\n        String header = request.getHeader(\"wechatpay-serial\");\n        if(StringUtils.hasText(header)){\n            return \"weixin\";\n        }\n\n        String app_id = request.getParameter(\"app_id\");\n        if(StringUtils.hasText(app_id)){\n            return \"alipay\";\n        }\n\n\n        return \"unknown\";\n    }\n\n    public OrderInfo getOrderInfo(Long orderId){\n        log.info(\"Êü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢ÂçïÔºö{}\",orderId);\n        OrderInfo orderInfo = new OrderInfo();\n        orderInfo.setId(orderId);\n        orderInfo.setTitle(\"Â∞öÂìÅÊ±á-ÂïÜÂüé-ËÆ¢Âçï\");\n        orderInfo.setComment(\"Âø´ÁÇπÂèëË¥ß\");\n        orderInfo.setDesc(\"‰π∞‰∫Ü‰∏ÄÂ†ÜÂïÜÂìÅ\");\n        orderInfo.setPrice(new BigDecimal(\"9098.00\"));\n        orderInfo.setExpireTime(new Date(System.currentTimeMillis()+30*60*1000));\n\n        return orderInfo;\n    }\n}\n```\n\n**ÂàÜÊûêÔºö**\n\n![image-20230113223331649](https://img-blog.csdnimg.cn/img_convert/543a45872d4d17617504e7dea6c7119f.png)\n\n![image-20230114125758333](https://img-blog.csdnimg.cn/img_convert/3267819573fb85bf35740bd55b7048b1.png)\n\n### 4.4 ÊïàÊûúÊºîÁ§∫\n\n<font color=orange>1„ÄÅÁî®Êà∑ËøõÂÖ•ÊîØ‰ªòÈ°µÈù¢ÂêéÔºö</font>\n\n![image-20230114112440663](https://img-blog.csdnimg.cn/img_convert/b1235253e3ce038125552750ac0c3b65.png)\n\n<font color=orange>2„ÄÅÂΩìÈÄâÊã©ÂæÆ‰ø°ÊîØ‰ªòÊó∂ÔºåËøõÂÖ•ÂæÆ‰ø°‰∫åÁª¥Á†ÅÈ°µÈù¢</font>\n\n![image-20230114112525508](https://img-blog.csdnimg.cn/img_convert/2c644c164d36791ac1dc70cda7202dc1.png)\n\n<font color=orange>3„ÄÅÂΩìÈÄâÊã©ÊîØ‰ªòÂÆùÊîØ‰ªòÔºåËøõÂÖ•ÊîØ‰ªòÂÆùÈ°µÈù¢</font>\n\n![image-20230114112626541](https://img-blog.csdnimg.cn/img_convert/9f2041ef2259893210790a38c3d2b14f.png)\n\n<font color=orange>4„ÄÅÊîØ‰ªòÊàêÂäü‰πãÂêé‰ºöË∑≥ËΩ¨Âà∞ÂØπÂ∫îÁöÑÊàêÂäüÈ°µÈù¢ÔºàÂæÆ‰ø°ÊàêÂäüÈ°µÈù¢„ÄÅÊîØ‰ªòÂÆùÊàêÂäüÈ°µÈù¢...Ôºâ</font>\n\n### 4.5 Â¶Ç‰ΩïÊâ©Â±ï\n\nÊúÄÂêéÊàë‰ª¨ÈúÄË¶ÅÊÄùËÄÉ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÁªèËøáÊàë‰ª¨‰ΩøÁî®Á≠ñÁï•+Ê®°ÊùøÊîπÈÄ†ÁöÑÊîØ‰ªò Âíå‰º†ÁªüÁöÑÂÜôÊ≥ïÊúâÂï•Â•ΩÂ§ÑÂë¢Ôºü\n\n1„ÄÅ==Êòì‰∫éÊâ©Â±ï==ÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶ÅÂ¢ûÂä†Êñ∞ÁöÑÊîØ‰ªòÊñπÂºèÔºöÈì∂ËÅîÊîØ‰ªò„ÄÅÁôΩÊù°ÊîØ‰ªò...Êàë‰ª¨Âè™ÈúÄË¶ÅÂÆö‰πâÂØπÂ∫îÁöÑÊîØ‰ªòÁ≠ñÁï•Á±ªÂç≥ÂèØ~ ÂΩì‰∏çÈúÄË¶ÅÊó∂ÔºåÁõ¥Êé•Âà†Èô§ÂØπÂ∫îÁöÑÂÆûÁé∞Á±ª„ÄÇÁÑ∂ÂêéÂú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÔºå‰ºöËá™ÈÄÇÂ∫î‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•~ Á¨¶Âêà`ÂØπ‰øÆÊîπÂÖ≥Èó≠ÔºåÂØπÊâ©Â±ïÂºÄÊîæ`ÁöÑÁâπÁÇπÔºÅ\n\n![image-20230114124615619](https://img-blog.csdnimg.cn/img_convert/3bf9cdcfd38eae9df74d77e1b4610252.png)\n\n2„ÄÅService‰∏≠ÁöÑÊ®°ÊùøÊñπÊ≥ï‰πüËÆ©Êàë‰ª¨ÁöÑ==‰ª£Á†ÅÂÜó‰ΩôÂ∫¶Êõ¥‰Ωé==ÔºåÈÄªËæëÊõ¥Âä†Ê∏ÖÊô∞~\n\n","source":"_posts/ÈòøÈáå‰∫ëÊúçÂä°Âô®Êê≠Âª∫‰∏™‰∫∫ÁΩëÁ´ô.md","raw":"---\ntitle: ÈòøÈáå‰∫ëÊúçÂä°Âô®Êê≠Âª∫‰∏™‰∫∫ÁΩëÁ´ô\ndate: 2024-04-01 16:51:29\ntags: ÈòøÈáå‰∫ë\ncover: /img/cover_01.png\ntop_img: https://bu.dusays.com/2021/03/06/f98061060da88.jpg\n---\n\n@[TOC]\n\n> Êú¨ÊñáÂèÇËÄÉËá™12.29Êó•Â∞öÁ°ÖË∞∑Èõ∑Á•ûÁöÑ [Â∑ßÂ¶ô‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ](https://gitee.com/leifengyang/java-design-pattern)\n\n## ‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\n\n- ÊÄª‰ΩìÂàÜÁ±ª\n\n![image-20230113210444492](https://img-blog.csdnimg.cn/img_convert/9e402b0c6ec2bc81a317c6b8774d2c7f.png)\n\n- ‰∏çÂêåÊó∂ÊúüÈÄâÊã©‰∏çÂêåÁöÑËÆæËÆ°Ê®°Âºè~\n\n![image-20230114113220058](https://img-blog.csdnimg.cn/img_convert/5ed1ffc8fb36192278f04e22eb606402.png)\n\n- ËÆæËÆ°Ê®°ÂºèÊú¨Ë¥®‰∏äÁé©ÁöÑÂ∞±ÊòØÔºö`Â∞ÅË£Ö`Ôºå`ÁªßÊâø`Ôºå`Â§öÊÄÅ`\n- ËÆæËÆ°Ê®°ÂºèÈÅµÂæ™ÁöÑÂÖ≠Â§ßÂéüÂàô\n\n![image-20230114113416409](https://img-blog.csdnimg.cn/img_convert/df85588b81d2d6631d201855a66ea948.png)\n\n## ‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\n\n**ÊèèËø∞Ôºö**Áà∂Á±ªÔºàÊé•Âè£„ÄÅÊäΩË±°Á±ªÔºâÊèê‰æõ‰∫Ü‰∏ÄÁßç`ÂÆö‰πâÁÆóÊ≥ïÁöÑÈ™®Êû∂`Ôºå==ÂÖÅËÆ∏Â≠êÁ±ª‰∏∫‰∏Ä‰∏™ÊàñÂ§ö‰∏™Ê≠•È™§Êèê‰æõÂÆûÁé∞==ÔºåÂú®‰∏çÊîπÂèòÁÆóÊ≥ïÁªìÊûÑÁöÑÊÉÖÂÜµ‰∏ãÔºåÈáçÊñ∞ÂÆö‰πâÁÆóÊ≥ïÁöÑÊüê‰∫õÊ≠•È™§„ÄÇ\n\n![](https://img-blog.csdnimg.cn/img_convert/65b0a3725926c195902515b16a6411d4.png)\n\n**Ê°à‰æãÔºöËÆ¢ÂçïÂ§ÑÁêÜ**\n\n<font color=orange>1„ÄÅÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø</font>\n\n```java\n/**\n * @author lfy\n * @Description ÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø\n * @create 2022-12-29 20:21\n */\npublic abstract class OrderProcessTemplate {\n\n    /**\n     * Â§ÑÁêÜËÆ¢ÂçïÔºö ÂÆö‰πâÂ•ΩÁÆóÊ≥ïÈ™®Êû∂\n     */\n    public final void processOrder(){\n        //1„ÄÅÈÄâÊã©ÂïÜÂìÅ\n        doSelect();\n        //2„ÄÅËøõË°åÊîØ‰ªò\n        doPayment();\n        //3„ÄÅÂºÄÂÖ∑ÂèëÁ•®\n        doReceipt();\n        //4„ÄÅÊ¥æÈÄÅÂïÜÂìÅ\n        doDelivery();\n\n    }\n\n\n    public abstract void doSelect();\n    public abstract void doPayment();\n    public abstract void doReceipt();\n    public abstract void doDelivery();\n\n\n}\n```\n\n<font color=orange>2„ÄÅÂÆö‰πâÂÆûÁé∞Á±ªÔºö`NetOrder` Âíå `StoreOrder`</font>\n\n```java\n/**\n * @author lfy\n * @Description ÁΩëÁªúËÆ¢ÂçïÔºöÁÆóÊ≥ïÁªÜËäÇÂÆûÁé∞\n * @create 2022-12-29 20:24\n */\npublic class NetOrder extends OrderProcessTemplate {\n    @Override\n    public void doSelect() {\n        System.out.println(\"Êää xiaomi11 Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶\");\n    }\n\n    @Override\n    public void doPayment() {\n        System.out.println(\"Âú®Á∫øÂæÆ‰ø°ÊîØ‰ªò 1999\");\n    }\n\n    @Override\n    public void doReceipt() {\n        System.out.println(\"ÂèëÁ•®Â∑≤ÁªèÂèëÈÄÅÁªôÁî®Êà∑ÈÇÆÁÆ±Ôºö aaaa@qq.com\");\n    }\n\n    @Override\n    public void doDelivery() {\n        System.out.println(\"È°∫‰∏∞Ê¨°Êó•ËææÔºöÊäïÈÄÅÂïÜÂìÅ\");\n    }\n}\n```\n\n```java\n/**\n * @author lfy\n * @Description Èó®Â∫óËÆ¢ÂçïÔºöÂ≠êÁ±ªÂÆûÁé∞ÂÖ∑‰ΩìÁÆóÊ≥ï\n * @create 2022-12-29 20:26\n */\npublic class StoreOrder extends OrderProcessTemplate {\n    @Override\n    public void doSelect() {\n        System.out.println(\"Áî®Êà∑ÈÄâÊã©‰∫ÜÔºö3Âè∑Ë¥ßÊû∂-xiaomi11 ÂïÜÂìÅ\");\n    }\n\n    @Override\n    public void doPayment() {\n        System.out.println(\"Âà∑Âç°Êú∫ÔºöÂà∑Âç°ÊîØ‰ªò 1999\");\n    }\n\n    @Override\n    public void doReceipt() {\n        System.out.println(\"ÊâìÂç∞ÂèëÁ•®ÔºåÂíåÁâ©ÂìÅ‰∏ÄËµ∑ÂåÖË£Ö\");\n    }\n\n    @Override\n    public void doDelivery() {\n        System.out.println(\"ÊääÂïÜÂìÅ‰∫§ÁªôÁî®Êà∑ÔºåÁî®ÊºÇ‰∫ÆÁöÑË¢ãÂ≠ê\");\n    }\n}\n```\n\n3„ÄÅËøõË°åÊµãËØï\n\n```java\n/**\n * ËÆæËÆ°Ê®°ÂºèÔºö  Â§öÂÆö‰πâÊé•Âè£„ÄÅÊäΩË±°Á±ª\n * 1Ôºâ„ÄÅ‰æùËµñÂÄíÁΩÆÔºõ ‰æùËµñÊäΩË±°\n * 2Ôºâ„ÄÅÂ§öÊÄÅÔºõ    Èöè‰æøÊõøÊç¢ÂÆûÁé∞\n * @author lfy\n * @Description Ê®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊµãËØï Ôºõ Ê†∏ÂøÉÔºö Áà∂Á±ªÂÆö‰πâÁÆóÊ≥ïÈ™®Êû∂ÔºåÂ≠êÁ±ªÂÆûÁé∞ÁÆóÊ≥ïÁªÜËäÇ\n * @create 2022-12-28 20:41\n */\npublic class TemplateMethodPatternTest {\n\n    public static void main(String[] args) {\n        //Ë°å‰∏∫ÂûãÊ®°ÂºèÁé©ÁöÑÂ∞±ÊòØ‰∏Ä‰∏™Â§öÊÄÅ\n        //1„ÄÅÂ§ñÁïåË∞ÉÁî®Ê®°ÊùøÁ±ª„ÄêÈÅµÂæ™‰æùËµñÂèçËΩ¨ÂéüÂàô„Äë„Äê‰æùËµñÊäΩË±°ËÄå‰∏çÊòØÁªÜËäÇ„Äë\n        OrderProcessTemplate processTemplate = new NetOrder();\n        System.out.println(\"ÁΩëÁªúËÆ¢ÂçïÔºö\");\n        //Â§ÑÁêÜËÆ¢Âçï\n        processTemplate.processOrder(); //ÂÆö‰πâ‰∫ÜÁÆóÊ≥ïÁöÑÊ®°Êùø\n\n\n        processTemplate = new StoreOrder();\n        System.out.println(\"Èó®Â∫óËÆ¢ÂçïÔºö\");\n        // Ê†πÊçÆÈúÄË¶ÅÔºåÈÄâÊã©‰∏çÂêåÁöÑÂÆûÁé∞Á±ªÔºå‰ªéËÄåËææÂà∞Êàë‰ª¨ÈúÄË¶ÅÁöÑÊïàÊûúÔºöÁΩëÁªúËÆ¢Âçï Êàñ Èó®Â∫óËÆ¢Âçï\n        processTemplate.processOrder();\n    }\n}\n```\n\nËøêË°åÁªìÊûúÔºö\n\n![image-20230113220611870](https://img-blog.csdnimg.cn/img_convert/039d094065690f2e4da8f73e94526786.png)\n\n## ‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\n\n**ÊèèËø∞Ôºö**ÂÆö‰πâ`ÁÆóÊ≥ïÂÆ∂ÊóèÔºåÂàÜÂà´Â∞ÅË£Ö`Ëµ∑Êù•ÔºåËÆ©ÂÆÉ‰ª¨‰πãÈó¥ÂèØ‰ª•`Áõ∏‰∫íÊõøÊç¢`ÔºåÊ≠§Ê®°ÂºèËÆ©ÁÆóÊ≥ïÁöÑÂèòÂåñÁã¨Á´ã‰∫é‰ΩøÁî®ÁÆóÊ≥ïÁöÑÂÆ¢Êà∑„ÄÇ\n\n![](https://img-blog.csdnimg.cn/img_convert/003b3cc3b5b54eee7bb255bde2e82ec5.png)\n\n**Ê°à‰æãÔºöÊéíÂ∫èÁÆóÊ≥ï**\n\n<font color=orange>1„ÄÅÂÆö‰πâÁÆóÊ≥ïÊé•Âè£</font>\n\n```java\n/**\n * @author lfy\n * @Description ÁÆóÊ≥ïÊé•Âè£ÔºöÊéíÂ∫èÁ≠ñÁï•\n * @create 2022-12-29 20:36\n */\npublic interface SortStrategy {\n\n    /**\n     * ÊéíÂ∫è\n     */\n    void sort(Integer[] arr);\n}\n```\n\n<font color=orange>2„ÄÅÂÆö‰πâÁ≠ñÁï•Á±ªÔºåÂÆûÁé∞ÁÆóÊ≥ïÊé•Âè£</font>\n\n```java\n/**\n * @author lfy\n * @Description Á≠ñÁï•1ÔºöÂÜíÊ≥°ÊéíÂ∫èÁ≠ñÁï•\n * @create 2022-12-29 20:38\n */\npublic class BubbleSortStrategy implements SortStrategy {\n    @Override\n    public void sort(Integer[] arr) {\n        System.out.println(\"ÂºÄÂßãÂÜíÊ≥°ÊéíÂ∫è....\");\n        for (int i=0;i< arr.length-1;i++){\n            for (int j = 0; j < arr.length- 1 - i  ; j++) {\n                if(arr[j] > arr[j+1]){\n                    Integer temp = arr[j];\n                    arr[j] = arr[j+1];\n                    arr[j+1] = temp;\n                }\n            }\n        }\n        System.out.println(\"ÊéíÂ∫èÁªìÊûúÔºö\"+ Arrays.asList(arr));\n\n    }\n}\n```\n\n```java\n/**\n * @author lfy\n * @Description\n * @create 2022-12-29 20:44\n */\npublic class QuickSortStrategy implements SortStrategy {\n    @Override\n    public void sort(Integer[] arr) {\n        System.out.println(\"Âø´ÈÄüÊéíÂ∫èÂºÄÂßã\");\n        Arrays.sort(arr);\n        System.out.println(\"ÊéíÂ∫èÁªìÊûúÔºö\"+Arrays.asList(arr));\n\n    }\n}\n```\n\n<font color=orange>3„ÄÅÂÆö‰πâ‰∏ä‰∏ãÊñáÂØπË±°(ÂÖ•Âè£Á±ª)ÔºöÊåÅÊúâÁ≠ñÁï•ÂØπË±°</font>\n\n```java\n/**\n * @author lfy\n * @Description ‰∏ä‰∏ãÊñáÔºöÂÖ•Âè£Á±ª\n * @create 2022-12-29 20:45\n */\npublic class SortService {\n    /**\n     * ÊãøÂà∞‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï\n     */\n    private SortStrategy strategy;\n\n    /**\n     * ‰∏∫‰∫ÜÂº∫Âà∂Ë¶ÅÊ±ÇÁî®Êà∑ÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï\n     * @param strategy\n     */\n    public SortService(SortStrategy strategy){\n        this.strategy  =strategy;\n    }\n\n    /**\n     * ÈöèÊó∂Âä®ÊÄÅÊõ¥Êñ∞ÊéíÂ∫èÁÆóÊ≥ï\n     * @param strategy\n     */\n    public void setStrategy(SortStrategy strategy) {\n        this.strategy = strategy;\n    }\n\n    /**\n     * ÊâçÊòØÂà´‰∫∫Ë∞ÉÁî®ÁöÑÊéíÂ∫èÊñπÊ≥ï\n     * @param arr\n     */\n    public void sort(Integer[] arr){\n        strategy.sort(arr);\n    }\n}\n```\n\n<font color=orange>4„ÄÅ‰ΩøÁî®Á≠ñÁï•ÂØπË±°ÊâßË°åÁÆóÊ≥ï</font>\n\n```java\n/**\n * @author lfy\n * @Description  Ê®°ÊùøÊ®°ÂºèÂÆö‰πâÂ§ßÊ°ÜÊû∂„ÄÅÁ≠ñÁï•ÈªòËÆ§ÂÆö‰πâÂ∞èÁªÜËäÇ\n * @create 2022-12-28 21:17\n */\npublic class StrategyPatternTest {\n\n    public static void main(String[] args) {\n        Integer[] arr = new Integer[]{2,4,6,3,1,7,9,8};\n\t\t// ‰º†ÂÖ•‰∏çÂêåÁöÑÁ≠ñÁï•ÔºåÂ∞±‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•\n        SortService sortService = new SortService(new BubbleSortStrategy());\n        sortService.sort(arr);\n\n        System.out.println(\"===============\");\n\n        //Êõ¥Êñ∞Á≠ñÁï•\n        sortService.setStrategy(new QuickSortStrategy());\n        sortService.sort(arr);\n\n    }\n}\n```\n\nÊµãËØïÁªìÊûúÔºö\n\n![image-20230113220248469](https://img-blog.csdnimg.cn/img_convert/879dd90a18e7a5bc986a4bca6627a4e7.png)\n\n## Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\n\n### 4.1 ÊÄùË∑ØÂàÜÊûê\n\n‰ΩøÁî®`Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè`ÔºöÂÆö‰πâ==ÊîØ‰ªòÁöÑÂÆåÊï¥ÊµÅÁ®ã==Ôºõ\n\n‰ΩøÁî®`Á≠ñÁï•Ê®°Âºè`ÔºöÂÆö‰πâ==ÊîØ‰ªòÁöÑ‰∏çÂêåÂÆûÁé∞==Ôºõ\n\n![](https://img-blog.csdnimg.cn/img_convert/2e0d3c18725c719c98d22d7b5aa1bc5a.png)\n\n### 4.2 ÂÆûÁé∞ÂõæËß£Ôºö\n\n![](https://img-blog.csdnimg.cn/img_convert/6628cf4dc83c070f9bbd822c3a45878f.png)\n\n> **ÂàÜÊûê**ÔºöPayStrategy‰ΩøÁî®ÁöÑÊòØÁ≠ñÁï•Ê®°Âºè~  PayService‰∏≠ÁöÑprocessNotifyÈáåÈù¢ÂåÖÂê´‰∫Ü ‰∏ÄÁ≥ªÂàóÊäΩË±°ÊñπÊ≥ïÁöÑË∞ÉÁî®,‰∏çÂêåÁöÑÊîØ‰ªòÊñπÂºè‰ºöÊúâ‰∏çÂêåÁöÑÂÆûÁé∞,ËøôÈáå‰ΩøÁî®‰∫ÜÊ®°ÊùøÊñπÊ≥ïÊ®°Âºè~\n\n### 4.3 ‰ª£Á†ÅÂÆûÁé∞Ôºö\n\n<font color=orange>1„ÄÅÊîØ‰ªòÁ≠ñÁï•Êé•Âè£Ôºö`PayStrategy`</font>\n\n```java\n/**\n * @author lfy\n * @Description ÊîØ‰ªòÁ≠ñÁï•\n * @create 2022-12-28 22:39\n */\npublic interface PayStrategy {\n\n    /**\n     * ÊîØÊåÅÂì™ÁßçÊîØ‰ªò\n     * @param type\n     * @return\n     */\n    boolean supports(String type);\n\n    /**\n     * ‰∏∫Êüê‰∏™ËÆ¢ÂçïÂ±ïÁ§∫Êî∂Èì∂Âè∞È°µÈù¢\n     * @return\n     */\n    String cashierPage(OrderInfo orderInfo);\n\n    /**\n     * È™åËØÅÁ≠æÂêç\n     * @param request  ÂéüÁîüËØ∑Ê±Ç\n     * @param body     ËØ∑Ê±Ç‰ΩìÊï∞ÊçÆ„ÄêËØ∑Ê±Ç‰ΩìÂè™ËÉΩËØªÂèñ‰∏ÄÊ¨°ÔºåÊâÄ‰ª•controllerÊãøÂà∞‰ª•ÂêéÈÉΩÂæÄ‰∏ã‰º†ÈÄíÂç≥ÂèØ„Äë\n     * @return\n     */\n    boolean checkSign(HttpServletRequest request,String body);\n\n\n    /**\n     * È™åÁ≠æÈîôËØØÂ§ÑÁêÜ\n     * @return\n     */\n    Object signError();\n\n\n    /**\n     * È™åÁ≠æÈÄöËøáËøîÂõû\n     * @return\n     */\n    Object signOk();\n\n    /**\n     * È™åÁ≠æÊàêÂäüÂêéÂ§ÑÁêÜÈÄöÁü•Êï∞ÊçÆÔºö ÊääÈÄöÁü•ÁöÑÊâÄÊúâÊï∞ÊçÆÂ∞ÅË£ÖÊåáÂÆöÂØπË±°\n     * @param request\n     * @return\n     */\n    Map<String,Object> process(HttpServletRequest request,String body);\n}\n```\n\n<font color=orange>2„ÄÅÊé•Âè£ÂÆûÁé∞Ôºö`AlipayStrategy` „ÄÅ`WeixinPayStrategy`</font>\n\n```java\n/**\n * @author lfy\n * @Description ÊîØ‰ªòÂÆù\n * @create 2022-12-28 22:40\n */\n@Slf4j\n@Component\npublic class AlipayStrategy implements PayStrategy {\n\n    @Autowired\n    AlipayProperties alipayProperties;\n\n    @Autowired\n    AlipayClient alipayClient;\n\n    @Override\n    public String cashierPage(OrderInfo orderInfo) {\n        //1„ÄÅÂàõÂª∫‰∏Ä‰∏™ AlipayClient\n\n        //2„ÄÅÂàõÂª∫‰∏Ä‰∏™ÊîØ‰ªòËØ∑Ê±Ç\n        AlipayTradePagePayRequest alipayRequest = new AlipayTradePagePayRequest();\n\n        //3„ÄÅËÆæÁΩÆÂèÇÊï∞\n        alipayRequest.setReturnUrl(alipayProperties.getReturn_url()); //ÂêåÊ≠•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊµèËßàÂô®Ë¶ÅË∑≥ËΩ¨Âà∞ÁöÑÈ°µÈù¢Âú∞ÂùÄ\n        alipayRequest.setNotifyUrl(alipayProperties.getNotify_url()); //ÈÄöÁü•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊîØ‰ªòÊ∂àÊÅØ‰ºöÈÄöÁü•ÁªôËøô‰∏™Âú∞ÂùÄ\n\n\n        //ÂïÜÊà∑ËÆ¢ÂçïÂè∑ÔºàÂØπÂ§ñ‰∫§ÊòìÂè∑Ôºâ\n        String outTradeNo = orderInfo.getId().toString();\n        //‰ªòÊ¨æÈáëÈ¢ù\n        BigDecimal totalAmount = orderInfo.getPrice();\n        //ËÆ¢ÂçïÂêçÁß∞\n        String orderName = \"Â∞öÂìÅÊ±á-ËÆ¢Âçï-\"+outTradeNo;\n        //ÂïÜÂìÅÊèèËø∞\n        String tradeBody = orderInfo.getDesc();\n\n        //ËØ¶ÁªÜÔºöhttps://opendocs.alipay.com/open/028r8t?scene=22\n        //‰∏öÂä°ÂèÇÊï∞\n        Map<String,Object> bizContent = new HashMap<>();\n        bizContent.put(\"out_trade_no\",outTradeNo);\n        bizContent.put(\"total_amount\",totalAmount);\n        bizContent.put(\"subject\",orderName);\n        bizContent.put(\"body\",tradeBody);\n        bizContent.put(\"product_code\",\"FAST_INSTANT_TRADE_PAY\");\n        //Ëá™Âä®ÂÖ≥Âçï\n        String date = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\").format(orderInfo.getExpireTime());\n        bizContent.put(\"time_expire\",date);\n        alipayRequest.setBizContent(JSON.toJSONString(bizContent));\n\n\n        //ÁîüÊàêÊîØ‰ªòÈ°µÈù¢\n        String page = null;\n        try {\n            page = alipayClient.pageExecute(alipayRequest).getBody();\n        } catch (AlipayApiException e) {\n            e.printStackTrace();\n        }\n\n        return page;\n    }\n\n    @Override\n    public boolean checkSign(HttpServletRequest request,String body) {\n        Map<String, String> params = HttpUtils.getParameterMap(request);\n        log.info(\"ÊîØ‰ªòÂÆùÈÄöÁü•È™åËØÅÁ≠æÂêç...\");\n        //È™åËØÅÁ≠æÂêç\n        try {\n            //Ë∞ÉÁî®SDKÈ™åËØÅÁ≠æÂêç\n            boolean signVerified = AlipaySignature.rsaCheckV1(params,\n                    alipayProperties.getAlipay_public_key(), alipayProperties.getCharset(),\n                    alipayProperties.getSign_type());\n            return signVerified;\n        } catch (AlipayApiException e) {\n            e.printStackTrace();\n        }\n        return false;\n    }\n\n    @Override\n    public Object signError() {\n        return \"error\";\n    }\n\n    @Override\n    public Map<String,Object> process(HttpServletRequest request,String body) {\n        Map<String, String> map = HttpUtils.getParameterMap(request);\n        String json = JSON.toJSONString(map);\n        Map<String, Object> data = JSON.parseObject(json, new TypeReference<Map<String, Object>>() {\n        });\n        return data;\n    }\n\n    @Override\n    public Object signOk() {\n        //ÊîØ‰ªòÂÆùË¶ÅÊ±ÇÊàêÂäüËøîÂõû success Â≠óÁ¨¶‰∏≤\n        return \"success\";\n    }\n\n\n    @Override  //ÂØπÊñ∞Â¢ûÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠\n    public boolean supports(String type) {\n        return \"alipay\".equalsIgnoreCase(type);\n    }\n}\n```\n\n```java\n/**\n * @author lfy\n * @Description ÂæÆ‰ø°ÊîØ‰ªò\n * @create 2022-12-28 22:40\n */\n@Slf4j\n@Component\npublic class WeixinPayStrategy implements PayStrategy {\n    // ÂÖ∑‰ΩìÂÆûÁé∞ÁúÅÁï•ÔºåÂèØ‰ª•Âà∞‰ª£Á†Å‰ªìÂ∫ìÊü•Áúã\n}\n```\n\n<font color=orange>3„ÄÅÊîØ‰ªòService‰ª£Á†ÅÁºñÂÜô</font>\n\n```java\n/**\n * @author lfy\n * @Description\n * @create 2022-12-28 22:36\n */\npublic interface PayService {\n\n    /**\n     * ÁîüÊàêÊîØ‰ªòÊî∂Èì∂Âè∞È°µ\n     * @param type\n     * @param orderId\n     * @return\n     */\n    String payPage(String type, Long orderId);\n\n\n    /**\n     * Â§ÑÁêÜÊîØ‰ªòÈÄöÁü•\n     * @param request\n     * @return\n     */\n    Object processNotify(HttpServletRequest request,String body);\n}\n```\n\n<font color=orange>4„ÄÅÊîØ‰ªòServiceÂÆûÁé∞</font>\n\n```java\n/**\n * @author lfy\n * @Description ÊîØ‰ªò‰∏ä‰∏ãÊñáÂºïÁî®ÊîØ‰ªòÁ≠ñÁï•Ôºõ Ëøô‰∏™‰∏ä‰∏ãÊñá‰πüÊòØÊ®°ÊùøÁ±ªÔºõÂÆö‰πâÂ•ΩÁÆóÊ≥ïÊ≠•È™§\n * @create 2022-12-28 22:46\n */\n@Service\n@Slf4j //Ê®°ÊùøÁ±ª\npublic class PayServiceImpl implements PayService {\n\n    @Autowired\n    List<PayStrategy> payStrategies; //Ê≥®ÂÖ•ÊîØ‰ªòÁ≠ñÁï•\n\n    /**\n     * ÁîüÊàêÊî∂Èì∂Âè∞È°µÈù¢\n     * @param type\n     * @param orderId\n     * @return\n     */\n    @Override\n    public String payPage(String type, Long orderId) {\n        //1„ÄÅÊü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢Âçï\n        OrderInfo orderInfo = getOrderInfo(orderId);\n\n        //2„ÄÅÁîüÊàêÊîØ‰ªòÈ°µ\n        for (PayStrategy strategy : payStrategies) {\n            if(strategy.supports(type)){\n                //Ëé∑ÂèñÊî∂Èì∂Âè∞È°µÈù¢\n                return strategy.cashierPage(orderInfo);\n            }\n        }\n        //3„ÄÅÂ¶ÇÊûú‰ª•‰∏äÈÉΩ‰∏çÊîØÊåÅÔºåÊâìÂç∞ÈîôËØØ\n        return \"‰∏çÊîØÊåÅËøôÁßçÊîØ‰ªòÊñπÂºè\";\n    }\n\n\n    /**\n     * ÂÆö‰πâÈÄöÁü•Â§ÑÁêÜÊ®°ÊùøÔºõ\n     * ÂæÆ‰ø°ÈÄöÁü•\n     * ÊîØ‰ªòÂÆùÈÄöÁü•\n     * 1Ôºâ„ÄÅÈ™åËØÅÁ≠æÂêç\n     * 2Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÊîπËÆ¢Âçï‰∏∫Â∑≤ÊîØ‰ªò\n     * 3Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÁªôÊîØ‰ªòÂÆù(success)ÂæÆ‰ø°(200Áä∂ÊÄÅÁ†Åjson)ËøîÂõûÊï∞ÊçÆ\n     * 4Ôºâ„ÄÅxxx\n     * @param request\n     * @param body\n     * @return\n     */\n    @Override\n    public Object processNotify(HttpServletRequest request,String body) {\n        Object result = \"‰∏çÊîØÊåÅÊ≠§ÊñπÂºè\";\n\n        //1„ÄÅÂà§Êñ≠ÊòØÈÇ£ÁßçÈÄöÁü•\n        String type = getNotifyType(request);\n        Map<String, Object> data = null;\n\n        //2„ÄÅÈ™åËØÅÁ≠æÂêç\n        for (PayStrategy strategy : payStrategies) {\n            if(strategy.supports(type)){\n                //Á≠æÂêçÊ†°È™å\n                boolean checkSign = strategy.checkSign(request,body);\n                if(!checkSign){\n                    log.error(\"Á≠æÂêçÈ™åËØÅÂ§±Ë¥•ÔºåÁñë‰ººÊîªÂáªËØ∑Ê±Ç\");\n                    //È™åÁ≠æÂ§±Ë¥•ËøîÂõû\n                   return strategy.signError();\n                }else {\n                    log.info(\"Á≠æÂêçÈ™åËØÅÊàêÂäüÔºåÊèêÂèñÈÄöÁü•Êï∞ÊçÆ\");\n                    //È™åÁ≠æÊàêÂäüÂ§ÑÁêÜÊï∞ÊçÆ\n                    data = strategy.process(request,body);\n                    //È™åÁ≠æÊàêÂäüËøîÂõû\n                    result = strategy.signOk();\n                }\n            }\n        }\n\n        //3„ÄÅÈÄöÁî®ÁöÑÂêéÁª≠Â§ÑÁêÜÁÆóÊ≥ïÔºõÂ§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ\n        processOrder(data);\n\n        return result;\n    }\n\n    /**\n     * Â§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ\n     * @param data\n     */\n    private void processOrder(Map<String, Object> data) {\n        //TODO ÊääÊîØ‰ªòÊàêÂäü‰ø°ÊÅØÁ≠â‰øùÂ≠òÊï∞ÊçÆÂ∫ìÔºåÂπ∂‰øÆÊîπËÆ¢ÂçïÁä∂ÊÄÅÔºåÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÁ≠â...\n        log.info(\"ËÆ¢ÂçïÊîØ‰ªòÊàêÂäüÔºåÁä∂ÊÄÅ‰øÆÊîπÂÆåÊàêÔºåÂ∑≤ÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÔºåËØ¶ÁªÜÊï∞ÊçÆÔºö{}\",data);\n    }\n\n    /**\n     * Âà§Êñ≠ÈÄöÁü•Á±ªÂûã\n     * @param request\n     * @return\n     */\n    private String getNotifyType(HttpServletRequest request) {\n        String header = request.getHeader(\"wechatpay-serial\");\n        if(StringUtils.hasText(header)){\n            return \"weixin\";\n        }\n\n        String app_id = request.getParameter(\"app_id\");\n        if(StringUtils.hasText(app_id)){\n            return \"alipay\";\n        }\n\n\n        return \"unknown\";\n    }\n\n    public OrderInfo getOrderInfo(Long orderId){\n        log.info(\"Êü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢ÂçïÔºö{}\",orderId);\n        OrderInfo orderInfo = new OrderInfo();\n        orderInfo.setId(orderId);\n        orderInfo.setTitle(\"Â∞öÂìÅÊ±á-ÂïÜÂüé-ËÆ¢Âçï\");\n        orderInfo.setComment(\"Âø´ÁÇπÂèëË¥ß\");\n        orderInfo.setDesc(\"‰π∞‰∫Ü‰∏ÄÂ†ÜÂïÜÂìÅ\");\n        orderInfo.setPrice(new BigDecimal(\"9098.00\"));\n        orderInfo.setExpireTime(new Date(System.currentTimeMillis()+30*60*1000));\n\n        return orderInfo;\n    }\n}\n```\n\n**ÂàÜÊûêÔºö**\n\n![image-20230113223331649](https://img-blog.csdnimg.cn/img_convert/543a45872d4d17617504e7dea6c7119f.png)\n\n![image-20230114125758333](https://img-blog.csdnimg.cn/img_convert/3267819573fb85bf35740bd55b7048b1.png)\n\n### 4.4 ÊïàÊûúÊºîÁ§∫\n\n<font color=orange>1„ÄÅÁî®Êà∑ËøõÂÖ•ÊîØ‰ªòÈ°µÈù¢ÂêéÔºö</font>\n\n![image-20230114112440663](https://img-blog.csdnimg.cn/img_convert/b1235253e3ce038125552750ac0c3b65.png)\n\n<font color=orange>2„ÄÅÂΩìÈÄâÊã©ÂæÆ‰ø°ÊîØ‰ªòÊó∂ÔºåËøõÂÖ•ÂæÆ‰ø°‰∫åÁª¥Á†ÅÈ°µÈù¢</font>\n\n![image-20230114112525508](https://img-blog.csdnimg.cn/img_convert/2c644c164d36791ac1dc70cda7202dc1.png)\n\n<font color=orange>3„ÄÅÂΩìÈÄâÊã©ÊîØ‰ªòÂÆùÊîØ‰ªòÔºåËøõÂÖ•ÊîØ‰ªòÂÆùÈ°µÈù¢</font>\n\n![image-20230114112626541](https://img-blog.csdnimg.cn/img_convert/9f2041ef2259893210790a38c3d2b14f.png)\n\n<font color=orange>4„ÄÅÊîØ‰ªòÊàêÂäü‰πãÂêé‰ºöË∑≥ËΩ¨Âà∞ÂØπÂ∫îÁöÑÊàêÂäüÈ°µÈù¢ÔºàÂæÆ‰ø°ÊàêÂäüÈ°µÈù¢„ÄÅÊîØ‰ªòÂÆùÊàêÂäüÈ°µÈù¢...Ôºâ</font>\n\n### 4.5 Â¶Ç‰ΩïÊâ©Â±ï\n\nÊúÄÂêéÊàë‰ª¨ÈúÄË¶ÅÊÄùËÄÉ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÁªèËøáÊàë‰ª¨‰ΩøÁî®Á≠ñÁï•+Ê®°ÊùøÊîπÈÄ†ÁöÑÊîØ‰ªò Âíå‰º†ÁªüÁöÑÂÜôÊ≥ïÊúâÂï•Â•ΩÂ§ÑÂë¢Ôºü\n\n1„ÄÅ==Êòì‰∫éÊâ©Â±ï==ÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶ÅÂ¢ûÂä†Êñ∞ÁöÑÊîØ‰ªòÊñπÂºèÔºöÈì∂ËÅîÊîØ‰ªò„ÄÅÁôΩÊù°ÊîØ‰ªò...Êàë‰ª¨Âè™ÈúÄË¶ÅÂÆö‰πâÂØπÂ∫îÁöÑÊîØ‰ªòÁ≠ñÁï•Á±ªÂç≥ÂèØ~ ÂΩì‰∏çÈúÄË¶ÅÊó∂ÔºåÁõ¥Êé•Âà†Èô§ÂØπÂ∫îÁöÑÂÆûÁé∞Á±ª„ÄÇÁÑ∂ÂêéÂú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÔºå‰ºöËá™ÈÄÇÂ∫î‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•~ Á¨¶Âêà`ÂØπ‰øÆÊîπÂÖ≥Èó≠ÔºåÂØπÊâ©Â±ïÂºÄÊîæ`ÁöÑÁâπÁÇπÔºÅ\n\n![image-20230114124615619](https://img-blog.csdnimg.cn/img_convert/3bf9cdcfd38eae9df74d77e1b4610252.png)\n\n2„ÄÅService‰∏≠ÁöÑÊ®°ÊùøÊñπÊ≥ï‰πüËÆ©Êàë‰ª¨ÁöÑ==‰ª£Á†ÅÂÜó‰ΩôÂ∫¶Êõ¥‰Ωé==ÔºåÈÄªËæëÊõ¥Âä†Ê∏ÖÊô∞~\n\n","slug":"ÈòøÈáå‰∫ëÊúçÂä°Âô®Êê≠Âª∫‰∏™‰∫∫ÁΩëÁ´ô","published":1,"updated":"2024-04-01T15:42:26.979Z","comments":1,"layout":"post","photos":[],"_id":"cluh5pivf000egs2v0dp8ev4x","content":"<p>@[TOC]</p>\n<blockquote>\n<p>Êú¨ÊñáÂèÇËÄÉËá™12.29Êó•Â∞öÁ°ÖË∞∑Èõ∑Á•ûÁöÑ <a href=\"https://gitee.com/leifengyang/java-design-pattern\">Â∑ßÂ¶ô‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ</a></p>\n</blockquote>\n<h2 id=\"‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\"><a href=\"#‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\" class=\"headerlink\" title=\"‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\"></a>‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà</h2><ul>\n<li>ÊÄª‰ΩìÂàÜÁ±ª</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/9e402b0c6ec2bc81a317c6b8774d2c7f.png\" alt=\"image-20230113210444492\"></p>\n<ul>\n<li>‰∏çÂêåÊó∂ÊúüÈÄâÊã©‰∏çÂêåÁöÑËÆæËÆ°Ê®°Âºè~</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/5ed1ffc8fb36192278f04e22eb606402.png\" alt=\"image-20230114113220058\"></p>\n<ul>\n<li>ËÆæËÆ°Ê®°ÂºèÊú¨Ë¥®‰∏äÁé©ÁöÑÂ∞±ÊòØÔºö<code>Â∞ÅË£Ö</code>Ôºå<code>ÁªßÊâø</code>Ôºå<code>Â§öÊÄÅ</code></li>\n<li>ËÆæËÆ°Ê®°ÂºèÈÅµÂæ™ÁöÑÂÖ≠Â§ßÂéüÂàô</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/df85588b81d2d6631d201855a66ea948.png\" alt=\"image-20230114113416409\"></p>\n<h2 id=\"‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\"><a href=\"#‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\" class=\"headerlink\" title=\"‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\"></a>‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã</h2><p><strong>ÊèèËø∞Ôºö</strong>Áà∂Á±ªÔºàÊé•Âè£„ÄÅÊäΩË±°Á±ªÔºâÊèê‰æõ‰∫Ü‰∏ÄÁßç<code>ÂÆö‰πâÁÆóÊ≥ïÁöÑÈ™®Êû∂</code>Ôºå&#x3D;&#x3D;ÂÖÅËÆ∏Â≠êÁ±ª‰∏∫‰∏Ä‰∏™ÊàñÂ§ö‰∏™Ê≠•È™§Êèê‰æõÂÆûÁé∞&#x3D;&#x3D;ÔºåÂú®‰∏çÊîπÂèòÁÆóÊ≥ïÁªìÊûÑÁöÑÊÉÖÂÜµ‰∏ãÔºåÈáçÊñ∞ÂÆö‰πâÁÆóÊ≥ïÁöÑÊüê‰∫õÊ≠•È™§„ÄÇ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/65b0a3725926c195902515b16a6411d4.png\"></p>\n<p><strong>Ê°à‰æãÔºöËÆ¢ÂçïÂ§ÑÁêÜ</strong></p>\n<p><font color=orange>1„ÄÅÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:21</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">OrderProcessTemplate</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Â§ÑÁêÜËÆ¢ÂçïÔºö ÂÆö‰πâÂ•ΩÁÆóÊ≥ïÈ™®Êû∂</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processOrder</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÈÄâÊã©ÂïÜÂìÅ</span></span><br><span class=\"line\">        doSelect();</span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅËøõË°åÊîØ‰ªò</span></span><br><span class=\"line\">        doPayment();</span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅÂºÄÂÖ∑ÂèëÁ•®</span></span><br><span class=\"line\">        doReceipt();</span><br><span class=\"line\">        <span class=\"comment\">//4„ÄÅÊ¥æÈÄÅÂïÜÂìÅ</span></span><br><span class=\"line\">        doDelivery();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doSelect</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPayment</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doReceipt</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doDelivery</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>2„ÄÅÂÆö‰πâÂÆûÁé∞Á±ªÔºö<code>NetOrder</code> Âíå <code>StoreOrder</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÁΩëÁªúËÆ¢ÂçïÔºöÁÆóÊ≥ïÁªÜËäÇÂÆûÁé∞</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:24</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">NetOrder</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">OrderProcessTemplate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doSelect</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Êää xiaomi11 Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPayment</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Âú®Á∫øÂæÆ‰ø°ÊîØ‰ªò 1999&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doReceipt</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÂèëÁ•®Â∑≤ÁªèÂèëÈÄÅÁªôÁî®Êà∑ÈÇÆÁÆ±Ôºö aaaa@qq.com&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doDelivery</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;È°∫‰∏∞Ê¨°Êó•ËææÔºöÊäïÈÄÅÂïÜÂìÅ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> Èó®Â∫óËÆ¢ÂçïÔºöÂ≠êÁ±ªÂÆûÁé∞ÂÖ∑‰ΩìÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:26</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">StoreOrder</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">OrderProcessTemplate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doSelect</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Áî®Êà∑ÈÄâÊã©‰∫ÜÔºö3Âè∑Ë¥ßÊû∂-xiaomi11 ÂïÜÂìÅ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPayment</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Âà∑Âç°Êú∫ÔºöÂà∑Âç°ÊîØ‰ªò 1999&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doReceipt</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊâìÂç∞ÂèëÁ•®ÔºåÂíåÁâ©ÂìÅ‰∏ÄËµ∑ÂåÖË£Ö&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doDelivery</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊääÂïÜÂìÅ‰∫§ÁªôÁî®Êà∑ÔºåÁî®ÊºÇ‰∫ÆÁöÑË¢ãÂ≠ê&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3„ÄÅËøõË°åÊµãËØï</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ËÆæËÆ°Ê®°ÂºèÔºö  Â§öÂÆö‰πâÊé•Âè£„ÄÅÊäΩË±°Á±ª</span></span><br><span class=\"line\"><span class=\"comment\"> * 1Ôºâ„ÄÅ‰æùËµñÂÄíÁΩÆÔºõ ‰æùËµñÊäΩË±°</span></span><br><span class=\"line\"><span class=\"comment\"> * 2Ôºâ„ÄÅÂ§öÊÄÅÔºõ    Èöè‰æøÊõøÊç¢ÂÆûÁé∞</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> Ê®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊµãËØï Ôºõ Ê†∏ÂøÉÔºö Áà∂Á±ªÂÆö‰πâÁÆóÊ≥ïÈ™®Êû∂ÔºåÂ≠êÁ±ªÂÆûÁé∞ÁÆóÊ≥ïÁªÜËäÇ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 20:41</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TemplateMethodPatternTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Ë°å‰∏∫ÂûãÊ®°ÂºèÁé©ÁöÑÂ∞±ÊòØ‰∏Ä‰∏™Â§öÊÄÅ</span></span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÂ§ñÁïåË∞ÉÁî®Ê®°ÊùøÁ±ª„ÄêÈÅµÂæ™‰æùËµñÂèçËΩ¨ÂéüÂàô„Äë„Äê‰æùËµñÊäΩË±°ËÄå‰∏çÊòØÁªÜËäÇ„Äë</span></span><br><span class=\"line\">        <span class=\"type\">OrderProcessTemplate</span> <span class=\"variable\">processTemplate</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NetOrder</span>();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÁΩëÁªúËÆ¢ÂçïÔºö&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//Â§ÑÁêÜËÆ¢Âçï</span></span><br><span class=\"line\">        processTemplate.processOrder(); <span class=\"comment\">//ÂÆö‰πâ‰∫ÜÁÆóÊ≥ïÁöÑÊ®°Êùø</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        processTemplate = <span class=\"keyword\">new</span> <span class=\"title class_\">StoreOrder</span>();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Èó®Â∫óËÆ¢ÂçïÔºö&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// Ê†πÊçÆÈúÄË¶ÅÔºåÈÄâÊã©‰∏çÂêåÁöÑÂÆûÁé∞Á±ªÔºå‰ªéËÄåËææÂà∞Êàë‰ª¨ÈúÄË¶ÅÁöÑÊïàÊûúÔºöÁΩëÁªúËÆ¢Âçï Êàñ Èó®Â∫óËÆ¢Âçï</span></span><br><span class=\"line\">        processTemplate.processOrder();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ËøêË°åÁªìÊûúÔºö</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/039d094065690f2e4da8f73e94526786.png\" alt=\"image-20230113220611870\"></p>\n<h2 id=\"‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\"><a href=\"#‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\" class=\"headerlink\" title=\"‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\"></a>‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã</h2><p><strong>ÊèèËø∞Ôºö</strong>ÂÆö‰πâ<code>ÁÆóÊ≥ïÂÆ∂ÊóèÔºåÂàÜÂà´Â∞ÅË£Ö</code>Ëµ∑Êù•ÔºåËÆ©ÂÆÉ‰ª¨‰πãÈó¥ÂèØ‰ª•<code>Áõ∏‰∫íÊõøÊç¢</code>ÔºåÊ≠§Ê®°ÂºèËÆ©ÁÆóÊ≥ïÁöÑÂèòÂåñÁã¨Á´ã‰∫é‰ΩøÁî®ÁÆóÊ≥ïÁöÑÂÆ¢Êà∑„ÄÇ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/003b3cc3b5b54eee7bb255bde2e82ec5.png\"></p>\n<p><strong>Ê°à‰æãÔºöÊéíÂ∫èÁÆóÊ≥ï</strong></p>\n<p><font color=orange>1„ÄÅÂÆö‰πâÁÆóÊ≥ïÊé•Âè£</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÁÆóÊ≥ïÊé•Âè£ÔºöÊéíÂ∫èÁ≠ñÁï•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:36</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">SortStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊéíÂ∫è</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>2„ÄÅÂÆö‰πâÁ≠ñÁï•Á±ªÔºåÂÆûÁé∞ÁÆóÊ≥ïÊé•Âè£</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> Á≠ñÁï•1ÔºöÂÜíÊ≥°ÊéíÂ∫èÁ≠ñÁï•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:38</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">BubbleSortStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">SortStrategy</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÂºÄÂßãÂÜíÊ≥°ÊéíÂ∫è....&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt; arr.length-<span class=\"number\">1</span>;i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">j</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; j &lt; arr.length- <span class=\"number\">1</span> - i  ; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(arr[j] &gt; arr[j+<span class=\"number\">1</span>])&#123;</span><br><span class=\"line\">                    <span class=\"type\">Integer</span> <span class=\"variable\">temp</span> <span class=\"operator\">=</span> arr[j];</span><br><span class=\"line\">                    arr[j] = arr[j+<span class=\"number\">1</span>];</span><br><span class=\"line\">                    arr[j+<span class=\"number\">1</span>] = temp;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊéíÂ∫èÁªìÊûúÔºö&quot;</span>+ Arrays.asList(arr));</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:44</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">QuickSortStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">SortStrategy</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Âø´ÈÄüÊéíÂ∫èÂºÄÂßã&quot;</span>);</span><br><span class=\"line\">        Arrays.sort(arr);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊéíÂ∫èÁªìÊûúÔºö&quot;</span>+Arrays.asList(arr));</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>3„ÄÅÂÆö‰πâ‰∏ä‰∏ãÊñáÂØπË±°(ÂÖ•Âè£Á±ª)ÔºöÊåÅÊúâÁ≠ñÁï•ÂØπË±°</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ‰∏ä‰∏ãÊñáÔºöÂÖ•Âè£Á±ª</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:45</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SortService</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊãøÂà∞‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> SortStrategy strategy;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ‰∏∫‰∫ÜÂº∫Âà∂Ë¶ÅÊ±ÇÁî®Êà∑ÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">SortService</span><span class=\"params\">(SortStrategy strategy)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.strategy  =strategy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÈöèÊó∂Âä®ÊÄÅÊõ¥Êñ∞ÊéíÂ∫èÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setStrategy</span><span class=\"params\">(SortStrategy strategy)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.strategy = strategy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊâçÊòØÂà´‰∫∫Ë∞ÉÁî®ÁöÑÊéíÂ∫èÊñπÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> arr</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span>&#123;</span><br><span class=\"line\">        strategy.sort(arr);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>4„ÄÅ‰ΩøÁî®Á≠ñÁï•ÂØπË±°ÊâßË°åÁÆóÊ≥ï</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span>  Ê®°ÊùøÊ®°ÂºèÂÆö‰πâÂ§ßÊ°ÜÊû∂„ÄÅÁ≠ñÁï•ÈªòËÆ§ÂÆö‰πâÂ∞èÁªÜËäÇ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 21:17</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">StrategyPatternTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        Integer[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">Integer</span>[]&#123;<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">6</span>,<span class=\"number\">3</span>,<span class=\"number\">1</span>,<span class=\"number\">7</span>,<span class=\"number\">9</span>,<span class=\"number\">8</span>&#125;;</span><br><span class=\"line\">\t\t<span class=\"comment\">// ‰º†ÂÖ•‰∏çÂêåÁöÑÁ≠ñÁï•ÔºåÂ∞±‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•</span></span><br><span class=\"line\">        <span class=\"type\">SortService</span> <span class=\"variable\">sortService</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SortService</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">BubbleSortStrategy</span>());</span><br><span class=\"line\">        sortService.sort(arr);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;===============&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//Êõ¥Êñ∞Á≠ñÁï•</span></span><br><span class=\"line\">        sortService.setStrategy(<span class=\"keyword\">new</span> <span class=\"title class_\">QuickSortStrategy</span>());</span><br><span class=\"line\">        sortService.sort(arr);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ÊµãËØïÁªìÊûúÔºö</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/879dd90a18e7a5bc986a4bca6627a4e7.png\" alt=\"image-20230113220248469\"></p>\n<h2 id=\"Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\"><a href=\"#Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\" class=\"headerlink\" title=\"Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\"></a>Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†</h2><h3 id=\"4-1-ÊÄùË∑ØÂàÜÊûê\"><a href=\"#4-1-ÊÄùË∑ØÂàÜÊûê\" class=\"headerlink\" title=\"4.1 ÊÄùË∑ØÂàÜÊûê\"></a>4.1 ÊÄùË∑ØÂàÜÊûê</h3><p>‰ΩøÁî®<code>Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè</code>ÔºöÂÆö‰πâ&#x3D;&#x3D;ÊîØ‰ªòÁöÑÂÆåÊï¥ÊµÅÁ®ã&#x3D;&#x3D;Ôºõ</p>\n<p>‰ΩøÁî®<code>Á≠ñÁï•Ê®°Âºè</code>ÔºöÂÆö‰πâ&#x3D;&#x3D;ÊîØ‰ªòÁöÑ‰∏çÂêåÂÆûÁé∞&#x3D;&#x3D;Ôºõ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/2e0d3c18725c719c98d22d7b5aa1bc5a.png\"></p>\n<h3 id=\"4-2-ÂÆûÁé∞ÂõæËß£Ôºö\"><a href=\"#4-2-ÂÆûÁé∞ÂõæËß£Ôºö\" class=\"headerlink\" title=\"4.2 ÂÆûÁé∞ÂõæËß£Ôºö\"></a>4.2 ÂÆûÁé∞ÂõæËß£Ôºö</h3><p><img src=\"https://img-blog.csdnimg.cn/img_convert/6628cf4dc83c070f9bbd822c3a45878f.png\"></p>\n<blockquote>\n<p><strong>ÂàÜÊûê</strong>ÔºöPayStrategy‰ΩøÁî®ÁöÑÊòØÁ≠ñÁï•Ê®°Âºè~  PayService‰∏≠ÁöÑprocessNotifyÈáåÈù¢ÂåÖÂê´‰∫Ü ‰∏ÄÁ≥ªÂàóÊäΩË±°ÊñπÊ≥ïÁöÑË∞ÉÁî®,‰∏çÂêåÁöÑÊîØ‰ªòÊñπÂºè‰ºöÊúâ‰∏çÂêåÁöÑÂÆûÁé∞,ËøôÈáå‰ΩøÁî®‰∫ÜÊ®°ÊùøÊñπÊ≥ïÊ®°Âºè~</p>\n</blockquote>\n<h3 id=\"4-3-‰ª£Á†ÅÂÆûÁé∞Ôºö\"><a href=\"#4-3-‰ª£Á†ÅÂÆûÁé∞Ôºö\" class=\"headerlink\" title=\"4.3 ‰ª£Á†ÅÂÆûÁé∞Ôºö\"></a>4.3 ‰ª£Á†ÅÂÆûÁé∞Ôºö</h3><p><font color=orange>1„ÄÅÊîØ‰ªòÁ≠ñÁï•Êé•Âè£Ôºö<code>PayStrategy</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÊîØ‰ªòÁ≠ñÁï•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:39</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">PayStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊîØÊåÅÂì™ÁßçÊîØ‰ªò</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">supports</span><span class=\"params\">(String type)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ‰∏∫Êüê‰∏™ËÆ¢ÂçïÂ±ïÁ§∫Êî∂Èì∂Âè∞È°µÈù¢</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    String <span class=\"title function_\">cashierPage</span><span class=\"params\">(OrderInfo orderInfo)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request  ÂéüÁîüËØ∑Ê±Ç</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> body     ËØ∑Ê±Ç‰ΩìÊï∞ÊçÆ„ÄêËØ∑Ê±Ç‰ΩìÂè™ËÉΩËØªÂèñ‰∏ÄÊ¨°ÔºåÊâÄ‰ª•controllerÊãøÂà∞‰ª•ÂêéÈÉΩÂæÄ‰∏ã‰º†ÈÄíÂç≥ÂèØ„Äë</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">checkSign</span><span class=\"params\">(HttpServletRequest request,String body)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åÁ≠æÈîôËØØÂ§ÑÁêÜ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Object <span class=\"title function_\">signError</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åÁ≠æÈÄöËøáËøîÂõû</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Object <span class=\"title function_\">signOk</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åÁ≠æÊàêÂäüÂêéÂ§ÑÁêÜÈÄöÁü•Êï∞ÊçÆÔºö ÊääÈÄöÁü•ÁöÑÊâÄÊúâÊï∞ÊçÆÂ∞ÅË£ÖÊåáÂÆöÂØπË±°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; <span class=\"title function_\">process</span><span class=\"params\">(HttpServletRequest request,String body)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>2„ÄÅÊé•Âè£ÂÆûÁé∞Ôºö<code>AlipayStrategy</code> „ÄÅ<code>WeixinPayStrategy</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÊîØ‰ªòÂÆù</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:40</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">AlipayStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">PayStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    AlipayProperties alipayProperties;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    AlipayClient alipayClient;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">cashierPage</span><span class=\"params\">(OrderInfo orderInfo)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÂàõÂª∫‰∏Ä‰∏™ AlipayClient</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅÂàõÂª∫‰∏Ä‰∏™ÊîØ‰ªòËØ∑Ê±Ç</span></span><br><span class=\"line\">        <span class=\"type\">AlipayTradePagePayRequest</span> <span class=\"variable\">alipayRequest</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">AlipayTradePagePayRequest</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅËÆæÁΩÆÂèÇÊï∞</span></span><br><span class=\"line\">        alipayRequest.setReturnUrl(alipayProperties.getReturn_url()); <span class=\"comment\">//ÂêåÊ≠•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊµèËßàÂô®Ë¶ÅË∑≥ËΩ¨Âà∞ÁöÑÈ°µÈù¢Âú∞ÂùÄ</span></span><br><span class=\"line\">        alipayRequest.setNotifyUrl(alipayProperties.getNotify_url()); <span class=\"comment\">//ÈÄöÁü•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊîØ‰ªòÊ∂àÊÅØ‰ºöÈÄöÁü•ÁªôËøô‰∏™Âú∞ÂùÄ</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ÂïÜÊà∑ËÆ¢ÂçïÂè∑ÔºàÂØπÂ§ñ‰∫§ÊòìÂè∑Ôºâ</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">outTradeNo</span> <span class=\"operator\">=</span> orderInfo.getId().toString();</span><br><span class=\"line\">        <span class=\"comment\">//‰ªòÊ¨æÈáëÈ¢ù</span></span><br><span class=\"line\">        <span class=\"type\">BigDecimal</span> <span class=\"variable\">totalAmount</span> <span class=\"operator\">=</span> orderInfo.getPrice();</span><br><span class=\"line\">        <span class=\"comment\">//ËÆ¢ÂçïÂêçÁß∞</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">orderName</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Â∞öÂìÅÊ±á-ËÆ¢Âçï-&quot;</span>+outTradeNo;</span><br><span class=\"line\">        <span class=\"comment\">//ÂïÜÂìÅÊèèËø∞</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">tradeBody</span> <span class=\"operator\">=</span> orderInfo.getDesc();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ËØ¶ÁªÜÔºöhttps://opendocs.alipay.com/open/028r8t?scene=22</span></span><br><span class=\"line\">        <span class=\"comment\">//‰∏öÂä°ÂèÇÊï∞</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; bizContent = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;out_trade_no&quot;</span>,outTradeNo);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;total_amount&quot;</span>,totalAmount);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;subject&quot;</span>,orderName);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;body&quot;</span>,tradeBody);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;product_code&quot;</span>,<span class=\"string\">&quot;FAST_INSTANT_TRADE_PAY&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//Ëá™Âä®ÂÖ≥Âçï</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">date</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SimpleDateFormat</span>(<span class=\"string\">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>).format(orderInfo.getExpireTime());</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;time_expire&quot;</span>,date);</span><br><span class=\"line\">        alipayRequest.setBizContent(JSON.toJSONString(bizContent));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ÁîüÊàêÊîØ‰ªòÈ°µÈù¢</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">page</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            page = alipayClient.pageExecute(alipayRequest).getBody();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (AlipayApiException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> page;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">checkSign</span><span class=\"params\">(HttpServletRequest request,String body)</span> &#123;</span><br><span class=\"line\">        Map&lt;String, String&gt; params = HttpUtils.getParameterMap(request);</span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;ÊîØ‰ªòÂÆùÈÄöÁü•È™åËØÅÁ≠æÂêç...&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//È™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//Ë∞ÉÁî®SDKÈ™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\">            <span class=\"type\">boolean</span> <span class=\"variable\">signVerified</span> <span class=\"operator\">=</span> AlipaySignature.rsaCheckV1(params,</span><br><span class=\"line\">                    alipayProperties.getAlipay_public_key(), alipayProperties.getCharset(),</span><br><span class=\"line\">                    alipayProperties.getSign_type());</span><br><span class=\"line\">            <span class=\"keyword\">return</span> signVerified;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (AlipayApiException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Object <span class=\"title function_\">signError</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;error&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Map&lt;String,Object&gt; <span class=\"title function_\">process</span><span class=\"params\">(HttpServletRequest request,String body)</span> &#123;</span><br><span class=\"line\">        Map&lt;String, String&gt; map = HttpUtils.getParameterMap(request);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">json</span> <span class=\"operator\">=</span> JSON.toJSONString(map);</span><br><span class=\"line\">        Map&lt;String, Object&gt; data = JSON.parseObject(json, <span class=\"keyword\">new</span> <span class=\"title class_\">TypeReference</span>&lt;Map&lt;String, Object&gt;&gt;() &#123;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Object <span class=\"title function_\">signOk</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÊîØ‰ªòÂÆùË¶ÅÊ±ÇÊàêÂäüËøîÂõû success Â≠óÁ¨¶‰∏≤</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;success&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span>  <span class=\"comment\">//ÂØπÊñ∞Â¢ûÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">supports</span><span class=\"params\">(String type)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;alipay&quot;</span>.equalsIgnoreCase(type);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÂæÆ‰ø°ÊîØ‰ªò</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:40</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WeixinPayStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">PayStrategy</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ÂÖ∑‰ΩìÂÆûÁé∞ÁúÅÁï•ÔºåÂèØ‰ª•Âà∞‰ª£Á†Å‰ªìÂ∫ìÊü•Áúã</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>3„ÄÅÊîØ‰ªòService‰ª£Á†ÅÁºñÂÜô</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:36</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">PayService</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÁîüÊàêÊîØ‰ªòÊî∂Èì∂Âè∞È°µ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> orderId</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    String <span class=\"title function_\">payPage</span><span class=\"params\">(String type, Long orderId)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Â§ÑÁêÜÊîØ‰ªòÈÄöÁü•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Object <span class=\"title function_\">processNotify</span><span class=\"params\">(HttpServletRequest request,String body)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>4„ÄÅÊîØ‰ªòServiceÂÆûÁé∞</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÊîØ‰ªò‰∏ä‰∏ãÊñáÂºïÁî®ÊîØ‰ªòÁ≠ñÁï•Ôºõ Ëøô‰∏™‰∏ä‰∏ãÊñá‰πüÊòØÊ®°ÊùøÁ±ªÔºõÂÆö‰πâÂ•ΩÁÆóÊ≥ïÊ≠•È™§</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:46</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span> <span class=\"comment\">//Ê®°ÊùøÁ±ª</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">PayServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">PayService</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    List&lt;PayStrategy&gt; payStrategies; <span class=\"comment\">//Ê≥®ÂÖ•ÊîØ‰ªòÁ≠ñÁï•</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÁîüÊàêÊî∂Èì∂Âè∞È°µÈù¢</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> orderId</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">payPage</span><span class=\"params\">(String type, Long orderId)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÊü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢Âçï</span></span><br><span class=\"line\">        <span class=\"type\">OrderInfo</span> <span class=\"variable\">orderInfo</span> <span class=\"operator\">=</span> getOrderInfo(orderId);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅÁîüÊàêÊîØ‰ªòÈ°µ</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (PayStrategy strategy : payStrategies) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(strategy.supports(type))&#123;</span><br><span class=\"line\">                <span class=\"comment\">//Ëé∑ÂèñÊî∂Èì∂Âè∞È°µÈù¢</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> strategy.cashierPage(orderInfo);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅÂ¶ÇÊûú‰ª•‰∏äÈÉΩ‰∏çÊîØÊåÅÔºåÊâìÂç∞ÈîôËØØ</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;‰∏çÊîØÊåÅËøôÁßçÊîØ‰ªòÊñπÂºè&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÂÆö‰πâÈÄöÁü•Â§ÑÁêÜÊ®°ÊùøÔºõ</span></span><br><span class=\"line\"><span class=\"comment\">     * ÂæÆ‰ø°ÈÄöÁü•</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊîØ‰ªòÂÆùÈÄöÁü•</span></span><br><span class=\"line\"><span class=\"comment\">     * 1Ôºâ„ÄÅÈ™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\"><span class=\"comment\">     * 2Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÊîπËÆ¢Âçï‰∏∫Â∑≤ÊîØ‰ªò</span></span><br><span class=\"line\"><span class=\"comment\">     * 3Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÁªôÊîØ‰ªòÂÆù(success)ÂæÆ‰ø°(200Áä∂ÊÄÅÁ†Åjson)ËøîÂõûÊï∞ÊçÆ</span></span><br><span class=\"line\"><span class=\"comment\">     * 4Ôºâ„ÄÅxxx</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> body</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Object <span class=\"title function_\">processNotify</span><span class=\"params\">(HttpServletRequest request,String body)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Object</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;‰∏çÊîØÊåÅÊ≠§ÊñπÂºè&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÂà§Êñ≠ÊòØÈÇ£ÁßçÈÄöÁü•</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">type</span> <span class=\"operator\">=</span> getNotifyType(request);</span><br><span class=\"line\">        Map&lt;String, Object&gt; data = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅÈ™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (PayStrategy strategy : payStrategies) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(strategy.supports(type))&#123;</span><br><span class=\"line\">                <span class=\"comment\">//Á≠æÂêçÊ†°È™å</span></span><br><span class=\"line\">                <span class=\"type\">boolean</span> <span class=\"variable\">checkSign</span> <span class=\"operator\">=</span> strategy.checkSign(request,body);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(!checkSign)&#123;</span><br><span class=\"line\">                    log.error(<span class=\"string\">&quot;Á≠æÂêçÈ™åËØÅÂ§±Ë¥•ÔºåÁñë‰ººÊîªÂáªËØ∑Ê±Ç&quot;</span>);</span><br><span class=\"line\">                    <span class=\"comment\">//È™åÁ≠æÂ§±Ë¥•ËøîÂõû</span></span><br><span class=\"line\">                   <span class=\"keyword\">return</span> strategy.signError();</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    log.info(<span class=\"string\">&quot;Á≠æÂêçÈ™åËØÅÊàêÂäüÔºåÊèêÂèñÈÄöÁü•Êï∞ÊçÆ&quot;</span>);</span><br><span class=\"line\">                    <span class=\"comment\">//È™åÁ≠æÊàêÂäüÂ§ÑÁêÜÊï∞ÊçÆ</span></span><br><span class=\"line\">                    data = strategy.process(request,body);</span><br><span class=\"line\">                    <span class=\"comment\">//È™åÁ≠æÊàêÂäüËøîÂõû</span></span><br><span class=\"line\">                    result = strategy.signOk();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅÈÄöÁî®ÁöÑÂêéÁª≠Â§ÑÁêÜÁÆóÊ≥ïÔºõÂ§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ</span></span><br><span class=\"line\">        processOrder(data);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Â§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> data</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processOrder</span><span class=\"params\">(Map&lt;String, Object&gt; data)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//TODO ÊääÊîØ‰ªòÊàêÂäü‰ø°ÊÅØÁ≠â‰øùÂ≠òÊï∞ÊçÆÂ∫ìÔºåÂπ∂‰øÆÊîπËÆ¢ÂçïÁä∂ÊÄÅÔºåÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÁ≠â...</span></span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;ËÆ¢ÂçïÊîØ‰ªòÊàêÂäüÔºåÁä∂ÊÄÅ‰øÆÊîπÂÆåÊàêÔºåÂ∑≤ÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÔºåËØ¶ÁªÜÊï∞ÊçÆÔºö&#123;&#125;&quot;</span>,data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Âà§Êñ≠ÈÄöÁü•Á±ªÂûã</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String <span class=\"title function_\">getNotifyType</span><span class=\"params\">(HttpServletRequest request)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">header</span> <span class=\"operator\">=</span> request.getHeader(<span class=\"string\">&quot;wechatpay-serial&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(StringUtils.hasText(header))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;weixin&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">app_id</span> <span class=\"operator\">=</span> request.getParameter(<span class=\"string\">&quot;app_id&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(StringUtils.hasText(app_id))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;alipay&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;unknown&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> OrderInfo <span class=\"title function_\">getOrderInfo</span><span class=\"params\">(Long orderId)</span>&#123;</span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;Êü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢ÂçïÔºö&#123;&#125;&quot;</span>,orderId);</span><br><span class=\"line\">        <span class=\"type\">OrderInfo</span> <span class=\"variable\">orderInfo</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OrderInfo</span>();</span><br><span class=\"line\">        orderInfo.setId(orderId);</span><br><span class=\"line\">        orderInfo.setTitle(<span class=\"string\">&quot;Â∞öÂìÅÊ±á-ÂïÜÂüé-ËÆ¢Âçï&quot;</span>);</span><br><span class=\"line\">        orderInfo.setComment(<span class=\"string\">&quot;Âø´ÁÇπÂèëË¥ß&quot;</span>);</span><br><span class=\"line\">        orderInfo.setDesc(<span class=\"string\">&quot;‰π∞‰∫Ü‰∏ÄÂ†ÜÂïÜÂìÅ&quot;</span>);</span><br><span class=\"line\">        orderInfo.setPrice(<span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"string\">&quot;9098.00&quot;</span>));</span><br><span class=\"line\">        orderInfo.setExpireTime(<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(System.currentTimeMillis()+<span class=\"number\">30</span>*<span class=\"number\">60</span>*<span class=\"number\">1000</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> orderInfo;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ÂàÜÊûêÔºö</strong></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/543a45872d4d17617504e7dea6c7119f.png\" alt=\"image-20230113223331649\"></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/3267819573fb85bf35740bd55b7048b1.png\" alt=\"image-20230114125758333\"></p>\n<h3 id=\"4-4-ÊïàÊûúÊºîÁ§∫\"><a href=\"#4-4-ÊïàÊûúÊºîÁ§∫\" class=\"headerlink\" title=\"4.4 ÊïàÊûúÊºîÁ§∫\"></a>4.4 ÊïàÊûúÊºîÁ§∫</h3><p><font color=orange>1„ÄÅÁî®Êà∑ËøõÂÖ•ÊîØ‰ªòÈ°µÈù¢ÂêéÔºö</font></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/b1235253e3ce038125552750ac0c3b65.png\" alt=\"image-20230114112440663\"></p>\n<p><font color=orange>2„ÄÅÂΩìÈÄâÊã©ÂæÆ‰ø°ÊîØ‰ªòÊó∂ÔºåËøõÂÖ•ÂæÆ‰ø°‰∫åÁª¥Á†ÅÈ°µÈù¢</font></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/2c644c164d36791ac1dc70cda7202dc1.png\" alt=\"image-20230114112525508\"></p>\n<p><font color=orange>3„ÄÅÂΩìÈÄâÊã©ÊîØ‰ªòÂÆùÊîØ‰ªòÔºåËøõÂÖ•ÊîØ‰ªòÂÆùÈ°µÈù¢</font></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/9f2041ef2259893210790a38c3d2b14f.png\" alt=\"image-20230114112626541\"></p>\n<p><font color=orange>4„ÄÅÊîØ‰ªòÊàêÂäü‰πãÂêé‰ºöË∑≥ËΩ¨Âà∞ÂØπÂ∫îÁöÑÊàêÂäüÈ°µÈù¢ÔºàÂæÆ‰ø°ÊàêÂäüÈ°µÈù¢„ÄÅÊîØ‰ªòÂÆùÊàêÂäüÈ°µÈù¢‚Ä¶Ôºâ</font></p>\n<h3 id=\"4-5-Â¶Ç‰ΩïÊâ©Â±ï\"><a href=\"#4-5-Â¶Ç‰ΩïÊâ©Â±ï\" class=\"headerlink\" title=\"4.5 Â¶Ç‰ΩïÊâ©Â±ï\"></a>4.5 Â¶Ç‰ΩïÊâ©Â±ï</h3><p>ÊúÄÂêéÊàë‰ª¨ÈúÄË¶ÅÊÄùËÄÉ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÁªèËøáÊàë‰ª¨‰ΩøÁî®Á≠ñÁï•+Ê®°ÊùøÊîπÈÄ†ÁöÑÊîØ‰ªò Âíå‰º†ÁªüÁöÑÂÜôÊ≥ïÊúâÂï•Â•ΩÂ§ÑÂë¢Ôºü</p>\n<p>1„ÄÅ&#x3D;&#x3D;Êòì‰∫éÊâ©Â±ï&#x3D;&#x3D;ÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶ÅÂ¢ûÂä†Êñ∞ÁöÑÊîØ‰ªòÊñπÂºèÔºöÈì∂ËÅîÊîØ‰ªò„ÄÅÁôΩÊù°ÊîØ‰ªò‚Ä¶Êàë‰ª¨Âè™ÈúÄË¶ÅÂÆö‰πâÂØπÂ∫îÁöÑÊîØ‰ªòÁ≠ñÁï•Á±ªÂç≥ÂèØ~ ÂΩì‰∏çÈúÄË¶ÅÊó∂ÔºåÁõ¥Êé•Âà†Èô§ÂØπÂ∫îÁöÑÂÆûÁé∞Á±ª„ÄÇÁÑ∂ÂêéÂú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÔºå‰ºöËá™ÈÄÇÂ∫î‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•~ Á¨¶Âêà<code>ÂØπ‰øÆÊîπÂÖ≥Èó≠ÔºåÂØπÊâ©Â±ïÂºÄÊîæ</code>ÁöÑÁâπÁÇπÔºÅ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/3bf9cdcfd38eae9df74d77e1b4610252.png\" alt=\"image-20230114124615619\"></p>\n<p>2„ÄÅService‰∏≠ÁöÑÊ®°ÊùøÊñπÊ≥ï‰πüËÆ©Êàë‰ª¨ÁöÑ&#x3D;&#x3D;‰ª£Á†ÅÂÜó‰ΩôÂ∫¶Êõ¥‰Ωé&#x3D;&#x3D;ÔºåÈÄªËæëÊõ¥Âä†Ê∏ÖÊô∞~</p>\n","cover_type":"img","excerpt":"","more":"<p>@[TOC]</p>\n<blockquote>\n<p>Êú¨ÊñáÂèÇËÄÉËá™12.29Êó•Â∞öÁ°ÖË∞∑Èõ∑Á•ûÁöÑ <a href=\"https://gitee.com/leifengyang/java-design-pattern\">Â∑ßÂ¶ô‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÈáçÊûÑÈ°πÁõÆ</a></p>\n</blockquote>\n<h2 id=\"‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\"><a href=\"#‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\" class=\"headerlink\" title=\"‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà\"></a>‰∏Ä„ÄÅËÆæËÆ°Ê®°ÂºèÊÄªËßà</h2><ul>\n<li>ÊÄª‰ΩìÂàÜÁ±ª</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/9e402b0c6ec2bc81a317c6b8774d2c7f.png\" alt=\"image-20230113210444492\"></p>\n<ul>\n<li>‰∏çÂêåÊó∂ÊúüÈÄâÊã©‰∏çÂêåÁöÑËÆæËÆ°Ê®°Âºè~</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/5ed1ffc8fb36192278f04e22eb606402.png\" alt=\"image-20230114113220058\"></p>\n<ul>\n<li>ËÆæËÆ°Ê®°ÂºèÊú¨Ë¥®‰∏äÁé©ÁöÑÂ∞±ÊòØÔºö<code>Â∞ÅË£Ö</code>Ôºå<code>ÁªßÊâø</code>Ôºå<code>Â§öÊÄÅ</code></li>\n<li>ËÆæËÆ°Ê®°ÂºèÈÅµÂæ™ÁöÑÂÖ≠Â§ßÂéüÂàô</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/df85588b81d2d6631d201855a66ea948.png\" alt=\"image-20230114113416409\"></p>\n<h2 id=\"‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\"><a href=\"#‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\" class=\"headerlink\" title=\"‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã\"></a>‰∫å„ÄÅÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊ°à‰æã</h2><p><strong>ÊèèËø∞Ôºö</strong>Áà∂Á±ªÔºàÊé•Âè£„ÄÅÊäΩË±°Á±ªÔºâÊèê‰æõ‰∫Ü‰∏ÄÁßç<code>ÂÆö‰πâÁÆóÊ≥ïÁöÑÈ™®Êû∂</code>Ôºå&#x3D;&#x3D;ÂÖÅËÆ∏Â≠êÁ±ª‰∏∫‰∏Ä‰∏™ÊàñÂ§ö‰∏™Ê≠•È™§Êèê‰æõÂÆûÁé∞&#x3D;&#x3D;ÔºåÂú®‰∏çÊîπÂèòÁÆóÊ≥ïÁªìÊûÑÁöÑÊÉÖÂÜµ‰∏ãÔºåÈáçÊñ∞ÂÆö‰πâÁÆóÊ≥ïÁöÑÊüê‰∫õÊ≠•È™§„ÄÇ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/65b0a3725926c195902515b16a6411d4.png\"></p>\n<p><strong>Ê°à‰æãÔºöËÆ¢ÂçïÂ§ÑÁêÜ</strong></p>\n<p><font color=orange>1„ÄÅÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÂÆö‰πâËÆ¢ÂçïÂ§ÑÁêÜÊ®°Êùø</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:21</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">OrderProcessTemplate</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Â§ÑÁêÜËÆ¢ÂçïÔºö ÂÆö‰πâÂ•ΩÁÆóÊ≥ïÈ™®Êû∂</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processOrder</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÈÄâÊã©ÂïÜÂìÅ</span></span><br><span class=\"line\">        doSelect();</span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅËøõË°åÊîØ‰ªò</span></span><br><span class=\"line\">        doPayment();</span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅÂºÄÂÖ∑ÂèëÁ•®</span></span><br><span class=\"line\">        doReceipt();</span><br><span class=\"line\">        <span class=\"comment\">//4„ÄÅÊ¥æÈÄÅÂïÜÂìÅ</span></span><br><span class=\"line\">        doDelivery();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doSelect</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPayment</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doReceipt</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doDelivery</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>2„ÄÅÂÆö‰πâÂÆûÁé∞Á±ªÔºö<code>NetOrder</code> Âíå <code>StoreOrder</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÁΩëÁªúËÆ¢ÂçïÔºöÁÆóÊ≥ïÁªÜËäÇÂÆûÁé∞</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:24</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">NetOrder</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">OrderProcessTemplate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doSelect</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Êää xiaomi11 Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPayment</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Âú®Á∫øÂæÆ‰ø°ÊîØ‰ªò 1999&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doReceipt</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÂèëÁ•®Â∑≤ÁªèÂèëÈÄÅÁªôÁî®Êà∑ÈÇÆÁÆ±Ôºö aaaa@qq.com&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doDelivery</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;È°∫‰∏∞Ê¨°Êó•ËææÔºöÊäïÈÄÅÂïÜÂìÅ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> Èó®Â∫óËÆ¢ÂçïÔºöÂ≠êÁ±ªÂÆûÁé∞ÂÖ∑‰ΩìÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:26</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">StoreOrder</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">OrderProcessTemplate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doSelect</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Áî®Êà∑ÈÄâÊã©‰∫ÜÔºö3Âè∑Ë¥ßÊû∂-xiaomi11 ÂïÜÂìÅ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPayment</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Âà∑Âç°Êú∫ÔºöÂà∑Âç°ÊîØ‰ªò 1999&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doReceipt</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊâìÂç∞ÂèëÁ•®ÔºåÂíåÁâ©ÂìÅ‰∏ÄËµ∑ÂåÖË£Ö&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doDelivery</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊääÂïÜÂìÅ‰∫§ÁªôÁî®Êà∑ÔºåÁî®ÊºÇ‰∫ÆÁöÑË¢ãÂ≠ê&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3„ÄÅËøõË°åÊµãËØï</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ËÆæËÆ°Ê®°ÂºèÔºö  Â§öÂÆö‰πâÊé•Âè£„ÄÅÊäΩË±°Á±ª</span></span><br><span class=\"line\"><span class=\"comment\"> * 1Ôºâ„ÄÅ‰æùËµñÂÄíÁΩÆÔºõ ‰æùËµñÊäΩË±°</span></span><br><span class=\"line\"><span class=\"comment\"> * 2Ôºâ„ÄÅÂ§öÊÄÅÔºõ    Èöè‰æøÊõøÊç¢ÂÆûÁé∞</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> Ê®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊµãËØï Ôºõ Ê†∏ÂøÉÔºö Áà∂Á±ªÂÆö‰πâÁÆóÊ≥ïÈ™®Êû∂ÔºåÂ≠êÁ±ªÂÆûÁé∞ÁÆóÊ≥ïÁªÜËäÇ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 20:41</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TemplateMethodPatternTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Ë°å‰∏∫ÂûãÊ®°ÂºèÁé©ÁöÑÂ∞±ÊòØ‰∏Ä‰∏™Â§öÊÄÅ</span></span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÂ§ñÁïåË∞ÉÁî®Ê®°ÊùøÁ±ª„ÄêÈÅµÂæ™‰æùËµñÂèçËΩ¨ÂéüÂàô„Äë„Äê‰æùËµñÊäΩË±°ËÄå‰∏çÊòØÁªÜËäÇ„Äë</span></span><br><span class=\"line\">        <span class=\"type\">OrderProcessTemplate</span> <span class=\"variable\">processTemplate</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NetOrder</span>();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÁΩëÁªúËÆ¢ÂçïÔºö&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//Â§ÑÁêÜËÆ¢Âçï</span></span><br><span class=\"line\">        processTemplate.processOrder(); <span class=\"comment\">//ÂÆö‰πâ‰∫ÜÁÆóÊ≥ïÁöÑÊ®°Êùø</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        processTemplate = <span class=\"keyword\">new</span> <span class=\"title class_\">StoreOrder</span>();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Èó®Â∫óËÆ¢ÂçïÔºö&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// Ê†πÊçÆÈúÄË¶ÅÔºåÈÄâÊã©‰∏çÂêåÁöÑÂÆûÁé∞Á±ªÔºå‰ªéËÄåËææÂà∞Êàë‰ª¨ÈúÄË¶ÅÁöÑÊïàÊûúÔºöÁΩëÁªúËÆ¢Âçï Êàñ Èó®Â∫óËÆ¢Âçï</span></span><br><span class=\"line\">        processTemplate.processOrder();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ËøêË°åÁªìÊûúÔºö</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/039d094065690f2e4da8f73e94526786.png\" alt=\"image-20230113220611870\"></p>\n<h2 id=\"‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\"><a href=\"#‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\" class=\"headerlink\" title=\"‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã\"></a>‰∏â„ÄÅÁ≠ñÁï•Ê®°ÂºèÊ°à‰æã</h2><p><strong>ÊèèËø∞Ôºö</strong>ÂÆö‰πâ<code>ÁÆóÊ≥ïÂÆ∂ÊóèÔºåÂàÜÂà´Â∞ÅË£Ö</code>Ëµ∑Êù•ÔºåËÆ©ÂÆÉ‰ª¨‰πãÈó¥ÂèØ‰ª•<code>Áõ∏‰∫íÊõøÊç¢</code>ÔºåÊ≠§Ê®°ÂºèËÆ©ÁÆóÊ≥ïÁöÑÂèòÂåñÁã¨Á´ã‰∫é‰ΩøÁî®ÁÆóÊ≥ïÁöÑÂÆ¢Êà∑„ÄÇ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/003b3cc3b5b54eee7bb255bde2e82ec5.png\"></p>\n<p><strong>Ê°à‰æãÔºöÊéíÂ∫èÁÆóÊ≥ï</strong></p>\n<p><font color=orange>1„ÄÅÂÆö‰πâÁÆóÊ≥ïÊé•Âè£</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÁÆóÊ≥ïÊé•Âè£ÔºöÊéíÂ∫èÁ≠ñÁï•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:36</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">SortStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊéíÂ∫è</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>2„ÄÅÂÆö‰πâÁ≠ñÁï•Á±ªÔºåÂÆûÁé∞ÁÆóÊ≥ïÊé•Âè£</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> Á≠ñÁï•1ÔºöÂÜíÊ≥°ÊéíÂ∫èÁ≠ñÁï•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:38</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">BubbleSortStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">SortStrategy</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÂºÄÂßãÂÜíÊ≥°ÊéíÂ∫è....&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt; arr.length-<span class=\"number\">1</span>;i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">j</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; j &lt; arr.length- <span class=\"number\">1</span> - i  ; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(arr[j] &gt; arr[j+<span class=\"number\">1</span>])&#123;</span><br><span class=\"line\">                    <span class=\"type\">Integer</span> <span class=\"variable\">temp</span> <span class=\"operator\">=</span> arr[j];</span><br><span class=\"line\">                    arr[j] = arr[j+<span class=\"number\">1</span>];</span><br><span class=\"line\">                    arr[j+<span class=\"number\">1</span>] = temp;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊéíÂ∫èÁªìÊûúÔºö&quot;</span>+ Arrays.asList(arr));</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:44</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">QuickSortStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">SortStrategy</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Âø´ÈÄüÊéíÂ∫èÂºÄÂßã&quot;</span>);</span><br><span class=\"line\">        Arrays.sort(arr);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ÊéíÂ∫èÁªìÊûúÔºö&quot;</span>+Arrays.asList(arr));</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>3„ÄÅÂÆö‰πâ‰∏ä‰∏ãÊñáÂØπË±°(ÂÖ•Âè£Á±ª)ÔºöÊåÅÊúâÁ≠ñÁï•ÂØπË±°</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ‰∏ä‰∏ãÊñáÔºöÂÖ•Âè£Á±ª</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-29 20:45</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SortService</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊãøÂà∞‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> SortStrategy strategy;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ‰∏∫‰∫ÜÂº∫Âà∂Ë¶ÅÊ±ÇÁî®Êà∑ÂøÖÈ°ª‰º†ÂÖ•‰∏Ä‰∏™ÊéíÂ∫èÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">SortService</span><span class=\"params\">(SortStrategy strategy)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.strategy  =strategy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÈöèÊó∂Âä®ÊÄÅÊõ¥Êñ∞ÊéíÂ∫èÁÆóÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> strategy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setStrategy</span><span class=\"params\">(SortStrategy strategy)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.strategy = strategy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊâçÊòØÂà´‰∫∫Ë∞ÉÁî®ÁöÑÊéíÂ∫èÊñπÊ≥ï</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> arr</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sort</span><span class=\"params\">(Integer[] arr)</span>&#123;</span><br><span class=\"line\">        strategy.sort(arr);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>4„ÄÅ‰ΩøÁî®Á≠ñÁï•ÂØπË±°ÊâßË°åÁÆóÊ≥ï</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span>  Ê®°ÊùøÊ®°ÂºèÂÆö‰πâÂ§ßÊ°ÜÊû∂„ÄÅÁ≠ñÁï•ÈªòËÆ§ÂÆö‰πâÂ∞èÁªÜËäÇ</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 21:17</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">StrategyPatternTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        Integer[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">Integer</span>[]&#123;<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">6</span>,<span class=\"number\">3</span>,<span class=\"number\">1</span>,<span class=\"number\">7</span>,<span class=\"number\">9</span>,<span class=\"number\">8</span>&#125;;</span><br><span class=\"line\">\t\t<span class=\"comment\">// ‰º†ÂÖ•‰∏çÂêåÁöÑÁ≠ñÁï•ÔºåÂ∞±‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•</span></span><br><span class=\"line\">        <span class=\"type\">SortService</span> <span class=\"variable\">sortService</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SortService</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">BubbleSortStrategy</span>());</span><br><span class=\"line\">        sortService.sort(arr);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;===============&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//Êõ¥Êñ∞Á≠ñÁï•</span></span><br><span class=\"line\">        sortService.setStrategy(<span class=\"keyword\">new</span> <span class=\"title class_\">QuickSortStrategy</span>());</span><br><span class=\"line\">        sortService.sort(arr);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ÊµãËØïÁªìÊûúÔºö</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/879dd90a18e7a5bc986a4bca6627a4e7.png\" alt=\"image-20230113220248469\"></p>\n<h2 id=\"Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\"><a href=\"#Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\" class=\"headerlink\" title=\"Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†\"></a>Âõõ„ÄÅÊîØ‰ªòÊîπÈÄ†</h2><h3 id=\"4-1-ÊÄùË∑ØÂàÜÊûê\"><a href=\"#4-1-ÊÄùË∑ØÂàÜÊûê\" class=\"headerlink\" title=\"4.1 ÊÄùË∑ØÂàÜÊûê\"></a>4.1 ÊÄùË∑ØÂàÜÊûê</h3><p>‰ΩøÁî®<code>Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè</code>ÔºöÂÆö‰πâ&#x3D;&#x3D;ÊîØ‰ªòÁöÑÂÆåÊï¥ÊµÅÁ®ã&#x3D;&#x3D;Ôºõ</p>\n<p>‰ΩøÁî®<code>Á≠ñÁï•Ê®°Âºè</code>ÔºöÂÆö‰πâ&#x3D;&#x3D;ÊîØ‰ªòÁöÑ‰∏çÂêåÂÆûÁé∞&#x3D;&#x3D;Ôºõ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/2e0d3c18725c719c98d22d7b5aa1bc5a.png\"></p>\n<h3 id=\"4-2-ÂÆûÁé∞ÂõæËß£Ôºö\"><a href=\"#4-2-ÂÆûÁé∞ÂõæËß£Ôºö\" class=\"headerlink\" title=\"4.2 ÂÆûÁé∞ÂõæËß£Ôºö\"></a>4.2 ÂÆûÁé∞ÂõæËß£Ôºö</h3><p><img src=\"https://img-blog.csdnimg.cn/img_convert/6628cf4dc83c070f9bbd822c3a45878f.png\"></p>\n<blockquote>\n<p><strong>ÂàÜÊûê</strong>ÔºöPayStrategy‰ΩøÁî®ÁöÑÊòØÁ≠ñÁï•Ê®°Âºè~  PayService‰∏≠ÁöÑprocessNotifyÈáåÈù¢ÂåÖÂê´‰∫Ü ‰∏ÄÁ≥ªÂàóÊäΩË±°ÊñπÊ≥ïÁöÑË∞ÉÁî®,‰∏çÂêåÁöÑÊîØ‰ªòÊñπÂºè‰ºöÊúâ‰∏çÂêåÁöÑÂÆûÁé∞,ËøôÈáå‰ΩøÁî®‰∫ÜÊ®°ÊùøÊñπÊ≥ïÊ®°Âºè~</p>\n</blockquote>\n<h3 id=\"4-3-‰ª£Á†ÅÂÆûÁé∞Ôºö\"><a href=\"#4-3-‰ª£Á†ÅÂÆûÁé∞Ôºö\" class=\"headerlink\" title=\"4.3 ‰ª£Á†ÅÂÆûÁé∞Ôºö\"></a>4.3 ‰ª£Á†ÅÂÆûÁé∞Ôºö</h3><p><font color=orange>1„ÄÅÊîØ‰ªòÁ≠ñÁï•Êé•Âè£Ôºö<code>PayStrategy</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÊîØ‰ªòÁ≠ñÁï•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:39</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">PayStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊîØÊåÅÂì™ÁßçÊîØ‰ªò</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">supports</span><span class=\"params\">(String type)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ‰∏∫Êüê‰∏™ËÆ¢ÂçïÂ±ïÁ§∫Êî∂Èì∂Âè∞È°µÈù¢</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    String <span class=\"title function_\">cashierPage</span><span class=\"params\">(OrderInfo orderInfo)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request  ÂéüÁîüËØ∑Ê±Ç</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> body     ËØ∑Ê±Ç‰ΩìÊï∞ÊçÆ„ÄêËØ∑Ê±Ç‰ΩìÂè™ËÉΩËØªÂèñ‰∏ÄÊ¨°ÔºåÊâÄ‰ª•controllerÊãøÂà∞‰ª•ÂêéÈÉΩÂæÄ‰∏ã‰º†ÈÄíÂç≥ÂèØ„Äë</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">checkSign</span><span class=\"params\">(HttpServletRequest request,String body)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åÁ≠æÈîôËØØÂ§ÑÁêÜ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Object <span class=\"title function_\">signError</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åÁ≠æÈÄöËøáËøîÂõû</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Object <span class=\"title function_\">signOk</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * È™åÁ≠æÊàêÂäüÂêéÂ§ÑÁêÜÈÄöÁü•Êï∞ÊçÆÔºö ÊääÈÄöÁü•ÁöÑÊâÄÊúâÊï∞ÊçÆÂ∞ÅË£ÖÊåáÂÆöÂØπË±°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; <span class=\"title function_\">process</span><span class=\"params\">(HttpServletRequest request,String body)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>2„ÄÅÊé•Âè£ÂÆûÁé∞Ôºö<code>AlipayStrategy</code> „ÄÅ<code>WeixinPayStrategy</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÊîØ‰ªòÂÆù</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:40</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">AlipayStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">PayStrategy</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    AlipayProperties alipayProperties;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    AlipayClient alipayClient;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">cashierPage</span><span class=\"params\">(OrderInfo orderInfo)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÂàõÂª∫‰∏Ä‰∏™ AlipayClient</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅÂàõÂª∫‰∏Ä‰∏™ÊîØ‰ªòËØ∑Ê±Ç</span></span><br><span class=\"line\">        <span class=\"type\">AlipayTradePagePayRequest</span> <span class=\"variable\">alipayRequest</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">AlipayTradePagePayRequest</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅËÆæÁΩÆÂèÇÊï∞</span></span><br><span class=\"line\">        alipayRequest.setReturnUrl(alipayProperties.getReturn_url()); <span class=\"comment\">//ÂêåÊ≠•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊµèËßàÂô®Ë¶ÅË∑≥ËΩ¨Âà∞ÁöÑÈ°µÈù¢Âú∞ÂùÄ</span></span><br><span class=\"line\">        alipayRequest.setNotifyUrl(alipayProperties.getNotify_url()); <span class=\"comment\">//ÈÄöÁü•ÂõûË∞ÉÔºöÊîØ‰ªòÊàêÂäü‰ª•ÂêéÔºåÊîØ‰ªòÊ∂àÊÅØ‰ºöÈÄöÁü•ÁªôËøô‰∏™Âú∞ÂùÄ</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ÂïÜÊà∑ËÆ¢ÂçïÂè∑ÔºàÂØπÂ§ñ‰∫§ÊòìÂè∑Ôºâ</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">outTradeNo</span> <span class=\"operator\">=</span> orderInfo.getId().toString();</span><br><span class=\"line\">        <span class=\"comment\">//‰ªòÊ¨æÈáëÈ¢ù</span></span><br><span class=\"line\">        <span class=\"type\">BigDecimal</span> <span class=\"variable\">totalAmount</span> <span class=\"operator\">=</span> orderInfo.getPrice();</span><br><span class=\"line\">        <span class=\"comment\">//ËÆ¢ÂçïÂêçÁß∞</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">orderName</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Â∞öÂìÅÊ±á-ËÆ¢Âçï-&quot;</span>+outTradeNo;</span><br><span class=\"line\">        <span class=\"comment\">//ÂïÜÂìÅÊèèËø∞</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">tradeBody</span> <span class=\"operator\">=</span> orderInfo.getDesc();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ËØ¶ÁªÜÔºöhttps://opendocs.alipay.com/open/028r8t?scene=22</span></span><br><span class=\"line\">        <span class=\"comment\">//‰∏öÂä°ÂèÇÊï∞</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; bizContent = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;out_trade_no&quot;</span>,outTradeNo);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;total_amount&quot;</span>,totalAmount);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;subject&quot;</span>,orderName);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;body&quot;</span>,tradeBody);</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;product_code&quot;</span>,<span class=\"string\">&quot;FAST_INSTANT_TRADE_PAY&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//Ëá™Âä®ÂÖ≥Âçï</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">date</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SimpleDateFormat</span>(<span class=\"string\">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>).format(orderInfo.getExpireTime());</span><br><span class=\"line\">        bizContent.put(<span class=\"string\">&quot;time_expire&quot;</span>,date);</span><br><span class=\"line\">        alipayRequest.setBizContent(JSON.toJSONString(bizContent));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ÁîüÊàêÊîØ‰ªòÈ°µÈù¢</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">page</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            page = alipayClient.pageExecute(alipayRequest).getBody();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (AlipayApiException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> page;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">checkSign</span><span class=\"params\">(HttpServletRequest request,String body)</span> &#123;</span><br><span class=\"line\">        Map&lt;String, String&gt; params = HttpUtils.getParameterMap(request);</span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;ÊîØ‰ªòÂÆùÈÄöÁü•È™åËØÅÁ≠æÂêç...&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//È™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//Ë∞ÉÁî®SDKÈ™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\">            <span class=\"type\">boolean</span> <span class=\"variable\">signVerified</span> <span class=\"operator\">=</span> AlipaySignature.rsaCheckV1(params,</span><br><span class=\"line\">                    alipayProperties.getAlipay_public_key(), alipayProperties.getCharset(),</span><br><span class=\"line\">                    alipayProperties.getSign_type());</span><br><span class=\"line\">            <span class=\"keyword\">return</span> signVerified;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (AlipayApiException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Object <span class=\"title function_\">signError</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;error&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Map&lt;String,Object&gt; <span class=\"title function_\">process</span><span class=\"params\">(HttpServletRequest request,String body)</span> &#123;</span><br><span class=\"line\">        Map&lt;String, String&gt; map = HttpUtils.getParameterMap(request);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">json</span> <span class=\"operator\">=</span> JSON.toJSONString(map);</span><br><span class=\"line\">        Map&lt;String, Object&gt; data = JSON.parseObject(json, <span class=\"keyword\">new</span> <span class=\"title class_\">TypeReference</span>&lt;Map&lt;String, Object&gt;&gt;() &#123;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Object <span class=\"title function_\">signOk</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÊîØ‰ªòÂÆùË¶ÅÊ±ÇÊàêÂäüËøîÂõû success Â≠óÁ¨¶‰∏≤</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;success&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span>  <span class=\"comment\">//ÂØπÊñ∞Â¢ûÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">supports</span><span class=\"params\">(String type)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;alipay&quot;</span>.equalsIgnoreCase(type);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÂæÆ‰ø°ÊîØ‰ªò</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:40</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WeixinPayStrategy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">PayStrategy</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ÂÖ∑‰ΩìÂÆûÁé∞ÁúÅÁï•ÔºåÂèØ‰ª•Âà∞‰ª£Á†Å‰ªìÂ∫ìÊü•Áúã</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>3„ÄÅÊîØ‰ªòService‰ª£Á†ÅÁºñÂÜô</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:36</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">PayService</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÁîüÊàêÊîØ‰ªòÊî∂Èì∂Âè∞È°µ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> orderId</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    String <span class=\"title function_\">payPage</span><span class=\"params\">(String type, Long orderId)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Â§ÑÁêÜÊîØ‰ªòÈÄöÁü•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    Object <span class=\"title function_\">processNotify</span><span class=\"params\">(HttpServletRequest request,String body)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=orange>4„ÄÅÊîØ‰ªòServiceÂÆûÁé∞</font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> lfy</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Description</span> ÊîØ‰ªò‰∏ä‰∏ãÊñáÂºïÁî®ÊîØ‰ªòÁ≠ñÁï•Ôºõ Ëøô‰∏™‰∏ä‰∏ãÊñá‰πüÊòØÊ®°ÊùøÁ±ªÔºõÂÆö‰πâÂ•ΩÁÆóÊ≥ïÊ≠•È™§</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@create</span> 2022-12-28 22:46</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span> <span class=\"comment\">//Ê®°ÊùøÁ±ª</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">PayServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">PayService</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    List&lt;PayStrategy&gt; payStrategies; <span class=\"comment\">//Ê≥®ÂÖ•ÊîØ‰ªòÁ≠ñÁï•</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÁîüÊàêÊî∂Èì∂Âè∞È°µÈù¢</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> orderId</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">payPage</span><span class=\"params\">(String type, Long orderId)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÊü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢Âçï</span></span><br><span class=\"line\">        <span class=\"type\">OrderInfo</span> <span class=\"variable\">orderInfo</span> <span class=\"operator\">=</span> getOrderInfo(orderId);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅÁîüÊàêÊîØ‰ªòÈ°µ</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (PayStrategy strategy : payStrategies) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(strategy.supports(type))&#123;</span><br><span class=\"line\">                <span class=\"comment\">//Ëé∑ÂèñÊî∂Èì∂Âè∞È°µÈù¢</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> strategy.cashierPage(orderInfo);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅÂ¶ÇÊûú‰ª•‰∏äÈÉΩ‰∏çÊîØÊåÅÔºåÊâìÂç∞ÈîôËØØ</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;‰∏çÊîØÊåÅËøôÁßçÊîØ‰ªòÊñπÂºè&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ÂÆö‰πâÈÄöÁü•Â§ÑÁêÜÊ®°ÊùøÔºõ</span></span><br><span class=\"line\"><span class=\"comment\">     * ÂæÆ‰ø°ÈÄöÁü•</span></span><br><span class=\"line\"><span class=\"comment\">     * ÊîØ‰ªòÂÆùÈÄöÁü•</span></span><br><span class=\"line\"><span class=\"comment\">     * 1Ôºâ„ÄÅÈ™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\"><span class=\"comment\">     * 2Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÊîπËÆ¢Âçï‰∏∫Â∑≤ÊîØ‰ªò</span></span><br><span class=\"line\"><span class=\"comment\">     * 3Ôºâ„ÄÅÈ™åËØÅÈÄöËøáÁªôÊîØ‰ªòÂÆù(success)ÂæÆ‰ø°(200Áä∂ÊÄÅÁ†Åjson)ËøîÂõûÊï∞ÊçÆ</span></span><br><span class=\"line\"><span class=\"comment\">     * 4Ôºâ„ÄÅxxx</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> body</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Object <span class=\"title function_\">processNotify</span><span class=\"params\">(HttpServletRequest request,String body)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Object</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;‰∏çÊîØÊåÅÊ≠§ÊñπÂºè&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//1„ÄÅÂà§Êñ≠ÊòØÈÇ£ÁßçÈÄöÁü•</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">type</span> <span class=\"operator\">=</span> getNotifyType(request);</span><br><span class=\"line\">        Map&lt;String, Object&gt; data = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2„ÄÅÈ™åËØÅÁ≠æÂêç</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (PayStrategy strategy : payStrategies) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(strategy.supports(type))&#123;</span><br><span class=\"line\">                <span class=\"comment\">//Á≠æÂêçÊ†°È™å</span></span><br><span class=\"line\">                <span class=\"type\">boolean</span> <span class=\"variable\">checkSign</span> <span class=\"operator\">=</span> strategy.checkSign(request,body);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(!checkSign)&#123;</span><br><span class=\"line\">                    log.error(<span class=\"string\">&quot;Á≠æÂêçÈ™åËØÅÂ§±Ë¥•ÔºåÁñë‰ººÊîªÂáªËØ∑Ê±Ç&quot;</span>);</span><br><span class=\"line\">                    <span class=\"comment\">//È™åÁ≠æÂ§±Ë¥•ËøîÂõû</span></span><br><span class=\"line\">                   <span class=\"keyword\">return</span> strategy.signError();</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    log.info(<span class=\"string\">&quot;Á≠æÂêçÈ™åËØÅÊàêÂäüÔºåÊèêÂèñÈÄöÁü•Êï∞ÊçÆ&quot;</span>);</span><br><span class=\"line\">                    <span class=\"comment\">//È™åÁ≠æÊàêÂäüÂ§ÑÁêÜÊï∞ÊçÆ</span></span><br><span class=\"line\">                    data = strategy.process(request,body);</span><br><span class=\"line\">                    <span class=\"comment\">//È™åÁ≠æÊàêÂäüËøîÂõû</span></span><br><span class=\"line\">                    result = strategy.signOk();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3„ÄÅÈÄöÁî®ÁöÑÂêéÁª≠Â§ÑÁêÜÁÆóÊ≥ïÔºõÂ§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ</span></span><br><span class=\"line\">        processOrder(data);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Â§ÑÁêÜËÆ¢ÂçïÊï∞ÊçÆ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> data</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processOrder</span><span class=\"params\">(Map&lt;String, Object&gt; data)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//TODO ÊääÊîØ‰ªòÊàêÂäü‰ø°ÊÅØÁ≠â‰øùÂ≠òÊï∞ÊçÆÂ∫ìÔºåÂπ∂‰øÆÊîπËÆ¢ÂçïÁä∂ÊÄÅÔºåÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÁ≠â...</span></span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;ËÆ¢ÂçïÊîØ‰ªòÊàêÂäüÔºåÁä∂ÊÄÅ‰øÆÊîπÂÆåÊàêÔºåÂ∑≤ÈÄöÁü•Â∫ìÂ≠òÁ≥ªÁªüÔºåËØ¶ÁªÜÊï∞ÊçÆÔºö&#123;&#125;&quot;</span>,data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Âà§Êñ≠ÈÄöÁü•Á±ªÂûã</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String <span class=\"title function_\">getNotifyType</span><span class=\"params\">(HttpServletRequest request)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">header</span> <span class=\"operator\">=</span> request.getHeader(<span class=\"string\">&quot;wechatpay-serial&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(StringUtils.hasText(header))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;weixin&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">app_id</span> <span class=\"operator\">=</span> request.getParameter(<span class=\"string\">&quot;app_id&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(StringUtils.hasText(app_id))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;alipay&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;unknown&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> OrderInfo <span class=\"title function_\">getOrderInfo</span><span class=\"params\">(Long orderId)</span>&#123;</span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;Êü•ËØ¢Êï∞ÊçÆÂ∫ìËÆ¢ÂçïÔºö&#123;&#125;&quot;</span>,orderId);</span><br><span class=\"line\">        <span class=\"type\">OrderInfo</span> <span class=\"variable\">orderInfo</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OrderInfo</span>();</span><br><span class=\"line\">        orderInfo.setId(orderId);</span><br><span class=\"line\">        orderInfo.setTitle(<span class=\"string\">&quot;Â∞öÂìÅÊ±á-ÂïÜÂüé-ËÆ¢Âçï&quot;</span>);</span><br><span class=\"line\">        orderInfo.setComment(<span class=\"string\">&quot;Âø´ÁÇπÂèëË¥ß&quot;</span>);</span><br><span class=\"line\">        orderInfo.setDesc(<span class=\"string\">&quot;‰π∞‰∫Ü‰∏ÄÂ†ÜÂïÜÂìÅ&quot;</span>);</span><br><span class=\"line\">        orderInfo.setPrice(<span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"string\">&quot;9098.00&quot;</span>));</span><br><span class=\"line\">        orderInfo.setExpireTime(<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(System.currentTimeMillis()+<span class=\"number\">30</span>*<span class=\"number\">60</span>*<span class=\"number\">1000</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> orderInfo;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ÂàÜÊûêÔºö</strong></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/543a45872d4d17617504e7dea6c7119f.png\" alt=\"image-20230113223331649\"></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/3267819573fb85bf35740bd55b7048b1.png\" alt=\"image-20230114125758333\"></p>\n<h3 id=\"4-4-ÊïàÊûúÊºîÁ§∫\"><a href=\"#4-4-ÊïàÊûúÊºîÁ§∫\" class=\"headerlink\" title=\"4.4 ÊïàÊûúÊºîÁ§∫\"></a>4.4 ÊïàÊûúÊºîÁ§∫</h3><p><font color=orange>1„ÄÅÁî®Êà∑ËøõÂÖ•ÊîØ‰ªòÈ°µÈù¢ÂêéÔºö</font></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/b1235253e3ce038125552750ac0c3b65.png\" alt=\"image-20230114112440663\"></p>\n<p><font color=orange>2„ÄÅÂΩìÈÄâÊã©ÂæÆ‰ø°ÊîØ‰ªòÊó∂ÔºåËøõÂÖ•ÂæÆ‰ø°‰∫åÁª¥Á†ÅÈ°µÈù¢</font></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/2c644c164d36791ac1dc70cda7202dc1.png\" alt=\"image-20230114112525508\"></p>\n<p><font color=orange>3„ÄÅÂΩìÈÄâÊã©ÊîØ‰ªòÂÆùÊîØ‰ªòÔºåËøõÂÖ•ÊîØ‰ªòÂÆùÈ°µÈù¢</font></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/9f2041ef2259893210790a38c3d2b14f.png\" alt=\"image-20230114112626541\"></p>\n<p><font color=orange>4„ÄÅÊîØ‰ªòÊàêÂäü‰πãÂêé‰ºöË∑≥ËΩ¨Âà∞ÂØπÂ∫îÁöÑÊàêÂäüÈ°µÈù¢ÔºàÂæÆ‰ø°ÊàêÂäüÈ°µÈù¢„ÄÅÊîØ‰ªòÂÆùÊàêÂäüÈ°µÈù¢‚Ä¶Ôºâ</font></p>\n<h3 id=\"4-5-Â¶Ç‰ΩïÊâ©Â±ï\"><a href=\"#4-5-Â¶Ç‰ΩïÊâ©Â±ï\" class=\"headerlink\" title=\"4.5 Â¶Ç‰ΩïÊâ©Â±ï\"></a>4.5 Â¶Ç‰ΩïÊâ©Â±ï</h3><p>ÊúÄÂêéÊàë‰ª¨ÈúÄË¶ÅÊÄùËÄÉ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÁªèËøáÊàë‰ª¨‰ΩøÁî®Á≠ñÁï•+Ê®°ÊùøÊîπÈÄ†ÁöÑÊîØ‰ªò Âíå‰º†ÁªüÁöÑÂÜôÊ≥ïÊúâÂï•Â•ΩÂ§ÑÂë¢Ôºü</p>\n<p>1„ÄÅ&#x3D;&#x3D;Êòì‰∫éÊâ©Â±ï&#x3D;&#x3D;ÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶ÅÂ¢ûÂä†Êñ∞ÁöÑÊîØ‰ªòÊñπÂºèÔºöÈì∂ËÅîÊîØ‰ªò„ÄÅÁôΩÊù°ÊîØ‰ªò‚Ä¶Êàë‰ª¨Âè™ÈúÄË¶ÅÂÆö‰πâÂØπÂ∫îÁöÑÊîØ‰ªòÁ≠ñÁï•Á±ªÂç≥ÂèØ~ ÂΩì‰∏çÈúÄË¶ÅÊó∂ÔºåÁõ¥Êé•Âà†Èô§ÂØπÂ∫îÁöÑÂÆûÁé∞Á±ª„ÄÇÁÑ∂ÂêéÂú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÔºå‰ºöËá™ÈÄÇÂ∫î‰ΩøÁî®ÂØπÂ∫îÁöÑÁ≠ñÁï•~ Á¨¶Âêà<code>ÂØπ‰øÆÊîπÂÖ≥Èó≠ÔºåÂØπÊâ©Â±ïÂºÄÊîæ</code>ÁöÑÁâπÁÇπÔºÅ</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/3bf9cdcfd38eae9df74d77e1b4610252.png\" alt=\"image-20230114124615619\"></p>\n<p>2„ÄÅService‰∏≠ÁöÑÊ®°ÊùøÊñπÊ≥ï‰πüËÆ©Êàë‰ª¨ÁöÑ&#x3D;&#x3D;‰ª£Á†ÅÂÜó‰ΩôÂ∫¶Êõ¥‰Ωé&#x3D;&#x3D;ÔºåÈÄªËæëÊõ¥Âä†Ê∏ÖÊô∞~</p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cluh5pivd0008gs2va25q3gth","tag_id":"cluh5pivb0004gs2v2fy6ctgj","_id":"cluh5pivf000cgs2v6nlnhmr1"},{"post_id":"cluh5piv70001gs2vdm5f7eox","tag_id":"cluh5pivb0004gs2v2fy6ctgj","_id":"cluh5pivg000fgs2v9xjzejyb"},{"post_id":"cluh5pive000ags2v0bgqbii0","tag_id":"cluh5pivb0004gs2v2fy6ctgj","_id":"cluh5pivh000igs2v7qsndlk5"},{"post_id":"cluh5piva0003gs2vgh0b22ne","tag_id":"cluh5pive000bgs2v11qk4g0o","_id":"cluh5pivh000jgs2v5oyqafx7"},{"post_id":"cluh5pivc0006gs2v187ugrbq","tag_id":"cluh5pivg000hgs2vcynqdjjz","_id":"cluh5pivh000lgs2v8xj3cc5x"},{"post_id":"cluh5pivf000egs2v0dp8ev4x","tag_id":"cluh5pivh000kgs2vhvab1crl","_id":"cluh5pivh000mgs2v9etihe91"}],"Tag":[{"name":"MySQL","_id":"cluh5pivb0004gs2v2fy6ctgj"},{"name":"Hexo","_id":"cluh5pive000bgs2v11qk4g0o"},{"name":"ËÆæËÆ°Ê®°Âºè","_id":"cluh5pivg000hgs2vcynqdjjz"},{"name":"ÈòøÈáå‰∫ë","_id":"cluh5pivh000kgs2vhvab1crl"}]}}